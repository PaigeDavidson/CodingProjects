import{c as Kg,a as Mh}from"./_commonjsHelpers-87174ba5.js";const Qg=["Input","Output","NotGate","OrGate","AndGate","NorGate","NandGate","XorGate","XnorGate","SevenSegDisplay","SixteenSegDisplay","HexDisplay","Multiplexer","BitSelector","Splitter","Power","Ground","ConstantVal","ControlledInverter","TriState","Adder","verilogMultiplier","verilogDivider","verilogPower","verilogShiftLeft","TwoComplement","verilogShiftRight","Rom","RAM","verilogRAM","EEPROM","TflipFlop","JKflipFlop","SRflipFlop","DflipFlop","TTY","Keyboard","Clock","DigitalLed","Stepper","VariableLed","RGBLed","SquareRGBLed","RGBLedMatrix","Button","Demultiplexer","Buffer","SubCircuit","Flag","MSB","LSB","PriorityEncoder","Tunnel","ALU","Decoder","Random","Counter","Dlatch","TB_Input","TB_Output","ForceGate"],Zg=["Text","Rectangle","Arrow","ImageAnnotation"],Jg=["Random","Dlatch","JKflipFlop","TflipFlop","SRflipFlop","DflipFlop","Buffer","Stepper","Ground","Power","ConstantVal","Input","Clock","Button","Counter"],tm=["Random","Dlatch","JKflipFlop","TflipFlop","SRflipFlop","DflipFlop","Buffer","Stepper","Ground","Power","ConstantVal","Clock","Button","Counter"],em={Input:[{name:"Input",label:"Input"},{name:"Button",label:"Button"},{name:"Power",label:"Power"},{name:"Ground",label:"Ground"},{name:"ConstantVal",label:"Constant Value"},{name:"Stepper",label:"Stepper"},{name:"Random",label:"Random"},{name:"Counter",label:"Counter"}],Output:[{name:"Output",label:"Output"},{name:"RGBLed",label:"RGB Led"},{name:"DigitalLed",label:"Digital Led"},{name:"VariableLed",label:"Variable Led"},{name:"HexDisplay",label:"Hex Display"},{name:"SevenSegDisplay",label:"Seven Segment Display"},{name:"SixteenSegDisplay",label:"Sixteen Segment Display"},{name:"SquareRGBLed",label:"Square RGB Led"},{name:"RGBLedMatrix",label:"RGB Led Matrix"}],Gates:[{name:"AndGate",label:"And Gate"},{name:"OrGate",label:"Or Gate"},{name:"NotGate",label:"Not Gate"},{name:"XorGate",label:"Xor Gate"},{name:"NandGate",label:"Nand Gate"},{name:"NorGate",label:"Nor Gate"},{name:"XnorGate",label:"Xnor Gate"}],"Decoders & Plexers":[{name:"Multiplexer",label:"Multiplexer"},{name:"Demultiplexer",label:"Demultiplexer"},{name:"BitSelector",label:"Bit Selector"},{name:"MSB",label:"MSB(Most Significant Bit)"},{name:"LSB",label:"LSB(Least Significant Bit)"},{name:"PriorityEncoder",label:"Priority Encoder"},{name:"Decoder",label:"Decoder"}],"Sequential Elements":[{name:"DflipFlop",label:"D flip Flop"},{name:"Dlatch",label:"D latch"},{name:"TflipFlop",label:"T flip Flop"},{name:"JKflipFlop",label:"JK flip Flop"},{name:"SRflipFlop",label:"SR flip Flop"},{name:"TTY",label:"TTY"},{name:"Keyboard",label:"Keyboard"},{name:"Clock",label:"Clock"},{name:"Rom",label:"ROM"},{name:"RAM",label:"RAM"},{name:"verilogRAM",label:"Verilog RAM"},{name:"EEPROM",label:"EEPROM"}],Annotation:[{name:"Rectangle",label:"Rectangle"},{name:"Arrow",label:"Arrow"},{name:"ImageAnnotation",label:"Image Annotation"},{name:"Text",label:"Text"}],Misc:[{name:"TwoComplement",label:"Two Complement"},{name:"Flag",label:"Flag"},{name:"Splitter",label:"Splitter"},{name:"Adder",label:"Adder"},{name:"ALU",label:"ALU(Arithmetic and Logical Unit)"},{name:"TriState",label:"TriState Flip Flop"},{name:"Tunnel",label:"Tunnel"},{name:"verilogMultiplier",label:"Verilog Multiplier"},{name:"verilogDivider",label:"Verilog Divider"},{name:"verilogPower",label:"Verilog Power"},{name:"verilogShiftLeft",label:"Verilog Shift Left"},{name:"verilogShiftRight",label:"Verilog Shift Right"},{name:"Buffer",label:"Buffer"},{name:"ControlledInverter",label:"Controlled Inverter"},{name:"TB_Input",label:"TB Input"},{name:"TB_Output",label:"TB Output"},{name:"ForceGate",label:"Force Gate"}]};class im{constructor(t){this.size=t,this.queue=new Array(t),this.frontIndex=0,this.time=0}add(t,n){if(t.queueProperties.inQueue){t.queueProperties.time=this.time+(n||t.propagationDelay);let l=t.queueProperties.index;for(;l>0&&t.queueProperties.time>this.queue[l-1].queueProperties.time;)this.swap(l,l-1),l--;for(l=t.queueProperties.index;l<this.frontIndex-1&&t.queueProperties.time<this.queue[l+1].queueProperties.time;)this.swap(l,l+1),l++;return}if(this.frontIndex==this.size)throw"EventQueue size exceeded";this.queue[this.frontIndex]=t,t.queueProperties.time=this.time+(n||t.propagationDelay),t.queueProperties.index=this.frontIndex,this.frontIndex++,t.queueProperties.inQueue=!0;let r=t.queueProperties.index;for(;r>0&&t.queueProperties.time>this.queue[r-1].queueProperties.time;)this.swap(r,r-1),r--}addImmediate(t){this.queue[this.frontIndex]=t,t.queueProperties.time=this.time,t.queueProperties.index=this.frontIndex,t.queueProperties.inQueue=!0,this.frontIndex++}swap(t,n){const r=this.queue[t];r.queueProperties.index=n;const l=this.queue[n];l.queueProperties.index=t,this.queue[t]=l,this.queue[n]=r}pop(){if(this.isEmpty())throw"Queue Empty";this.frontIndex--;const t=this.queue[this.frontIndex];return this.time=t.queueProperties.time,t.queueProperties.inQueue=!1,t}reset(){for(let t=0;t<this.frontIndex;t++)this.queue[t].queueProperties.inQueue=!1;this.time=0,this.frontIndex=0}isEmpty(){return this.frontIndex==0}}const f={canvas:document.getElementById("simulationArea"),selected:!1,hover:!1,clockState:0,clockEnabled:!0,lastSelected:void 0,stack:[],prevScale:0,oldx:0,oldy:0,objectList:[],maxHeight:0,maxWidth:0,minHeight:0,minWidth:0,multipleObjectSelections:[],copyList:[],shiftDown:!1,controlDown:!1,timePeriod:500,mouseX:0,mouseY:0,mouseDownX:0,mouseDownY:0,simulationQueue:void 0,multiAddElement:!1,touch:!1,clickCount:0,lock:"unlocked",timer(){ckickTimer=setTimeout(()=>{f.clickCount=0},600)},setup(){this.canvas=document.getElementById("simulationArea"),this.canvas.width=width,this.canvas.height=height,this.simulationQueue=new im(1e4),this.context=this.canvas.getContext("2d"),f.changeClockTime(f.timePeriod),this.mouseDown=!1},changeClockTime(i){i<50||(clearInterval(f.ClockInterval),i=i||prompt("Enter Time Period:"),f.timePeriod=i,f.ClockInterval=setInterval(Q0,i))},clear(){this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{changeClockTime:nm}=f,oi={canvas:document.getElementById("backgroundArea"),setup(){this.canvas=document.getElementById("backgroundArea"),this.canvas.width=width,this.canvas.height=height,this.context=this.canvas.getContext("2d"),Ji(!0,!1)},clear(){this.context&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},fn={"Default Theme":{"--text-navbar--alt":"#000","--br-secondary":"#7d7d7d","--br-circuit-cur":"#fff","--br-circuit":"#fff","--cus-radio_label":"#656565","--primary":"#454545","--text-lite":"#fff","--text-dark":"#000","--text-panel":"white","--bg-navbar":"#454545","--qp-br-tl":"#333333","--qp-br-rd":"#535353","--qp-box-shadow-1":"#3b3b3b","--qp-box-shadow-2":"#4f4f4f","--bg-circuit":"#ddd","--br-circuit":"#454545","--br-primary":"#fff","--bg-primary-moz":"#454545e6","--bg-primary-chr":"#454545b3","--bg-tabs":"#8b8b8b","--bg-icons":"#7d7d7d","--bg-text":"#cacaca","--bg-secondary":"#bbbbbb","--canvas-stroke":"#eee","--canvas-fill":"white","--context-text":"white","--bg-toggle-btn-primary":"#42b983","--primary-btn-hov":"#3ca877","--btn-danger":"#dc5656","--btn-danger-darken":"#b03662","--disable":"#6c8b93","--cus-btn-hov--bg":"#ddd","--cus-btn-hov-text":"#000","--node":"green","--stroke":"black","--fill":"white","--hover-and-sel":"rgba(255, 255, 32, 0.8)","--wire-draw":"black","--wire-cnt":"green","--wire-pow":"lightgreen","--wire-sel":"blue","--wire-lose":"red","--mini-map":"green","--mini-map-stroke":"darkgreen","--input-text":"green","--secondary-stroke":"red","--text":"black","--wire-norm":"black","--node-norm":"green","--splitter":"black","--output-rect":"blue","--disable":"#6c8b93","--touch-menu":"#7d7d7d"},"Night Sky":{"--text-navbar--alt":"#fff","--br-secondary":"#665627","--cus-radio_label":"#0F111A","--primary":"#0F111A","--text-lite":"#FFF","--text-dark":"white","--text-panel":"white","--bg-navbar":"#0F111A","--br-circuit":"#0F111A","--br-primary":"#665627","--br-circuit-cur":"#cccccc","--bg-circuit":"#bdc2ca","--bg-primary-moz":"#0f111ae6","--bg-primary-chr":"#0f111ab3","--bg-tabs":"#727d8d","--bg-icons":"#4d647a","--bg-text":"#727d8d","--bg-secondary":"#536c84","--canvas-fill":"#1B2C33","--canvas-stroke":"#6A7980","--context-text":"white","--bg-toggle-btn-primary":"#48a69d","--primary-btn-hov":"#3f9189","--btn-danger":"#c33c6c","--btn-danger-darken":"#b03662","--qp-br-tl":"#282d46","--qp-br-rd":"#1d2132","--qp-box-shadow-1":"#1d2132","--qp-box-shadow-2":"#0a0b11","--cus-btn-hov--bg":"#48a69d","--cus-btn-hov-text":"#fff","--node":"#285963","--stroke":"#35aea9","--fill":"#DEFFFE","--hover-and-sel":"#E3B924","--wire-draw":"#77878C","--wire-cnt":"#3B7F58","--wire-pow":"#75FFB0","--wire-sel":"#208CC9","--wire-lose":"#BF0426","--mini-map":"#3B7F58","--mini-map-stroke":"#607F6E","--input-text":"#3B7F58","--output-rect":"#0487D9","--secondary-stroke":"#BF0426","--text":"#E9FBF8","--wire-norm":"#277F7C","--node-norm":"#FFC231","--splitter":"#0284A8","--disable":"#4F74B0","--touch-menu":"#665627"},"Lite-born Spring":{"--text-navbar--alt":"#000","--br-secondary":"#6B6B6B","--cus-radio_label":"#6B6B6B","--primary":"#EAEAEB","--text-dark":"#6B6B6B","--text-lite":"white","--text-panel":"#6B6B6B","--bg-navbar":"#6b6b6b","--qp-br-tl":"#969696","--qp-br-rd":"#545454","--qp-box-shadow-1":"#747474","--qp-box-shadow-2":"#5f5f5f","--bg-tabs":"#A4A4A4","--br-circuit-cur":"#42B983","--bg-circuit":"#D7D7D7","--br-circuit":"#42B983","--br-primary":"#42B983","--context-text-hov":"#6B6B6B","--context-text":"white","--bg-primary-moz":"rgba(107, 107, 107, 0.904)","--bg-primary-chr":"rgba(107, 107, 107, 0.704)","--bg-icons":"#DDDDDD","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#42B983","--primary-btn-hov":"#66C89C","--btn-danger":"#BF2424","--btn-danger-darken":"#BF414C","--cus-btn-hov--bg":"#42B983","--cus-btn-hov-text":"#fff","--canvas-fill":"white","--canvas-stroke":"#BABABA","--node":"#42B983","--stroke":"#6B6B6B","--fill":"#EAEAEB","--hover-and-sel":"#FFE99B","--wire-draw":"#6B6B6B","--wire-cnt":"#42B983","--wire-pow":"#52E539","--wire-sel":"#0FB2F2","--wire-lose":"#F10530","--mini-map":"#42B983","--mini-map-stroke":"#0FB2F2","--input-text":"#42B983","--output-rect":"#0487D9","--secondary-stroke":"#F10530","--text":"#454545","--wire-norm":"#006839","--node-norm":"#FFC231","--splitter":"#00B462","--disable":"#656565","--touch-menu":"#BBBFCA"},"G&W":{"--text-navbar--alt":"#000","--br-secondary":"#6B6B6B","--cus-radio_label":"#6B6B6B","--primary":"#EAEAEB","--text-dark":"#6B6B6B","--text-lite":"white","--text-panel":"#656565","--bg-navbar":"#6b6b6b","--qp-br-tl":"#969696","--qp-br-rd":"#545454","--qp-box-shadow-1":"#747474","--qp-box-shadow-2":"#5f5f5f","--bg-tabs":"#A4A4A4","--br-circuit-cur":"#6b6b6b","--bg-circuit":"#D7D7D7","--br-circuit":"#6b6b6b","--br-primary":"#6B6B6B","--context-text-hov":"#6B6B6B","--context-text":"white","--bg-primary-moz":"rgba(107, 107, 107, 0.904)","--bg-primary-chr":"rgba(107, 107, 107, 0.704)","--bg-icons":"#DDDDDD","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#3ac8a4","--primary-btn-hov":"#71D7BD","--btn-danger":"#fc8771","--btn-danger-darken":"#FDB2A4","--cus-btn-hov--bg":"#3ac8a4","--cus-btn-hov-text":"#fff","--canvas-fill":"white","--canvas-stroke":"#BABABA","--node":"#42B983","--stroke":"#6B6B6B","--fill":"#EAEAEB","--hover-and-sel":"#FFE99B","--wire-draw":"#6B6B6B","--wire-cnt":"#42B983","--wire-pow":"#52E539","--wire-sel":"#0FB2F2","--wire-lose":"#F10530","--mini-map":"#42B983","--mini-map-stroke":"#0FB2F2","--input-text":"#42B983","--output-rect":"#0487D9","--secondary-stroke":"#F10530","--text":"#454545","--wire-norm":"#006839","--node-norm":"#FFC231","--splitter":"#00B462","--disable":"#656565","--touch-menu":"#BBBFCA"},"High Contrast":{"--text-navbar--alt":"#000","--br-secondary":"#F38518","--cus-radio_label":"black","--primary":"black","--text-dark":"black","--text-lite":"white","--text-panel":"white","--bg-navbar":"black","--qp-br-tl":"#F38518","--qp-br-rd":"#F38518","--qp-box-shadow-1":"#0D0D0D","--qp-box-shadow-2":"#0D0D0D","--bg-tabs":"#616161","--text-circuit":"black","--br-circuit-cur":"#F38518","--bg-circuit":"#B6B6B6","--br-circuit":"#F38518","--br-primary":"#F38518","--context-text-hov":"black","--context-text":"white","--bg-primary-moz":"rgba(0, 0, 0, 0.904)","--bg-primary-chr":"rgba(0, 0, 0, 0.704)","--bg-icons":"#262626","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#009599","--primary-btn-hov":"#00b1b6","--btn-danger":"#E45605","--btn-danger-darken":"#fa792f","--cus-btn-hov--bg":"#009599","--cus-btn-hov-text":"#fff","--canvas-fill":"black","--canvas-stroke":"#9ad5e9","--node":"#26a841","--stroke":"#626262","--fill":"#d4d4d4","--hover-and-sel":"#ffdf6c","--wire-draw":"#909090","--wire-cnt":"#3bb15b","--wire-pow":"#3ac53c","--wire-sel":"#049ffb","--wire-lose":"#f42f0b","--mini-map":"#1c2427","--mini-map-stroke":"#000","--input-text":"#42B983","--output-rect":"#005682","--secondary-stroke":"#f7081e","--text":"#fff","--wire-norm":"#00b965","--node-norm":"#F38518","--splitter":"#21de5a","--disable":"#262626","--touch-menu":"#F38518"},"Color Blind":{"--text-navbar--alt":"#000","--br-secondary":"#e2dad1","--cus-radio_label":"#2e2b21","--primary":"#2e2b21","--text-dark":"black","--text-lite":"white","--text-panel":"white","--bg-navbar":"#2e2b21","--qp-br-tl":"#716950","--qp-br-rd":"#6c654d","--qp-box-shadow-1":"#4f4a38","--qp-box-shadow-2":"#302d23","--bg-tabs":"#9a9a9a","--text-circuit":"black","--br-circuit-cur":"#e2dad1","--bg-circuit":"#d6d6d6","--br-circuit":"#e2dad1","--br-primary":"#e2dad1","--context-text-hov":"black","--context-text":"white","--bg-primary-moz":"rgba(46, 43, 33, 1)","--bg-primary-chr":"rgba(46, 43, 33, 1)","--bg-icons":"#9c7762","--bg-text":"#ddd","--bg-secondary":"#6B6B6B","--bg-toggle-btn-primary":"#bfaac1","--primary-btn-hov":"#ccbbcd","--btn-danger":"#b66e43","--btn-danger-darken":"#ba7144","--cus-btn-hov--bg":"#b66e43","--cus-btn-hov-text":"#fff","--canvas-fill":"#fff","--canvas-stroke":"#8d88ad","--node":"#c59434","--stroke":"#342a1f","--fill":"#e0dcd3","--hover-and-sel":"#f4d4d4","--wire-draw":"#4c4c4c","--wire-cnt":"#908eb9","--wire-pow":"#b3b1cf","--wire-sel":"#a7b8f8","--wire-lose":"#f42f0b","--mini-map":"#4b4636","--mini-map-stroke":"#000","--input-text":"#756d54","--output-rect":"#092c48","--secondary-stroke":"#cdb1ad","--text":"#000","--wire-norm":"#7f7cae","--node-norm":"#c59434","--splitter":"#836222","--disable":"#956c6a","--touch-menu":"#A0937D","--table-head-dark":"#2e2b21"},"Custom Theme":JSON.parse(localStorage.getItem("Custom Theme"))||{"--text-navbar--alt":"#000","--br-secondary":"#7d7d7d","--br-circuit-cur":"#ffffff","--br-circuit":"#ffffff","--cus-radio_label":"#656565","--primary":"#454545","--text-lite":"#ffffff","--text-dark":"#000","--text-panel":"#ffffff","--bg-navbar":"#454545","--qp-br-tl":"#333333","--qp-br-rd":"#535353","--qp-box-shadow-1":"#3b3b3b","--qp-box-shadow-2":"#4f4f4f","--bg-circuit":"#ddd","--br-circuit":"#454545","--br-primary":"#ffffff","--bg-primary-moz":"#454545e6","--bg-primary-chr":"#454545b3","--bg-tabs":"#8b8b8b","--bg-icons":"#7d7d7d","--bg-text":"#cacaca","--bg-secondary":"#bbbbbb","--canvas-stroke":"#eee","--canvas-fill":"#ffffff","--context-text":"#ffffff","--bg-toggle-btn-primary":"#42b983","--primary-btn-hov":"#3ca877","--btn-danger":"#dc5656","--btn-danger-darken":"#b03662","--disable":"#6c8b93","--cus-btn-hov--bg":"#ddd","--cus-btn-hov-text":"#000","--node":"#008000","--stroke":"#000","--fill":"#ffffff","--hover-and-sel":"#ffff20cc","--wire-draw":"#000","--wire-cnt":"#008000","--wire-pow":"#90ee90","--wire-sel":"#0000ff","--wire-lose":"#ff0000","--mini-map":"#008000","--mini-map-stroke":"#006400","--input-text":"#008000","--secondary-stroke":"#ff0000","--text":"#000","--wire-norm":"#000","--node-norm":"#008000","--splitter":"#000","--output-rect":"#0000ff","--touch-menu":"#A0937D"}},sm=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="202.9" height="106" viewBox="0 0 202.9 106">
<defs>
  <clipPath id="clip">
    <use xlink:href="#fill"/>
  </clipPath>
  <clipPath id="clip-2">
    <use xlink:href="#fill-2"/>
  </clipPath>
  <clipPath id="clip-3">
    <use xlink:href="#fill-3"/>
  </clipPath>
</defs>
<g id="Default" transform="translate(-542 -149.868)">
  <rect class='svgGridBG' id="Rectangle_1592" data-name="Rectangle 1592" width="202" height="106" transform="translate(542.45 149.868)" fill="#f2f2f2"/>
  <line class='svgGrid' id="Line_78" data-name="Line 78" y1="105.737" transform="translate(554.145 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_79" data-name="Line 79" y1="105.737" transform="translate(565.576 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_80" data-name="Line 80" y1="105.737" transform="translate(577.007 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_81" data-name="Line 81" y1="105.737" transform="translate(588.438 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_82" data-name="Line 82" y1="105.737" transform="translate(599.87 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_83" data-name="Line 83" y1="105.737" transform="translate(611.3 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_84" data-name="Line 84" y1="105.737" transform="translate(622.732 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_85" data-name="Line 85" y1="105.737" transform="translate(635.591 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_86" data-name="Line 86" y1="105.737" transform="translate(647.022 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_87" data-name="Line 87" y1="105.737" transform="translate(658.453 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_88" data-name="Line 88" y1="105.737" transform="translate(669.884 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_89" data-name="Line 89" y1="105.737" transform="translate(681.315 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_90" data-name="Line 90" y1="105.737" transform="translate(692.746 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_91" data-name="Line 91" y1="105.737" transform="translate(704.177 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_92" data-name="Line 92" y1="105.737" transform="translate(715.608 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_93" data-name="Line 93" y1="105.737" transform="translate(727.039 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_94" data-name="Line 94" y1="105.737" transform="translate(738.47 150)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_95" data-name="Line 95" x2="202.9" transform="translate(542 172.148)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_96" data-name="Line 96" x2="202.9" transform="translate(542 183.579)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_97" data-name="Line 97" x2="202.9" transform="translate(542 195.01)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_98" data-name="Line 98" x2="202.9" transform="translate(542 206.441)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_99" data-name="Line 99" x2="202.9" transform="translate(542 217.872)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_100" data-name="Line 100" x2="202.9" transform="translate(542 229.303)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_101" data-name="Line 101" x2="202.9" transform="translate(542 240.734)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <line class='svgGrid' id="Line_102" data-name="Line 102" x2="202.9" transform="translate(542 252.165)" fill="none" stroke="#707070" stroke-width="0.1" opacity="1"/>
  <rect class='svgPanel' id="Rectangle_1589" data-name="Rectangle 1589" width="47" height="73" rx="4" transform="translate(552.45 172.868)" fill="#40393e"/>
  <path class='svgNav' id="Rectangle_1599" data-name="Rectangle 1599" d="M0,0H202a0,0,0,0,1,0,0V6a3,3,0,0,1-3,3H3A3,3,0,0,1,0,6V0A0,0,0,0,1,0,0Z" transform="translate(542.45 153.868)" fill="#bbb"/>
  <rect class='svgPanel' id="Rectangle_1593" data-name="Rectangle 1593" width="47" height="64" rx="4" transform="translate(689.45 172.868)" fill="#40393e"/>
  <rect class='svgHeader' id="Rectangle_1598" data-name="Rectangle 1598" width="202" height="7" transform="translate(542.45 149.868)" fill="#40393e"/>
  <g  id="Rectangle_1594" data-name="Rectangle 1594" transform="translate(559.45 183.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g  id="Rectangle_1601" data-name="Rectangle 1601" transform="translate(694.45 182.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="36" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="35" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1602" data-name="Rectangle 1602" transform="translate(694.45 199.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="36" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="35" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1604" data-name="Rectangle 1604" transform="translate(694.45 216.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="36" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="35" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1600" data-name="Rectangle 1600" transform="translate(694.89 178.578)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect id="fill" width="12.86" height="0.714" stroke="none"/>
    <path d="M0,0.21443802118301392h12.859884262084961M12.359884262084961,0v0.7144380211830139M12.859884262084961,0.5h-12.859884262084961M0.5,0.7144380211830139v-0.7144380211830139" fill="none" clip-path="url(#clip)"/>
  </g>
  <g id="Rectangle_1606" data-name="Rectangle 1606" transform="translate(630.59 152.858)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="27.149" height="2.143" stroke="none"/>
    <rect x="0.5" y="0.5" width="26.149" height="1.143" fill="none"/>
  </g>
  <g id="Rectangle_1603" data-name="Rectangle 1603" transform="translate(694.89 195.724)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect id="fill-2" width="12.86" height="0.714" stroke="none"/>
    <path d="M0,0.21443802118301392h12.859884262084961M12.359884262084961,0v0.7144380211830139M12.859884262084961,0.5h-12.859884262084961M0.5,0.7144380211830139v-0.7144380211830139" fill="none" clip-path="url(#clip-2)"/>
  </g>
  <g id="Rectangle_1605" data-name="Rectangle 1605" transform="translate(694.89 212.871)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect id="fill-3" width="12.86" height="0.714" stroke="none"/>
    <path d="M0,0.21443802118301392h12.859884262084961M12.359884262084961,0v0.7144380211830139M12.859884262084961,0.5h-12.859884262084961M0.5,0.7144380211830139v-0.7144380211830139" fill="none" clip-path="url(#clip-3)"/>
  </g>
  <g id="Rectangle_1595" data-name="Rectangle 1595" transform="translate(559.45 198.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1596" data-name="Rectangle 1596" transform="translate(559.45 212.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g id="Rectangle_1597" data-name="Rectangle 1597" transform="translate(559.45 226.868)" fill="#f5f5f5" class='svgText' stroke="#bbb" stroke-width="1">
    <rect width="24" height="3" stroke="none"/>
    <rect x="0.5" y="0.5" width="23" height="2" fill="none"/>
  </g>
  <g class='' id="chevron-down" transform="translate(587.949 185.477)">
    <path class='svgChev' id="chevron-down-2" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
  <g id="chevron-down-3" data-name="chevron-down" transform="translate(587.949 199.766)">
    <path class='svgChev' id="chevron-down-4" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
  <g id="chevron-down-5" data-name="chevron-down" transform="translate(587.949 214.055)">
    <path class='svgChev' id="chevron-down-6" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
  <g id="chevron-down-7" data-name="chevron-down" transform="translate(587.949 228.343)">
    <path class='svgChev' id="chevron-down-8" data-name="chevron-down" d="M6,9l1.881,1.881L9.762,9" transform="translate(-6 -9)" fill="none" stroke="#bbb" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
  </g>
</g>
</svg>
`,ef=i=>({Navbar:{color:i["--bg-navbar"],description:"navbar background",ref:["--bg-navbar"]},Primary:{color:i["--primary"],description:"modals background",ref:["--primary"]},Secondary:{color:i["--bg-tabs"],description:"tabBar background",ref:["--bg-tabs"]},Canvas:{color:i["--canvas-fill"],description:"canvas background",ref:["--canvas-fill"]},Stroke:{color:i["--canvas-stroke"],description:"canvas grid color",ref:["--canvas-stroke"]},Text:{color:i["--text-lite"],description:"text color",ref:["--text-lite","--text-panel","--text-dark"]},Borders:{color:i["--br-secondary"],description:"borders color",ref:["--br-secondary"]}});var Lr=ef(fn["Custom Theme"]);const Ra=()=>Ji(!0,!1,!0),ld=()=>{var i=document.createElement("form");Object.keys(Lr).forEach(r=>{const l=document.createElement("div"),c=document.createElement("label");c.textContent=`${r} (${Lr[r].description})`,c.setAttribute("for",r);const g=document.createElement("input");g.setAttribute("type","color"),g.setAttribute("name",r),g.setAttribute("value",Lr[r].color),g.classList.add("customColorInput"),l.append(c),l.append(g),i.append(l)});const n=document.createElement("a");return n.setAttribute("id","downloadThemeFile"),n.setAttribute("style","display:none"),i.appendChild(n),i},rm=()=>{$("#CustomColorThemesDialog").empty(),$("#CustomColorThemesDialog").append(ld()),$("#CustomColorThemesDialog").dialog({resizable:!1,close(){fn["Custom Theme"]=JSON.parse(localStorage.getItem("Custom Theme"))||fn["Default Theme"],xi(localStorage.getItem("theme")),Ra()},buttons:[{text:"Apply Theme",click(){localStorage.setItem("theme","Custom Theme"),localStorage.setItem("Custom Theme",JSON.stringify(fn["Custom Theme"])),$(".set").removeClass("set"),$(".selected").addClass("set"),$(this).dialog("close")}},{text:"Import Theme",click(){$("#importThemeFile").click()}},{text:"Export Theme",click(){const n=document.getElementById("downloadThemeFile");n.setAttribute("href",`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(fn["Custom Theme"]))}`),n.setAttribute("download","CV_CustomTheme.json"),n.click()}}]}),$("#CustomColorThemesDialog").focus();function i(){$(".customColorInput").on("input",n=>{Lr[n.target.name].color=n.target.value,Lr[n.target.name].ref.forEach(r=>{fn["Custom Theme"][r]=n.target.value}),xi("Custom Theme"),Ra()})}i(),setTimeout(()=>{xi("Custom Theme"),Ra()},50);function t(n){const r=JSON.parse(n.target.result);Lr=ef(r),fn["Custom Theme"]=r,xi("Custom Theme"),Ra(),$("#CustomColorThemesDialog").empty(),$("#CustomColorThemesDialog").append(ld()),i()}$("#importThemeFile").on("change",n=>{var r=n.target.files[0];if(r!==null&&r.name.split(".")[1]==="json"){var l=new FileReader;l.onload=t,l.readAsText(r),$("#importThemeFile").val("")}else alert("File Not Supported !")})},nf=()=>{let i={};return i.hover_select=getComputedStyle(document.documentElement).getPropertyValue("--hover-and-sel"),i.fill=getComputedStyle(document.documentElement).getPropertyValue("--fill"),i.mini_fill=getComputedStyle(document.documentElement).getPropertyValue("--mini-map"),i.mini_stroke=getComputedStyle(document.documentElement).getPropertyValue("--mini-map-stroke"),i.stroke=getComputedStyle(document.documentElement).getPropertyValue("--stroke"),i.stroke_alt=getComputedStyle(document.documentElement).getPropertyValue("--secondary-stroke"),i.input_text=getComputedStyle(document.documentElement).getPropertyValue("--input-text"),i.color_wire_draw=getComputedStyle(document.documentElement).getPropertyValue("--wire-draw"),i.color_wire_con=getComputedStyle(document.documentElement).getPropertyValue("--wire-cnt"),i.color_wire_pow=getComputedStyle(document.documentElement).getPropertyValue("--wire-pow"),i.color_wire_sel=getComputedStyle(document.documentElement).getPropertyValue("--wire-sel"),i.color_wire_lose=getComputedStyle(document.documentElement).getPropertyValue("--wire-lose"),i.color_wire=getComputedStyle(document.documentElement).getPropertyValue("--wire-norm"),i.text=getComputedStyle(document.documentElement).getPropertyValue("--text"),i.node=getComputedStyle(document.documentElement).getPropertyValue("--node"),i.node_norm=getComputedStyle(document.documentElement).getPropertyValue("--node-norm"),i.splitter=getComputedStyle(document.documentElement).getPropertyValue("--splitter"),i.out_rect=getComputedStyle(document.documentElement).getPropertyValue("--output-rect"),i.canvas_stroke=getComputedStyle(document.documentElement).getPropertyValue("--canvas-stroke"),i.canvas_fill=getComputedStyle(document.documentElement).getPropertyValue("--canvas-fill"),i};let ht=nf();function xi(i){const t=fn[i];if(t===void 0)return;const n=document.getElementsByTagName("html")[0];Object.keys(t).forEach((r,l)=>{n.style.setProperty(r,t[r])}),ht=nf()}const om=i=>{const t=fn[i];let n=$(sm);return $(".svgText",n).attr("fill",t["--text-panel"]),$(".svgNav",n).attr("fill",t["--bg-tab"]),$(".svgNav",n).attr("stroke",t["--br-primary"]),$(".svgGridBG",n).attr("fill",t["--canvas-fill"]),$(".svgGrid",n).attr("fill",t["--canvas-stroke"]),$(".svgPanel",n).attr("fill",t["--primary"]),$(".svgPanel",n).attr("stroke",t["--br-primary"]),$(".svgChev",n).attr("stroke",t["--br-secondary"]),$(".svgHeader",n).attr("fill",t["--primary"]),n.prop("outerHTML")},hd=(i,t)=>{if(i==="Custom Theme")return"<div></div>";let n=i.replace(" ","");return`
            <div id="theme" class="theme ${t?"selected set":""}">
              <div class='themeSel'></div>
              <span>${om(i)}</span>
              <span id='themeNameBox' class='themeNameBox'>
                <input type='radio' id='${n}' value='${i}' name='theme'>
                <label for='${n}'>${i}</label>
              </span>
            </div>
            `},am=()=>{const i=localStorage.getItem("theme");$("#colorThemesDialog").empty(),Object.keys(fn).forEach(n=>{n===i?$("#colorThemesDialog").append(hd(n,!0)):$("#colorThemesDialog").append(hd(n,!1))}),$(".selected label").trigger("click"),$("#colorThemesDialog").dialog({resizable:!1,close(){xi(localStorage.getItem("theme")),ud()},buttons:[{text:"Apply Theme",click(){$(".selected label").text()&&(localStorage.removeItem("Custom Theme"),localStorage.setItem("theme",$(".selected label").text())),$(".set").removeClass("set"),$(".selected").addClass("set"),$(this).dialog("close")}},{text:"Custom Theme",click(){rm(),$(this).dialog("close")}}]}),$("#colorThemesDialog").focus(),$('.ui-dialog[aria-describedby="colorThemesDialog"]').on("click",()=>$("#colorThemesDialog").focus()),$(".themeSel").on("mousedown",n=>{n.preventDefault(),$(".selected").removeClass("selected");let r=$(n.target.parentElement);r.addClass("selected");var l=r.find("input[type=radio]");l.trigger("click"),xi(r.find("label").text()),ud()})},ud=()=>Ji(!0,!1,!0);localStorage.getItem("theme")||localStorage.setItem("theme","Default Theme"),xi(localStorage.getItem("theme"));const Qa={canvas:document.getElementById("miniMapArea"),setup(){if(!lightMode){this.canvas=document.getElementById("miniMapArea"),this.pageHeight=height,this.pageWidth=width,this.pageY=this.pageHeight-globalScope.oy,this.pageX=this.pageWidth-globalScope.ox,f.minHeight!=null?this.minY=Math.min(f.minHeight,-globalScope.oy/globalScope.scale):this.minY=-globalScope.oy/globalScope.scale,f.maxHeight!=null?this.maxY=Math.max(f.maxHeight,this.pageY/globalScope.scale):this.maxY=this.pageY/globalScope.scale,f.minWidth!=null?this.minX=Math.min(f.minWidth,-globalScope.ox/globalScope.scale):this.minX=-globalScope.ox/globalScope.scale,f.maxWidth!=null?this.maxX=Math.max(f.maxWidth,this.pageX/globalScope.scale):this.maxX=this.pageX/globalScope.scale;var i=this.maxY-this.minY,t=this.maxX-this.minX,n=Math.min(250/i,250/t);i>t?(this.canvas.height=250,this.canvas.width=250*t/i):(this.canvas.width=250,this.canvas.height=250*i/t),this.canvas.height+=5,this.canvas.width+=5,document.getElementById("miniMap").style.height=this.canvas.height,document.getElementById("miniMap").style.width=this.canvas.width,this.ctx=this.canvas.getContext("2d"),this.play(n)}},play(i){lightMode||Pe()||(this.ctx.fillStyle="#bbb",this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fill(),this.resolve(i))},resolve(i){if(lightMode)return;this.ctx.fillStyle="#ddd",this.ctx.beginPath(),this.ctx.rect(2.5+((this.pageX-this.pageWidth)/globalScope.scale-this.minX)*i,2.5+((this.pageY-this.pageHeight)/globalScope.scale-this.minY)*i,this.pageWidth*i/globalScope.scale,this.pageHeight*i/globalScope.scale),this.ctx.fill();var t=updateOrder;const n=ht.mini_fill,r=ht.mini_stroke;this.ctx.strokeStyle=r,this.ctx.fillStyle=n;for(var l=0;l<t.length;l++)if(t[l]==="wires")for(var c=0;c<globalScope[t[l]].length;c++)this.ctx.beginPath(),this.ctx.moveTo(2.5+(globalScope[t[l]][c].node1.absX()-this.minX)*i,2.5+(globalScope[t[l]][c].node1.absY()-this.minY)*i),this.ctx.lineTo(2.5+(globalScope[t[l]][c].node2.absX()-this.minX)*i,2.5+(globalScope[t[l]][c].node2.absY()-this.minY)*i),this.ctx.stroke();else if(t[l]!="nodes"){var g=0;(t[l]=="DigitalLed"||t[l]=="VariableLed"||t[l]=="RGBLed")&&(g=20);for(var c=0;c<globalScope[t[l]].length;c++){globalScope[t[l]][c].x-f.minWidth,globalScope[t[l]][c].y-f.minHeight,this.ctx.beginPath();var v=globalScope[t[l]][c];this.ctx.rect(2.5+(v.x-v.leftDimensionX-this.minX)*i,2.5+(v.y-v.upDimensionY-this.minY)*i,(v.rightDimensionX+v.leftDimensionX)*i,(v.downDimensionY+v.upDimensionY+g)*i),this.ctx.fill(),this.ctx.stroke()}}},clear(){lightMode||($("#miniMapArea").css("z-index","-1"),this.context.clearRect(0,0,this.canvas.width,this.canvas.height))}};var Sh;function sf(){Sh=new Date().getTime()}function Nh(){if(!lightMode&&!(f.lastSelected==globalScope.root&&f.mouseDown)){if(Sh+2e3>=new Date().getTime()){setTimeout(Nh,Sh+2e3-new Date().getTime());return}$("#miniMap").fadeOut("fast")}}var lm=10;function Br(i=globalScope){var t=0;f.minWidth=void 0,f.maxWidth=void 0,f.minHeight=void 0,f.maxHeight=void 0;for(var n=0;n<updateOrder.length;n++)if(updateOrder[n]!=="wires")for(var r=0;r<i[updateOrder[n]].length;r++){t+=1;var l=i[updateOrder[n]][r];t===1&&(f.minWidth=l.absX(),f.minHeight=l.absY(),f.maxWidth=l.absX(),f.maxHeight=l.absY()),l.objectType!=="Node"?(l.y-l.upDimensionY<f.minHeight&&(f.minHeight=l.y-l.upDimensionY),l.y+l.downDimensionY>f.maxHeight&&(f.maxHeight=l.y+l.downDimensionY),l.x-l.leftDimensionX<f.minWidth&&(f.minWidth=l.x-l.leftDimensionX),l.x+l.rightDimensionX>f.maxWidth&&(f.maxWidth=l.x+l.rightDimensionX)):(l.absY()<f.minHeight&&(f.minHeight=l.absY()),l.absY()>f.maxHeight&&(f.maxHeight=l.absY()),l.absX()<f.minWidth&&(f.minWidth=l.absX()),l.absX()>f.maxWidth&&(f.maxWidth=l.absX()))}f.objectList=updateOrder}function An(i,t,n,r=1){r===3?(t=(width/2-globalScope.ox)/globalScope.scale,n=(height/2-globalScope.oy)/globalScope.scale):(t===void 0||n===void 0||t==="zoomButton"||n==="zoomButton")&&(f.lastSelected&&f.lastSelected.objectType!=="Wire"?(t=f.lastSelected.x,n=f.lastSelected.y):r===1?(t=f.mouseX,n=f.mouseY):r===2&&(t=(width/2-globalScope.ox)/globalScope.scale,n=(height/2-globalScope.oy)/globalScope.scale));var l=globalScope.scale;globalScope.scale=Math.max(.5,Math.min(4*DPR,globalScope.scale+i)),globalScope.scale=Math.round(globalScope.scale*10)/10,globalScope.ox-=Math.round(t*(globalScope.scale-l)),globalScope.oy-=Math.round(n*(globalScope.scale-l)),!embed&&!lightMode&&(Br(globalScope),Qa.setup(),$("#miniMap").show(),sf(),$("#miniMap").show(),setTimeout(Nh,2e3))}function Ji(i=!0,t=!1,n=!1){var r=lm*globalScope.scale,l=globalScope.ox%r,c=globalScope.oy%r;if(document.getElementById("backgroundArea").style.left=(l-r)/DPR,document.getElementById("backgroundArea").style.top=(c-r)/DPR,!(globalScope.scale===f.prevScale&&!n)&&oi.context){f.prevScale=globalScope.scale;var g=oi.canvas.width,v=oi.canvas.height,w=oi.context;if(w.beginPath(),oi.clear(),w.strokeStyle=ht.canvas_stroke,w.lineWidth=1,t||(w.fillStyle=ht.canvas_fill,w.rect(0,0,g,v),w.fill()),!embed){for(var D=.5*(w.lineWidth%2),T=0;T<g;T+=r)w.moveTo(Math.round(T+D)-D,0),w.lineTo(Math.round(T+D)-D,v);for(var R=0;R<v;R+=r)w.moveTo(0,Math.round(R+D)-D),w.lineTo(g,Math.round(R+D)-D);w.stroke()}}}function $i(i,t,n,r,l,c,g,v,w){[i,t]=Ci(i,t,w),[n,r]=Ci(n,r,w),[l,c]=Ci(l,c,w);var{ox:D}=globalScope,{oy:T}=globalScope;i*=globalScope.scale,t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,l*=globalScope.scale,c*=globalScope.scale,g*=globalScope.scale,v*=globalScope.scale;var R=f.context;R.bezierCurveTo(Math.round(g+D+i),Math.round(v+T+t),Math.round(g+D+n),Math.round(v+T+r),Math.round(g+D+l),Math.round(v+T+c))}function ne(i,t,n,r,l,c,g=!1){var v=.5*(i.lineWidth%2);let w,D;[w,D]=Ci(t,n,c),w*=globalScope.scale,D*=globalScope.scale,r*=globalScope.scale,l*=globalScope.scale,g?i.moveTo(r+globalScope.ox+w,l+globalScope.oy+D):i.moveTo(Math.round(r+globalScope.ox+w-v)+v,Math.round(l+globalScope.oy+D-v)+v)}function Ct(i,t,n,r,l,c){let g,v;var w=.5*(i.lineWidth%2);[g,v]=Ci(t,n,c),g*=globalScope.scale,v*=globalScope.scale,r*=globalScope.scale,l*=globalScope.scale,i.lineTo(Math.round(r+globalScope.ox+g-w)+w,Math.round(l+globalScope.oy+v-w)+w)}function os(i,t,n,r,l,c,g,v,w){let D,T,R,M,L;var E=.5*(i.lineWidth%2);[D,T]=Ci(t,n,w),D*=globalScope.scale,T*=globalScope.scale,g*=globalScope.scale,v*=globalScope.scale,r*=globalScope.scale,[R,M,L]=of(l,c,w),i.arc(Math.round(g+globalScope.ox+D+E)-E,Math.round(v+globalScope.oy+T+E)-E,Math.round(r),R,M,L)}function rf(i,t,n,r,l,c,g,v,w){let D,T,R,M,L;var E=.5*(i.lineWidth%2);[D,T]=Ci(t,n,w),D*=globalScope.scale,T*=globalScope.scale,g*=globalScope.scale,v*=globalScope.scale,r*=globalScope.scale,[R,M,L]=of(l,c,w);var Q=0;L&&(Q=Math.PI),i.arc(Math.round(g+globalScope.ox+D+E)-E,Math.round(v+globalScope.oy+T+E)-E,Math.round(r),R+Q,M+Q)}function Fi(i,t,n,r,l,c,g){let v,w;[v,w]=Ci(t,n,g),v*=globalScope.scale,w*=globalScope.scale,l*=globalScope.scale,c*=globalScope.scale,r*=globalScope.scale,i.arc(Math.round(l+globalScope.ox+v),Math.round(c+globalScope.oy+w),Math.round(r),0,2*Math.PI)}function ji(i,t,n,r,l){var c=.5*(i.lineWidth%2);t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,l*=globalScope.scale,i.rect(Math.round(globalScope.ox+t-c)+c,Math.round(globalScope.oy+n-c)+c,Math.round(r),Math.round(l))}function hm(i,t,n,r,l,c){n*=globalScope.scale,r*=globalScope.scale,n+=globalScope.ox,r+=globalScope.oy,l*=globalScope.scale,c*=globalScope.scale,i.drawImage(t,n,r,l,c)}function Ee(i,t,n,r,l,c,g,v="RIGHT"){var w=.5*(i.lineWidth%2);[t,n]=Ci(t,n,v),[r,l]=Ci(r,l,v),t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,l*=globalScope.scale,c*=globalScope.scale,g*=globalScope.scale,i.rect(Math.round(globalScope.ox+c+t-w)+w,Math.round(globalScope.oy+g+n-w)+w,Math.round(r),Math.round(l))}function Ci(i,t,n){return n==="LEFT"?[-i,t]:n==="DOWN"?[t,i]:n==="UP"?[t,-i]:[i,t]}function Nt(i){return Math.max(1,Math.round(i*globalScope.scale))}function of(i,t,n){return n==="LEFT"?[i,t,!0]:n==="DOWN"?[i-Math.PI/2,t-Math.PI/2,!0]:n==="UP"?[i-Math.PI/2,t-Math.PI/2,!1]:[i,t,!1]}function Is(i,t,n,r,l,c,g){t*=globalScope.scale,n*=globalScope.scale,r*=globalScope.scale,l*=globalScope.scale,i.beginPath(),i.strokeStyle=c,i.lineCap="round",i.lineWidth=Nt(g);var v=.5*(i.lineWidth%2),w=0,D=0;n===l&&(D=v),t===r&&(w=v),i.moveTo(Math.round(t+globalScope.ox+w)-w,Math.round(n+globalScope.oy+D)-D),i.lineTo(Math.round(r+globalScope.ox+w)-w,Math.round(l+globalScope.oy+D)-D),i.stroke()}function jo(i){var t=$("<div>");return t.css("border",`1px solid ${i}`),t.css("border-color")!==""}function Ms(i){var t,n;return t=document.createElement("canvas"),t.height=1,t.width=1,n=t.getContext("2d"),n.fillStyle=i,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}function xh(i,t,n,r,l){t*=globalScope.scale,n*=globalScope.scale,i.beginPath(),i.fillStyle=l,i.arc(Math.round(t+globalScope.ox),Math.round(n+globalScope.oy),Math.round(r*globalScope.scale),0,Math.PI*2,!1),i.closePath(),i.fill()}function um(i,t,n,r,l=10){if(!(!t||!t.length)){i.font=`${Math.round(l*globalScope.scale)}px Raleway`,i.textAlign="center";var c=i.measureText(t).width/globalScope.scale+8,g=13;i.strokeStyle="black",i.lineWidth=Nt(1),i.fillStyle="yellow",i.save(),i.beginPath(),ji(i,n-c/2,r-g/2-3,c,g),i.shadowColor="#999",i.shadowBlur=10,i.shadowOffsetX=3,i.shadowOffsetY=3,i.stroke(),i.fill(),i.restore(),n*=globalScope.scale,r*=globalScope.scale,i.beginPath(),i.fillStyle="black",i.fillText(t,Math.round(n+globalScope.ox),Math.round(r+globalScope.oy)),i.fill()}}function Xt(i,t,n,r,l=20){n*=globalScope.scale,r*=globalScope.scale,i.font=`${Math.round(l*globalScope.scale)}px Raleway`,i.fillText(t,Math.round(n+globalScope.ox),Math.round(r+globalScope.oy))}function Eo(i,t,n,r,l,c,g){var v={RIGHT:0,LEFT:0,DOWN:Math.PI/2,UP:-Math.PI/2};n*=globalScope.scale,r*=globalScope.scale,[n,r]=Ci(n,r,g),l*=globalScope.scale,c*=globalScope.scale,i.font=`${Math.round(14*globalScope.scale)}px Raleway`,i.save(),i.translate(Math.round(l+n+globalScope.ox),Math.round(c+r+globalScope.oy)),i.rotate(v[g]),i.textAlign="center",i.fillText(t,0,Math.round(4*globalScope.scale)*(1-0*+(g==="DOWN"))),i.restore()}function pn(i,t,n,r,l,c,g,v=14,w="center"){n*=globalScope.scale,r*=globalScope.scale,[n,r]=Ci(n,r,g),l*=globalScope.scale,c*=globalScope.scale,i.font=`${Math.round(v*globalScope.scale)}px Raleway`,i.textAlign=w,i.fillText(t,l+n+globalScope.ox,c+r+globalScope.oy+Math.round(v/3*globalScope.scale))}function Es(i,t,n,r,l=0,c=0,g=14,v="Raleway",w="center"){n*=globalScope.scale,r*=globalScope.scale,l*=globalScope.scale,c*=globalScope.scale,i.font=`${Math.round(g*globalScope.scale)}px ${v}`,i.textAlign=w,i.fillText(t,Math.round(l+n+globalScope.ox),Math.round(c+r+globalScope.oy))}const Go={RIGHT:"LEFT",LEFT:"RIGHT",DOWN:"UP",UP:"DOWN"},cd={right:"LEFT",left:"RIGHT",down:"UP",up:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN"};class dd{constructor(t,n,r,l="",c,g){this.type=c,this.id=r,this.label=l,this.prevx=void 0,this.prevy=void 0,this.x=t,this.y=n,this.radius=5,this.clicked=!1,this.hover=!1,this.wasClicked=!1,this.prev="a",this.count=0,this.parent=g,this.objectType="Layout Node"}absX(){return this.x}absY(){return this.y}update(){this===f.hover&&(f.hover=void 0),this.hover=this.isHover(),f.mouseDown||(this.absX()!==this.prevx||this.absY()!==this.prevy)&&(this.prevx=this.absX(),this.prevy=this.absY()),this.hover&&(f.hover=this),f.mouseDown&&(this.hover&&!f.selected||f.lastSelected===this)?(f.selected=!0,f.lastSelected=this,this.clicked=!0):this.clicked=!1,!this.wasClicked&&this.clicked?(this.wasClicked=!0,this.prev="a",f.lastSelected=this):this.wasClicked&&this.clicked&&yt.isAllowed(f.mouseX,f.mouseY)&&!yt.isNodeAt(f.mouseX,f.mouseY)&&(this.x=f.mouseX,this.y=f.mouseY)}draw(){var t=f.context;xh(t,this.absX(),this.absY(),3,["green","red"][+(f.lastSelected===this)])}isHover(){return this.absX()===f.mouseX&&this.absY()===f.mouseY}}class cm{constructor(t=globalScope){var n=300*DPR,r=50*DPR;globalScope.ox=n,globalScope.oy=r,this.layout={...t.layout},this.Input=[];for(let l=0;l<t.Input.length;l++)this.Input.push(new dd(t.Input[l].layoutProperties.x,t.Input[l].layoutProperties.y,t.Input[l].layoutProperties.id,t.Input[l].label,t.Input[l].type,t.Input[l]));this.Output=[];for(let l=0;l<t.Output.length;l++)this.Output.push(new dd(t.Output[l].layoutProperties.x,t.Output[l].layoutProperties.y,t.Output[l].layoutProperties.id,t.Output[l].label,t.Output[l].type,t.Output[l]));this.subElements=[]}isAllowed(t,n){return!(t<0||t>this.layout.width||n<0||n>this.layout.height||t>0&&t<this.layout.width&&n>0&&n<this.layout.height||t===0&&n===0||t===0&&n===this.layout.height||t===this.layout.width&&n===0||t===this.layout.width&&n===this.layout.height)}isNodeAt(t,n){for(let r=0;r<this.Input.length;r++)if(this.Input[r].x===t&&this.Input[r].y===n)return!0;for(let r=0;r<this.Output.length;r++)if(this.Output[r].x===t&&this.Output[r].y===n)return!0;return!1}}function dn(i){var t=i;return t.search(/ /g)<t.length-1&&t.search(/ /g)>=0&&(t=t.replace(/ Inverse/g,"_inv"),t=t.replace(/ /g,"_")),t.substring(0,1).search(/\\/g)<0&&(t.search(/[\W]/g)>-1||t.substring(0,1).search(/[0-9]/g)>-1)&&(t="\\"+t+" "),t}function dm(i,t,n){if(i.verilogLabel)return i.verilogLabel;var r=i.parent.verilogLabel,l;return i.label?l=dn(i.label):l=n>1?"out_"+t:"out",r.substring(0,1).search(/\\/g)<0?r+"_"+l:r.substring(0,r.length-1)+"_"+l+" "}class Bt{constructor(t,n,r,l,c){this.x=t,this.y=n,this.hover=!1,(this.x===void 0||this.y===void 0)&&(this.x=f.mouseX,this.y=f.mouseY,this.newElement=!0,this.hover=!0),this.deleteNodesWhenDeleted=!0,this.nodeList=[],this.clicked=!1,this.oldx=t,this.oldy=n,this.leftDimensionX=10,this.rightDimensionX=10,this.upDimensionY=10,this.downDimensionY=10,this.label="",this.scope=r,this.baseSetup(),this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10)||1,this.direction=l,this.directionFixed=!1,this.labelDirectionFixed=!1,this.labelDirection=Go[l],this.orientationFixed=!0,this.fixedBitWidth=!1,ge(),this.queueProperties={inQueue:!1,time:void 0,index:void 0},this.canShowInSubcircuit&&(this.subcircuitMetadata={showInSubcircuit:!1,showLabelInSubcircuit:!0,labelDirection:this.labelDirection,x:0,y:0})}flipBits(t){return~t>>>0<<32-this.bitWidth>>>32-this.bitWidth}absX(){return this.x}absY(){return this.y}baseSetup(){this.scope[this.objectType].push(this)}copyFrom(t){var n=["label","labelDirection"];for(let r=0;r<n.length;r++)t[n[r]]!==void 0&&(this[n[r]]=t[n[r]])}updateScope(t){this.scope=t;for(let n=0;n<this.nodeList.length;n++)this.nodeList[n].scope=t}saveObject(){var t={x:this.x,y:this.y,objectType:this.objectType,label:this.label,direction:this.direction,labelDirection:this.labelDirection,propagationDelay:this.propagationDelay,customData:this.customSave()};return this.canShowInSubcircuit&&(t.subcircuitMetadata=this.subcircuitMetadata),t}customSave(){return{values:{},nodes:{},constructorParamaters:[]}}checkHover(){if(!f.mouseDown){for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].checkHover();f.mouseDown||(f.hover===this?(this.hover=this.isHover(),this.hover||(f.hover=void 0)):f.hover?this.hover=!1:(this.hover=this.isHover(),this.hover&&(f.hover=this)))}}setDimensions(t,n){this.leftDimensionX=this.rightDimensionX=t,this.downDimensionY=this.upDimensionY=n}setWidth(t){this.leftDimensionX=this.rightDimensionX=t}setHeight(t){this.downDimensionY=this.upDimensionY=t}startDragging(){Pe()?(this.oldx=this.subcircuitMetadata.x,this.oldy=this.subcircuitMetadata.y):(this.oldx=this.x,this.oldy=this.y)}drag(){Pe()?(this.subcircuitMetadata.x=this.oldx+f.mouseX-f.mouseDownX,this.subcircuitMetadata.y=this.oldy+f.mouseY-f.mouseDownY):(this.x=this.oldx+f.mouseX-f.mouseDownX,this.y=this.oldy+f.mouseY-f.mouseDownY)}update(){if(Pe())return this.layoutUpdate();let t=!1;if(t|=this.newElement,this.newElement)if(this.centerElement?(this.x=Math.round((f.mouseX-(this.rightDimensionX-this.leftDimensionX)/2)/10)*10,this.y=Math.round((f.mouseY-(this.downDimensionY-this.upDimensionY)/2)/10)*10):(this.x=f.mouseX,this.y=f.mouseY),f.mouseDown)this.newElement=!1,f.lastSelected=this;else return t;for(let n=0;n<this.nodeList.length;n++)t|=this.nodeList[n].update();if((!f.hover||f.hover===this)&&(this.hover=this.isHover()),f.mouseDown||(this.hover=!1),(this.clicked||!f.hover)&&this.isHover()?(this.hover=!0,f.hover=this):!f.mouseDown&&this.hover&&this.isHover()===!1&&(this.hover&&(f.hover=void 0),this.hover=!1),f.mouseDown&&this.clicked){if(this.drag(),!f.shiftDown&&f.multipleObjectSelections.contains(this))for(let n=0;n<f.multipleObjectSelections.length;n++)f.multipleObjectSelections[n].drag();t|=!0}else if(f.mouseDown&&!f.selected){if(this.startDragging(),!f.shiftDown&&f.multipleObjectSelections.contains(this))for(let n=0;n<f.multipleObjectSelections.length;n++)f.multipleObjectSelections[n].startDragging();f.selected=this.clicked=this.hover,t|=this.clicked}else this.clicked&&(f.selected=!1),this.clicked=!1,this.wasClicked=!1,this.objectType=="SubCircuit"&&this.releaseClick();return f.mouseDown&&!this.wasClicked&&this.clicked&&(this.wasClicked=!0,this.click&&this.click(),f.shiftDown?(f.lastSelected=void 0,f.multipleObjectSelections.contains(this)?f.multipleObjectSelections.clean(this):f.multipleObjectSelections.push(this)):f.lastSelected=this),t}layoutUpdate(){var t=!1;if(t|=this.newElement,this.newElement)if(this.subcircuitMetadata.x=f.mouseX,this.subcircuitMetadata.y=f.mouseY,f.mouseDown)this.newElement=!1,f.lastSelected=this;else return;if((!f.hover||f.hover==this)&&(this.hover=this.isHover()),(this.clicked||!f.hover)&&this.isHover()?(this.hover=!0,f.hover=this):!f.mouseDown&&this.hover&&this.isHover()==!1&&(this.hover&&(f.hover=void 0),this.hover=!1),f.mouseDown&&this.clicked?(this.drag(),t|=!0):f.mouseDown&&!f.selected?(this.startDragging(),f.selected=this.clicked=this.hover,t|=this.clicked):(this.clicked&&(f.selected=!1),this.clicked=!1,this.wasClicked=!1),f.mouseDown&&!this.wasClicked&&this.clicked&&(this.wasClicked=!0,f.lastSelected=this),!this.clicked&&!this.newElement){let n=this.subcircuitMetadata.x,r=this.subcircuitMetadata.y,l=yt.layout.height,c=yt.layout.width,g=this.layoutProperties.rightDimensionX,v=this.layoutProperties.leftDimensionX,w=this.layoutProperties.upDimensionY,D=this.layoutProperties.downDimensionY;if(v<=n&&n+g<=c&&r>=w&&r+D<=l)return;this.subcircuitMetadata.showInSubcircuit=!1,$f()}return t}fixDirection(){this.direction=cd[this.direction]||this.direction,this.labelDirection=cd[this.labelDirection]||this.labelDirection}isHover(){var t=f.touch?f.mouseDownX-this.x:f.mouseXf-this.x,n=f.touch?this.y-f.mouseDownY:this.y-f.mouseYf,r=this.rightDimensionX,l=this.leftDimensionX,c=this.upDimensionY,g=this.downDimensionY;if(Pe())var t=f.mouseXf-this.subcircuitMetadata.x,n=this.subcircuitMetadata.y-f.mouseYf,r=this.layoutProperties.rightDimensionX,l=this.layoutProperties.leftDimensionX,c=this.layoutProperties.upDimensionY,g=this.layoutProperties.downDimensionY;return!this.directionFixed&&!this.overrideDirectionRotation&&(this.direction==="LEFT"?(l=this.rightDimensionX,r=this.leftDimensionX):this.direction==="DOWN"?(l=this.downDimensionY,r=this.upDimensionY,c=this.leftDimensionX,g=this.rightDimensionX):this.direction==="UP"&&(l=this.downDimensionY,r=this.upDimensionY,g=this.leftDimensionX,c=this.rightDimensionX)),-l<=t&&t<=r&&-g<=n&&n<=c}isSubcircuitHover(t=0,n=0){var r=f.mouseXf-this.subcircuitMetadata.x-t,l=n+this.subcircuitMetadata.y-f.mouseYf,c=this.layoutProperties.rightDimensionX,g=this.layoutProperties.leftDimensionX,v=this.layoutProperties.upDimensionY,w=this.layoutProperties.downDimensionY;return-g<=r&&r<=c&&-w<=l&&l<=v}setLabel(t){this.label=t||""}draw(){var t=f.context;if(this.checkHover(),!(this.x*this.scope.scale+this.scope.ox<-this.rightDimensionX*this.scope.scale-0||this.x*this.scope.scale+this.scope.ox>width+this.leftDimensionX*this.scope.scale+0||this.y*this.scope.scale+this.scope.oy<-this.downDimensionY*this.scope.scale-0||this.y*this.scope.scale+this.scope.oy>height+0+this.upDimensionY*this.scope.scale)){if(this.rectangleObject&&(t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(3),t.beginPath(),Ee(t,-this.leftDimensionX,-this.upDimensionY,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY,this.x,this.y,[this.direction,"RIGHT"][+this.directionFixed]),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()),this.label!==""){var n=this.rightDimensionX,r=this.leftDimensionX,l=this.upDimensionY,c=this.downDimensionY;this.directionFixed||(this.direction==="LEFT"?(r=this.rightDimensionX,n=this.leftDimensionX):this.direction==="DOWN"?(r=this.downDimensionY,n=this.upDimensionY,l=this.leftDimensionX,c=this.rightDimensionX):this.direction==="UP"&&(r=this.downDimensionY,n=this.upDimensionY,c=this.leftDimensionX,l=this.rightDimensionX)),this.labelDirection==="LEFT"?(t.beginPath(),t.textAlign="right",t.fillStyle=ht.text,Xt(t,this.label,this.x-r-10,this.y+5,14),t.fill()):this.labelDirection==="RIGHT"?(t.beginPath(),t.textAlign="left",t.fillStyle=ht.text,Xt(t,this.label,this.x+n+10,this.y+5,14),t.fill()):this.labelDirection==="UP"?(t.beginPath(),t.textAlign="center",t.fillStyle=ht.text,Xt(t,this.label,this.x,this.y+5-l-10,14),t.fill()):this.labelDirection==="DOWN"&&(t.beginPath(),t.textAlign="center",t.fillStyle=ht.text,Xt(t,this.label,this.x,this.y+5+c+10,14),t.fill())}this.customDraw&&this.customDraw()}}drawLayoutMode(t=0,n=0){var r=f.context;if(Pe()&&this.checkHover(),!(this.subcircuitMetadata.x*this.scope.scale+this.scope.ox<-this.layoutProperties.rightDimensionX*this.scope.scale||this.subcircuitMetadata.x*this.scope.scale+this.scope.ox>width+this.layoutProperties.leftDimensionX*this.scope.scale||this.subcircuitMetadata.y*this.scope.scale+this.scope.oy<-this.layoutProperties.downDimensionY*this.scope.scale||this.subcircuitMetadata.y*this.scope.scale+this.scope.oy>height+this.layoutProperties.upDimensionY*this.scope.scale)){if(this.subcircuitMetadata.showLabelInSubcircuit){var l=this.layoutProperties.rightDimensionX,c=this.layoutProperties.leftDimensionX,g=this.layoutProperties.upDimensionY,v=this.layoutProperties.downDimensionY;this.subcircuitMetadata.labelDirection=="LEFT"?(r.beginPath(),r.textAlign="right",r.fillStyle="black",Xt(r,this.label,this.subcircuitMetadata.x+t-c-10,this.subcircuitMetadata.y+n+5,10),r.fill()):this.subcircuitMetadata.labelDirection=="RIGHT"?(r.beginPath(),r.textAlign="left",r.fillStyle="black",Xt(r,this.label,this.subcircuitMetadata.x+t+l+10,this.subcircuitMetadata.y+n+5,10),r.fill()):this.subcircuitMetadata.labelDirection=="UP"?(r.beginPath(),r.textAlign="center",r.fillStyle="black",Xt(r,this.label,this.subcircuitMetadata.x+t,this.subcircuitMetadata.y+n+5-g-10,10),r.fill()):this.subcircuitMetadata.labelDirection=="DOWN"&&(r.beginPath(),r.textAlign="center",r.fillStyle="black",Xt(r,this.label,this.subcircuitMetadata.x+t,this.subcircuitMetadata.y+n+5+v+10,10),r.fill())}this.subcircuitDraw(t,n)}}delete(){if(f.lastSelected=void 0,this.scope[this.objectType].clean(this),this.deleteNodesWhenDeleted)this.deleteNodes();else for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].connections.length?this.nodeList[t].converToIntermediate():this.nodeList[t].delete();this.deleted=!0}cleanDelete(){this.deleteNodesWhenDeleted=!0,this.delete()}deleteNodes(){for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].delete()}newDirection(t){if(this.direction!==t&&!(this.directionFixed&&this.orientationFixed)){if(this.directionFixed){this.newOrientation(t);return}this.direction=t;for(let n=0;n<this.nodeList.length;n++)this.nodeList[n].refresh()}}newLabelDirection(t){Pe()?this.subcircuitMetadata.labelDirection=t:this.labelDirection=t}isResolvable(){if(this.alwaysResolve)return!0;for(let t=0;t<this.nodeList.length;t++)if(this.nodeList[t].type===0&&this.nodeList[t].value===void 0)return!1;return!0}newBitWidth(t){if(!this.fixedBitWidth&&this.bitWidth!==void 0&&!(this.bitWidth<1)){this.bitWidth=t;for(let n=0;n<this.nodeList.length;n++)this.nodeList[n].bitWidth=t}}changePropagationDelay(t){if(!this.propagationDelayFixed&&t!==void 0&&t!==""){var n=parseInt(t,10);n<0||(this.propagationDelay=n)}}resolve(){}processVerilog(){for(var t=0,n=0;n<this.nodeList.length;n++)this.nodeList[n].type==NODE_OUTPUT&&this.nodeList[n].connections.length>0&&t++;for(var r=0,n=0;n<this.nodeList.length;n++)this.nodeList[n].type==NODE_OUTPUT&&(this.objectType!="Input"&&this.objectType!="Clock"&&this.nodeList[n].connections.length>0&&(this.nodeList[n].verilogLabel=dm(this.nodeList[n],r,t),this.scope.verilogWireList[this.nodeList[n].bitWidth].contains(this.nodeList[n].verilogLabel)||this.scope.verilogWireList[this.nodeList[n].bitWidth].push(this.nodeList[n].verilogLabel),r++),this.scope.stack.push(this.nodeList[n]))}isVerilogResolvable(){var t=[];for(let r=0;r<this.nodeList.length;r++)t.push(this.nodeList[r].value),this.nodeList[r].value=void 0;for(let r=0;r<this.nodeList.length;r++)this.nodeList[r].verilogLabel&&(this.nodeList[r].value=1);var n=this.isResolvable();for(let r=0;r<this.nodeList.length;r++)this.nodeList[r].value=t[r];return n}removePropagation(){for(let t=0;t<this.nodeList.length;t++)this.nodeList[t].type===NODE_OUTPUT&&this.nodeList[t].value!==void 0&&(this.nodeList[t].value=void 0,f.simulationQueue.add(this.nodeList[t]))}verilogName(){return this.verilogType||this.objectType}verilogBaseType(){return this.verilogName()}verilogParametrizedType(){var t=this.verilogBaseType();return this.bitWidth!=null&&this.bitWidth>1&&(t+=" #("+this.bitWidth+")"),t}generateVerilog(){for(var t=[],n=[],r=0;r<this.nodeList.length;r++)this.nodeList[r].type==NODE_INPUT?t.push(this.nodeList[r]):this.nodeList[r].connections.length>0?n.push(this.nodeList[r]):n.push("");var l=n.concat(t),c=this.verilogParametrizedType(),g=l.map(v=>v.verilogLabel).join(", ");return c+=` ${this.verilogLabel}(${g});`,c}toggleLabelInLayoutMode(){this.subcircuitMetadata.showLabelInSubcircuit=!this.subcircuitMetadata.showLabelInSubcircuit}}Bt.prototype.alwaysResolve=!1;Bt.prototype.propagationDelay=10;Bt.prototype.tooltip=void 0;Bt.prototype.propagationDelayFixed=!1;Bt.prototype.rectangleObject=!0;Bt.prototype.objectType="CircuitElement";Bt.prototype.canShowInSubcircuit=!1;Bt.prototype.subcircuitMetadata={};Bt.prototype.layoutProperties={rightDimensionX:5,leftDimensionX:5,upDimensionY:5,downDimensionY:5};Bt.prototype.subcircuitMutableProperties={label:{name:"label: ",type:"text",func:"setLabel"},"show label":{name:"show label ",type:"checkbox",func:"toggleLabelInLayoutMode"}};function Bh(){if(restrictedElements.length===0)return;const{restrictedCircuitElementsUsed:i}=globalScope;let t="";i.forEach(n=>{t+=`${n}, `}),t===""?t="None":t=t.slice(0,-2),$("#restrictedElementsDiv--list").html(t)}function As(i=globalScope){if(restrictedElements.length===0)return;const t=[];restrictedElements.forEach(n=>{i[n].length>0&&t.push(n)}),i.restrictedCircuitElementsUsed=t,Bh()}function fm(){$("#restrictedDiv").removeClass("display--none"),$("#Help").removeClass("show"),$("#restrictedDiv").html("The element has been restricted by mentor. Usage might lead to deduction in marks")}function pm(){$("#restrictedDiv").addClass("display--none")}class gm{constructor(t,n,r){this.objectType="Wire",this.node1=t,this.scope=r,this.node2=n,this.type="horizontal",this.updateData(),this.scope.wires.push(this),Ei(!0)}updateData(){this.x1=this.node1.absX(),this.y1=this.node1.absY(),this.x2=this.node2.absX(),this.y2=this.node2.absY(),this.x1===this.x2&&(this.type="vertical")}updateScope(t){this.scope=t,this.checkConnections()}checkConnections(){var t=this.node1.deleted||this.node2.deleted||!this.node1.connections.contains(this.node2)||!this.node2.connections.contains(this.node1);return t&&this.delete(),t}dblclick(){this.node1.parent==globalScope.root&&this.node2.parent==globalScope.root&&(f.multipleObjectSelections=[this.node1,this.node2],f.lastSelected=void 0)}update(){var t=!1;if(embed)return t;if(this.node1.absX()===this.node2.absX()?(this.x1=this.x2=this.node1.absX(),this.type="vertical"):this.node1.absY()===this.node2.absY()&&(this.y1=this.y2=this.node1.absY(),this.type="horizontal"),f.shiftDown===!1&&f.mouseDown===!0&&f.selected===!1&&this.checkWithin(f.mouseDownX,f.mouseDownY))f.selected=!0,f.lastSelected=this,t=!0;else if(f.mouseDown&&f.lastSelected===this&&!this.checkWithin(f.mouseX,f.mouseY)){var n=new X(f.mouseDownX,f.mouseDownY,2,this.scope.root);n.clicked=!0,n.wasClicked=!0,f.lastSelected=n,this.converge(n)}return this.node1.deleted||this.node2.deleted?(this.delete(),t):(f.mouseDown===!1&&(this.type==="horizontal"?this.node1.absY()!==this.y1?(n=new X(this.node2.absX(),this.node1.absY(),2,this.scope.root),this.converge(n),t=!0):this.node2.absY()!==this.y2&&(n=new X(this.node1.absX(),this.node2.absY(),2,this.scope.root),this.converge(n),t=!0):this.type==="vertical"&&(this.node1.absX()!==this.x1?(n=new X(this.node1.absX(),this.node2.absY(),2,this.scope.root),this.converge(n),t=!0):this.node2.absX()!==this.x2&&(n=new X(this.node2.absX(),this.node1.absY(),2,this.scope.root),this.converge(n),t=!0))),t)}draw(){const t=f.context;var n;f.lastSelected==this?n=ht.color_wire_sel:this.node1.value==null||this.node2.value==null?n=ht.color_wire_lose:this.node1.bitWidth==1?n=[ht.color_wire_lose,ht.color_wire_con,ht.color_wire_pow][this.node1.value+1]:n=ht.color_wire,Is(t,this.node1.absX(),this.node1.absY(),this.node2.absX(),this.node2.absY(),n,3)}checkConvergence(t){return this.checkWithin(t.absX(),t.absY())}checkWithin(t,n){return this.type==="horizontal"&&this.node1.absX()<this.node2.absX()&&t>this.node1.absX()&&t<this.node2.absX()&&n===this.node2.absY()||this.type==="horizontal"&&this.node1.absX()>this.node2.absX()&&t<this.node1.absX()&&t>this.node2.absX()&&n===this.node2.absY()||this.type==="vertical"&&this.node1.absY()<this.node2.absY()&&n>this.node1.absY()&&n<this.node2.absY()&&t===this.node2.absX()||this.type==="vertical"&&this.node1.absY()>this.node2.absY()&&n<this.node1.absY()&&n>this.node2.absY()&&t===this.node2.absX()}converge(t){this.node1.connect(t),this.node2.connect(t),this.delete()}delete(){Ei(!0),$e(!0),this.node1.connections.clean(this.node2),this.node2.connections.clean(this.node1),this.scope.wires.clean(this),this.node1.checkDeleted(),this.node2.checkDeleted()}}function mm(i,t){for(var n=0;n<t.connections.length;n++)i.connections.contains(i.scope.allNodes[t.connections[n]])||i.connect(i.scope.allNodes[t.connections[n]])}function fd(i,t){if(t==-1)return i;var{scope:n}=i,{parent:r}=i;return r.nodeList.clean(i),i.delete(),i=n.allNodes[t],i.parent=r,r.nodeList.push(i),i.updateRotation(),i}function vm(i,t,n){return n=="LEFT"?[-i,t]:n=="DOWN"?[t,i]:n=="UP"?[t,-i]:[i,t]}function bm(i,t,n){return i<<32-n>>>32-(n-t+1)}function Rh(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}function tt(i){return i.scope.allNodes.indexOf(i)}function ym(i,t){new X(i.x,i.y,i.type,t.root,i.bitWidth,i.label)}window.NODE_INPUT=0;window.NODE_OUTPUT=1;window.NODE_INTERMEDIATE=2;var pd=10;class X{constructor(t,n,r,l,c=void 0,g=""){if(isNaN(t)||isNaN(n)){this.delete(),ii("Fatal error occurred");return}Ei(!0),this.objectType="Node",this.subcircuitOverride=!1,this.id=`node${pd}`,pd++,this.parent=l,r!=2&&this.parent.nodeList!==void 0&&this.parent.nodeList.push(this),c==null?this.bitWidth=l.bitWidth:this.bitWidth=c,this.label=g,this.prevx=void 0,this.prevy=void 0,this.leftx=t,this.lefty=n,this.x=t,this.y=n,this.type=r,this.connections=new Array,this.value=void 0,this.radius=5,this.clicked=!1,this.hover=!1,this.wasClicked=!1,this.scope=this.parent.scope,this.prev="a",this.count=0,this.highlighted=!1,this.refresh(),this.type==2&&this.parent.scope.nodes.push(this),this.parent.scope.allNodes.push(this),this.queueProperties={inQueue:!1,time:void 0,index:void 0}}setLabel(t){this.label=t}converToIntermediate(){this.type=2,this.x=this.absX(),this.y=this.absY(),this.parent=this.scope.root,this.scope.nodes.push(this)}startDragging(){this.oldx=this.x,this.oldy=this.y}drag(){this.x=this.oldx+f.mouseX-f.mouseDownX,this.y=this.oldy+f.mouseY-f.mouseDownY}saveObject(){this.type==2&&(this.leftx=this.x,this.lefty=this.y);for(var t={x:this.leftx,y:this.lefty,type:this.type,bitWidth:this.bitWidth,label:this.label,connections:[]},n=0;n<this.connections.length;n++)t.connections.push(tt(this.connections[n]));return t}updateRotation(){var t,n;[t,n]=vm(this.leftx,this.lefty,this.parent.direction),this.x=t,this.y=n}refresh(){this.updateRotation();for(var t=0;t<this.connections.length;t++)this.connections[t].connections.clean(this);this.connections=[]}absX(){return this.x+this.parent.x}absY(){return this.y+this.parent.y}updateScope(t){this.scope=t,this.type==2&&(this.parent=t.root)}isResolvable(){return this.value!=null}reset(){this.value=void 0,this.highlighted=!1}connect(t){t!=this&&(t.connections.contains(this)||(new gm(this,t,this.parent.scope),this.connections.push(t),t.connections.push(this),ye(!0),$e(!0),ge()))}connectWireLess(t){t!=this&&(t.connections.contains(this)||(this.connections.push(t),t.connections.push(this),ye(!0),$e(!0),ge()))}disconnectWireLess(t){this.connections.clean(t),t.connections.clean(this)}resolve(){if(this.value==null){for(var t=0;t<this.connections.length;t++)this.connections[t].value!==void 0&&(this.connections[t].value=void 0,f.simulationQueue.add(this.connections[t]));this.type==NODE_INPUT&&(this.parent.objectType=="Splitter"?this.parent.removePropagation():this.parent.isResolvable()?f.simulationQueue.add(this.parent):this.parent.removePropagation()),this.type==NODE_OUTPUT&&!this.subcircuitOverride&&this.parent.isResolvable()&&!this.parent.queueProperties.inQueue&&(this.parent.objectType=="TriState"?this.parent.state.value&&f.simulationQueue.add(this.parent):f.simulationQueue.add(this.parent));return}this.type==0&&this.parent.isResolvable()&&f.simulationQueue.add(this.parent);for(var t=0;t<this.connections.length;t++){const c=this.connections[t];if(c.value!=this.value||c.bitWidth!=this.bitWidth)if(c.type==1&&c.value!=null&&c.parent.objectType!="TriState"&&!(c.subcircuitOverride&&c.scope!=this.scope)&&c.parent.objectType!="SubCircuit"){this.highlighted=!0,c.highlighted=!0;var n=c.scope.name,r=c.parent.objectType;ii(`Contention Error: ${this.value} and ${c.value} at ${r} in ${n}`)}else c.bitWidth==this.bitWidth||c.type==2?(c.parent.objectType=="TriState"&&c.value!=null&&c.type==1&&c.parent.state.value&&f.contentionPending.push(c.parent),c.bitWidth=this.bitWidth,c.value=this.value,f.simulationQueue.add(c)):(this.highlighted=!0,c.highlighted=!0,ii(`BitWidth Error: ${this.bitWidth} and ${c.bitWidth}`))}}checkHover(){f.mouseDown||(f.hover==this?(this.hover=this.isHover(),this.hover||(f.hover=void 0,this.showHover=!1)):f.hover?(this.hover=!1,this.showHover=!1):(this.hover=this.isHover(),this.hover?f.hover=this:this.showHover=!1))}draw(){const t=f.context,n=ht.color_wire_draw;this.clicked&&(this.prev=="x"?(Is(t,this.absX(),this.absY(),f.mouseX,this.absY(),n,3),Is(t,f.mouseX,this.absY(),f.mouseX,f.mouseY,n,3)):this.prev=="y"?(Is(t,this.absX(),this.absY(),this.absX(),f.mouseY,n,3),Is(t,this.absX(),f.mouseY,f.mouseX,f.mouseY,n,3)):Math.abs(this.x+this.parent.x-f.mouseX)>Math.abs(this.y+this.parent.y-f.mouseY)?Is(t,this.absX(),this.absY(),f.mouseX,this.absY(),n,3):Is(t,this.absX(),this.absY(),this.absX(),f.mouseY,n,3));var r=ht.stroke;const l=ht.color_wire_con,c=ht.color_wire_pow,g=ht.color_wire_lose,v=ht.node;if(this.bitWidth==1&&(r=[l,c][this.value]),this.value==null&&(r=g),this.type==2&&this.checkHover(),this.type==2?xh(t,this.absX(),this.absY(),3,r):xh(t,this.absX(),this.absY(),3,v),(this.highlighted||f.lastSelected==this||this.isHover()&&!f.selected&&!f.shiftDown||f.multipleObjectSelections.contains(this))&&(t.strokeStyle=v,t.beginPath(),t.lineWidth=3,os(t,this.x,this.y,8,0,Math.PI*2,this.parent.x,this.parent.y,"RIGHT"),t.closePath(),t.stroke()),this.hover||f.lastSelected==this)if(this.showHover||f.lastSelected==this)if(mn.x=this.absX(),mn.y=this.absY()-15,this.type==2){var w="X";this.value!==void 0&&(w=this.value.toString(16)),this.label.length?mn.string=`${this.label} : ${w}`:mn.string=w}else this.label.length&&(mn.string=this.label);else setTimeout(()=>{f.hover&&(f.hover.showHover=!0),ye(!0),Uf(globalScope)},400)}checkDeleted(){this.deleted&&this.delete(),this.connections.length==0&&this.type==2&&this.delete()}update(){if(!embed){if(this==f.hover&&(f.hover=void 0),this.hover=this.isHover(),f.mouseDown||(this.absX()!=this.prevx||this.absY()!=this.prevy)&&(this.prevx=this.absX(),this.prevy=this.absY(),this.nodeConnect()),this.hover&&(f.hover=this),f.mouseDown&&(this.hover&&!f.selected||f.lastSelected==this)?(f.selected=!0,f.lastSelected=this,this.clicked=!0):this.clicked=!1,!this.wasClicked&&this.clicked){if(this.wasClicked=!0,this.prev="a",this.type==2){if(!f.shiftDown&&f.multipleObjectSelections.contains(this))for(var t=0;t<f.multipleObjectSelections.length;t++)f.multipleObjectSelections[t].startDragging();f.shiftDown?(f.lastSelected=void 0,f.multipleObjectSelections.contains(this)?f.multipleObjectSelections.clean(this):f.multipleObjectSelections.push(this)):f.lastSelected=this}}else if(this.wasClicked&&this.clicked){if(!f.shiftDown&&f.multipleObjectSelections.contains(this))for(var t=0;t<f.multipleObjectSelections.length;t++)f.multipleObjectSelections[t].drag();if(this.type==2){if(this.connections.length==1&&this.connections[0].absX()==f.mouseX&&this.absX()==f.mouseX){this.y=f.mouseY-this.parent.y,this.prev="a";return}if(this.connections.length==1&&this.connections[0].absY()==f.mouseY&&this.absY()==f.mouseY){this.x=f.mouseX-this.parent.x,this.prev="a";return}if(this.connections.length==1&&this.connections[0].absX()==this.absX()&&this.connections[0].absY()==this.absY()){this.connections[0].clicked=!0,this.connections[0].wasClicked=!0,f.lastSelected=this.connections[0],this.delete();return}}this.prev=="a"&&Rd(f.mouseX,f.mouseY,this.absX(),this.absY())>=10?Math.abs(this.x+this.parent.x-f.mouseX)>Math.abs(this.y+this.parent.y-f.mouseY)?this.prev="x":this.prev="y":this.prev=="x"&&this.absY()==f.mouseY?this.prev="a":this.prev=="y"&&this.absX()==f.mouseX&&(this.prev="a")}else if(this.wasClicked&&!this.clicked){if(this.wasClicked=!1,f.mouseX==this.absX()&&f.mouseY==this.absY())return;var n,r,l,c,g=0,v,w;l=f.mouseX,c=f.mouseY;const D=this.absX(),T=this.absY();if(D!=l&&T!=c&&(this.prev=="a"&&Rd(f.mouseX,f.mouseY,this.absX(),this.absY())>=10&&(Math.abs(this.x+this.parent.x-f.mouseX)>Math.abs(this.y+this.parent.y-f.mouseY)?this.prev="x":this.prev="y"),g=1,this.prev=="x"?(n=l,r=T):this.prev=="y"&&(r=c,n=D)),g==1){for(var t=0;t<this.parent.scope.allNodes.length;t++)if(n==this.parent.scope.allNodes[t].absX()&&r==this.parent.scope.allNodes[t].absY()){v=this.parent.scope.allNodes[t];break}if(v==null){v=new X(n,r,2,this.scope.root);for(var t=0;t<this.parent.scope.wires.length;t++)if(this.parent.scope.wires[t].checkConvergence(v)){this.parent.scope.wires[t].converge(v);break}}this.connect(v)}for(var t=0;t<this.parent.scope.allNodes.length;t++)if(l==this.parent.scope.allNodes[t].absX()&&c==this.parent.scope.allNodes[t].absY()){w=this.parent.scope.allNodes[t];break}if(w==null){w=new X(l,c,2,this.scope.root);for(var t=0;t<this.parent.scope.wires.length;t++)if(this.parent.scope.wires[t].checkConvergence(w)){this.parent.scope.wires[t].converge(w);break}}g==0?this.connect(w):v.connect(w),f.lastSelected==this&&(f.lastSelected=w)}this.type==2&&f.mouseDown==!1&&(this.connections.length==2?(this.connections[0].absX()==this.connections[1].absX()||this.connections[0].absY()==this.connections[1].absY())&&(this.connections[0].connect(this.connections[1]),this.delete()):this.connections.length==0&&this.delete())}}delete(){$e(!0),this.deleted=!0,this.parent.scope.allNodes.clean(this),this.parent.scope.nodes.clean(this),this.parent.scope.root.nodeList.clean(this),f.lastSelected==this&&(f.lastSelected=void 0);for(var t=0;t<this.connections.length;t++)this.connections[t].connections.clean(this),this.connections[t].checkDeleted();zi(1),Ei(!0),ge()}isClicked(){return this.absX()==f.mouseX&&this.absY()==f.mouseY}isHover(){return this.absX()==f.mouseX&&this.absY()==f.mouseY}nodeConnect(){for(var t=this.absX(),n=this.absY(),r,l=0;l<this.parent.scope.allNodes.length;l++)if(this!=this.parent.scope.allNodes[l]&&t==this.parent.scope.allNodes[l].absX()&&n==this.parent.scope.allNodes[l].absY()){if(r=this.parent.scope.allNodes[l],this.type==2){for(var c=0;c<this.connections.length;c++)r.connect(this.connections[c]);this.delete()}else this.connect(r);break}if(r==null){for(var l=0;l<this.parent.scope.wires.length;l++)if(this.parent.scope.wires[l].checkConvergence(this)){var r=this;this.type!=2&&(r=new X(this.absX(),this.absY(),2,this.scope.root),this.connect(r)),this.parent.scope.wires[l].converge(r);break}}}processVerilog(){this.type==NODE_INPUT&&this.parent.isVerilogResolvable()&&this.scope.stack.push(this.parent);for(var t=0;t<this.connections.length;t++)this.connections[t].verilogLabel!=this.verilogLabel&&(this.connections[t].verilogLabel=this.verilogLabel,this.scope.stack.push(this.connections[t]))}}X.prototype.propagationDelay=0;X.prototype.cleanDelete=X.prototype.delete;X.prototype.processVerilog=function(){this.type==NODE_INPUT&&this.scope.stack.push(this.parent);for(var i=0;i<this.connections.length;i++)this.connections[i].verilogLabel!=this.verilogLabel&&(this.connections[i].verilogLabel=this.verilogLabel,this.scope.stack.push(this.connections[i]))};function Za(i=0,t=globalScope){let n=20;const r={};for(let c=0;c<t.Input.length-1;c++)t.Input[c].layoutProperties.x===i&&(r[t.Input[c].layoutProperties.y]=1);for(let c=0;c<t.Output.length;c++)t.Output[c].layoutProperties.x===i&&(r[t.Output[c].layoutProperties.y]=1);for(;r[n]||r[n+10]||r[n-10];)n+=10;const l=n+20;if(l>t.layout.height){const c=t.layout.height;t.layout.height=l;for(let g=0;g<t.Input.length;g++)t.Input[g].layoutProperties.y===c&&(t.Input[g].layoutProperties.y=t.layout.height);for(let g=0;g<t.Output.length;g++)t.Output[g].layoutProperties.y===c&&(t.Output[g].layoutProperties.y=t.layout.height)}return n}var Si={};function js(i){if(!(i==null||i<2||i>10)&&this.inputSize!=i){i=parseInt(i,10);var t=new Si[this.objectType](this.x,this.y,this.scope,this.direction,i,this.bitWidth);return this.delete(),f.lastSelected=t,t}}function Ns(i){f.clockEnabled=i}const kh={CONTEXT_SIMULATOR:0,CONTEXT_ASSIGNMENTS:1},rs={NOTPRESENT:0,WRONGBITWIDTH:1,DUPLICATE_ID_DATA:2,DUPLICATE_ID_SCOPE:3,NO_RST:4},ch="/testbench";function wm(i,t=void 0){if(i===void 0)return"X";const n=(i>>>0).toString(2);return t?"0".repeat(t-n.length)+n:n}class es{constructor(t,n=0,r=0){this.currentCase=r,this.currentGroup=n,this.testData=t}isCaseValid(){if(this.currentGroup>=this.data.groups.length||this.currentGroup<0)return!1;const t=this.testData.groups[this.currentGroup].inputs[0].values.length;return!(this.currentCase>=t||this.currentCase<0)}setCase(t,n){return new es(this.testData,t,n).isCaseValid()?(this.currentGroup=t,this.currentCase=n,!0):!1}groupNext(){const t=new es(this.testData,this.currentGroup,0),n=t.testData.groups.length;let r=t.testData.groups[t.currentGroup].inputs[0].values.length;for(;r===0||this.currentGroup===t.currentGroup;){if(t.currentGroup++,t.currentGroup>=n)return!1;r=t.testData.groups[t.currentGroup].inputs[0].values.length}return this.currentGroup=t.currentGroup,this.currentCase=t.currentCase,!0}groupPrev(){const t=new es(this.testData,this.currentGroup,0);t.testData.groups.length;let n=t.testData.groups[t.currentGroup].inputs[0].values.length;for(;n===0||this.currentGroup===t.currentGroup;){if(t.currentGroup--,t.currentGroup<0)return!1;n=t.testData.groups[t.currentGroup].inputs[0].values.length}return this.currentGroup=t.currentGroup,this.currentCase=t.currentCase,!0}caseNext(){const t=this.testData.groups[this.currentGroup].inputs[0].values.length;return this.currentCase>=t-1?this.groupNext():(this.currentCase++,!0)}casePrev(){if(this.currentCase<=0){if(!this.groupPrev())return!1;const t=this.testData.groups[this.currentGroup].inputs[0].values.length;return this.currentCase=t-1,!0}return this.currentCase--,!0}goToFirstValidGroup(){const t=new es(this.testData,0,0);return t.testData.groups[this.currentGroup].inputs[0].values.length>0?!0:t.groupNext()?(this.currentGroup=t.currentGroup,this.currentCase=t.currentCase,!0):!1}}function gd(i){Hs();const n=`
    <div style="text-align: center;">
        <div style="margin: 20px;">
            
    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-window" viewBox="0 0 16 16">
      <path d="M2.5 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm1 .5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
      <path d="M2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2H2zm13 2v2H1V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zM2 14a1 1 0 0 1-1-1V6h14v7a1 1 0 0 1-1 1H2z"/>
    </svg>
    
        </div>
        <p>A browser pop-up is opened to create the test</p>
        <p>Please save the test to open it here</p>
    </div>
    `;$("#setTestbenchData").dialog({resizable:!1,width:"auto",buttons:[{text:"Close Pop-Up",click(){$(this).dialog("close"),i.close()}}]}),$("#setTestbenchData").empty(),$("#setTestbenchData").append(n)}function Sm(i,t=globalScope,n=kh.CONTEXT_SIMULATOR){if(Ls(i,t).ok||De("Testbench: Some elements missing from circuit. Click Validate to know more"),n===kh.CONTEXT_SIMULATOR){const l=new es(i);if(!l.goToFirstValidGroup()){De("Testbench: The test is empty");return}globalScope.testbenchData=l,Xo();return}}function Xo(){if($(".tb-dialog-button").off("click"),$(".tb-case-button").off("click"),Hh(),globalScope.testbenchData!=null){const{testbenchData:i}=globalScope;Em(i),$(".tb-case-button#prev-case-btn").on("click",fi.previousCaseButton),$(".tb-case-button#next-case-btn").on("click",fi.nextCaseButton),$(".tb-case-button#prev-group-btn").on("click",fi.previousGroupButton),$(".tb-case-button#next-group-btn").on("click",fi.nextGroupButton),$(".tb-dialog-button#change-test-btn").on("click",fi.changeTestButton),$(".tb-dialog-button#runall-btn").on("click",fi.runAllButton),$(".tb-dialog-button#edit-test-btn").on("click",fi.editTestButton),$(".tb-dialog-button#validate-btn").on("click",fi.validateButton),$(".tb-dialog-button#remove-test-btn").on("click",fi.removeTestButton)}$(".tb-dialog-button#attach-test-btn").on("click",fi.attachTestButton)}const fi={previousCaseButton:()=>{if(!Ls(globalScope.testbenchData.testData,globalScope).ok){De("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.casePrev(),fi.computeCase()},nextCaseButton:()=>{if(!Ls(globalScope.testbenchData.testData,globalScope).ok){De("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.caseNext(),fi.computeCase()},previousGroupButton:()=>{if(!Ls(globalScope.testbenchData.testData,globalScope).ok){De("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.groupPrev(),fi.computeCase()},nextGroupButton:()=>{if(!Ls(globalScope.testbenchData.testData,globalScope).ok){De("Testbench: Some elements missing from circuit. Click Validate to know more");return}globalScope.testbenchData.groupNext(),fi.computeCase()},changeTestButton:()=>{Ha("create")},runAllButton:()=>{if(!Ls(globalScope.testbenchData.testData,globalScope).ok){De("Testbench: Some elements missing from circuit. Click Validate to know more");return}const t=xm(globalScope.testbenchData.testData,globalScope),{passed:n}=t.summary,{total:r}=t.summary,l=JSON.stringify(t.detailed);$("#runall-summary").text(`${n} out of ${r}`),$("#runall-detailed-link").on("click",()=>{Ha("result",l)}),$(".testbench-runall-label").css("display","table-cell"),$(".testbench-runall-label").delay(5e3).fadeOut("slow")},editTestButton:()=>{const i=JSON.stringify(globalScope.testbenchData.testData);Ha("edit",i)},validateButton:()=>{const i=Ls(globalScope.testbenchData.testData,globalScope);Tm(i)},removeTestButton:()=>{confirm("Are you sure you want to remove the test from the circuit?")&&(globalScope.testbenchData=void 0,Hh())},attachTestButton:()=>{Ha("create")},rerunTestButton:()=>{fi.computeCase()},computeCase:()=>{hf(globalScope.testbenchData);const i=km(globalScope.testbenchData,globalScope);Wm(globalScope.testbenchData,i)}};function Hh(){if($(".testbench-manual-panel .minimize").css("display")!=="none"){if(globalScope.testbenchData===void 0){$(".tb-test-not-null").hide(),$(".tb-test-null").show();return}$(".tb-test-null").hide(),$(".tb-test-not-null").show()}}function xm(i,t=globalScope){Ns(!1);const{inputs:n,outputs:r,reset:l}=Fh(i,t);let c=0,g=0;i.groups.forEach(w=>{w.outputs.forEach(D=>D.results=[]);for(let D=0;D<w.n;D++){c++,$h(n,w,D,t),i.type==="seq"&&af(t);const T=zh(i,r);let R=!0;T.forEach((M,L)=>{const E=w.outputs.find(Q=>Q.label===L);E.results.push(T.get(L)),E.values[D]!==T.get(L)&&(R=!1)}),R&&g++}i.type==="seq"&&lf(l)}),Ns(!0);const v={};return v.detailed=i,v.summary={passed:g,total:c},v}function km(i,t){const n=i.testData;let r;return n.type==="comb"?r=Cm(i,t):n.type==="seq"&&(r=Dm(i,t)),r}function Cm(i,t){const n=i.testData,r=i.currentGroup,l=i.currentCase,{inputs:c,outputs:g}=Fh(n,t),v=n.groups[r];Ns(!1),$h(c,v,l,t);const w=zh(n,g);return Ns(!0),w}function Dm(i,t){const n=i.testData,r=i.currentGroup,l=i.currentCase,{inputs:c,outputs:g,reset:v}=Fh(n,t),w=n.groups[r];Ns(!1),lf(v,t);for(let T=0;T<=l;T++)$h(c,w,T,t),af(t);const D=zh(n,g);return Ns(!0),D}function $h(i,t,n,r){t.inputs.forEach(l=>{i[l.label].state=parseInt(l.values[n],2)}),zs(r)}function zh(i,t){const n=new Map;return i.groups[0].outputs.forEach(r=>{const l=t[r.label].nodeList[0].value,c=t[r.label].nodeList[0].bitWidth;n.set(r.label,wm(l,c))}),n}function Tm(i){let n=`
    <div style="text-align: center; color: white;">
        <div style="margin: 20px;">
            
    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="white" class="bi bi-check" viewBox="0 0 16 16">
      <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>
    </svg>
    
        </div>
        All good. No validation errors
    </div>
    `;i.ok||(n=`
        <div style="text-align: center; color: white;">
            <p>Please fix these errors to run tests</p>
            <table class="validation-ui-table">
                <tr>
                    <th><b>Identifier</b></th>
                    <th><b>Error</b></th>
                </tr>
        `,i.invalids.forEach(r=>{n+=`
                <tr>
                    <td>${r.identifier}</td>
                    <td>${r.message}</td>
                </tr>
            `}),n+="</table></div>"),$("#testbenchValidate").dialog({resizable:!1,width:"auto",buttons:[{text:"Ok",click(){$(this).dialog("close")}},{text:"Auto Fix",click(){const r=_m(i);De(`Testbench: Auto fixed ${r} errors`),$(this).dialog("close")}}]}),$("#testbenchValidate").empty(),$("#testbenchValidate").append(n)}function Ls(i,t){let n=[];if(Pm(i)||n.push({type:rs.DUPLICATE_ID_DATA,identifier:"-",message:"Duplicate identifiers in test data"}),Im(t)||n.push({type:rs.DUPLICATE_ID_SCOPE,identifier:"-",message:"Duplicate identifiers in circuit"}),n.length>0)return{ok:!1,invalids:n};const r=Lm(i,t),l=Om(i,t);return n=r.ok?n:n.concat(r.invalids),n=l.ok?n:n.concat(l.invalids),i.type==="seq"&&(t.Input.some(g=>g.label==="RST"&&g.bitWidth===1&&g.objectType==="Input")||n.push({type:rs.NO_RST,identifier:"RST",message:"Reset(RST) not present in circuit"})),n.length>0?{ok:!1,invalids:n}:{ok:!0}}function _m(i){let t=0;return i.ok||i.invalids.filter(r=>r.type===rs.WRONGBITWIDTH).forEach(r=>{const{element:l,expectedBitWidth:c}=r.extraInfo;l.newBitWidth(c),t++}),t}function Pm(i){const t=i.groups[0].inputs.map(l=>l.label),n=i.groups[0].outputs.map(l=>l.label),r=t.concat(n);return new Set(r).size===r.length}function Im(i){const t=i.Input.map(l=>l.label),n=i.Output.map(l=>l.label);let r=t.concat(n);return r=r.filter(l=>l!=""),new Set(r).size===r.length}function Lm(i,t){const n=[];return i.groups[0].inputs.forEach(r=>{const l=t.Input.find(c=>c.label===r.label);l===void 0?n.push({type:rs.NOTPRESENT,identifier:r.label,message:"Input is not present in the circuit"}):l.bitWidth!==r.bitWidth&&n.push({type:rs.WRONGBITWIDTH,identifier:r.label,extraInfo:{element:l,expectedBitWidth:r.bitWidth},message:`Input bitwidths don't match in circuit and test (${l.bitWidth} vs ${r.bitWidth})`})}),n.length>0?{ok:!1,invalids:n}:{ok:!0}}function Om(i,t){const n=[];return i.groups[0].outputs.forEach(r=>{const l=t.Output.find(c=>c.label===r.label);l===void 0?n.push({type:rs.NOTPRESENT,identifier:r.label,message:"Output is not present in the circuit"}):l.bitWidth!==r.bitWidth&&n.push({type:rs.WRONGBITWIDTH,identifier:r.label,extraInfo:{element:l,expectedBitWidth:r.bitWidth},message:`Output bitwidths don't match in circuit and test (${l.bitWidth} vs ${r.bitWidth})`})}),n.length>0?{ok:!1,invalids:n}:{ok:!0}}function Fh(i,t){const n={},r={};let l;return i.groups[0].inputs.forEach(c=>{n[c.label]=t.Input.find(g=>g.label===c.label)}),i.groups[0].outputs.forEach(c=>{r[c.label]=t.Output.find(g=>g.label===c.label)}),i.type==="seq"&&(l=t.Input.find(c=>c.label==="RST")),{inputs:n,outputs:r,reset:l}}function af(i){i.clockTick(),zs(i),i.clockTick(),zs(i)}function lf(i,t){i.state=1,zs(t),i.state=0,zs(t)}function Em(i){const t=i.testData,n=t.groups[0].inputs.length,r=t.groups[0].outputs.length;$("#tb-manual-table-inputs-head").attr("colspan",n),$("#tb-manual-table-outputs-head").attr("colspan",r),$(".testbench-runall-label").css("display","none"),$(".tb-data#data-title").children().eq(1).text(t.title||"Untitled"),$(".tb-data#data-type").children().eq(1).text(t.type==="comb"?"Combinational":"Sequential"),$("#tb-manual-table-labels").html("<th>LABELS</th>"),$("#tb-manual-table-bitwidths").html("<td>Bitwidth</td>"),t.groups[0].inputs.concat(t.groups[0].outputs).forEach(l=>{const c=`<th>${Fs(l.label)}</th>`,g=`<td>${Fs(l.bitWidth.toString())}</td>`;$("#tb-manual-table-labels").append(c),$("#tb-manual-table-bitwidths").append(g)}),hf(i)}function hf(i){const t=i.testData,n=i.currentGroup,r=i.currentCase,l=$("#tb-manual-table-current-case");l.empty(),l.append("<td>Current Case</td>"),$("#tb-manual-table-test-result").empty(),$("#tb-manual-table-test-result").append("<td>Result</td>"),t.groups[n].inputs.forEach(c=>{l.append(`<td>${Fs(c.values[r])}</td>`)}),t.groups[n].outputs.forEach(c=>{l.append(`<td>${Fs(c.values[r])}</td>`)}),$(".testbench-manual-panel .group-label").text(t.groups[n].label),$(".testbench-manual-panel .case-label").text(r+1)}function Wm(i,t){const n=i.testData,r=i.currentGroup,l=i.currentCase,c=$("#tb-manual-table-test-result");let g=n.groups[0].inputs.length;for(c.empty(),c.append("<td>Result</td>");g--;)c.append("<td> - </td>");for(const v of t.keys()){const w=t.get(v),D=n.groups[r].outputs.find(R=>R.label===v).values[l],T=w===D?"#17FC12":"#FF1616";c.append(`<td style="color: ${T}">${Fs(w)}</td>`)}}function Ha(i,t){const l=(window.height-800)/2,c=(window.width-1200)/2,g=`height=800,width=1200,top=${l},left=${c}`;let v;const w=D=>{if(D.origin!==window.origin||D.data.type!=="testData")return;const T=JSON.parse(D.data.data);window.removeEventListener("message",w),T.scopeID==globalScope.id&&(Sm(T.testData,globalScope,kh.CONTEXT_SIMULATOR),$("#setTestbenchData").dialog("close"))};if(i==="create"){const D=`${ch}?scopeID=${globalScope.id}&popUp=true`;v=window.open(D,"popupWindow",g),gd(v),window.addEventListener("message",w)}if(i==="edit"){const D=`${ch}?scopeID=${globalScope.id}&data=${t}&popUp=true`;v=window.open(D,"popupWindow",g),gd(v),window.addEventListener("message",w)}if(i==="result"){const D=`${ch}?scopeID=${globalScope.id}&result=${t}&popUp=true`;v=window.open(D,"popupWindow",g)}if(v&&i!=="result"){const D=setInterval(()=>{v.closed&&($("#setTestbenchData").dialog("isOpen")&&$("#setTestbenchData").dialog("close"),window.removeEventListener("message",w),clearInterval(D))},1e3)}}function Am(i){return{FlipFlop:"DflipFlop",Ram:"Rom"}[i]||i}function Mm(i,t){var n=new Si[Am(i.objectType)](i.x,i.y,t,...i.customData.constructorParamaters||[]);if(n.label=i.label,n.labelDirection=i.labelDirection||Go[fixDirection[n.direction]],i.propagationDelay===0?n.propagationDelay=0:n.propagationDelay=i.propagationDelay||n.propagationDelay,n.fixDirection(),i.customData.values)for(var r in i.customData.values)n[r]=i.customData.values[r];if(i.customData.nodes)for(const l in i.customData.nodes){const c=i.customData.nodes[l];if(c instanceof Array)for(let g=0;g<c.length;g++)n[l][g]=fd(n[l][g],c[g]);else n[l]=fd(n[l],c)}i.subcircuitMetadata&&(n.subcircuitMetadata=i.subcircuitMetadata)}function Nm(i=globalScope){let t=i.allNodes.length;for(let n=0;n<t;n++)i.allNodes[n].type!==2&&i.allNodes[n].parent.objectType==="CircuitElement"&&i.allNodes[n].delete(),i.allNodes.length!==t&&(n=0,t=i.allNodes.length)}function as(i,t){const n=moduleList.slice();i.restrictedCircuitElementsUsed=t.restrictedCircuitElementsUsed,t.allNodes.map(r=>ym(r,i));for(let r=0;r<t.allNodes.length;r++)mm(i.allNodes[r],t.allNodes[r]);for(let r=0;r<n.length;r++)if(t[n[r]])if(n[r]==="SubCircuit")for(let l=0;l<t[n[r]].length;l++)Bm(t[n[r]][l],i);else for(let l=0;l<t[n[r]].length;l++)Mm(t[n[r]][l],i);if(i.wires.map(r=>{r.updateData(i)}),Nm(i),t.verilogMetadata&&(i.verilogMetadata=t.verilogMetadata),t.testbenchData&&(globalScope.testbenchData=new es(t.testbenchData.testData,t.testbenchData.currentGroup,t.testbenchData.currentCase)),t.layout)i.layout=t.layout;else{i.layout={},i.layout.width=100,i.layout.height=Math.max(i.Input.length,i.Output.length)*20+20,i.layout.title_x=50,i.layout.title_y=13;for(let r=0;r<i.Input.length;r++)i.Input[r].layoutProperties={x:0,y:i.layout.height/2-i.Input.length*10+20*r+10,id:us()};for(let r=0;r<i.Output.length;r++)i.Output[r].layoutProperties={x:i.layout.width,y:i.layout.height/2-i.Output.length*10+20*r+10,id:us()}}i.layout.titleEnabled===void 0&&(i.layout.titleEnabled=!0)}function Hn(i){if(!i){Ro(__projectName);return}Ro(i.name),globalScope=void 0,Of(),$(".circuits").remove();for(let c=0;c<i.scopes.length;c++){var t=!1,n=!1;i.scopes[c].verilogMetadata&&(t=i.scopes[c].verilogMetadata.isVerilogCircuit,n=i.scopes[c].verilogMetadata.isMainCircuit);const g=fs(i.scopes[c].name||"Untitled",i.scopes[c].id,t,n);as(g,i.scopes[c]),globalScope=g,embed?globalScope.centerFocus(!0):globalScope.centerFocus(!1),ps(globalScope,!0),As(),Hs()}if(f.changeClockTime(i.timePeriod||500),f.clockEnabled=i.clockEnabled===void 0?!0:i.clockEnabled,embed||$n(f.lastSelected),i.orderedTabs){var r=$(".circuits").detach(),l=$("#tabsBar").children().detach();for(const c of i.orderedTabs)$("#tabsBar").append(r.filter(`#${c}`));$("#tabsBar").append(l)}i.focussedCircuit&&Ur(i.focussedCircuit),Xo(),$e(!0),ye(!0),mi(!0),embed||ir.reset(),ge(1)}function Bm(i,t){new Yo(i.x,i.y,t,i.id,i)}function uf(i=globalScope){if(Bs()||Pe()){ii("Subcircuit cannot be inserted in this mode");return}$("#insertSubcircuitDialog").empty();let t=!0;for(id in ae)!ae[id].checkDependency(i.id)&&ae[id].isVisible()&&(t=!1,$("#insertSubcircuitDialog").append(`<label class="option custom-radio inline"><input type="radio" name="subCircuitId" value="${id}" />${ae[id].name}<span></span></label>`));t&&$("#insertSubcircuitDialog").append([$("#insertSubcircuitcontent").dialog(),$("#insertSubcircuitcontent").dialog("close")]),$("#insertSubcircuitDialog").dialog({resizable:!1,maxHeight:800,width:450,maxWidth:800,minWidth:250,buttons:t?[]:[{text:"Insert SubCircuit",click(){$("input[name=subCircuitId]:checked").val()&&(f.lastSelected=new Yo(void 0,void 0,globalScope,$("input[name=subCircuitId]:checked").val()),$(this).dialog("close"))}}]})}class Yo extends Bt{constructor(t,n,r=globalScope,l=void 0,c=void 0){var w,D;super(t,n,r,"RIGHT",1),this.objectType="SubCircuit",this.scope.SubCircuit.push(this),this.id=l||prompt("Enter Id: "),this.directionFixed=!0,this.fixedBitWidth=!0,this.savedData=c,this.inputNodes=[],this.outputNodes=[],this.localScope=new $s,this.preventCircuitSwitch=!1,this.rectangleObject=!1;var g=ae[this.id];if(g==null?ii(`SubCircuit : ${c&&c.title||this.id} Not found`):xf(g)?g.checkDependency(r.id)&&ii("Cyclic Circuit Error"):ii(`SubCircuit : ${c&&c.title||g.name} is an empty circuit`),g==null||g.checkDependency(r.id)){if(c){for(var v=0;v<c.inputNodes.length;v++)r.allNodes[c.inputNodes[v]].deleted=!0;for(var v=0;v<c.outputNodes.length;v++)r.allNodes[c.outputNodes[v]].deleted=!0}return}if(this.savedData!=null){vl(!0),ge(),this.version=this.savedData.version||"1.0",this.id=this.savedData.id,this.label=this.savedData.label||"",this.labelDirection=this.savedData.labelDirection||"RIGHT";for(var v=0;v<this.savedData.inputNodes.length;v++)this.inputNodes.push(this.scope.allNodes[this.savedData.inputNodes[v]]),this.inputNodes[v].parent=this,this.inputNodes[v].layout_id=(w=g.Input[v])==null?void 0:w.layoutProperties.id;for(var v=0;v<this.savedData.outputNodes.length;v++)this.outputNodes.push(this.scope.allNodes[this.savedData.outputNodes[v]]),this.outputNodes[v].parent=this,this.outputNodes[v].layout_id=(D=g.Output[v])==null?void 0:D.layoutProperties.id;if(this.version=="1.0"){this.version="2.0",this.x-=g.layout.width/2,this.y-=g.layout.height/2;for(var v=0;v<this.inputNodes.length;v++)this.inputNodes[v].x=g.Input[v].layoutProperties.x,this.inputNodes[v].y=g.Input[v].layoutProperties.y,this.inputNodes[v].leftx=this.inputNodes[v].x,this.inputNodes[v].lefty=this.inputNodes[v].y;for(var v=0;v<this.outputNodes.length;v++)this.outputNodes[v].x=g.Output[v].layoutProperties.x,this.outputNodes[v].y=g.Output[v].layoutProperties.y,this.outputNodes[v].leftx=this.outputNodes[v].x,this.outputNodes[v].lefty=this.outputNodes[v].y}this.version=="2.0"&&(this.leftDimensionX=0,this.upDimensionY=0,this.rightDimensionX=g.layout.width,this.downDimensionY=g.layout.height),this.nodeList.extend(this.inputNodes),this.nodeList.extend(this.outputNodes)}else this.version="2.0";this.data=JSON.parse(Hs(g)),this.buildCircuit(),this.makeConnections()}makeConnections(){var t,n;for(let r=0;r<this.inputNodes.length;r++)(t=this.localScope.Input[r])==null||t.output1.connectWireLess(this.inputNodes[r]),this.localScope.Input[r].output1.subcircuitOverride=!0;for(let r=0;r<this.outputNodes.length;r++)(n=this.localScope.Output[r])==null||n.inp1.connectWireLess(this.outputNodes[r]),this.outputNodes[r].subcircuitOverride=!0}removeConnections(){var t,n;for(let r=0;r<this.inputNodes.length;r++)(t=this.localScope.Input[r])==null||t.output1.disconnectWireLess(this.inputNodes[r]);for(let r=0;r<this.outputNodes.length;r++)(n=this.localScope.Output[r])==null||n.inp1.disconnectWireLess(this.outputNodes[r])}buildCircuit(){var t=ae[this.id];if(as(this.localScope,this.data),this.localScope.name=this.data.name,this.lastUpdated=this.localScope.timeStamp,$e(!0),ye(!0),this.savedData==null){this.leftDimensionX=0,this.upDimensionY=0,this.rightDimensionX=t.layout.width,this.downDimensionY=t.layout.height;for(var n=0;n<t.Output.length;n++){var r=new X(t.Output[n].layoutProperties.x,t.Output[n].layoutProperties.y,1,this,t.Output[n].bitWidth);r.layout_id=t.Output[n].layoutProperties.id,this.outputNodes.push(r)}for(var n=0;n<t.Input.length;n++){var r=new X(t.Input[n].layoutProperties.x,t.Input[n].layoutProperties.y,0,this,t.Input[n].bitWidth);r.layout_id=t.Input[n].layoutProperties.id,this.inputNodes.push(r)}}}reBuild(){}reBuildCircuit(){this.data=JSON.parse(Hs(ae[this.id])),this.localScope=new $s(data.name),as(this.localScope,this.data),this.lastUpdated=this.localScope.timeStamp,this.scope.timeStamp=this.localScope.timeStamp}reset(){this.removeConnections();for(var t=ae[this.id],n=0;n<t.SubCircuit.length;n++)t.SubCircuit[n].reset();let r=t.Input.length==0&&t.Output.length==0;for(let D of circuitElementList)if(t[D].length>0&&t[D][0].canShowInSubcircuit){r=!1;break}r&&ii(`SubCircuit : ${t.name} is an empty circuit`),t.layout.height=t.layout.height,t.layout.width=t.layout.width,this.leftDimensionX=0,this.upDimensionY=0,this.rightDimensionX=t.layout.width,this.downDimensionY=t.layout.height;for(var l={},n=0;n<t.Input.length;n++)l[t.Input[n].layoutProperties.id]=[t.Input[n],void 0];for(var n=0;n<this.inputNodes.length;n++)l.hasOwnProperty(this.inputNodes[n].layout_id)?l[this.inputNodes[n].layout_id][1]=this.inputNodes[n]:(this.scope.backups=[],this.inputNodes[n].delete(),this.nodeList.clean(this.inputNodes[n]));for(id in l)l[id][1]&&(l[id][0].layoutProperties.x==l[id][1].x&&l[id][0].layoutProperties.y==l[id][1].y?l[id][1].bitWidth=l[id][0].bitWidth:(this.scope.backups=[],l[id][1].delete(),this.nodeList.clean(l[id][1]),l[id][1]=new X(l[id][0].layoutProperties.x,l[id][0].layoutProperties.y,0,this,l[id][0].bitWidth),l[id][1].layout_id=id));this.inputNodes=[];for(var n=0;n<t.Input.length;n++){var c=l[t.Input[n].layoutProperties.id][0];if(l[c.layoutProperties.id][1])this.inputNodes.push(l[c.layoutProperties.id][1]);else{var g=new X(c.layoutProperties.x,c.layoutProperties.y,0,this,c.bitWidth);g.layout_id=c.layoutProperties.id,this.inputNodes.push(g)}}for(var v={},n=0;n<t.Output.length;n++)v[t.Output[n].layoutProperties.id]=[t.Output[n],void 0];for(var n=0;n<this.outputNodes.length;n++)v.hasOwnProperty(this.outputNodes[n].layout_id)?v[this.outputNodes[n].layout_id][1]=this.outputNodes[n]:(this.outputNodes[n].delete(),this.nodeList.clean(this.outputNodes[n]));for(id in v)v[id][1]&&(v[id][0].layoutProperties.x==v[id][1].x&&v[id][0].layoutProperties.y==v[id][1].y?v[id][1].bitWidth=v[id][0].bitWidth:(v[id][1].delete(),this.nodeList.clean(v[id][1]),v[id][1]=new X(v[id][0].layoutProperties.x,v[id][0].layoutProperties.y,1,this,v[id][0].bitWidth),v[id][1].layout_id=id));this.outputNodes=[];for(var n=0;n<t.Output.length;n++){var w=v[t.Output[n].layoutProperties.id][0];if(v[w.layoutProperties.id][1])this.outputNodes.push(v[w.layoutProperties.id][1]);else{var g=new X(w.layoutProperties.x,w.layoutProperties.y,1,this,w.bitWidth);g.layout_id=w.layoutProperties.id,this.outputNodes.push(g)}}t.timeStamp>this.lastUpdated&&this.reBuildCircuit(),this.localScope.reset(),$e(!0),Ei(!0),this.makeConnections()}click(){var t=this.getElementHover();t&&(this.lastClickedElement=t,t.wasClicked=!0)}getElementHover(){this.layoutProperties.rightDimensionX,this.layoutProperties.leftDimensionX,this.layoutProperties.upDimensionY,this.layoutProperties.downDimensionY;for(let n of circuitElementList)if(this.localScope[n].length!==0&&this.localScope[n][0].canShowInSubcircuit)for(let r=0;r<this.localScope[n].length;r++){var t=this.localScope[n][r];if(t.subcircuitMetadata.showInSubcircuit&&t.isSubcircuitHover(this.x,this.y))return t}}releaseClick(){this.lastClickedElement!==void 0&&(this.lastClickedElement.wasClicked=!1,this.lastClickedElement=void 0)}addInputs(){for(let t=0;t<subCircuitInputList.length;t++)for(let n=0;n<this.localScope[subCircuitInputList[t]].length;n++)f.simulationQueue.add(this.localScope[subCircuitInputList[t]][n],0);for(let t=0;t<this.localScope.SubCircuit.length;t++)this.localScope.SubCircuit[t].addInputs()}dblclick(){this.elementHover||Ur(this.id)}saveObject(){var t={x:this.x,y:this.y,id:this.id,label:this.label,labelDirection:this.labelDirection,inputNodes:this.inputNodes.map(tt),outputNodes:this.outputNodes.map(tt),version:this.version};return t}isResolvable(){return!1}removePropagation(){}verilogName(){return dn(ae[this.id].name)}determine_label(t,n){return t==0?["left",5,5]:t==ae[this.id].layout.width?["right",-5,5]:n==0?["center",0,13]:["center",0,-6]}checkHover(){super.checkHover(),this.elementHover&&(this.elementHover.hover=!1,this.elementHover=void 0,f.hover=void 0);var t=this.getElementHover();t&&(t.hover=!0,this.elementHover=t,this.hover=!1,f.hover=t)}customDraw(){var t=ae[this.id],n=f.context;n.lineWidth=globalScope.scale*3,n.strokeStyle=ht.stroke,n.fillStyle=ht.fill;var r=this.x,l=this.y;n.strokeStyle=ht.stroke,n.fillStyle=ht.fill,n.lineWidth=Nt(3),n.beginPath(),Ee(n,-this.leftDimensionX,-this.upDimensionY,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY,this.x,this.y,[this.direction,"RIGHT"][+this.directionFixed]),this.elementHover||(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(n.fillStyle=ht.hover_select),n.fill(),n.stroke(),n.beginPath(),n.textAlign="center",n.fillStyle="black",this.version=="1.0"?Xt(n,t.name,r,l-t.layout.height/2+13,11):this.version=="2.0"?t.layout.titleEnabled&&Xt(n,t.name,t.layout.title_x+r,l+t.layout.title_y,11):console.log("Unknown Version: ",this.version);for(var c=0;c<t.Input.length;c++)if(t.Input[c].label){var g=this.determine_label(this.inputNodes[c].x,this.inputNodes[c].y);n.textAlign=g[0],Xt(n,t.Input[c].label,this.inputNodes[c].x+g[1]+r,l+this.inputNodes[c].y+g[2],12)}for(var c=0;c<t.Output.length;c++)if(t.Output[c].label){var g=this.determine_label(this.outputNodes[c].x,this.outputNodes[c].y);n.textAlign=g[0],Xt(n,t.Output[c].label,this.outputNodes[c].x+g[1]+r,l+this.outputNodes[c].y+g[2],12)}n.fill();for(let v=0;v<this.outputNodes.length;v++)this.outputNodes[v].draw();for(let v=0;v<this.inputNodes.length;v++)this.inputNodes[v].draw();for(let v of circuitElementList)if(this.localScope[v].length!==0&&this.localScope[v][0].canShowInSubcircuit)for(let w=0;w<this.localScope[v].length;w++)this.localScope[v][w].subcircuitMetadata.showInSubcircuit&&this.localScope[v][w].drawLayoutMode(this.x,this.y)}}Yo.prototype.centerElement=!0;Yo.prototype.propagationDelayFixed=!0;var dh={exports:{}},md;function Gs(){return md||(md=1,function(i,t){(function(n,r){i.exports=r()})(Kg,function(){var n=navigator.userAgent,r=navigator.platform,l=/gecko\/\d/i.test(n),c=/MSIE \d/.test(n),g=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),v=/Edge\/(\d+)/.exec(n),w=c||g||v,D=w&&(c?document.documentMode||6:+(v||g)[1]),T=!v&&/WebKit\//.test(n),R=T&&/Qt\/\d+\.\d+/.test(n),M=!v&&/Chrome\//.test(n),L=/Opera\//.test(n),E=/Apple Computer/.test(navigator.vendor),Q=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),lt=/PhantomJS/.test(n),B=E&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),A=/Android/.test(n),q=B||A||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),z=B||/Mac/.test(r),it=/\bCrOS\b/.test(n),xt=/win/i.test(r),rt=L&&n.match(/Version\/(\d*\.\d*)/);rt&&(rt=Number(rt[1])),rt&&rt>=15&&(L=!1,T=!0);var at=z&&(R||L&&(rt==null||rt<12.11)),wt=l||w&&D>=9;function Dt(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var Wt=function(e,s){var h=e.className,a=Dt(s).exec(h);if(a){var u=h.slice(a.index+a[0].length);e.className=h.slice(0,a.index)+(u?a[1]+u:"")}};function Pt(e){for(var s=e.childNodes.length;s>0;--s)e.removeChild(e.firstChild);return e}function K(e,s){return Pt(e).appendChild(s)}function J(e,s,h,a){var u=document.createElement(e);if(h&&(u.className=h),a&&(u.style.cssText=a),typeof s=="string")u.appendChild(document.createTextNode(s));else if(s)for(var m=0;m<s.length;++m)u.appendChild(s[m]);return u}function Y(e,s,h,a){var u=J(e,s,h,a);return u.setAttribute("role","presentation"),u}var ee;document.createRange?ee=function(e,s,h,a){var u=document.createRange();return u.setEnd(a||e,h),u.setStart(e,s),u}:ee=function(e,s,h){var a=document.body.createTextRange();try{a.moveToElementText(e.parentNode)}catch{return a}return a.collapse(!0),a.moveEnd("character",h),a.moveStart("character",s),a};function Kt(e,s){if(s.nodeType==3&&(s=s.parentNode),e.contains)return e.contains(s);do if(s.nodeType==11&&(s=s.host),s==e)return!0;while(s=s.parentNode)}function Zt(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function Yt(e,s){var h=e.className;Dt(s).test(h)||(e.className+=(h?" ":"")+s)}function Rt(e,s){for(var h=e.split(" "),a=0;a<h.length;a++)h[a]&&!Dt(h[a]).test(s)&&(s+=" "+h[a]);return s}var qt=function(e){e.select()};B?qt=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:w&&(qt=function(e){try{e.select()}catch{}});function pe(e){var s=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,s)}}function oe(e,s,h){s||(s={});for(var a in e)e.hasOwnProperty(a)&&(h!==!1||!s.hasOwnProperty(a))&&(s[a]=e[a]);return s}function ce(e,s,h,a,u){s==null&&(s=e.search(/[^\s\u00a0]/),s==-1&&(s=e.length));for(var m=a||0,y=u||0;;){var k=e.indexOf("	",m);if(k<0||k>=s)return y+(s-m);y+=k-m,y+=h-y%h,m=k+1}}var ot=function(){this.id=null,this.f=null,this.time=0,this.handler=pe(this.onTimeout,this)};ot.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},ot.prototype.set=function(e,s){this.f=s;var h=+new Date+e;(!this.id||h<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=h)};function V(e,s){for(var h=0;h<e.length;++h)if(e[h]==s)return h;return-1}var st=50,N={toString:function(){return"CodeMirror.Pass"}},U={scroll:!1},bt={origin:"*mouse"},vt={origin:"+move"};function Lt(e,s,h){for(var a=0,u=0;;){var m=e.indexOf("	",a);m==-1&&(m=e.length);var y=m-a;if(m==e.length||u+y>=s)return a+Math.min(y,s-u);if(u+=m-a,u+=h-u%h,a=m+1,u>=s)return a}}var Ut=[""];function Qt(e){for(;Ut.length<=e;)Ut.push(Ht(Ut)+" ");return Ut[e]}function Ht(e){return e[e.length-1]}function pt(e,s){for(var h=[],a=0;a<e.length;a++)h[a]=s(e[a],a);return h}function Ot(e,s,h){for(var a=0,u=h(s);a<e.length&&h(e[a])<=u;)a++;e.splice(a,0,s)}function kt(){}function zt(e,s){var h;return Object.create?h=Object.create(e):(kt.prototype=e,h=new kt),s&&oe(s,h),h}var he=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function o(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||he.test(e))}function d(e,s){return s?s.source.indexOf("\\w")>-1&&o(e)?!0:s.test(e):o(e)}function p(e){for(var s in e)if(e.hasOwnProperty(s)&&e[s])return!1;return!0}var b=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function S(e){return e.charCodeAt(0)>=768&&b.test(e)}function _(e,s,h){for(;(h<0?s>0:s<e.length)&&S(e.charAt(s));)s+=h;return s}function O(e,s,h){for(var a=s>h?-1:1;;){if(s==h)return s;var u=(s+h)/2,m=a<0?Math.ceil(u):Math.floor(u);if(m==s)return e(m)?s:h;e(m)?h=m:s=m+a}}function H(e,s,h,a){if(!e)return a(s,h,"ltr",0);for(var u=!1,m=0;m<e.length;++m){var y=e[m];(y.from<h&&y.to>s||s==h&&y.to==s)&&(a(Math.max(y.from,s),Math.min(y.to,h),y.level==1?"rtl":"ltr",m),u=!0)}u||a(s,h,"ltr")}var G=null;function nt(e,s,h){var a;G=null;for(var u=0;u<e.length;++u){var m=e[u];if(m.from<s&&m.to>s)return u;m.to==s&&(m.from!=m.to&&h=="before"?a=u:G=u),m.from==s&&(m.from!=m.to&&h!="before"?a=u:G=u)}return a??G}var ct=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function h(P){return P<=247?e.charAt(P):1424<=P&&P<=1524?"R":1536<=P&&P<=1785?s.charAt(P-1536):1774<=P&&P<=2220?"r":8192<=P&&P<=8203?"w":P==8204?"b":"L"}var a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,u=/[stwN]/,m=/[LRr]/,y=/[Lb1n]/,k=/[1n]/;function C(P,W,F){this.level=P,this.from=W,this.to=F}return function(P,W){var F=W=="ltr"?"L":"R";if(P.length==0||W=="ltr"&&!a.test(P))return!1;for(var et=P.length,Z=[],dt=0;dt<et;++dt)Z.push(h(P.charCodeAt(dt)));for(var mt=0,It=F;mt<et;++mt){var At=Z[mt];At=="m"?Z[mt]=It:It=At}for(var $t=0,Mt=F;$t<et;++$t){var Gt=Z[$t];Gt=="1"&&Mt=="r"?Z[$t]="n":m.test(Gt)&&(Mt=Gt,Gt=="r"&&(Z[$t]="R"))}for(var ie=1,Jt=Z[0];ie<et-1;++ie){var de=Z[ie];de=="+"&&Jt=="1"&&Z[ie+1]=="1"?Z[ie]="1":de==","&&Jt==Z[ie+1]&&(Jt=="1"||Jt=="n")&&(Z[ie]=Jt),Jt=de}for(var Ce=0;Ce<et;++Ce){var qe=Z[Ce];if(qe==",")Z[Ce]="N";else if(qe=="%"){var Le=void 0;for(Le=Ce+1;Le<et&&Z[Le]=="%";++Le);for(var yi=Ce&&Z[Ce-1]=="!"||Le<et&&Z[Le]=="1"?"1":"N",ui=Ce;ui<Le;++ui)Z[ui]=yi;Ce=Le-1}}for(var Re=0,ci=F;Re<et;++Re){var Ze=Z[Re];ci=="L"&&Ze=="1"?Z[Re]="L":m.test(Ze)&&(ci=Ze)}for(var ze=0;ze<et;++ze)if(u.test(Z[ze])){var He=void 0;for(He=ze+1;He<et&&u.test(Z[He]);++He);for(var Ae=(ze?Z[ze-1]:F)=="L",di=(He<et?Z[He]:F)=="L",Dr=Ae==di?Ae?"L":"R":F,ts=ze;ts<He;++ts)Z[ts]=Dr;ze=He-1}for(var ei=[],cn,Ve=0;Ve<et;)if(y.test(Z[Ve])){var hh=Ve;for(++Ve;Ve<et&&y.test(Z[Ve]);++Ve);ei.push(new C(0,hh,Ve))}else{var In=Ve,Cs=ei.length,Ds=W=="rtl"?1:0;for(++Ve;Ve<et&&Z[Ve]!="L";++Ve);for(var ri=In;ri<Ve;)if(k.test(Z[ri])){In<ri&&(ei.splice(Cs,0,new C(1,In,ri)),Cs+=Ds);var Tr=ri;for(++ri;ri<Ve&&k.test(Z[ri]);++ri);ei.splice(Cs,0,new C(2,Tr,ri)),Cs+=Ds,In=ri}else++ri;In<Ve&&ei.splice(Cs,0,new C(1,In,Ve))}return W=="ltr"&&(ei[0].level==1&&(cn=P.match(/^\s+/))&&(ei[0].from=cn[0].length,ei.unshift(new C(0,0,cn[0].length))),Ht(ei).level==1&&(cn=P.match(/\s+$/))&&(Ht(ei).to-=cn[0].length,ei.push(new C(0,et-cn[0].length,et)))),W=="rtl"?ei.reverse():ei}}();function ut(e,s){var h=e.order;return h==null&&(h=e.order=ct(e.text,s)),h}var St=[],ft=function(e,s,h){if(e.addEventListener)e.addEventListener(s,h,!1);else if(e.attachEvent)e.attachEvent("on"+s,h);else{var a=e._handlers||(e._handlers={});a[s]=(a[s]||St).concat(h)}};function se(e,s){return e._handlers&&e._handlers[s]||St}function jt(e,s,h){if(e.removeEventListener)e.removeEventListener(s,h,!1);else if(e.detachEvent)e.detachEvent("on"+s,h);else{var a=e._handlers,u=a&&a[s];if(u){var m=V(u,h);m>-1&&(a[s]=u.slice(0,m).concat(u.slice(m+1)))}}}function Et(e,s){var h=se(e,s);if(h.length)for(var a=Array.prototype.slice.call(arguments,2),u=0;u<h.length;++u)h[u].apply(null,a)}function me(e,s,h){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),Et(e,h||s.type,e,s),Qe(s)||s.codemirrorIgnore}function ve(e){var s=e._handlers&&e._handlers.cursorActivity;if(s)for(var h=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),a=0;a<s.length;++a)V(h,s[a])==-1&&h.push(s[a])}function Be(e,s){return se(e,s).length>0}function Wi(e){e.prototype.on=function(s,h){ft(this,s,h)},e.prototype.off=function(s,h){jt(this,s,h)}}function Fe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function je(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Qe(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function Ai(e){Fe(e),je(e)}function ai(e){return e.target||e.srcElement}function Gn(e){var s=e.which;return s==null&&(e.button&1?s=1:e.button&2?s=3:e.button&4&&(s=2)),z&&e.ctrlKey&&s==1&&(s=3),s}var nn=function(){if(w&&D<9)return!1;var e=J("div");return"draggable"in e||"dragDrop"in e}(),Ge;function sn(e){if(Ge==null){var s=J("span","");K(e,J("span",[s,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(Ge=s.offsetWidth<=1&&s.offsetHeight>2&&!(w&&D<8))}var h=Ge?J("span",""):J("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return h.setAttribute("cm-text",""),h}var Kr;function rn(e){if(Kr!=null)return Kr;var s=K(e,document.createTextNode("AA")),h=ee(s,0,1).getBoundingClientRect(),a=ee(s,1,2).getBoundingClientRect();return Pt(e),!h||h.left==h.right?!1:Kr=a.right-h.right<3}var Qr=`

b`.split(/\n/).length!=3?function(e){for(var s=0,h=[],a=e.length;s<=a;){var u=e.indexOf(`
`,s);u==-1&&(u=e.length);var m=e.slice(s,e.charAt(u-1)=="\r"?u-1:u),y=m.indexOf("\r");y!=-1?(h.push(m.slice(0,y)),s+=y+1):(h.push(m),s=u+1)}return h}:function(e){return e.split(/\r\n?|\n/)},oa=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var s;try{s=e.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=e?!1:s.compareEndPoints("StartToEnd",s)!=0},aa=function(){var e=J("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Zr=null;function Xn(e){if(Zr!=null)return Zr;var s=K(e,J("span","x")),h=s.getBoundingClientRect(),a=ee(s,0,1).getBoundingClientRect();return Zr=Math.abs(h.left-a.left)>1}var Mi={},Ti={};function la(e,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),Mi[e]=s}function kn(e,s){Ti[e]=s}function rr(e){if(typeof e=="string"&&Ti.hasOwnProperty(e))e=Ti[e];else if(e&&typeof e.name=="string"&&Ti.hasOwnProperty(e.name)){var s=Ti[e.name];typeof s=="string"&&(s={name:s}),e=zt(s,e),e.name=s.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return rr("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return rr("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function or(e,s){s=rr(s);var h=Mi[s.name];if(!h)return or(e,"text/plain");var a=h(e,s);if(Gi.hasOwnProperty(s.name)){var u=Gi[s.name];for(var m in u)u.hasOwnProperty(m)&&(a.hasOwnProperty(m)&&(a["_"+m]=a[m]),a[m]=u[m])}if(a.name=s.name,s.helperType&&(a.helperType=s.helperType),s.modeProps)for(var y in s.modeProps)a[y]=s.modeProps[y];return a}var Gi={};function Xi(e,s){var h=Gi.hasOwnProperty(e)?Gi[e]:Gi[e]={};oe(s,h)}function _i(e,s){if(s===!0)return s;if(e.copyState)return e.copyState(s);var h={};for(var a in s){var u=s[a];u instanceof Array&&(u=u.concat([])),h[a]=u}return h}function Jr(e,s){for(var h;e.innerMode&&(h=e.innerMode(s),!(!h||h.mode==e));)s=h.state,e=h.mode;return h||{mode:e,state:s}}function to(e,s,h){return e.startState?e.startState(s,h):!0}var We=function(e,s,h){this.pos=this.start=0,this.string=e,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=h};We.prototype.eol=function(){return this.pos>=this.string.length},We.prototype.sol=function(){return this.pos==this.lineStart},We.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},We.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},We.prototype.eat=function(e){var s=this.string.charAt(this.pos),h;if(typeof e=="string"?h=s==e:h=s&&(e.test?e.test(s):e(s)),h)return++this.pos,s},We.prototype.eatWhile=function(e){for(var s=this.pos;this.eat(e););return this.pos>s},We.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},We.prototype.skipToEnd=function(){this.pos=this.string.length},We.prototype.skipTo=function(e){var s=this.string.indexOf(e,this.pos);if(s>-1)return this.pos=s,!0},We.prototype.backUp=function(e){this.pos-=e},We.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ce(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ce(this.string,this.lineStart,this.tabSize):0)},We.prototype.indentation=function(){return ce(this.string,null,this.tabSize)-(this.lineStart?ce(this.string,this.lineStart,this.tabSize):0)},We.prototype.match=function(e,s,h){if(typeof e=="string"){var a=function(y){return h?y.toLowerCase():y},u=this.string.substr(this.pos,e.length);if(a(u)==a(e))return s!==!1&&(this.pos+=e.length),!0}else{var m=this.string.slice(this.pos).match(e);return m&&m.index>0?null:(m&&s!==!1&&(this.pos+=m[0].length),m)}},We.prototype.current=function(){return this.string.slice(this.start,this.pos)},We.prototype.hideFirstChars=function(e,s){this.lineStart+=e;try{return s()}finally{this.lineStart-=e}},We.prototype.lookAhead=function(e){var s=this.lineOracle;return s&&s.lookAhead(e)},We.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function Vt(e,s){if(s-=e.first,s<0||s>=e.size)throw new Error("There is no line "+(s+e.first)+" in the document.");for(var h=e;!h.lines;)for(var a=0;;++a){var u=h.children[a],m=u.chunkSize();if(s<m){h=u;break}s-=m}return h.lines[s]}function on(e,s,h){var a=[],u=s.line;return e.iter(s.line,h.line+1,function(m){var y=m.text;u==h.line&&(y=y.slice(0,h.ch)),u==s.line&&(y=y.slice(s.ch)),a.push(y),++u}),a}function eo(e,s,h){var a=[];return e.iter(s,h,function(u){a.push(u.text)}),a}function vi(e,s){var h=s-e.height;if(h)for(var a=e;a;a=a.parent)a.height+=h}function we(e){if(e.parent==null)return null;for(var s=e.parent,h=V(s.lines,e),a=s.parent;a;s=a,a=a.parent)for(var u=0;a.children[u]!=s;++u)h+=a.children[u].chunkSize();return h+s.first}function an(e,s){var h=e.first;t:do{for(var a=0;a<e.children.length;++a){var u=e.children[a],m=u.height;if(s<m){e=u;continue t}s-=m,h+=u.chunkSize()}return h}while(!e.lines);for(var y=0;y<e.lines.length;++y){var k=e.lines[y],C=k.height;if(s<C)break;s-=C}return h+y}function gs(e,s){return s>=e.first&&s<e.first+e.size}function io(e,s){return String(e.lineNumberFormatter(s+e.firstLineNumber))}function Tt(e,s,h){if(h===void 0&&(h=null),!(this instanceof Tt))return new Tt(e,s,h);this.line=e,this.ch=s,this.sticky=h}function I(e,s){return e.line-s.line||e.ch-s.ch}function j(e,s){return e.sticky==s.sticky&&I(e,s)==0}function gt(e){return Tt(e.line,e.ch)}function _t(e,s){return I(e,s)<0?s:e}function le(e,s){return I(e,s)<0?e:s}function be(e,s){return Math.max(e.first,Math.min(s,e.first+e.size-1))}function Ft(e,s){if(s.line<e.first)return Tt(e.first,0);var h=e.first+e.size-1;return s.line>h?Tt(h,Vt(e,h).text.length):Je(s,Vt(e,s.line).text.length)}function Je(e,s){var h=e.ch;return h==null||h>s?Tt(e.line,s):h<0?Tt(e.line,0):e}function Pi(e,s){for(var h=[],a=0;a<s.length;a++)h[a]=Ft(e,s[a]);return h}var ar=function(e,s){this.state=e,this.lookAhead=s},ln=function(e,s,h,a){this.state=s,this.doc=e,this.line=h,this.maxLookAhead=a||0,this.baseTokens=null,this.baseTokenPos=1};ln.prototype.lookAhead=function(e){var s=this.doc.getLine(this.line+e);return s!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),s},ln.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ln.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ln.fromSaved=function(e,s,h){return s instanceof ar?new ln(e,_i(e.mode,s.state),h,s.lookAhead):new ln(e,_i(e.mode,s),h)},ln.prototype.save=function(e){var s=e!==!1?_i(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ar(s,this.maxLookAhead):s};function hu(e,s,h,a){var u=[e.state.modeGen],m={};gu(e,s.text,e.doc.mode,h,function(P,W){return u.push(P,W)},m,a);for(var y=h.state,k=function(P){h.baseTokens=u;var W=e.state.overlays[P],F=1,et=0;h.state=!0,gu(e,s.text,W.mode,h,function(Z,dt){for(var mt=F;et<Z;){var It=u[F];It>Z&&u.splice(F,1,Z,u[F+1],It),F+=2,et=Math.min(Z,It)}if(dt)if(W.opaque)u.splice(mt,F-mt,Z,"overlay "+dt),F=mt+2;else for(;mt<F;mt+=2){var At=u[mt+1];u[mt+1]=(At?At+" ":"")+"overlay "+dt}},m),h.state=y,h.baseTokens=null,h.baseTokenPos=1},C=0;C<e.state.overlays.length;++C)k(C);return{styles:u,classes:m.bgClass||m.textClass?m:null}}function uu(e,s,h){if(!s.styles||s.styles[0]!=e.state.modeGen){var a=no(e,we(s)),u=s.text.length>e.options.maxHighlightLength&&_i(e.doc.mode,a.state),m=hu(e,s,a);u&&(a.state=u),s.stateAfter=a.save(!u),s.styles=m.styles,m.classes?s.styleClasses=m.classes:s.styleClasses&&(s.styleClasses=null),h===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return s.styles}function no(e,s,h){var a=e.doc,u=e.display;if(!a.mode.startState)return new ln(a,!0,s);var m=Zf(e,s,h),y=m>a.first&&Vt(a,m-1).stateAfter,k=y?ln.fromSaved(a,y,m):new ln(a,to(a.mode),m);return a.iter(m,s,function(C){yl(e,C.text,k);var P=k.line;C.stateAfter=P==s-1||P%5==0||P>=u.viewFrom&&P<u.viewTo?k.save():null,k.nextLine()}),h&&(a.modeFrontier=k.line),k}function yl(e,s,h,a){var u=e.doc.mode,m=new We(s,e.options.tabSize,h);for(m.start=m.pos=a||0,s==""&&cu(u,h.state);!m.eol();)wl(u,m,h.state),m.start=m.pos}function cu(e,s){if(e.blankLine)return e.blankLine(s);if(e.innerMode){var h=Jr(e,s);if(h.mode.blankLine)return h.mode.blankLine(h.state)}}function wl(e,s,h,a){for(var u=0;u<10;u++){a&&(a[0]=Jr(e,h).mode);var m=e.token(s,h);if(s.pos>s.start)return m}throw new Error("Mode "+e.name+" failed to advance stream.")}var du=function(e,s,h){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=s||null,this.state=h};function fu(e,s,h,a){var u=e.doc,m=u.mode,y;s=Ft(u,s);var k=Vt(u,s.line),C=no(e,s.line,h),P=new We(k.text,e.options.tabSize,C),W;for(a&&(W=[]);(a||P.pos<s.ch)&&!P.eol();)P.start=P.pos,y=wl(m,P,C.state),a&&W.push(new du(P,y,_i(u.mode,C.state)));return a?W:new du(P,y,C.state)}function pu(e,s){if(e)for(;;){var h=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!h)break;e=e.slice(0,h.index)+e.slice(h.index+h[0].length);var a=h[1]?"bgClass":"textClass";s[a]==null?s[a]=h[2]:new RegExp("(?:^|\\s)"+h[2]+"(?:$|\\s)").test(s[a])||(s[a]+=" "+h[2])}return e}function gu(e,s,h,a,u,m,y){var k=h.flattenSpans;k==null&&(k=e.options.flattenSpans);var C=0,P=null,W=new We(s,e.options.tabSize,a),F,et=e.options.addModeClass&&[null];for(s==""&&pu(cu(h,a.state),m);!W.eol();){if(W.pos>e.options.maxHighlightLength?(k=!1,y&&yl(e,s,a,W.pos),W.pos=s.length,F=null):F=pu(wl(h,W,a.state,et),m),et){var Z=et[0].name;Z&&(F="m-"+(F?Z+" "+F:Z))}if(!k||P!=F){for(;C<W.start;)C=Math.min(W.start,C+5e3),u(C,P);P=F}W.start=W.pos}for(;C<W.pos;){var dt=Math.min(W.pos,C+5e3);u(dt,P),C=dt}}function Zf(e,s,h){for(var a,u,m=e.doc,y=h?-1:s-(e.doc.mode.innerMode?1e3:100),k=s;k>y;--k){if(k<=m.first)return m.first;var C=Vt(m,k-1),P=C.stateAfter;if(P&&(!h||k+(P instanceof ar?P.lookAhead:0)<=m.modeFrontier))return k;var W=ce(C.text,null,e.options.tabSize);(u==null||a>W)&&(u=k-1,a=W)}return u}function Jf(e,s){if(e.modeFrontier=Math.min(e.modeFrontier,s),!(e.highlightFrontier<s-10)){for(var h=e.first,a=s-1;a>h;a--){var u=Vt(e,a).stateAfter;if(u&&(!(u instanceof ar)||a+u.lookAhead<s)){h=a+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,h)}}var mu=!1,Cn=!1;function tp(){mu=!0}function ep(){Cn=!0}function ha(e,s,h){this.marker=e,this.from=s,this.to=h}function so(e,s){if(e)for(var h=0;h<e.length;++h){var a=e[h];if(a.marker==s)return a}}function ip(e,s){for(var h,a=0;a<e.length;++a)e[a]!=s&&(h||(h=[])).push(e[a]);return h}function np(e,s,h){var a=h&&window.WeakSet&&(h.markedSpans||(h.markedSpans=new WeakSet));a&&a.has(e.markedSpans)?e.markedSpans.push(s):(e.markedSpans=e.markedSpans?e.markedSpans.concat([s]):[s],a&&a.add(e.markedSpans)),s.marker.attachLine(e)}function sp(e,s,h){var a;if(e)for(var u=0;u<e.length;++u){var m=e[u],y=m.marker,k=m.from==null||(y.inclusiveLeft?m.from<=s:m.from<s);if(k||m.from==s&&y.type=="bookmark"&&(!h||!m.marker.insertLeft)){var C=m.to==null||(y.inclusiveRight?m.to>=s:m.to>s);(a||(a=[])).push(new ha(y,m.from,C?null:m.to))}}return a}function rp(e,s,h){var a;if(e)for(var u=0;u<e.length;++u){var m=e[u],y=m.marker,k=m.to==null||(y.inclusiveRight?m.to>=s:m.to>s);if(k||m.from==s&&y.type=="bookmark"&&(!h||m.marker.insertLeft)){var C=m.from==null||(y.inclusiveLeft?m.from<=s:m.from<s);(a||(a=[])).push(new ha(y,C?null:m.from-s,m.to==null?null:m.to-s))}}return a}function Sl(e,s){if(s.full)return null;var h=gs(e,s.from.line)&&Vt(e,s.from.line).markedSpans,a=gs(e,s.to.line)&&Vt(e,s.to.line).markedSpans;if(!h&&!a)return null;var u=s.from.ch,m=s.to.ch,y=I(s.from,s.to)==0,k=sp(h,u,y),C=rp(a,m,y),P=s.text.length==1,W=Ht(s.text).length+(P?u:0);if(k)for(var F=0;F<k.length;++F){var et=k[F];if(et.to==null){var Z=so(C,et.marker);Z?P&&(et.to=Z.to==null?null:Z.to+W):et.to=u}}if(C)for(var dt=0;dt<C.length;++dt){var mt=C[dt];if(mt.to!=null&&(mt.to+=W),mt.from==null){var It=so(k,mt.marker);It||(mt.from=W,P&&(k||(k=[])).push(mt))}else mt.from+=W,P&&(k||(k=[])).push(mt)}k&&(k=vu(k)),C&&C!=k&&(C=vu(C));var At=[k];if(!P){var $t=s.text.length-2,Mt;if($t>0&&k)for(var Gt=0;Gt<k.length;++Gt)k[Gt].to==null&&(Mt||(Mt=[])).push(new ha(k[Gt].marker,null,null));for(var ie=0;ie<$t;++ie)At.push(Mt);At.push(C)}return At}function vu(e){for(var s=0;s<e.length;++s){var h=e[s];h.from!=null&&h.from==h.to&&h.marker.clearWhenEmpty!==!1&&e.splice(s--,1)}return e.length?e:null}function op(e,s,h){var a=null;if(e.iter(s.line,h.line+1,function(Z){if(Z.markedSpans)for(var dt=0;dt<Z.markedSpans.length;++dt){var mt=Z.markedSpans[dt].marker;mt.readOnly&&(!a||V(a,mt)==-1)&&(a||(a=[])).push(mt)}}),!a)return null;for(var u=[{from:s,to:h}],m=0;m<a.length;++m)for(var y=a[m],k=y.find(0),C=0;C<u.length;++C){var P=u[C];if(!(I(P.to,k.from)<0||I(P.from,k.to)>0)){var W=[C,1],F=I(P.from,k.from),et=I(P.to,k.to);(F<0||!y.inclusiveLeft&&!F)&&W.push({from:P.from,to:k.from}),(et>0||!y.inclusiveRight&&!et)&&W.push({from:k.to,to:P.to}),u.splice.apply(u,W),C+=W.length-3}}return u}function bu(e){var s=e.markedSpans;if(s){for(var h=0;h<s.length;++h)s[h].marker.detachLine(e);e.markedSpans=null}}function yu(e,s){if(s){for(var h=0;h<s.length;++h)s[h].marker.attachLine(e);e.markedSpans=s}}function ua(e){return e.inclusiveLeft?-1:0}function ca(e){return e.inclusiveRight?1:0}function xl(e,s){var h=e.lines.length-s.lines.length;if(h!=0)return h;var a=e.find(),u=s.find(),m=I(a.from,u.from)||ua(e)-ua(s);if(m)return-m;var y=I(a.to,u.to)||ca(e)-ca(s);return y||s.id-e.id}function wu(e,s){var h=Cn&&e.markedSpans,a;if(h)for(var u=void 0,m=0;m<h.length;++m)u=h[m],u.marker.collapsed&&(s?u.from:u.to)==null&&(!a||xl(a,u.marker)<0)&&(a=u.marker);return a}function Su(e){return wu(e,!0)}function da(e){return wu(e,!1)}function ap(e,s){var h=Cn&&e.markedSpans,a;if(h)for(var u=0;u<h.length;++u){var m=h[u];m.marker.collapsed&&(m.from==null||m.from<s)&&(m.to==null||m.to>s)&&(!a||xl(a,m.marker)<0)&&(a=m.marker)}return a}function xu(e,s,h,a,u){var m=Vt(e,s),y=Cn&&m.markedSpans;if(y)for(var k=0;k<y.length;++k){var C=y[k];if(C.marker.collapsed){var P=C.marker.find(0),W=I(P.from,h)||ua(C.marker)-ua(u),F=I(P.to,a)||ca(C.marker)-ca(u);if(!(W>=0&&F<=0||W<=0&&F>=0)&&(W<=0&&(C.marker.inclusiveRight&&u.inclusiveLeft?I(P.to,h)>=0:I(P.to,h)>0)||W>=0&&(C.marker.inclusiveRight&&u.inclusiveLeft?I(P.from,a)<=0:I(P.from,a)<0)))return!0}}}function Yi(e){for(var s;s=Su(e);)e=s.find(-1,!0).line;return e}function lp(e){for(var s;s=da(e);)e=s.find(1,!0).line;return e}function hp(e){for(var s,h;s=da(e);)e=s.find(1,!0).line,(h||(h=[])).push(e);return h}function kl(e,s){var h=Vt(e,s),a=Yi(h);return h==a?s:we(a)}function ku(e,s){if(s>e.lastLine())return s;var h=Vt(e,s),a;if(!Yn(e,h))return s;for(;a=da(h);)h=a.find(1,!0).line;return we(h)+1}function Yn(e,s){var h=Cn&&s.markedSpans;if(h){for(var a=void 0,u=0;u<h.length;++u)if(a=h[u],!!a.marker.collapsed){if(a.from==null)return!0;if(!a.marker.widgetNode&&a.from==0&&a.marker.inclusiveLeft&&Cl(e,s,a))return!0}}}function Cl(e,s,h){if(h.to==null){var a=h.marker.find(1,!0);return Cl(e,a.line,so(a.line.markedSpans,h.marker))}if(h.marker.inclusiveRight&&h.to==s.text.length)return!0;for(var u=void 0,m=0;m<s.markedSpans.length;++m)if(u=s.markedSpans[m],u.marker.collapsed&&!u.marker.widgetNode&&u.from==h.to&&(u.to==null||u.to!=h.from)&&(u.marker.inclusiveLeft||h.marker.inclusiveRight)&&Cl(e,s,u))return!0}function Dn(e){e=Yi(e);for(var s=0,h=e.parent,a=0;a<h.lines.length;++a){var u=h.lines[a];if(u==e)break;s+=u.height}for(var m=h.parent;m;h=m,m=h.parent)for(var y=0;y<m.children.length;++y){var k=m.children[y];if(k==h)break;s+=k.height}return s}function fa(e){if(e.height==0)return 0;for(var s=e.text.length,h,a=e;h=Su(a);){var u=h.find(0,!0);a=u.from.line,s+=u.from.ch-u.to.ch}for(a=e;h=da(a);){var m=h.find(0,!0);s-=a.text.length-m.from.ch,a=m.to.line,s+=a.text.length-m.to.ch}return s}function Dl(e){var s=e.display,h=e.doc;s.maxLine=Vt(h,h.first),s.maxLineLength=fa(s.maxLine),s.maxLineChanged=!0,h.iter(function(a){var u=fa(a);u>s.maxLineLength&&(s.maxLineLength=u,s.maxLine=a)})}var lr=function(e,s,h){this.text=e,yu(this,s),this.height=h?h(this):1};lr.prototype.lineNo=function(){return we(this)},Wi(lr);function up(e,s,h,a){e.text=s,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),bu(e),yu(e,h);var u=a?a(e):1;u!=e.height&&vi(e,u)}function cp(e){e.parent=null,bu(e)}var dp={},fp={};function Cu(e,s){if(!e||/^\s*$/.test(e))return null;var h=s.addModeClass?fp:dp;return h[e]||(h[e]=e.replace(/\S+/g,"cm-$&"))}function Du(e,s){var h=Y("span",null,null,T?"padding-right: .1px":null),a={pre:Y("pre",[h],"CodeMirror-line"),content:h,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};s.measure={};for(var u=0;u<=(s.rest?s.rest.length:0);u++){var m=u?s.rest[u-1]:s.line,y=void 0;a.pos=0,a.addToken=gp,rn(e.display.measure)&&(y=ut(m,e.doc.direction))&&(a.addToken=vp(a.addToken,y)),a.map=[];var k=s!=e.display.externalMeasured&&we(m);bp(m,a,uu(e,m,k)),m.styleClasses&&(m.styleClasses.bgClass&&(a.bgClass=Rt(m.styleClasses.bgClass,a.bgClass||"")),m.styleClasses.textClass&&(a.textClass=Rt(m.styleClasses.textClass,a.textClass||""))),a.map.length==0&&a.map.push(0,0,a.content.appendChild(sn(e.display.measure))),u==0?(s.measure.map=a.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(a.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(T){var C=a.content.lastChild;(/\bcm-tab\b/.test(C.className)||C.querySelector&&C.querySelector(".cm-tab"))&&(a.content.className="cm-tab-wrap-hack")}return Et(e,"renderLine",e,s.line,a.pre),a.pre.className&&(a.textClass=Rt(a.pre.className,a.textClass||"")),a}function pp(e){var s=J("span","","cm-invalidchar");return s.title="\\u"+e.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function gp(e,s,h,a,u,m,y){if(s){var k=e.splitSpaces?mp(s,e.trailingSpace):s,C=e.cm.state.specialChars,P=!1,W;if(!C.test(s))e.col+=s.length,W=document.createTextNode(k),e.map.push(e.pos,e.pos+s.length,W),w&&D<9&&(P=!0),e.pos+=s.length;else{W=document.createDocumentFragment();for(var F=0;;){C.lastIndex=F;var et=C.exec(s),Z=et?et.index-F:s.length-F;if(Z){var dt=document.createTextNode(k.slice(F,F+Z));w&&D<9?W.appendChild(J("span",[dt])):W.appendChild(dt),e.map.push(e.pos,e.pos+Z,dt),e.col+=Z,e.pos+=Z}if(!et)break;F+=Z+1;var mt=void 0;if(et[0]=="	"){var It=e.cm.options.tabSize,At=It-e.col%It;mt=W.appendChild(J("span",Qt(At),"cm-tab")),mt.setAttribute("role","presentation"),mt.setAttribute("cm-text","	"),e.col+=At}else et[0]=="\r"||et[0]==`
`?(mt=W.appendChild(J("span",et[0]=="\r"?"":"","cm-invalidchar")),mt.setAttribute("cm-text",et[0]),e.col+=1):(mt=e.cm.options.specialCharPlaceholder(et[0]),mt.setAttribute("cm-text",et[0]),w&&D<9?W.appendChild(J("span",[mt])):W.appendChild(mt),e.col+=1);e.map.push(e.pos,e.pos+1,mt),e.pos++}}if(e.trailingSpace=k.charCodeAt(s.length-1)==32,h||a||u||P||m||y){var $t=h||"";a&&($t+=a),u&&($t+=u);var Mt=J("span",[W],$t,m);if(y)for(var Gt in y)y.hasOwnProperty(Gt)&&Gt!="style"&&Gt!="class"&&Mt.setAttribute(Gt,y[Gt]);return e.content.appendChild(Mt)}e.content.appendChild(W)}}function mp(e,s){if(e.length>1&&!/  /.test(e))return e;for(var h=s,a="",u=0;u<e.length;u++){var m=e.charAt(u);m==" "&&h&&(u==e.length-1||e.charCodeAt(u+1)==32)&&(m=""),a+=m,h=m==" "}return a}function vp(e,s){return function(h,a,u,m,y,k,C){u=u?u+" cm-force-border":"cm-force-border";for(var P=h.pos,W=P+a.length;;){for(var F=void 0,et=0;et<s.length&&(F=s[et],!(F.to>P&&F.from<=P));et++);if(F.to>=W)return e(h,a,u,m,y,k,C);e(h,a.slice(0,F.to-P),u,m,null,k,C),m=null,a=a.slice(F.to-P),P=F.to}}}function Tu(e,s,h,a){var u=!a&&h.widgetNode;u&&e.map.push(e.pos,e.pos+s,u),!a&&e.cm.display.input.needsContentAttribute&&(u||(u=e.content.appendChild(document.createElement("span"))),u.setAttribute("cm-marker",h.id)),u&&(e.cm.display.input.setUneditable(u),e.content.appendChild(u)),e.pos+=s,e.trailingSpace=!1}function bp(e,s,h){var a=e.markedSpans,u=e.text,m=0;if(!a){for(var y=1;y<h.length;y+=2)s.addToken(s,u.slice(m,m=h[y]),Cu(h[y+1],s.cm.options));return}for(var k=u.length,C=0,P=1,W="",F,et,Z=0,dt,mt,It,At,$t;;){if(Z==C){dt=mt=It=et="",$t=null,At=null,Z=1/0;for(var Mt=[],Gt=void 0,ie=0;ie<a.length;++ie){var Jt=a[ie],de=Jt.marker;if(de.type=="bookmark"&&Jt.from==C&&de.widgetNode)Mt.push(de);else if(Jt.from<=C&&(Jt.to==null||Jt.to>C||de.collapsed&&Jt.to==C&&Jt.from==C)){if(Jt.to!=null&&Jt.to!=C&&Z>Jt.to&&(Z=Jt.to,mt=""),de.className&&(dt+=" "+de.className),de.css&&(et=(et?et+";":"")+de.css),de.startStyle&&Jt.from==C&&(It+=" "+de.startStyle),de.endStyle&&Jt.to==Z&&(Gt||(Gt=[])).push(de.endStyle,Jt.to),de.title&&(($t||($t={})).title=de.title),de.attributes)for(var Ce in de.attributes)($t||($t={}))[Ce]=de.attributes[Ce];de.collapsed&&(!At||xl(At.marker,de)<0)&&(At=Jt)}else Jt.from>C&&Z>Jt.from&&(Z=Jt.from)}if(Gt)for(var qe=0;qe<Gt.length;qe+=2)Gt[qe+1]==Z&&(mt+=" "+Gt[qe]);if(!At||At.from==C)for(var Le=0;Le<Mt.length;++Le)Tu(s,0,Mt[Le]);if(At&&(At.from||0)==C){if(Tu(s,(At.to==null?k+1:At.to)-C,At.marker,At.from==null),At.to==null)return;At.to==C&&(At=!1)}}if(C>=k)break;for(var yi=Math.min(k,Z);;){if(W){var ui=C+W.length;if(!At){var Re=ui>yi?W.slice(0,yi-C):W;s.addToken(s,Re,F?F+dt:dt,It,C+Re.length==Z?mt:"",et,$t)}if(ui>=yi){W=W.slice(yi-C),C=yi;break}C=ui,It=""}W=u.slice(m,m=h[P++]),F=Cu(h[P++],s.cm.options)}}}function _u(e,s,h){this.line=s,this.rest=hp(s),this.size=this.rest?we(Ht(this.rest))-h+1:1,this.node=this.text=null,this.hidden=Yn(e,s)}function pa(e,s,h){for(var a=[],u,m=s;m<h;m=u){var y=new _u(e.doc,Vt(e.doc,m),m);u=m+y.size,a.push(y)}return a}var hr=null;function yp(e){hr?hr.ops.push(e):e.ownsGroup=hr={ops:[e],delayedCallbacks:[]}}function wp(e){var s=e.delayedCallbacks,h=0;do{for(;h<s.length;h++)s[h].call(null);for(var a=0;a<e.ops.length;a++){var u=e.ops[a];if(u.cursorActivityHandlers)for(;u.cursorActivityCalled<u.cursorActivityHandlers.length;)u.cursorActivityHandlers[u.cursorActivityCalled++].call(null,u.cm)}}while(h<s.length)}function Sp(e,s){var h=e.ownsGroup;if(h)try{wp(h)}finally{hr=null,s(h)}}var ro=null;function Xe(e,s){var h=se(e,s);if(h.length){var a=Array.prototype.slice.call(arguments,2),u;hr?u=hr.delayedCallbacks:ro?u=ro:(u=ro=[],setTimeout(xp,0));for(var m=function(k){u.push(function(){return h[k].apply(null,a)})},y=0;y<h.length;++y)m(y)}}function xp(){var e=ro;ro=null;for(var s=0;s<e.length;++s)e[s]()}function Pu(e,s,h,a){for(var u=0;u<s.changes.length;u++){var m=s.changes[u];m=="text"?Cp(e,s):m=="gutter"?Lu(e,s,h,a):m=="class"?Tl(e,s):m=="widget"&&Dp(e,s,a)}s.changes=null}function oo(e){return e.node==e.text&&(e.node=J("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),w&&D<8&&(e.node.style.zIndex=2)),e.node}function kp(e,s){var h=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(h&&(h+=" CodeMirror-linebackground"),s.background)h?s.background.className=h:(s.background.parentNode.removeChild(s.background),s.background=null);else if(h){var a=oo(s);s.background=a.insertBefore(J("div",null,h),a.firstChild),e.display.input.setUneditable(s.background)}}function Iu(e,s){var h=e.display.externalMeasured;return h&&h.line==s.line?(e.display.externalMeasured=null,s.measure=h.measure,h.built):Du(e,s)}function Cp(e,s){var h=s.text.className,a=Iu(e,s);s.text==s.node&&(s.node=a.pre),s.text.parentNode.replaceChild(a.pre,s.text),s.text=a.pre,a.bgClass!=s.bgClass||a.textClass!=s.textClass?(s.bgClass=a.bgClass,s.textClass=a.textClass,Tl(e,s)):h&&(s.text.className=h)}function Tl(e,s){kp(e,s),s.line.wrapClass?oo(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var h=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=h||""}function Lu(e,s,h,a){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var u=oo(s);s.gutterBackground=J("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(e.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px; width: "+a.gutterTotalWidth+"px"),e.display.input.setUneditable(s.gutterBackground),u.insertBefore(s.gutterBackground,s.text)}var m=s.line.gutterMarkers;if(e.options.lineNumbers||m){var y=oo(s),k=s.gutter=J("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?a.fixedPos:-a.gutterTotalWidth)+"px");if(k.setAttribute("aria-hidden","true"),e.display.input.setUneditable(k),y.insertBefore(k,s.text),s.line.gutterClass&&(k.className+=" "+s.line.gutterClass),e.options.lineNumbers&&(!m||!m["CodeMirror-linenumbers"])&&(s.lineNumber=k.appendChild(J("div",io(e.options,h),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+a.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),m)for(var C=0;C<e.display.gutterSpecs.length;++C){var P=e.display.gutterSpecs[C].className,W=m.hasOwnProperty(P)&&m[P];W&&k.appendChild(J("div",[W],"CodeMirror-gutter-elt","left: "+a.gutterLeft[P]+"px; width: "+a.gutterWidth[P]+"px"))}}}function Dp(e,s,h){s.alignable&&(s.alignable=null);for(var a=Dt("CodeMirror-linewidget"),u=s.node.firstChild,m=void 0;u;u=m)m=u.nextSibling,a.test(u.className)&&s.node.removeChild(u);Ou(e,s,h)}function Tp(e,s,h,a){var u=Iu(e,s);return s.text=s.node=u.pre,u.bgClass&&(s.bgClass=u.bgClass),u.textClass&&(s.textClass=u.textClass),Tl(e,s),Lu(e,s,h,a),Ou(e,s,a),s.node}function Ou(e,s,h){if(Eu(e,s.line,s,h,!0),s.rest)for(var a=0;a<s.rest.length;a++)Eu(e,s.rest[a],s,h,!1)}function Eu(e,s,h,a,u){if(s.widgets)for(var m=oo(h),y=0,k=s.widgets;y<k.length;++y){var C=k[y],P=J("div",[C.node],"CodeMirror-linewidget"+(C.className?" "+C.className:""));C.handleMouseEvents||P.setAttribute("cm-ignore-events","true"),_p(C,P,h,a),e.display.input.setUneditable(P),u&&C.above?m.insertBefore(P,h.gutter||h.text):m.appendChild(P),Xe(C,"redraw")}}function _p(e,s,h,a){if(e.noHScroll){(h.alignable||(h.alignable=[])).push(s);var u=a.wrapperWidth;s.style.left=a.fixedPos+"px",e.coverGutter||(u-=a.gutterTotalWidth,s.style.paddingLeft=a.gutterTotalWidth+"px"),s.style.width=u+"px"}e.coverGutter&&(s.style.zIndex=5,s.style.position="relative",e.noHScroll||(s.style.marginLeft=-a.gutterTotalWidth+"px"))}function ao(e){if(e.height!=null)return e.height;var s=e.doc.cm;if(!s)return 0;if(!Kt(document.body,e.node)){var h="position: relative;";e.coverGutter&&(h+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),e.noHScroll&&(h+="width: "+s.display.wrapper.clientWidth+"px;"),K(s.display.measure,J("div",[e.node],null,h))}return e.height=e.node.parentNode.offsetHeight}function Tn(e,s){for(var h=ai(s);h!=e.wrapper;h=h.parentNode)if(!h||h.nodeType==1&&h.getAttribute("cm-ignore-events")=="true"||h.parentNode==e.sizer&&h!=e.mover)return!0}function ga(e){return e.lineSpace.offsetTop}function _l(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Wu(e){if(e.cachedPaddingH)return e.cachedPaddingH;var s=K(e.measure,J("pre","x","CodeMirror-line-like")),h=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,a={left:parseInt(h.paddingLeft),right:parseInt(h.paddingRight)};return!isNaN(a.left)&&!isNaN(a.right)&&(e.cachedPaddingH=a),a}function hn(e){return st-e.display.nativeBarWidth}function ms(e){return e.display.scroller.clientWidth-hn(e)-e.display.barWidth}function Pl(e){return e.display.scroller.clientHeight-hn(e)-e.display.barHeight}function Pp(e,s,h){var a=e.options.lineWrapping,u=a&&ms(e);if(!s.measure.heights||a&&s.measure.width!=u){var m=s.measure.heights=[];if(a){s.measure.width=u;for(var y=s.text.firstChild.getClientRects(),k=0;k<y.length-1;k++){var C=y[k],P=y[k+1];Math.abs(C.bottom-P.bottom)>2&&m.push((C.bottom+P.top)/2-h.top)}}m.push(h.bottom-h.top)}}function Au(e,s,h){if(e.line==s)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var a=0;a<e.rest.length;a++)if(e.rest[a]==s)return{map:e.measure.maps[a],cache:e.measure.caches[a]};for(var u=0;u<e.rest.length;u++)if(we(e.rest[u])>h)return{map:e.measure.maps[u],cache:e.measure.caches[u],before:!0}}}function Ip(e,s){s=Yi(s);var h=we(s),a=e.display.externalMeasured=new _u(e.doc,s,h);a.lineN=h;var u=a.built=Du(e,a);return a.text=u.pre,K(e.display.lineMeasure,u.pre),a}function Mu(e,s,h,a){return un(e,ur(e,s),h,a)}function Il(e,s){if(s>=e.display.viewFrom&&s<e.display.viewTo)return e.display.view[ys(e,s)];var h=e.display.externalMeasured;if(h&&s>=h.lineN&&s<h.lineN+h.size)return h}function ur(e,s){var h=we(s),a=Il(e,h);a&&!a.text?a=null:a&&a.changes&&(Pu(e,a,h,Al(e)),e.curOp.forceUpdate=!0),a||(a=Ip(e,s));var u=Au(a,s,h);return{line:s,view:a,rect:null,map:u.map,cache:u.cache,before:u.before,hasHeights:!1}}function un(e,s,h,a,u){s.before&&(h=-1);var m=h+(a||""),y;return s.cache.hasOwnProperty(m)?y=s.cache[m]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(Pp(e,s.view,s.rect),s.hasHeights=!0),y=Op(e,s,h,a),y.bogus||(s.cache[m]=y)),{left:y.left,right:y.right,top:u?y.rtop:y.top,bottom:u?y.rbottom:y.bottom}}var Nu={left:0,right:0,top:0,bottom:0};function Bu(e,s,h){for(var a,u,m,y,k,C,P=0;P<e.length;P+=3)if(k=e[P],C=e[P+1],s<k?(u=0,m=1,y="left"):s<C?(u=s-k,m=u+1):(P==e.length-3||s==C&&e[P+3]>s)&&(m=C-k,u=m-1,s>=C&&(y="right")),u!=null){if(a=e[P+2],k==C&&h==(a.insertLeft?"left":"right")&&(y=h),h=="left"&&u==0)for(;P&&e[P-2]==e[P-3]&&e[P-1].insertLeft;)a=e[(P-=3)+2],y="left";if(h=="right"&&u==C-k)for(;P<e.length-3&&e[P+3]==e[P+4]&&!e[P+5].insertLeft;)a=e[(P+=3)+2],y="right";break}return{node:a,start:u,end:m,collapse:y,coverStart:k,coverEnd:C}}function Lp(e,s){var h=Nu;if(s=="left")for(var a=0;a<e.length&&(h=e[a]).left==h.right;a++);else for(var u=e.length-1;u>=0&&(h=e[u]).left==h.right;u--);return h}function Op(e,s,h,a){var u=Bu(s.map,h,a),m=u.node,y=u.start,k=u.end,C=u.collapse,P;if(m.nodeType==3){for(var W=0;W<4;W++){for(;y&&S(s.line.text.charAt(u.coverStart+y));)--y;for(;u.coverStart+k<u.coverEnd&&S(s.line.text.charAt(u.coverStart+k));)++k;if(w&&D<9&&y==0&&k==u.coverEnd-u.coverStart?P=m.parentNode.getBoundingClientRect():P=Lp(ee(m,y,k).getClientRects(),a),P.left||P.right||y==0)break;k=y,y=y-1,C="right"}w&&D<11&&(P=Ep(e.display.measure,P))}else{y>0&&(C=a="right");var F;e.options.lineWrapping&&(F=m.getClientRects()).length>1?P=F[a=="right"?F.length-1:0]:P=m.getBoundingClientRect()}if(w&&D<9&&!y&&(!P||!P.left&&!P.right)){var et=m.parentNode.getClientRects()[0];et?P={left:et.left,right:et.left+dr(e.display),top:et.top,bottom:et.bottom}:P=Nu}for(var Z=P.top-s.rect.top,dt=P.bottom-s.rect.top,mt=(Z+dt)/2,It=s.view.measure.heights,At=0;At<It.length-1&&!(mt<It[At]);At++);var $t=At?It[At-1]:0,Mt=It[At],Gt={left:(C=="right"?P.right:P.left)-s.rect.left,right:(C=="left"?P.left:P.right)-s.rect.left,top:$t,bottom:Mt};return!P.left&&!P.right&&(Gt.bogus=!0),e.options.singleCursorHeightPerLine||(Gt.rtop=Z,Gt.rbottom=dt),Gt}function Ep(e,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Xn(e))return s;var h=screen.logicalXDPI/screen.deviceXDPI,a=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*h,right:s.right*h,top:s.top*a,bottom:s.bottom*a}}function Ru(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var s=0;s<e.rest.length;s++)e.measure.caches[s]={}}function Hu(e){e.display.externalMeasure=null,Pt(e.display.lineMeasure);for(var s=0;s<e.display.view.length;s++)Ru(e.display.view[s])}function lo(e){Hu(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function $u(){return M&&A?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function zu(){return M&&A?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ll(e){var s=Yi(e),h=s.widgets,a=0;if(h)for(var u=0;u<h.length;++u)h[u].above&&(a+=ao(h[u]));return a}function ma(e,s,h,a,u){if(!u){var m=Ll(s);h.top+=m,h.bottom+=m}if(a=="line")return h;a||(a="local");var y=Dn(s);if(a=="local"?y+=ga(e.display):y-=e.display.viewOffset,a=="page"||a=="window"){var k=e.display.lineSpace.getBoundingClientRect();y+=k.top+(a=="window"?0:zu());var C=k.left+(a=="window"?0:$u());h.left+=C,h.right+=C}return h.top+=y,h.bottom+=y,h}function Fu(e,s,h){if(h=="div")return s;var a=s.left,u=s.top;if(h=="page")a-=$u(),u-=zu();else if(h=="local"||!h){var m=e.display.sizer.getBoundingClientRect();a+=m.left,u+=m.top}var y=e.display.lineSpace.getBoundingClientRect();return{left:a-y.left,top:u-y.top}}function va(e,s,h,a,u){return a||(a=Vt(e.doc,s.line)),ma(e,a,Mu(e,a,s.ch,u),h)}function Ui(e,s,h,a,u,m){a=a||Vt(e.doc,s.line),u||(u=ur(e,a));function y(dt,mt){var It=un(e,u,dt,mt?"right":"left",m);return mt?It.left=It.right:It.right=It.left,ma(e,a,It,h)}var k=ut(a,e.doc.direction),C=s.ch,P=s.sticky;if(C>=a.text.length?(C=a.text.length,P="before"):C<=0&&(C=0,P="after"),!k)return y(P=="before"?C-1:C,P=="before");function W(dt,mt,It){var At=k[mt],$t=At.level==1;return y(It?dt-1:dt,$t!=It)}var F=nt(k,C,P),et=G,Z=W(C,F,P=="before");return et!=null&&(Z.other=W(C,et,P!="before")),Z}function ju(e,s){var h=0;s=Ft(e.doc,s),e.options.lineWrapping||(h=dr(e.display)*s.ch);var a=Vt(e.doc,s.line),u=Dn(a)+ga(e.display);return{left:h,right:h,top:u,bottom:u+a.height}}function Ol(e,s,h,a,u){var m=Tt(e,s,h);return m.xRel=u,a&&(m.outside=a),m}function El(e,s,h){var a=e.doc;if(h+=e.display.viewOffset,h<0)return Ol(a.first,0,null,-1,-1);var u=an(a,h),m=a.first+a.size-1;if(u>m)return Ol(a.first+a.size-1,Vt(a,m).text.length,null,1,1);s<0&&(s=0);for(var y=Vt(a,u);;){var k=Wp(e,y,u,s,h),C=ap(y,k.ch+(k.xRel>0||k.outside>0?1:0));if(!C)return k;var P=C.find(1);if(P.line==u)return P;y=Vt(a,u=P.line)}}function Gu(e,s,h,a){a-=Ll(s);var u=s.text.length,m=O(function(y){return un(e,h,y-1).bottom<=a},u,0);return u=O(function(y){return un(e,h,y).top>a},m,u),{begin:m,end:u}}function Xu(e,s,h,a){h||(h=ur(e,s));var u=ma(e,s,un(e,h,a),"line").top;return Gu(e,s,h,u)}function Wl(e,s,h,a){return e.bottom<=h?!1:e.top>h?!0:(a?e.left:e.right)>s}function Wp(e,s,h,a,u){u-=Dn(s);var m=ur(e,s),y=Ll(s),k=0,C=s.text.length,P=!0,W=ut(s,e.doc.direction);if(W){var F=(e.options.lineWrapping?Mp:Ap)(e,s,h,m,W,a,u);P=F.level!=1,k=P?F.from:F.to-1,C=P?F.to:F.from-1}var et=null,Z=null,dt=O(function(ie){var Jt=un(e,m,ie);return Jt.top+=y,Jt.bottom+=y,Wl(Jt,a,u,!1)?(Jt.top<=u&&Jt.left<=a&&(et=ie,Z=Jt),!0):!1},k,C),mt,It,At=!1;if(Z){var $t=a-Z.left<Z.right-a,Mt=$t==P;dt=et+(Mt?0:1),It=Mt?"after":"before",mt=$t?Z.left:Z.right}else{!P&&(dt==C||dt==k)&&dt++,It=dt==0?"after":dt==s.text.length?"before":un(e,m,dt-(P?1:0)).bottom+y<=u==P?"after":"before";var Gt=Ui(e,Tt(h,dt,It),"line",s,m);mt=Gt.left,At=u<Gt.top?-1:u>=Gt.bottom?1:0}return dt=_(s.text,dt,1),Ol(h,dt,It,At,a-mt)}function Ap(e,s,h,a,u,m,y){var k=O(function(F){var et=u[F],Z=et.level!=1;return Wl(Ui(e,Tt(h,Z?et.to:et.from,Z?"before":"after"),"line",s,a),m,y,!0)},0,u.length-1),C=u[k];if(k>0){var P=C.level!=1,W=Ui(e,Tt(h,P?C.from:C.to,P?"after":"before"),"line",s,a);Wl(W,m,y,!0)&&W.top>y&&(C=u[k-1])}return C}function Mp(e,s,h,a,u,m,y){var k=Gu(e,s,a,y),C=k.begin,P=k.end;/\s/.test(s.text.charAt(P-1))&&P--;for(var W=null,F=null,et=0;et<u.length;et++){var Z=u[et];if(!(Z.from>=P||Z.to<=C)){var dt=Z.level!=1,mt=un(e,a,dt?Math.min(P,Z.to)-1:Math.max(C,Z.from)).right,It=mt<m?m-mt+1e9:mt-m;(!W||F>It)&&(W=Z,F=It)}}return W||(W=u[u.length-1]),W.from<C&&(W={from:C,to:W.to,level:W.level}),W.to>P&&(W={from:W.from,to:P,level:W.level}),W}var vs;function cr(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(vs==null){vs=J("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)vs.appendChild(document.createTextNode("x")),vs.appendChild(J("br"));vs.appendChild(document.createTextNode("x"))}K(e.measure,vs);var h=vs.offsetHeight/50;return h>3&&(e.cachedTextHeight=h),Pt(e.measure),h||1}function dr(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var s=J("span","xxxxxxxxxx"),h=J("pre",[s],"CodeMirror-line-like");K(e.measure,h);var a=s.getBoundingClientRect(),u=(a.right-a.left)/10;return u>2&&(e.cachedCharWidth=u),u||10}function Al(e){for(var s=e.display,h={},a={},u=s.gutters.clientLeft,m=s.gutters.firstChild,y=0;m;m=m.nextSibling,++y){var k=e.display.gutterSpecs[y].className;h[k]=m.offsetLeft+m.clientLeft+u,a[k]=m.clientWidth}return{fixedPos:Ml(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:h,gutterWidth:a,wrapperWidth:s.wrapper.clientWidth}}function Ml(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Yu(e){var s=cr(e.display),h=e.options.lineWrapping,a=h&&Math.max(5,e.display.scroller.clientWidth/dr(e.display)-3);return function(u){if(Yn(e.doc,u))return 0;var m=0;if(u.widgets)for(var y=0;y<u.widgets.length;y++)u.widgets[y].height&&(m+=u.widgets[y].height);return h?m+(Math.ceil(u.text.length/a)||1)*s:m+s}}function Nl(e){var s=e.doc,h=Yu(e);s.iter(function(a){var u=h(a);u!=a.height&&vi(a,u)})}function bs(e,s,h,a){var u=e.display;if(!h&&ai(s).getAttribute("cm-not-content")=="true")return null;var m,y,k=u.lineSpace.getBoundingClientRect();try{m=s.clientX-k.left,y=s.clientY-k.top}catch{return null}var C=El(e,m,y),P;if(a&&C.xRel>0&&(P=Vt(e.doc,C.line).text).length==C.ch){var W=ce(P,P.length,e.options.tabSize)-P.length;C=Tt(C.line,Math.max(0,Math.round((m-Wu(e.display).left)/dr(e.display))-W))}return C}function ys(e,s){if(s>=e.display.viewTo||(s-=e.display.viewFrom,s<0))return null;for(var h=e.display.view,a=0;a<h.length;a++)if(s-=h[a].size,s<0)return a}function li(e,s,h,a){s==null&&(s=e.doc.first),h==null&&(h=e.doc.first+e.doc.size),a||(a=0);var u=e.display;if(a&&h<u.viewTo&&(u.updateLineNumbers==null||u.updateLineNumbers>s)&&(u.updateLineNumbers=s),e.curOp.viewChanged=!0,s>=u.viewTo)Cn&&kl(e.doc,s)<u.viewTo&&qn(e);else if(h<=u.viewFrom)Cn&&ku(e.doc,h+a)>u.viewFrom?qn(e):(u.viewFrom+=a,u.viewTo+=a);else if(s<=u.viewFrom&&h>=u.viewTo)qn(e);else if(s<=u.viewFrom){var m=ba(e,h,h+a,1);m?(u.view=u.view.slice(m.index),u.viewFrom=m.lineN,u.viewTo+=a):qn(e)}else if(h>=u.viewTo){var y=ba(e,s,s,-1);y?(u.view=u.view.slice(0,y.index),u.viewTo=y.lineN):qn(e)}else{var k=ba(e,s,s,-1),C=ba(e,h,h+a,1);k&&C?(u.view=u.view.slice(0,k.index).concat(pa(e,k.lineN,C.lineN)).concat(u.view.slice(C.index)),u.viewTo+=a):qn(e)}var P=u.externalMeasured;P&&(h<P.lineN?P.lineN+=a:s<P.lineN+P.size&&(u.externalMeasured=null))}function Un(e,s,h){e.curOp.viewChanged=!0;var a=e.display,u=e.display.externalMeasured;if(u&&s>=u.lineN&&s<u.lineN+u.size&&(a.externalMeasured=null),!(s<a.viewFrom||s>=a.viewTo)){var m=a.view[ys(e,s)];if(m.node!=null){var y=m.changes||(m.changes=[]);V(y,h)==-1&&y.push(h)}}}function qn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ba(e,s,h,a){var u=ys(e,s),m,y=e.display.view;if(!Cn||h==e.doc.first+e.doc.size)return{index:u,lineN:h};for(var k=e.display.viewFrom,C=0;C<u;C++)k+=y[C].size;if(k!=s){if(a>0){if(u==y.length-1)return null;m=k+y[u].size-s,u++}else m=k-s;s+=m,h+=m}for(;kl(e.doc,h)!=h;){if(u==(a<0?0:y.length-1))return null;h+=a*y[u-(a<0?1:0)].size,u+=a}return{index:u,lineN:h}}function Np(e,s,h){var a=e.display,u=a.view;u.length==0||s>=a.viewTo||h<=a.viewFrom?(a.view=pa(e,s,h),a.viewFrom=s):(a.viewFrom>s?a.view=pa(e,s,a.viewFrom).concat(a.view):a.viewFrom<s&&(a.view=a.view.slice(ys(e,s))),a.viewFrom=s,a.viewTo<h?a.view=a.view.concat(pa(e,a.viewTo,h)):a.viewTo>h&&(a.view=a.view.slice(0,ys(e,h)))),a.viewTo=h}function Uu(e){for(var s=e.display.view,h=0,a=0;a<s.length;a++){var u=s[a];!u.hidden&&(!u.node||u.changes)&&++h}return h}function ho(e){e.display.input.showSelection(e.display.input.prepareSelection())}function qu(e,s){s===void 0&&(s=!0);var h=e.doc,a={},u=a.cursors=document.createDocumentFragment(),m=a.selection=document.createDocumentFragment(),y=e.options.$customCursor;y&&(s=!0);for(var k=0;k<h.sel.ranges.length;k++)if(!(!s&&k==h.sel.primIndex)){var C=h.sel.ranges[k];if(!(C.from().line>=e.display.viewTo||C.to().line<e.display.viewFrom)){var P=C.empty();if(y){var W=y(e,C);W&&Bl(e,W,u)}else(P||e.options.showCursorWhenSelecting)&&Bl(e,C.head,u);P||Bp(e,C,m)}}return a}function Bl(e,s,h){var a=Ui(e,s,"div",null,null,!e.options.singleCursorHeightPerLine),u=h.appendChild(J("div","","CodeMirror-cursor"));if(u.style.left=a.left+"px",u.style.top=a.top+"px",u.style.height=Math.max(0,a.bottom-a.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var m=va(e,s,"div",null,null),y=m.right-m.left;u.style.width=(y>0?y:e.defaultCharWidth())+"px"}if(a.other){var k=h.appendChild(J("div","","CodeMirror-cursor CodeMirror-secondarycursor"));k.style.display="",k.style.left=a.other.left+"px",k.style.top=a.other.top+"px",k.style.height=(a.other.bottom-a.other.top)*.85+"px"}}function ya(e,s){return e.top-s.top||e.left-s.left}function Bp(e,s,h){var a=e.display,u=e.doc,m=document.createDocumentFragment(),y=Wu(e.display),k=y.left,C=Math.max(a.sizerWidth,ms(e)-a.sizer.offsetLeft)-y.right,P=u.direction=="ltr";function W(Mt,Gt,ie,Jt){Gt<0&&(Gt=0),Gt=Math.round(Gt),Jt=Math.round(Jt),m.appendChild(J("div",null,"CodeMirror-selected","position: absolute; left: "+Mt+`px;
                             top: `+Gt+"px; width: "+(ie??C-Mt)+`px;
                             height: `+(Jt-Gt)+"px"))}function F(Mt,Gt,ie){var Jt=Vt(u,Mt),de=Jt.text.length,Ce,qe;function Le(Re,ci){return va(e,Tt(Mt,Re),"div",Jt,ci)}function yi(Re,ci,Ze){var ze=Xu(e,Jt,null,Re),He=ci=="ltr"==(Ze=="after")?"left":"right",Ae=Ze=="after"?ze.begin:ze.end-(/\s/.test(Jt.text.charAt(ze.end-1))?2:1);return Le(Ae,He)[He]}var ui=ut(Jt,u.direction);return H(ui,Gt||0,ie??de,function(Re,ci,Ze,ze){var He=Ze=="ltr",Ae=Le(Re,He?"left":"right"),di=Le(ci-1,He?"right":"left"),Dr=Gt==null&&Re==0,ts=ie==null&&ci==de,ei=ze==0,cn=!ui||ze==ui.length-1;if(di.top-Ae.top<=3){var Ve=(P?Dr:ts)&&ei,hh=(P?ts:Dr)&&cn,In=Ve?k:(He?Ae:di).left,Cs=hh?C:(He?di:Ae).right;W(In,Ae.top,Cs-In,Ae.bottom)}else{var Ds,ri,Tr,uh;He?(Ds=P&&Dr&&ei?k:Ae.left,ri=P?C:yi(Re,Ze,"before"),Tr=P?k:yi(ci,Ze,"after"),uh=P&&ts&&cn?C:di.right):(Ds=P?yi(Re,Ze,"before"):k,ri=!P&&Dr&&ei?C:Ae.right,Tr=!P&&ts&&cn?k:di.left,uh=P?yi(ci,Ze,"after"):C),W(Ds,Ae.top,ri-Ds,Ae.bottom),Ae.bottom<di.top&&W(k,Ae.bottom,null,di.top),W(Tr,di.top,uh-Tr,di.bottom)}(!Ce||ya(Ae,Ce)<0)&&(Ce=Ae),ya(di,Ce)<0&&(Ce=di),(!qe||ya(Ae,qe)<0)&&(qe=Ae),ya(di,qe)<0&&(qe=di)}),{start:Ce,end:qe}}var et=s.from(),Z=s.to();if(et.line==Z.line)F(et.line,et.ch,Z.ch);else{var dt=Vt(u,et.line),mt=Vt(u,Z.line),It=Yi(dt)==Yi(mt),At=F(et.line,et.ch,It?dt.text.length+1:null).end,$t=F(Z.line,It?0:null,Z.ch).start;It&&(At.top<$t.top-2?(W(At.right,At.top,null,At.bottom),W(k,$t.top,$t.left,$t.bottom)):W(At.right,At.top,$t.left-At.right,At.bottom)),At.bottom<$t.top&&W(k,At.bottom,null,$t.top)}h.appendChild(m)}function Rl(e){if(e.state.focused){var s=e.display;clearInterval(s.blinker);var h=!0;s.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?s.blinker=setInterval(function(){e.hasFocus()||fr(e),s.cursorDiv.style.visibility=(h=!h)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function Vu(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||$l(e))}function Hl(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&fr(e))},100)}function $l(e,s){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(Et(e,"focus",e,s),e.state.focused=!0,Yt(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),T&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Rl(e))}function fr(e,s){e.state.delayingBlurEvent||(e.state.focused&&(Et(e,"blur",e,s),e.state.focused=!1,Wt(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function wa(e){for(var s=e.display,h=s.lineDiv.offsetTop,a=Math.max(0,s.scroller.getBoundingClientRect().top),u=s.lineDiv.getBoundingClientRect().top,m=0,y=0;y<s.view.length;y++){var k=s.view[y],C=e.options.lineWrapping,P=void 0,W=0;if(!k.hidden){if(u+=k.line.height,w&&D<8){var F=k.node.offsetTop+k.node.offsetHeight;P=F-h,h=F}else{var et=k.node.getBoundingClientRect();P=et.bottom-et.top,!C&&k.text.firstChild&&(W=k.text.firstChild.getBoundingClientRect().right-et.left-1)}var Z=k.line.height-P;if((Z>.005||Z<-.005)&&(u<a&&(m-=Z),vi(k.line,P),Ku(k.line),k.rest))for(var dt=0;dt<k.rest.length;dt++)Ku(k.rest[dt]);if(W>e.display.sizerWidth){var mt=Math.ceil(W/dr(e.display));mt>e.display.maxLineLength&&(e.display.maxLineLength=mt,e.display.maxLine=k.line,e.display.maxLineChanged=!0)}}}Math.abs(m)>2&&(s.scroller.scrollTop+=m)}function Ku(e){if(e.widgets)for(var s=0;s<e.widgets.length;++s){var h=e.widgets[s],a=h.node.parentNode;a&&(h.height=a.offsetHeight)}}function Sa(e,s,h){var a=h&&h.top!=null?Math.max(0,h.top):e.scroller.scrollTop;a=Math.floor(a-ga(e));var u=h&&h.bottom!=null?h.bottom:a+e.wrapper.clientHeight,m=an(s,a),y=an(s,u);if(h&&h.ensure){var k=h.ensure.from.line,C=h.ensure.to.line;k<m?(m=k,y=an(s,Dn(Vt(s,k))+e.wrapper.clientHeight)):Math.min(C,s.lastLine())>=y&&(m=an(s,Dn(Vt(s,C))-e.wrapper.clientHeight),y=C)}return{from:m,to:Math.max(y,m+1)}}function Rp(e,s){if(!me(e,"scrollCursorIntoView")){var h=e.display,a=h.sizer.getBoundingClientRect(),u=null;if(s.top+a.top<0?u=!0:s.bottom+a.top>(window.innerHeight||document.documentElement.clientHeight)&&(u=!1),u!=null&&!lt){var m=J("div","",null,`position: absolute;
                         top: `+(s.top-h.viewOffset-ga(e.display))+`px;
                         height: `+(s.bottom-s.top+hn(e)+h.barHeight)+`px;
                         left: `+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");e.display.lineSpace.appendChild(m),m.scrollIntoView(u),e.display.lineSpace.removeChild(m)}}}function Hp(e,s,h,a){a==null&&(a=0);var u;!e.options.lineWrapping&&s==h&&(h=s.sticky=="before"?Tt(s.line,s.ch+1,"before"):s,s=s.ch?Tt(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var m=0;m<5;m++){var y=!1,k=Ui(e,s),C=!h||h==s?k:Ui(e,h);u={left:Math.min(k.left,C.left),top:Math.min(k.top,C.top)-a,right:Math.max(k.left,C.left),bottom:Math.max(k.bottom,C.bottom)+a};var P=zl(e,u),W=e.doc.scrollTop,F=e.doc.scrollLeft;if(P.scrollTop!=null&&(co(e,P.scrollTop),Math.abs(e.doc.scrollTop-W)>1&&(y=!0)),P.scrollLeft!=null&&(ws(e,P.scrollLeft),Math.abs(e.doc.scrollLeft-F)>1&&(y=!0)),!y)break}return u}function $p(e,s){var h=zl(e,s);h.scrollTop!=null&&co(e,h.scrollTop),h.scrollLeft!=null&&ws(e,h.scrollLeft)}function zl(e,s){var h=e.display,a=cr(e.display);s.top<0&&(s.top=0);var u=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:h.scroller.scrollTop,m=Pl(e),y={};s.bottom-s.top>m&&(s.bottom=s.top+m);var k=e.doc.height+_l(h),C=s.top<a,P=s.bottom>k-a;if(s.top<u)y.scrollTop=C?0:s.top;else if(s.bottom>u+m){var W=Math.min(s.top,(P?k:s.bottom)-m);W!=u&&(y.scrollTop=W)}var F=e.options.fixedGutter?0:h.gutters.offsetWidth,et=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:h.scroller.scrollLeft-F,Z=ms(e)-h.gutters.offsetWidth,dt=s.right-s.left>Z;return dt&&(s.right=s.left+Z),s.left<10?y.scrollLeft=0:s.left<et?y.scrollLeft=Math.max(0,s.left+F-(dt?0:10)):s.right>Z+et-3&&(y.scrollLeft=s.right+(dt?0:10)-Z),y}function Fl(e,s){s!=null&&(xa(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+s)}function pr(e){xa(e);var s=e.getCursor();e.curOp.scrollToPos={from:s,to:s,margin:e.options.cursorScrollMargin}}function uo(e,s,h){(s!=null||h!=null)&&xa(e),s!=null&&(e.curOp.scrollLeft=s),h!=null&&(e.curOp.scrollTop=h)}function zp(e,s){xa(e),e.curOp.scrollToPos=s}function xa(e){var s=e.curOp.scrollToPos;if(s){e.curOp.scrollToPos=null;var h=ju(e,s.from),a=ju(e,s.to);Qu(e,h,a,s.margin)}}function Qu(e,s,h,a){var u=zl(e,{left:Math.min(s.left,h.left),top:Math.min(s.top,h.top)-a,right:Math.max(s.right,h.right),bottom:Math.max(s.bottom,h.bottom)+a});uo(e,u.scrollLeft,u.scrollTop)}function co(e,s){Math.abs(e.doc.scrollTop-s)<2||(l||Gl(e,{top:s}),Zu(e,s,!0),l&&Gl(e),go(e,100))}function Zu(e,s,h){s=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,s)),!(e.display.scroller.scrollTop==s&&!h)&&(e.doc.scrollTop=s,e.display.scrollbars.setScrollTop(s),e.display.scroller.scrollTop!=s&&(e.display.scroller.scrollTop=s))}function ws(e,s,h,a){s=Math.max(0,Math.min(s,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((h?s==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-s)<2)&&!a)&&(e.doc.scrollLeft=s,nc(e),e.display.scroller.scrollLeft!=s&&(e.display.scroller.scrollLeft=s),e.display.scrollbars.setScrollLeft(s))}function fo(e){var s=e.display,h=s.gutters.offsetWidth,a=Math.round(e.doc.height+_l(e.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:e.options.fixedGutter?h:0,docHeight:a,scrollHeight:a+hn(e)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:h}}var Ss=function(e,s,h){this.cm=h;var a=this.vert=J("div",[J("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),u=this.horiz=J("div",[J("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a.tabIndex=u.tabIndex=-1,e(a),e(u),ft(a,"scroll",function(){a.clientHeight&&s(a.scrollTop,"vertical")}),ft(u,"scroll",function(){u.clientWidth&&s(u.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,w&&D<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ss.prototype.update=function(e){var s=e.scrollWidth>e.clientWidth+1,h=e.scrollHeight>e.clientHeight+1,a=e.nativeBarWidth;if(h){this.vert.style.display="block",this.vert.style.bottom=s?a+"px":"0";var u=e.viewHeight-(s?a:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+u)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=h?a+"px":"0",this.horiz.style.left=e.barLeft+"px";var m=e.viewWidth-e.barLeft-(h?a:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+m)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(a==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:h?a:0,bottom:s?a:0}},Ss.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ss.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ss.prototype.zeroWidthHack=function(){var e=z&&!Q?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ot,this.disableVert=new ot},Ss.prototype.enableZeroWidthBar=function(e,s,h){e.style.pointerEvents="auto";function a(){var u=e.getBoundingClientRect(),m=h=="vert"?document.elementFromPoint(u.right-1,(u.top+u.bottom)/2):document.elementFromPoint((u.right+u.left)/2,u.bottom-1);m!=e?e.style.pointerEvents="none":s.set(1e3,a)}s.set(1e3,a)},Ss.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var po=function(){};po.prototype.update=function(){return{bottom:0,right:0}},po.prototype.setScrollLeft=function(){},po.prototype.setScrollTop=function(){},po.prototype.clear=function(){};function gr(e,s){s||(s=fo(e));var h=e.display.barWidth,a=e.display.barHeight;Ju(e,s);for(var u=0;u<4&&h!=e.display.barWidth||a!=e.display.barHeight;u++)h!=e.display.barWidth&&e.options.lineWrapping&&wa(e),Ju(e,fo(e)),h=e.display.barWidth,a=e.display.barHeight}function Ju(e,s){var h=e.display,a=h.scrollbars.update(s);h.sizer.style.paddingRight=(h.barWidth=a.right)+"px",h.sizer.style.paddingBottom=(h.barHeight=a.bottom)+"px",h.heightForcer.style.borderBottom=a.bottom+"px solid transparent",a.right&&a.bottom?(h.scrollbarFiller.style.display="block",h.scrollbarFiller.style.height=a.bottom+"px",h.scrollbarFiller.style.width=a.right+"px"):h.scrollbarFiller.style.display="",a.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(h.gutterFiller.style.display="block",h.gutterFiller.style.height=a.bottom+"px",h.gutterFiller.style.width=s.gutterWidth+"px"):h.gutterFiller.style.display=""}var tc={native:Ss,null:po};function ec(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Wt(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new tc[e.options.scrollbarStyle](function(s){e.display.wrapper.insertBefore(s,e.display.scrollbarFiller),ft(s,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,h){h=="horizontal"?ws(e,s):co(e,s)},e),e.display.scrollbars.addClass&&Yt(e.display.wrapper,e.display.scrollbars.addClass)}var Fp=0;function xs(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Fp,markArrays:null},yp(e.curOp)}function ks(e){var s=e.curOp;s&&Sp(s,function(h){for(var a=0;a<h.ops.length;a++)h.ops[a].cm.curOp=null;jp(h)})}function jp(e){for(var s=e.ops,h=0;h<s.length;h++)Gp(s[h]);for(var a=0;a<s.length;a++)Xp(s[a]);for(var u=0;u<s.length;u++)Yp(s[u]);for(var m=0;m<s.length;m++)Up(s[m]);for(var y=0;y<s.length;y++)qp(s[y])}function Gp(e){var s=e.cm,h=s.display;Kp(s),e.updateMaxLine&&Dl(s),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<h.viewFrom||e.scrollToPos.to.line>=h.viewTo)||h.maxLineChanged&&s.options.lineWrapping,e.update=e.mustUpdate&&new ka(s,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Xp(e){e.updatedDisplay=e.mustUpdate&&jl(e.cm,e.update)}function Yp(e){var s=e.cm,h=s.display;e.updatedDisplay&&wa(s),e.barMeasure=fo(s),h.maxLineChanged&&!s.options.lineWrapping&&(e.adjustWidthTo=Mu(s,h.maxLine,h.maxLine.text.length).left+3,s.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(h.scroller.clientWidth,h.sizer.offsetLeft+e.adjustWidthTo+hn(s)+s.display.barWidth),e.maxScrollLeft=Math.max(0,h.sizer.offsetLeft+e.adjustWidthTo-ms(s))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=h.input.prepareSelection())}function Up(e){var s=e.cm;e.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<s.doc.scrollLeft&&ws(s,Math.min(s.display.scroller.scrollLeft,e.maxScrollLeft),!0),s.display.maxLineChanged=!1);var h=e.focus&&e.focus==Zt();e.preparedSelection&&s.display.input.showSelection(e.preparedSelection,h),(e.updatedDisplay||e.startHeight!=s.doc.height)&&gr(s,e.barMeasure),e.updatedDisplay&&Yl(s,e.barMeasure),e.selectionChanged&&Rl(s),s.state.focused&&e.updateInput&&s.display.input.reset(e.typing),h&&Vu(e.cm)}function qp(e){var s=e.cm,h=s.display,a=s.doc;if(e.updatedDisplay&&ic(s,e.update),h.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(h.wheelStartX=h.wheelStartY=null),e.scrollTop!=null&&Zu(s,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&ws(s,e.scrollLeft,!0,!0),e.scrollToPos){var u=Hp(s,Ft(a,e.scrollToPos.from),Ft(a,e.scrollToPos.to),e.scrollToPos.margin);Rp(s,u)}var m=e.maybeHiddenMarkers,y=e.maybeUnhiddenMarkers;if(m)for(var k=0;k<m.length;++k)m[k].lines.length||Et(m[k],"hide");if(y)for(var C=0;C<y.length;++C)y[C].lines.length&&Et(y[C],"unhide");h.wrapper.offsetHeight&&(a.scrollTop=s.display.scroller.scrollTop),e.changeObjs&&Et(s,"changes",s,e.changeObjs),e.update&&e.update.finish()}function bi(e,s){if(e.curOp)return s();xs(e);try{return s()}finally{ks(e)}}function Ye(e,s){return function(){if(e.curOp)return s.apply(e,arguments);xs(e);try{return s.apply(e,arguments)}finally{ks(e)}}}function si(e){return function(){if(this.curOp)return e.apply(this,arguments);xs(this);try{return e.apply(this,arguments)}finally{ks(this)}}}function Ue(e){return function(){var s=this.cm;if(!s||s.curOp)return e.apply(this,arguments);xs(s);try{return e.apply(this,arguments)}finally{ks(s)}}}function go(e,s){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(s,pe(Vp,e))}function Vp(e){var s=e.doc;if(!(s.highlightFrontier>=e.display.viewTo)){var h=+new Date+e.options.workTime,a=no(e,s.highlightFrontier),u=[];s.iter(a.line,Math.min(s.first+s.size,e.display.viewTo+500),function(m){if(a.line>=e.display.viewFrom){var y=m.styles,k=m.text.length>e.options.maxHighlightLength?_i(s.mode,a.state):null,C=hu(e,m,a,!0);k&&(a.state=k),m.styles=C.styles;var P=m.styleClasses,W=C.classes;W?m.styleClasses=W:P&&(m.styleClasses=null);for(var F=!y||y.length!=m.styles.length||P!=W&&(!P||!W||P.bgClass!=W.bgClass||P.textClass!=W.textClass),et=0;!F&&et<y.length;++et)F=y[et]!=m.styles[et];F&&u.push(a.line),m.stateAfter=a.save(),a.nextLine()}else m.text.length<=e.options.maxHighlightLength&&yl(e,m.text,a),m.stateAfter=a.line%5==0?a.save():null,a.nextLine();if(+new Date>h)return go(e,e.options.workDelay),!0}),s.highlightFrontier=a.line,s.modeFrontier=Math.max(s.modeFrontier,a.line),u.length&&bi(e,function(){for(var m=0;m<u.length;m++)Un(e,u[m],"text")})}}var ka=function(e,s,h){var a=e.display;this.viewport=s,this.visible=Sa(a,e.doc,s),this.editorIsHidden=!a.wrapper.offsetWidth,this.wrapperHeight=a.wrapper.clientHeight,this.wrapperWidth=a.wrapper.clientWidth,this.oldDisplayWidth=ms(e),this.force=h,this.dims=Al(e),this.events=[]};ka.prototype.signal=function(e,s){Be(e,s)&&this.events.push(arguments)},ka.prototype.finish=function(){for(var e=0;e<this.events.length;e++)Et.apply(null,this.events[e])};function Kp(e){var s=e.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=hn(e)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=hn(e)+"px",s.scrollbarsClipped=!0)}function Qp(e){if(e.hasFocus())return null;var s=Zt();if(!s||!Kt(e.display.lineDiv,s))return null;var h={activeElt:s};if(window.getSelection){var a=window.getSelection();a.anchorNode&&a.extend&&Kt(e.display.lineDiv,a.anchorNode)&&(h.anchorNode=a.anchorNode,h.anchorOffset=a.anchorOffset,h.focusNode=a.focusNode,h.focusOffset=a.focusOffset)}return h}function Zp(e){if(!(!e||!e.activeElt||e.activeElt==Zt())&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&Kt(document.body,e.anchorNode)&&Kt(document.body,e.focusNode))){var s=window.getSelection(),h=document.createRange();h.setEnd(e.anchorNode,e.anchorOffset),h.collapse(!1),s.removeAllRanges(),s.addRange(h),s.extend(e.focusNode,e.focusOffset)}}function jl(e,s){var h=e.display,a=e.doc;if(s.editorIsHidden)return qn(e),!1;if(!s.force&&s.visible.from>=h.viewFrom&&s.visible.to<=h.viewTo&&(h.updateLineNumbers==null||h.updateLineNumbers>=h.viewTo)&&h.renderedView==h.view&&Uu(e)==0)return!1;sc(e)&&(qn(e),s.dims=Al(e));var u=a.first+a.size,m=Math.max(s.visible.from-e.options.viewportMargin,a.first),y=Math.min(u,s.visible.to+e.options.viewportMargin);h.viewFrom<m&&m-h.viewFrom<20&&(m=Math.max(a.first,h.viewFrom)),h.viewTo>y&&h.viewTo-y<20&&(y=Math.min(u,h.viewTo)),Cn&&(m=kl(e.doc,m),y=ku(e.doc,y));var k=m!=h.viewFrom||y!=h.viewTo||h.lastWrapHeight!=s.wrapperHeight||h.lastWrapWidth!=s.wrapperWidth;Np(e,m,y),h.viewOffset=Dn(Vt(e.doc,h.viewFrom)),e.display.mover.style.top=h.viewOffset+"px";var C=Uu(e);if(!k&&C==0&&!s.force&&h.renderedView==h.view&&(h.updateLineNumbers==null||h.updateLineNumbers>=h.viewTo))return!1;var P=Qp(e);return C>4&&(h.lineDiv.style.display="none"),Jp(e,h.updateLineNumbers,s.dims),C>4&&(h.lineDiv.style.display=""),h.renderedView=h.view,Zp(P),Pt(h.cursorDiv),Pt(h.selectionDiv),h.gutters.style.height=h.sizer.style.minHeight=0,k&&(h.lastWrapHeight=s.wrapperHeight,h.lastWrapWidth=s.wrapperWidth,go(e,400)),h.updateLineNumbers=null,!0}function ic(e,s){for(var h=s.viewport,a=!0;;a=!1){if(!a||!e.options.lineWrapping||s.oldDisplayWidth==ms(e)){if(h&&h.top!=null&&(h={top:Math.min(e.doc.height+_l(e.display)-Pl(e),h.top)}),s.visible=Sa(e.display,e.doc,h),s.visible.from>=e.display.viewFrom&&s.visible.to<=e.display.viewTo)break}else a&&(s.visible=Sa(e.display,e.doc,h));if(!jl(e,s))break;wa(e);var u=fo(e);ho(e),gr(e,u),Yl(e,u),s.force=!1}s.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(s.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Gl(e,s){var h=new ka(e,s);if(jl(e,h)){wa(e),ic(e,h);var a=fo(e);ho(e),gr(e,a),Yl(e,a),h.finish()}}function Jp(e,s,h){var a=e.display,u=e.options.lineNumbers,m=a.lineDiv,y=m.firstChild;function k(dt){var mt=dt.nextSibling;return T&&z&&e.display.currentWheelTarget==dt?dt.style.display="none":dt.parentNode.removeChild(dt),mt}for(var C=a.view,P=a.viewFrom,W=0;W<C.length;W++){var F=C[W];if(!F.hidden)if(!F.node||F.node.parentNode!=m){var et=Tp(e,F,P,h);m.insertBefore(et,y)}else{for(;y!=F.node;)y=k(y);var Z=u&&s!=null&&s<=P&&F.lineNumber;F.changes&&(V(F.changes,"gutter")>-1&&(Z=!1),Pu(e,F,P,h)),Z&&(Pt(F.lineNumber),F.lineNumber.appendChild(document.createTextNode(io(e.options,P)))),y=F.node.nextSibling}P+=F.size}for(;y;)y=k(y)}function Xl(e){var s=e.gutters.offsetWidth;e.sizer.style.marginLeft=s+"px",Xe(e,"gutterChanged",e)}function Yl(e,s){e.display.sizer.style.minHeight=s.docHeight+"px",e.display.heightForcer.style.top=s.docHeight+"px",e.display.gutters.style.height=s.docHeight+e.display.barHeight+hn(e)+"px"}function nc(e){var s=e.display,h=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!e.options.fixedGutter))){for(var a=Ml(s)-s.scroller.scrollLeft+e.doc.scrollLeft,u=s.gutters.offsetWidth,m=a+"px",y=0;y<h.length;y++)if(!h[y].hidden){e.options.fixedGutter&&(h[y].gutter&&(h[y].gutter.style.left=m),h[y].gutterBackground&&(h[y].gutterBackground.style.left=m));var k=h[y].alignable;if(k)for(var C=0;C<k.length;C++)k[C].style.left=m}e.options.fixedGutter&&(s.gutters.style.left=a+u+"px")}}function sc(e){if(!e.options.lineNumbers)return!1;var s=e.doc,h=io(e.options,s.first+s.size-1),a=e.display;if(h.length!=a.lineNumChars){var u=a.measure.appendChild(J("div",[J("div",h)],"CodeMirror-linenumber CodeMirror-gutter-elt")),m=u.firstChild.offsetWidth,y=u.offsetWidth-m;return a.lineGutter.style.width="",a.lineNumInnerWidth=Math.max(m,a.lineGutter.offsetWidth-y)+1,a.lineNumWidth=a.lineNumInnerWidth+y,a.lineNumChars=a.lineNumInnerWidth?h.length:-1,a.lineGutter.style.width=a.lineNumWidth+"px",Xl(e.display),!0}return!1}function Ul(e,s){for(var h=[],a=!1,u=0;u<e.length;u++){var m=e[u],y=null;if(typeof m!="string"&&(y=m.style,m=m.className),m=="CodeMirror-linenumbers")if(s)a=!0;else continue;h.push({className:m,style:y})}return s&&!a&&h.push({className:"CodeMirror-linenumbers",style:null}),h}function rc(e){var s=e.gutters,h=e.gutterSpecs;Pt(s),e.lineGutter=null;for(var a=0;a<h.length;++a){var u=h[a],m=u.className,y=u.style,k=s.appendChild(J("div",null,"CodeMirror-gutter "+m));y&&(k.style.cssText=y),m=="CodeMirror-linenumbers"&&(e.lineGutter=k,k.style.width=(e.lineNumWidth||1)+"px")}s.style.display=h.length?"":"none",Xl(e)}function mo(e){rc(e.display),li(e),nc(e)}function tg(e,s,h,a){var u=this;this.input=h,u.scrollbarFiller=J("div",null,"CodeMirror-scrollbar-filler"),u.scrollbarFiller.setAttribute("cm-not-content","true"),u.gutterFiller=J("div",null,"CodeMirror-gutter-filler"),u.gutterFiller.setAttribute("cm-not-content","true"),u.lineDiv=Y("div",null,"CodeMirror-code"),u.selectionDiv=J("div",null,null,"position: relative; z-index: 1"),u.cursorDiv=J("div",null,"CodeMirror-cursors"),u.measure=J("div",null,"CodeMirror-measure"),u.lineMeasure=J("div",null,"CodeMirror-measure"),u.lineSpace=Y("div",[u.measure,u.lineMeasure,u.selectionDiv,u.cursorDiv,u.lineDiv],null,"position: relative; outline: none");var m=Y("div",[u.lineSpace],"CodeMirror-lines");u.mover=J("div",[m],null,"position: relative"),u.sizer=J("div",[u.mover],"CodeMirror-sizer"),u.sizerWidth=null,u.heightForcer=J("div",null,null,"position: absolute; height: "+st+"px; width: 1px;"),u.gutters=J("div",null,"CodeMirror-gutters"),u.lineGutter=null,u.scroller=J("div",[u.sizer,u.heightForcer,u.gutters],"CodeMirror-scroll"),u.scroller.setAttribute("tabIndex","-1"),u.wrapper=J("div",[u.scrollbarFiller,u.gutterFiller,u.scroller],"CodeMirror"),u.wrapper.setAttribute("translate","no"),w&&D<8&&(u.gutters.style.zIndex=-1,u.scroller.style.paddingRight=0),!T&&!(l&&q)&&(u.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(u.wrapper):e(u.wrapper)),u.viewFrom=u.viewTo=s.first,u.reportedViewFrom=u.reportedViewTo=s.first,u.view=[],u.renderedView=null,u.externalMeasured=null,u.viewOffset=0,u.lastWrapHeight=u.lastWrapWidth=0,u.updateLineNumbers=null,u.nativeBarWidth=u.barHeight=u.barWidth=0,u.scrollbarsClipped=!1,u.lineNumWidth=u.lineNumInnerWidth=u.lineNumChars=null,u.alignWidgets=!1,u.cachedCharWidth=u.cachedTextHeight=u.cachedPaddingH=null,u.maxLine=null,u.maxLineLength=0,u.maxLineChanged=!1,u.wheelDX=u.wheelDY=u.wheelStartX=u.wheelStartY=null,u.shift=!1,u.selForContextMenu=null,u.activeTouch=null,u.gutterSpecs=Ul(a.gutters,a.lineNumbers),rc(u),h.init(u)}var Ca=0,_n=null;w?_n=-.53:l?_n=15:M?_n=-.7:E&&(_n=-1/3);function oc(e){var s=e.wheelDeltaX,h=e.wheelDeltaY;return s==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(s=e.detail),h==null&&e.detail&&e.axis==e.VERTICAL_AXIS?h=e.detail:h==null&&(h=e.wheelDelta),{x:s,y:h}}function eg(e){var s=oc(e);return s.x*=_n,s.y*=_n,s}function ac(e,s){var h=oc(s),a=h.x,u=h.y,m=_n;s.deltaMode===0&&(a=s.deltaX,u=s.deltaY,m=1);var y=e.display,k=y.scroller,C=k.scrollWidth>k.clientWidth,P=k.scrollHeight>k.clientHeight;if(a&&C||u&&P){if(u&&z&&T){t:for(var W=s.target,F=y.view;W!=k;W=W.parentNode)for(var et=0;et<F.length;et++)if(F[et].node==W){e.display.currentWheelTarget=W;break t}}if(a&&!l&&!L&&m!=null){u&&P&&co(e,Math.max(0,k.scrollTop+u*m)),ws(e,Math.max(0,k.scrollLeft+a*m)),(!u||u&&P)&&Fe(s),y.wheelStartX=null;return}if(u&&m!=null){var Z=u*m,dt=e.doc.scrollTop,mt=dt+y.wrapper.clientHeight;Z<0?dt=Math.max(0,dt+Z-50):mt=Math.min(e.doc.height,mt+Z+50),Gl(e,{top:dt,bottom:mt})}Ca<20&&s.deltaMode!==0&&(y.wheelStartX==null?(y.wheelStartX=k.scrollLeft,y.wheelStartY=k.scrollTop,y.wheelDX=a,y.wheelDY=u,setTimeout(function(){if(y.wheelStartX!=null){var It=k.scrollLeft-y.wheelStartX,At=k.scrollTop-y.wheelStartY,$t=At&&y.wheelDY&&At/y.wheelDY||It&&y.wheelDX&&It/y.wheelDX;y.wheelStartX=y.wheelStartY=null,$t&&(_n=(_n*Ca+$t)/(Ca+1),++Ca)}},200)):(y.wheelDX+=a,y.wheelDY+=u))}}var Ii=function(e,s){this.ranges=e,this.primIndex=s};Ii.prototype.primary=function(){return this.ranges[this.primIndex]},Ii.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var h=this.ranges[s],a=e.ranges[s];if(!j(h.anchor,a.anchor)||!j(h.head,a.head))return!1}return!0},Ii.prototype.deepCopy=function(){for(var e=[],s=0;s<this.ranges.length;s++)e[s]=new Se(gt(this.ranges[s].anchor),gt(this.ranges[s].head));return new Ii(e,this.primIndex)},Ii.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Ii.prototype.contains=function(e,s){s||(s=e);for(var h=0;h<this.ranges.length;h++){var a=this.ranges[h];if(I(s,a.from())>=0&&I(e,a.to())<=0)return h}return-1};var Se=function(e,s){this.anchor=e,this.head=s};Se.prototype.from=function(){return le(this.anchor,this.head)},Se.prototype.to=function(){return _t(this.anchor,this.head)},Se.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function qi(e,s,h){var a=e&&e.options.selectionsMayTouch,u=s[h];s.sort(function(et,Z){return I(et.from(),Z.from())}),h=V(s,u);for(var m=1;m<s.length;m++){var y=s[m],k=s[m-1],C=I(k.to(),y.from());if(a&&!y.empty()?C>0:C>=0){var P=le(k.from(),y.from()),W=_t(k.to(),y.to()),F=k.empty()?y.from()==y.head:k.from()==k.head;m<=h&&--h,s.splice(--m,2,new Se(F?W:P,F?P:W))}}return new Ii(s,h)}function Vn(e,s){return new Ii([new Se(e,s||e)],0)}function Kn(e){return e.text?Tt(e.from.line+e.text.length-1,Ht(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function lc(e,s){if(I(e,s.from)<0)return e;if(I(e,s.to)<=0)return Kn(s);var h=e.line+s.text.length-(s.to.line-s.from.line)-1,a=e.ch;return e.line==s.to.line&&(a+=Kn(s).ch-s.to.ch),Tt(h,a)}function ql(e,s){for(var h=[],a=0;a<e.sel.ranges.length;a++){var u=e.sel.ranges[a];h.push(new Se(lc(u.anchor,s),lc(u.head,s)))}return qi(e.cm,h,e.sel.primIndex)}function hc(e,s,h){return e.line==s.line?Tt(h.line,e.ch-s.ch+h.ch):Tt(h.line+(e.line-s.line),e.ch)}function ig(e,s,h){for(var a=[],u=Tt(e.first,0),m=u,y=0;y<s.length;y++){var k=s[y],C=hc(k.from,u,m),P=hc(Kn(k),u,m);if(u=k.to,m=P,h=="around"){var W=e.sel.ranges[y],F=I(W.head,W.anchor)<0;a[y]=new Se(F?P:C,F?C:P)}else a[y]=new Se(C,C)}return new Ii(a,e.sel.primIndex)}function Vl(e){e.doc.mode=or(e.options,e.doc.modeOption),vo(e)}function vo(e){e.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,go(e,100),e.state.modeGen++,e.curOp&&li(e)}function uc(e,s){return s.from.ch==0&&s.to.ch==0&&Ht(s.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Kl(e,s,h,a){function u($t){return h?h[$t]:null}function m($t,Mt,Gt){up($t,Mt,Gt,a),Xe($t,"change",$t,s)}function y($t,Mt){for(var Gt=[],ie=$t;ie<Mt;++ie)Gt.push(new lr(P[ie],u(ie),a));return Gt}var k=s.from,C=s.to,P=s.text,W=Vt(e,k.line),F=Vt(e,C.line),et=Ht(P),Z=u(P.length-1),dt=C.line-k.line;if(s.full)e.insert(0,y(0,P.length)),e.remove(P.length,e.size-P.length);else if(uc(e,s)){var mt=y(0,P.length-1);m(F,F.text,Z),dt&&e.remove(k.line,dt),mt.length&&e.insert(k.line,mt)}else if(W==F)if(P.length==1)m(W,W.text.slice(0,k.ch)+et+W.text.slice(C.ch),Z);else{var It=y(1,P.length-1);It.push(new lr(et+W.text.slice(C.ch),Z,a)),m(W,W.text.slice(0,k.ch)+P[0],u(0)),e.insert(k.line+1,It)}else if(P.length==1)m(W,W.text.slice(0,k.ch)+P[0]+F.text.slice(C.ch),u(0)),e.remove(k.line+1,dt);else{m(W,W.text.slice(0,k.ch)+P[0],u(0)),m(F,et+F.text.slice(C.ch),Z);var At=y(1,P.length-1);dt>1&&e.remove(k.line+1,dt-1),e.insert(k.line+1,At)}Xe(e,"change",e,s)}function Qn(e,s,h){function a(u,m,y){if(u.linked)for(var k=0;k<u.linked.length;++k){var C=u.linked[k];if(C.doc!=m){var P=y&&C.sharedHist;h&&!P||(s(C.doc,P),a(C.doc,u,P))}}}a(e,null,!0)}function cc(e,s){if(s.cm)throw new Error("This document is already in use.");e.doc=s,s.cm=e,Nl(e),Vl(e),dc(e),e.options.direction=s.direction,e.options.lineWrapping||Dl(e),e.options.mode=s.modeOption,li(e)}function dc(e){(e.doc.direction=="rtl"?Yt:Wt)(e.display.lineDiv,"CodeMirror-rtl")}function ng(e){bi(e,function(){dc(e),li(e)})}function Da(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ql(e,s){var h={from:gt(s.from),to:Kn(s),text:on(e,s.from,s.to)};return gc(e,h,s.from.line,s.to.line+1),Qn(e,function(a){return gc(a,h,s.from.line,s.to.line+1)},!0),h}function fc(e){for(;e.length;){var s=Ht(e);if(s.ranges)e.pop();else break}}function sg(e,s){if(s)return fc(e.done),Ht(e.done);if(e.done.length&&!Ht(e.done).ranges)return Ht(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Ht(e.done)}function pc(e,s,h,a){var u=e.history;u.undone.length=0;var m=+new Date,y,k;if((u.lastOp==a||u.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&u.lastModTime>m-(e.cm?e.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(y=sg(u,u.lastOp==a)))k=Ht(y.changes),I(s.from,s.to)==0&&I(s.from,k.to)==0?k.to=Kn(s):y.changes.push(Ql(e,s));else{var C=Ht(u.done);for((!C||!C.ranges)&&Ta(e.sel,u.done),y={changes:[Ql(e,s)],generation:u.generation},u.done.push(y);u.done.length>u.undoDepth;)u.done.shift(),u.done[0].ranges||u.done.shift()}u.done.push(h),u.generation=++u.maxGeneration,u.lastModTime=u.lastSelTime=m,u.lastOp=u.lastSelOp=a,u.lastOrigin=u.lastSelOrigin=s.origin,k||Et(e,"historyAdded")}function rg(e,s,h,a){var u=s.charAt(0);return u=="*"||u=="+"&&h.ranges.length==a.ranges.length&&h.somethingSelected()==a.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function og(e,s,h,a){var u=e.history,m=a&&a.origin;h==u.lastSelOp||m&&u.lastSelOrigin==m&&(u.lastModTime==u.lastSelTime&&u.lastOrigin==m||rg(e,m,Ht(u.done),s))?u.done[u.done.length-1]=s:Ta(s,u.done),u.lastSelTime=+new Date,u.lastSelOrigin=m,u.lastSelOp=h,a&&a.clearRedo!==!1&&fc(u.undone)}function Ta(e,s){var h=Ht(s);h&&h.ranges&&h.equals(e)||s.push(e)}function gc(e,s,h,a){var u=s["spans_"+e.id],m=0;e.iter(Math.max(e.first,h),Math.min(e.first+e.size,a),function(y){y.markedSpans&&((u||(u=s["spans_"+e.id]={}))[m]=y.markedSpans),++m})}function ag(e){if(!e)return null;for(var s,h=0;h<e.length;++h)e[h].marker.explicitlyCleared?s||(s=e.slice(0,h)):s&&s.push(e[h]);return s?s.length?s:null:e}function lg(e,s){var h=s["spans_"+e.id];if(!h)return null;for(var a=[],u=0;u<s.text.length;++u)a.push(ag(h[u]));return a}function mc(e,s){var h=lg(e,s),a=Sl(e,s);if(!h)return a;if(!a)return h;for(var u=0;u<h.length;++u){var m=h[u],y=a[u];if(m&&y)t:for(var k=0;k<y.length;++k){for(var C=y[k],P=0;P<m.length;++P)if(m[P].marker==C.marker)continue t;m.push(C)}else y&&(h[u]=y)}return h}function mr(e,s,h){for(var a=[],u=0;u<e.length;++u){var m=e[u];if(m.ranges){a.push(h?Ii.prototype.deepCopy.call(m):m);continue}var y=m.changes,k=[];a.push({changes:k});for(var C=0;C<y.length;++C){var P=y[C],W=void 0;if(k.push({from:P.from,to:P.to,text:P.text}),s)for(var F in P)(W=F.match(/^spans_(\d+)$/))&&V(s,Number(W[1]))>-1&&(Ht(k)[F]=P[F],delete P[F])}}return a}function Zl(e,s,h,a){if(a){var u=e.anchor;if(h){var m=I(s,u)<0;m!=I(h,u)<0?(u=s,s=h):m!=I(s,h)<0&&(s=h)}return new Se(u,s)}else return new Se(h||s,s)}function _a(e,s,h,a,u){u==null&&(u=e.cm&&(e.cm.display.shift||e.extend)),ti(e,new Ii([Zl(e.sel.primary(),s,h,u)],0),a)}function vc(e,s,h){for(var a=[],u=e.cm&&(e.cm.display.shift||e.extend),m=0;m<e.sel.ranges.length;m++)a[m]=Zl(e.sel.ranges[m],s[m],null,u);var y=qi(e.cm,a,e.sel.primIndex);ti(e,y,h)}function Jl(e,s,h,a){var u=e.sel.ranges.slice(0);u[s]=h,ti(e,qi(e.cm,u,e.sel.primIndex),a)}function bc(e,s,h,a){ti(e,Vn(s,h),a)}function hg(e,s,h){var a={ranges:s.ranges,update:function(u){this.ranges=[];for(var m=0;m<u.length;m++)this.ranges[m]=new Se(Ft(e,u[m].anchor),Ft(e,u[m].head))},origin:h&&h.origin};return Et(e,"beforeSelectionChange",e,a),e.cm&&Et(e.cm,"beforeSelectionChange",e.cm,a),a.ranges!=s.ranges?qi(e.cm,a.ranges,a.ranges.length-1):s}function yc(e,s,h){var a=e.history.done,u=Ht(a);u&&u.ranges?(a[a.length-1]=s,Pa(e,s,h)):ti(e,s,h)}function ti(e,s,h){Pa(e,s,h),og(e,e.sel,e.cm?e.cm.curOp.id:NaN,h)}function Pa(e,s,h){(Be(e,"beforeSelectionChange")||e.cm&&Be(e.cm,"beforeSelectionChange"))&&(s=hg(e,s,h));var a=h&&h.bias||(I(s.primary().head,e.sel.primary().head)<0?-1:1);wc(e,xc(e,s,a,!0)),!(h&&h.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&pr(e.cm)}function wc(e,s){s.equals(e.sel)||(e.sel=s,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ve(e.cm)),Xe(e,"cursorActivity",e))}function Sc(e){wc(e,xc(e,e.sel,null,!1))}function xc(e,s,h,a){for(var u,m=0;m<s.ranges.length;m++){var y=s.ranges[m],k=s.ranges.length==e.sel.ranges.length&&e.sel.ranges[m],C=Ia(e,y.anchor,k&&k.anchor,h,a),P=Ia(e,y.head,k&&k.head,h,a);(u||C!=y.anchor||P!=y.head)&&(u||(u=s.ranges.slice(0,m)),u[m]=new Se(C,P))}return u?qi(e.cm,u,s.primIndex):s}function vr(e,s,h,a,u){var m=Vt(e,s.line);if(m.markedSpans)for(var y=0;y<m.markedSpans.length;++y){var k=m.markedSpans[y],C=k.marker,P="selectLeft"in C?!C.selectLeft:C.inclusiveLeft,W="selectRight"in C?!C.selectRight:C.inclusiveRight;if((k.from==null||(P?k.from<=s.ch:k.from<s.ch))&&(k.to==null||(W?k.to>=s.ch:k.to>s.ch))){if(u&&(Et(C,"beforeCursorEnter"),C.explicitlyCleared))if(m.markedSpans){--y;continue}else break;if(!C.atomic)continue;if(h){var F=C.find(a<0?1:-1),et=void 0;if((a<0?W:P)&&(F=kc(e,F,-a,F&&F.line==s.line?m:null)),F&&F.line==s.line&&(et=I(F,h))&&(a<0?et<0:et>0))return vr(e,F,s,a,u)}var Z=C.find(a<0?-1:1);return(a<0?P:W)&&(Z=kc(e,Z,a,Z.line==s.line?m:null)),Z?vr(e,Z,s,a,u):null}}return s}function Ia(e,s,h,a,u){var m=a||1,y=vr(e,s,h,m,u)||!u&&vr(e,s,h,m,!0)||vr(e,s,h,-m,u)||!u&&vr(e,s,h,-m,!0);return y||(e.cantEdit=!0,Tt(e.first,0))}function kc(e,s,h,a){return h<0&&s.ch==0?s.line>e.first?Ft(e,Tt(s.line-1)):null:h>0&&s.ch==(a||Vt(e,s.line)).text.length?s.line<e.first+e.size-1?Tt(s.line+1,0):null:new Tt(s.line,s.ch+h)}function Cc(e){e.setSelection(Tt(e.firstLine(),0),Tt(e.lastLine()),U)}function Dc(e,s,h){var a={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return a.canceled=!0}};return h&&(a.update=function(u,m,y,k){u&&(a.from=Ft(e,u)),m&&(a.to=Ft(e,m)),y&&(a.text=y),k!==void 0&&(a.origin=k)}),Et(e,"beforeChange",e,a),e.cm&&Et(e.cm,"beforeChange",e.cm,a),a.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:a.from,to:a.to,text:a.text,origin:a.origin}}function br(e,s,h){if(e.cm){if(!e.cm.curOp)return Ye(e.cm,br)(e,s,h);if(e.cm.state.suppressEdits)return}if(!((Be(e,"beforeChange")||e.cm&&Be(e.cm,"beforeChange"))&&(s=Dc(e,s,!0),!s))){var a=mu&&!h&&op(e,s.from,s.to);if(a)for(var u=a.length-1;u>=0;--u)Tc(e,{from:a[u].from,to:a[u].to,text:u?[""]:s.text,origin:s.origin});else Tc(e,s)}}function Tc(e,s){if(!(s.text.length==1&&s.text[0]==""&&I(s.from,s.to)==0)){var h=ql(e,s);pc(e,s,h,e.cm?e.cm.curOp.id:NaN),bo(e,s,h,Sl(e,s));var a=[];Qn(e,function(u,m){!m&&V(a,u.history)==-1&&(Lc(u.history,s),a.push(u.history)),bo(u,s,null,Sl(u,s))})}}function La(e,s,h){var a=e.cm&&e.cm.state.suppressEdits;if(!(a&&!h)){for(var u=e.history,m,y=e.sel,k=s=="undo"?u.done:u.undone,C=s=="undo"?u.undone:u.done,P=0;P<k.length&&(m=k[P],!(h?m.ranges&&!m.equals(e.sel):!m.ranges));P++);if(P!=k.length){for(u.lastOrigin=u.lastSelOrigin=null;;)if(m=k.pop(),m.ranges){if(Ta(m,C),h&&!m.equals(e.sel)){ti(e,m,{clearRedo:!1});return}y=m}else if(a){k.push(m);return}else break;var W=[];Ta(y,C),C.push({changes:W,generation:u.generation}),u.generation=m.generation||++u.maxGeneration;for(var F=Be(e,"beforeChange")||e.cm&&Be(e.cm,"beforeChange"),et=function(mt){var It=m.changes[mt];if(It.origin=s,F&&!Dc(e,It,!1))return k.length=0,{};W.push(Ql(e,It));var At=mt?ql(e,It):Ht(k);bo(e,It,At,mc(e,It)),!mt&&e.cm&&e.cm.scrollIntoView({from:It.from,to:Kn(It)});var $t=[];Qn(e,function(Mt,Gt){!Gt&&V($t,Mt.history)==-1&&(Lc(Mt.history,It),$t.push(Mt.history)),bo(Mt,It,null,mc(Mt,It))})},Z=m.changes.length-1;Z>=0;--Z){var dt=et(Z);if(dt)return dt.v}}}}function _c(e,s){if(s!=0&&(e.first+=s,e.sel=new Ii(pt(e.sel.ranges,function(u){return new Se(Tt(u.anchor.line+s,u.anchor.ch),Tt(u.head.line+s,u.head.ch))}),e.sel.primIndex),e.cm)){li(e.cm,e.first,e.first-s,s);for(var h=e.cm.display,a=h.viewFrom;a<h.viewTo;a++)Un(e.cm,a,"gutter")}}function bo(e,s,h,a){if(e.cm&&!e.cm.curOp)return Ye(e.cm,bo)(e,s,h,a);if(s.to.line<e.first){_c(e,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>e.lastLine())){if(s.from.line<e.first){var u=s.text.length-1-(e.first-s.from.line);_c(e,u),s={from:Tt(e.first,0),to:Tt(s.to.line+u,s.to.ch),text:[Ht(s.text)],origin:s.origin}}var m=e.lastLine();s.to.line>m&&(s={from:s.from,to:Tt(m,Vt(e,m).text.length),text:[s.text[0]],origin:s.origin}),s.removed=on(e,s.from,s.to),h||(h=ql(e,s)),e.cm?ug(e.cm,s,a):Kl(e,s,a),Pa(e,h,U),e.cantEdit&&Ia(e,Tt(e.firstLine(),0))&&(e.cantEdit=!1)}}function ug(e,s,h){var a=e.doc,u=e.display,m=s.from,y=s.to,k=!1,C=m.line;e.options.lineWrapping||(C=we(Yi(Vt(a,m.line))),a.iter(C,y.line+1,function(Z){if(Z==u.maxLine)return k=!0,!0})),a.sel.contains(s.from,s.to)>-1&&ve(e),Kl(a,s,h,Yu(e)),e.options.lineWrapping||(a.iter(C,m.line+s.text.length,function(Z){var dt=fa(Z);dt>u.maxLineLength&&(u.maxLine=Z,u.maxLineLength=dt,u.maxLineChanged=!0,k=!1)}),k&&(e.curOp.updateMaxLine=!0)),Jf(a,m.line),go(e,400);var P=s.text.length-(y.line-m.line)-1;s.full?li(e):m.line==y.line&&s.text.length==1&&!uc(e.doc,s)?Un(e,m.line,"text"):li(e,m.line,y.line+1,P);var W=Be(e,"changes"),F=Be(e,"change");if(F||W){var et={from:m,to:y,text:s.text,removed:s.removed,origin:s.origin};F&&Xe(e,"change",e,et),W&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(et)}e.display.selForContextMenu=null}function yr(e,s,h,a,u){var m;a||(a=h),I(a,h)<0&&(m=[a,h],h=m[0],a=m[1]),typeof s=="string"&&(s=e.splitLines(s)),br(e,{from:h,to:a,text:s,origin:u})}function Pc(e,s,h,a){h<e.line?e.line+=a:s<e.line&&(e.line=s,e.ch=0)}function Ic(e,s,h,a){for(var u=0;u<e.length;++u){var m=e[u],y=!0;if(m.ranges){m.copied||(m=e[u]=m.deepCopy(),m.copied=!0);for(var k=0;k<m.ranges.length;k++)Pc(m.ranges[k].anchor,s,h,a),Pc(m.ranges[k].head,s,h,a);continue}for(var C=0;C<m.changes.length;++C){var P=m.changes[C];if(h<P.from.line)P.from=Tt(P.from.line+a,P.from.ch),P.to=Tt(P.to.line+a,P.to.ch);else if(s<=P.to.line){y=!1;break}}y||(e.splice(0,u+1),u=0)}}function Lc(e,s){var h=s.from.line,a=s.to.line,u=s.text.length-(a-h)-1;Ic(e.done,h,a,u),Ic(e.undone,h,a,u)}function yo(e,s,h,a){var u=s,m=s;return typeof s=="number"?m=Vt(e,be(e,s)):u=we(s),u==null?null:(a(m,u)&&e.cm&&Un(e.cm,u,h),m)}function wo(e){this.lines=e,this.parent=null;for(var s=0,h=0;h<e.length;++h)e[h].parent=this,s+=e[h].height;this.height=s}wo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,s){for(var h=e,a=e+s;h<a;++h){var u=this.lines[h];this.height-=u.height,cp(u),Xe(u,"delete")}this.lines.splice(e,s)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,s,h){this.height+=h,this.lines=this.lines.slice(0,e).concat(s).concat(this.lines.slice(e));for(var a=0;a<s.length;++a)s[a].parent=this},iterN:function(e,s,h){for(var a=e+s;e<a;++e)if(h(this.lines[e]))return!0}};function So(e){this.children=e;for(var s=0,h=0,a=0;a<e.length;++a){var u=e[a];s+=u.chunkSize(),h+=u.height,u.parent=this}this.size=s,this.height=h,this.parent=null}So.prototype={chunkSize:function(){return this.size},removeInner:function(e,s){this.size-=s;for(var h=0;h<this.children.length;++h){var a=this.children[h],u=a.chunkSize();if(e<u){var m=Math.min(s,u-e),y=a.height;if(a.removeInner(e,m),this.height-=y-a.height,u==m&&(this.children.splice(h--,1),a.parent=null),(s-=m)==0)break;e=0}else e-=u}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof wo))){var k=[];this.collapse(k),this.children=[new wo(k)],this.children[0].parent=this}},collapse:function(e){for(var s=0;s<this.children.length;++s)this.children[s].collapse(e)},insertInner:function(e,s,h){this.size+=s.length,this.height+=h;for(var a=0;a<this.children.length;++a){var u=this.children[a],m=u.chunkSize();if(e<=m){if(u.insertInner(e,s,h),u.lines&&u.lines.length>50){for(var y=u.lines.length%25+25,k=y;k<u.lines.length;){var C=new wo(u.lines.slice(k,k+=25));u.height-=C.height,this.children.splice(++a,0,C),C.parent=this}u.lines=u.lines.slice(0,y),this.maybeSpill()}break}e-=m}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var s=e.children.splice(e.children.length-5,5),h=new So(s);if(e.parent){e.size-=h.size,e.height-=h.height;var u=V(e.parent.children,e);e.parent.children.splice(u+1,0,h)}else{var a=new So(e.children);a.parent=e,e.children=[a,h],e=a}h.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,s,h){for(var a=0;a<this.children.length;++a){var u=this.children[a],m=u.chunkSize();if(e<m){var y=Math.min(s,m-e);if(u.iterN(e,y,h))return!0;if((s-=y)==0)break;e=0}else e-=m}}};var xo=function(e,s,h){if(h)for(var a in h)h.hasOwnProperty(a)&&(this[a]=h[a]);this.doc=e,this.node=s};xo.prototype.clear=function(){var e=this.doc.cm,s=this.line.widgets,h=this.line,a=we(h);if(!(a==null||!s)){for(var u=0;u<s.length;++u)s[u]==this&&s.splice(u--,1);s.length||(h.widgets=null);var m=ao(this);vi(h,Math.max(0,h.height-m)),e&&(bi(e,function(){Oc(e,h,-m),Un(e,a,"widget")}),Xe(e,"lineWidgetCleared",e,this,a))}},xo.prototype.changed=function(){var e=this,s=this.height,h=this.doc.cm,a=this.line;this.height=null;var u=ao(this)-s;u&&(Yn(this.doc,a)||vi(a,a.height+u),h&&bi(h,function(){h.curOp.forceUpdate=!0,Oc(h,a,u),Xe(h,"lineWidgetChanged",h,e,we(a))}))},Wi(xo);function Oc(e,s,h){Dn(s)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Fl(e,h)}function cg(e,s,h,a){var u=new xo(e,h,a),m=e.cm;return m&&u.noHScroll&&(m.display.alignWidgets=!0),yo(e,s,"widget",function(y){var k=y.widgets||(y.widgets=[]);if(u.insertAt==null?k.push(u):k.splice(Math.min(k.length,Math.max(0,u.insertAt)),0,u),u.line=y,m&&!Yn(e,y)){var C=Dn(y)<e.scrollTop;vi(y,y.height+ao(u)),C&&Fl(m,u.height),m.curOp.forceUpdate=!0}return!0}),m&&Xe(m,"lineWidgetAdded",m,u,typeof s=="number"?s:we(s)),u}var Ec=0,Zn=function(e,s){this.lines=[],this.type=s,this.doc=e,this.id=++Ec};Zn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,s=e&&!e.curOp;if(s&&xs(e),Be(this,"clear")){var h=this.find();h&&Xe(this,"clear",h.from,h.to)}for(var a=null,u=null,m=0;m<this.lines.length;++m){var y=this.lines[m],k=so(y.markedSpans,this);e&&!this.collapsed?Un(e,we(y),"text"):e&&(k.to!=null&&(u=we(y)),k.from!=null&&(a=we(y))),y.markedSpans=ip(y.markedSpans,k),k.from==null&&this.collapsed&&!Yn(this.doc,y)&&e&&vi(y,cr(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var C=0;C<this.lines.length;++C){var P=Yi(this.lines[C]),W=fa(P);W>e.display.maxLineLength&&(e.display.maxLine=P,e.display.maxLineLength=W,e.display.maxLineChanged=!0)}a!=null&&e&&this.collapsed&&li(e,a,u+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Sc(e.doc)),e&&Xe(e,"markerCleared",e,this,a,u),s&&ks(e),this.parent&&this.parent.clear()}},Zn.prototype.find=function(e,s){e==null&&this.type=="bookmark"&&(e=1);for(var h,a,u=0;u<this.lines.length;++u){var m=this.lines[u],y=so(m.markedSpans,this);if(y.from!=null&&(h=Tt(s?m:we(m),y.from),e==-1))return h;if(y.to!=null&&(a=Tt(s?m:we(m),y.to),e==1))return a}return h&&{from:h,to:a}},Zn.prototype.changed=function(){var e=this,s=this.find(-1,!0),h=this,a=this.doc.cm;!s||!a||bi(a,function(){var u=s.line,m=we(s.line),y=Il(a,m);if(y&&(Ru(y),a.curOp.selectionChanged=a.curOp.forceUpdate=!0),a.curOp.updateMaxLine=!0,!Yn(h.doc,u)&&h.height!=null){var k=h.height;h.height=null;var C=ao(h)-k;C&&vi(u,u.height+C)}Xe(a,"markerChanged",a,e)})},Zn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||V(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Zn.prototype.detachLine=function(e){if(this.lines.splice(V(this.lines,e),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Wi(Zn);function wr(e,s,h,a,u){if(a&&a.shared)return dg(e,s,h,a,u);if(e.cm&&!e.cm.curOp)return Ye(e.cm,wr)(e,s,h,a,u);var m=new Zn(e,u),y=I(s,h);if(a&&oe(a,m,!1),y>0||y==0&&m.clearWhenEmpty!==!1)return m;if(m.replacedWith&&(m.collapsed=!0,m.widgetNode=Y("span",[m.replacedWith],"CodeMirror-widget"),a.handleMouseEvents||m.widgetNode.setAttribute("cm-ignore-events","true"),a.insertLeft&&(m.widgetNode.insertLeft=!0)),m.collapsed){if(xu(e,s.line,s,h,m)||s.line!=h.line&&xu(e,h.line,s,h,m))throw new Error("Inserting collapsed marker partially overlapping an existing one");ep()}m.addToHistory&&pc(e,{from:s,to:h,origin:"markText"},e.sel,NaN);var k=s.line,C=e.cm,P;if(e.iter(k,h.line+1,function(F){C&&m.collapsed&&!C.options.lineWrapping&&Yi(F)==C.display.maxLine&&(P=!0),m.collapsed&&k!=s.line&&vi(F,0),np(F,new ha(m,k==s.line?s.ch:null,k==h.line?h.ch:null),e.cm&&e.cm.curOp),++k}),m.collapsed&&e.iter(s.line,h.line+1,function(F){Yn(e,F)&&vi(F,0)}),m.clearOnEnter&&ft(m,"beforeCursorEnter",function(){return m.clear()}),m.readOnly&&(tp(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),m.collapsed&&(m.id=++Ec,m.atomic=!0),C){if(P&&(C.curOp.updateMaxLine=!0),m.collapsed)li(C,s.line,h.line+1);else if(m.className||m.startStyle||m.endStyle||m.css||m.attributes||m.title)for(var W=s.line;W<=h.line;W++)Un(C,W,"text");m.atomic&&Sc(C.doc),Xe(C,"markerAdded",C,m)}return m}var ko=function(e,s){this.markers=e,this.primary=s;for(var h=0;h<e.length;++h)e[h].parent=this};ko.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Xe(this,"clear")}},ko.prototype.find=function(e,s){return this.primary.find(e,s)},Wi(ko);function dg(e,s,h,a,u){a=oe(a),a.shared=!1;var m=[wr(e,s,h,a,u)],y=m[0],k=a.widgetNode;return Qn(e,function(C){k&&(a.widgetNode=k.cloneNode(!0)),m.push(wr(C,Ft(C,s),Ft(C,h),a,u));for(var P=0;P<C.linked.length;++P)if(C.linked[P].isParent)return;y=Ht(m)}),new ko(m,y)}function Wc(e){return e.findMarks(Tt(e.first,0),e.clipPos(Tt(e.lastLine())),function(s){return s.parent})}function fg(e,s){for(var h=0;h<s.length;h++){var a=s[h],u=a.find(),m=e.clipPos(u.from),y=e.clipPos(u.to);if(I(m,y)){var k=wr(e,m,y,a.primary,a.primary.type);a.markers.push(k),k.parent=a}}}function pg(e){for(var s=function(a){var u=e[a],m=[u.primary.doc];Qn(u.primary.doc,function(C){return m.push(C)});for(var y=0;y<u.markers.length;y++){var k=u.markers[y];V(m,k.doc)==-1&&(k.parent=null,u.markers.splice(y--,1))}},h=0;h<e.length;h++)s(h)}var gg=0,hi=function(e,s,h,a,u){if(!(this instanceof hi))return new hi(e,s,h,a,u);h==null&&(h=0),So.call(this,[new wo([new lr("",null)])]),this.first=h,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=h;var m=Tt(h,0);this.sel=Vn(m),this.history=new Da(null),this.id=++gg,this.modeOption=s,this.lineSep=a,this.direction=u=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Kl(this,{from:m,to:m,text:e}),ti(this,Vn(m),U)};hi.prototype=zt(So.prototype,{constructor:hi,iter:function(e,s,h){h?this.iterN(e-this.first,s-e,h):this.iterN(this.first,this.first+this.size,e)},insert:function(e,s){for(var h=0,a=0;a<s.length;++a)h+=s[a].height;this.insertInner(e-this.first,s,h)},remove:function(e,s){this.removeInner(e-this.first,s)},getValue:function(e){var s=eo(this,this.first,this.first+this.size);return e===!1?s:s.join(e||this.lineSeparator())},setValue:Ue(function(e){var s=Tt(this.first,0),h=this.first+this.size-1;br(this,{from:s,to:Tt(h,Vt(this,h).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&uo(this.cm,0,0),ti(this,Vn(s),U)}),replaceRange:function(e,s,h,a){s=Ft(this,s),h=h?Ft(this,h):s,yr(this,e,s,h,a)},getRange:function(e,s,h){var a=on(this,Ft(this,e),Ft(this,s));return h===!1?a:h===""?a.join(""):a.join(h||this.lineSeparator())},getLine:function(e){var s=this.getLineHandle(e);return s&&s.text},getLineHandle:function(e){if(gs(this,e))return Vt(this,e)},getLineNumber:function(e){return we(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=Vt(this,e)),Yi(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Ft(this,e)},getCursor:function(e){var s=this.sel.primary(),h;return e==null||e=="head"?h=s.head:e=="anchor"?h=s.anchor:e=="end"||e=="to"||e===!1?h=s.to():h=s.from(),h},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ue(function(e,s,h){bc(this,Ft(this,typeof e=="number"?Tt(e,s||0):e),null,h)}),setSelection:Ue(function(e,s,h){bc(this,Ft(this,e),Ft(this,s||e),h)}),extendSelection:Ue(function(e,s,h){_a(this,Ft(this,e),s&&Ft(this,s),h)}),extendSelections:Ue(function(e,s){vc(this,Pi(this,e),s)}),extendSelectionsBy:Ue(function(e,s){var h=pt(this.sel.ranges,e);vc(this,Pi(this,h),s)}),setSelections:Ue(function(e,s,h){if(e.length){for(var a=[],u=0;u<e.length;u++)a[u]=new Se(Ft(this,e[u].anchor),Ft(this,e[u].head||e[u].anchor));s==null&&(s=Math.min(e.length-1,this.sel.primIndex)),ti(this,qi(this.cm,a,s),h)}}),addSelection:Ue(function(e,s,h){var a=this.sel.ranges.slice(0);a.push(new Se(Ft(this,e),Ft(this,s||e))),ti(this,qi(this.cm,a,a.length-1),h)}),getSelection:function(e){for(var s=this.sel.ranges,h,a=0;a<s.length;a++){var u=on(this,s[a].from(),s[a].to());h=h?h.concat(u):u}return e===!1?h:h.join(e||this.lineSeparator())},getSelections:function(e){for(var s=[],h=this.sel.ranges,a=0;a<h.length;a++){var u=on(this,h[a].from(),h[a].to());e!==!1&&(u=u.join(e||this.lineSeparator())),s[a]=u}return s},replaceSelection:function(e,s,h){for(var a=[],u=0;u<this.sel.ranges.length;u++)a[u]=e;this.replaceSelections(a,s,h||"+input")},replaceSelections:Ue(function(e,s,h){for(var a=[],u=this.sel,m=0;m<u.ranges.length;m++){var y=u.ranges[m];a[m]={from:y.from(),to:y.to(),text:this.splitLines(e[m]),origin:h}}for(var k=s&&s!="end"&&ig(this,a,s),C=a.length-1;C>=0;C--)br(this,a[C]);k?yc(this,k):this.cm&&pr(this.cm)}),undo:Ue(function(){La(this,"undo")}),redo:Ue(function(){La(this,"redo")}),undoSelection:Ue(function(){La(this,"undo",!0)}),redoSelection:Ue(function(){La(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,s=0,h=0,a=0;a<e.done.length;a++)e.done[a].ranges||++s;for(var u=0;u<e.undone.length;u++)e.undone[u].ranges||++h;return{undo:s,redo:h}},clearHistory:function(){var e=this;this.history=new Da(this.history),Qn(this,function(s){return s.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:mr(this.history.done),undone:mr(this.history.undone)}},setHistory:function(e){var s=this.history=new Da(this.history);s.done=mr(e.done.slice(0),null,!0),s.undone=mr(e.undone.slice(0),null,!0)},setGutterMarker:Ue(function(e,s,h){return yo(this,e,"gutter",function(a){var u=a.gutterMarkers||(a.gutterMarkers={});return u[s]=h,!h&&p(u)&&(a.gutterMarkers=null),!0})}),clearGutter:Ue(function(e){var s=this;this.iter(function(h){h.gutterMarkers&&h.gutterMarkers[e]&&yo(s,h,"gutter",function(){return h.gutterMarkers[e]=null,p(h.gutterMarkers)&&(h.gutterMarkers=null),!0})})}),lineInfo:function(e){var s;if(typeof e=="number"){if(!gs(this,e)||(s=e,e=Vt(this,e),!e))return null}else if(s=we(e),s==null)return null;return{line:s,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Ue(function(e,s,h){return yo(this,e,s=="gutter"?"gutter":"class",function(a){var u=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!a[u])a[u]=h;else{if(Dt(h).test(a[u]))return!1;a[u]+=" "+h}return!0})}),removeLineClass:Ue(function(e,s,h){return yo(this,e,s=="gutter"?"gutter":"class",function(a){var u=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",m=a[u];if(m)if(h==null)a[u]=null;else{var y=m.match(Dt(h));if(!y)return!1;var k=y.index+y[0].length;a[u]=m.slice(0,y.index)+(!y.index||k==m.length?"":" ")+m.slice(k)||null}else return!1;return!0})}),addLineWidget:Ue(function(e,s,h){return cg(this,e,s,h)}),removeLineWidget:function(e){e.clear()},markText:function(e,s,h){return wr(this,Ft(this,e),Ft(this,s),h,h&&h.type||"range")},setBookmark:function(e,s){var h={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return e=Ft(this,e),wr(this,e,e,h,"bookmark")},findMarksAt:function(e){e=Ft(this,e);var s=[],h=Vt(this,e.line).markedSpans;if(h)for(var a=0;a<h.length;++a){var u=h[a];(u.from==null||u.from<=e.ch)&&(u.to==null||u.to>=e.ch)&&s.push(u.marker.parent||u.marker)}return s},findMarks:function(e,s,h){e=Ft(this,e),s=Ft(this,s);var a=[],u=e.line;return this.iter(e.line,s.line+1,function(m){var y=m.markedSpans;if(y)for(var k=0;k<y.length;k++){var C=y[k];!(C.to!=null&&u==e.line&&e.ch>=C.to||C.from==null&&u!=e.line||C.from!=null&&u==s.line&&C.from>=s.ch)&&(!h||h(C.marker))&&a.push(C.marker.parent||C.marker)}++u}),a},getAllMarks:function(){var e=[];return this.iter(function(s){var h=s.markedSpans;if(h)for(var a=0;a<h.length;++a)h[a].from!=null&&e.push(h[a].marker)}),e},posFromIndex:function(e){var s,h=this.first,a=this.lineSeparator().length;return this.iter(function(u){var m=u.text.length+a;if(m>e)return s=e,!0;e-=m,++h}),Ft(this,Tt(h,s))},indexFromPos:function(e){e=Ft(this,e);var s=e.ch;if(e.line<this.first||e.ch<0)return 0;var h=this.lineSeparator().length;return this.iter(this.first,e.line,function(a){s+=a.text.length+h}),s},copy:function(e){var s=new hi(eo(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,e&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(e){e||(e={});var s=this.first,h=this.first+this.size;e.from!=null&&e.from>s&&(s=e.from),e.to!=null&&e.to<h&&(h=e.to);var a=new hi(eo(this,s,h),e.mode||this.modeOption,s,this.lineSep,this.direction);return e.sharedHist&&(a.history=this.history),(this.linked||(this.linked=[])).push({doc:a,sharedHist:e.sharedHist}),a.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],fg(a,Wc(this)),a},unlinkDoc:function(e){if(e instanceof Ie&&(e=e.doc),this.linked)for(var s=0;s<this.linked.length;++s){var h=this.linked[s];if(h.doc==e){this.linked.splice(s,1),e.unlinkDoc(this),pg(Wc(this));break}}if(e.history==this.history){var a=[e.id];Qn(e,function(u){return a.push(u.id)},!0),e.history=new Da(null),e.history.done=mr(this.history.done,a),e.history.undone=mr(this.history.undone,a)}},iterLinkedDocs:function(e){Qn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Qr(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ue(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(s){return s.order=null}),this.cm&&ng(this.cm))})}),hi.prototype.eachLine=hi.prototype.iter;var Ac=0;function mg(e){var s=this;if(Mc(s),!(me(s,e)||Tn(s.display,e))){Fe(e),w&&(Ac=+new Date);var h=bs(s,e,!0),a=e.dataTransfer.files;if(!(!h||s.isReadOnly()))if(a&&a.length&&window.FileReader&&window.File)for(var u=a.length,m=Array(u),y=0,k=function(){++y==u&&Ye(s,function(){h=Ft(s.doc,h);var Z={from:h,to:h,text:s.doc.splitLines(m.filter(function(dt){return dt!=null}).join(s.doc.lineSeparator())),origin:"paste"};br(s.doc,Z),yc(s.doc,Vn(Ft(s.doc,h),Ft(s.doc,Kn(Z))))})()},C=function(Z,dt){if(s.options.allowDropFileTypes&&V(s.options.allowDropFileTypes,Z.type)==-1){k();return}var mt=new FileReader;mt.onerror=function(){return k()},mt.onload=function(){var It=mt.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(It)){k();return}m[dt]=It,k()},mt.readAsText(Z)},P=0;P<a.length;P++)C(a[P],P);else{if(s.state.draggingText&&s.doc.sel.contains(h)>-1){s.state.draggingText(e),setTimeout(function(){return s.display.input.focus()},20);return}try{var W=e.dataTransfer.getData("Text");if(W){var F;if(s.state.draggingText&&!s.state.draggingText.copy&&(F=s.listSelections()),Pa(s.doc,Vn(h,h)),F)for(var et=0;et<F.length;++et)yr(s.doc,"",F[et].anchor,F[et].head,"drag");s.replaceSelection(W,"around","paste"),s.display.input.focus()}}catch{}}}}function vg(e,s){if(w&&(!e.state.draggingText||+new Date-Ac<100)){Ai(s);return}if(!(me(e,s)||Tn(e.display,s))&&(s.dataTransfer.setData("Text",e.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!E)){var h=J("img",null,null,"position: fixed; left: 0; top: 0;");h.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",L&&(h.width=h.height=1,e.display.wrapper.appendChild(h),h._top=h.offsetTop),s.dataTransfer.setDragImage(h,0,0),L&&h.parentNode.removeChild(h)}}function bg(e,s){var h=bs(e,s);if(h){var a=document.createDocumentFragment();Bl(e,h,a),e.display.dragCursor||(e.display.dragCursor=J("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),K(e.display.dragCursor,a)}}function Mc(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Nc(e){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),h=[],a=0;a<s.length;a++){var u=s[a].CodeMirror;u&&h.push(u)}h.length&&h[0].operation(function(){for(var m=0;m<h.length;m++)e(h[m])})}}var Bc=!1;function yg(){Bc||(wg(),Bc=!0)}function wg(){var e;ft(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,Nc(Sg)},100))}),ft(window,"blur",function(){return Nc(fr)})}function Sg(e){var s=e.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,e.setSize()}for(var Jn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Co=0;Co<10;Co++)Jn[Co+48]=Jn[Co+96]=String(Co);for(var Oa=65;Oa<=90;Oa++)Jn[Oa]=String.fromCharCode(Oa);for(var Do=1;Do<=12;Do++)Jn[Do+111]=Jn[Do+63235]="F"+Do;var Pn={};Pn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Pn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Pn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Pn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Pn.default=z?Pn.macDefault:Pn.pcDefault;function xg(e){var s=e.split(/-(?!$)/);e=s[s.length-1];for(var h,a,u,m,y=0;y<s.length-1;y++){var k=s[y];if(/^(cmd|meta|m)$/i.test(k))m=!0;else if(/^a(lt)?$/i.test(k))h=!0;else if(/^(c|ctrl|control)$/i.test(k))a=!0;else if(/^s(hift)?$/i.test(k))u=!0;else throw new Error("Unrecognized modifier name: "+k)}return h&&(e="Alt-"+e),a&&(e="Ctrl-"+e),m&&(e="Cmd-"+e),u&&(e="Shift-"+e),e}function kg(e){var s={};for(var h in e)if(e.hasOwnProperty(h)){var a=e[h];if(/^(name|fallthrough|(de|at)tach)$/.test(h))continue;if(a=="..."){delete e[h];continue}for(var u=pt(h.split(" "),xg),m=0;m<u.length;m++){var y=void 0,k=void 0;m==u.length-1?(k=u.join(" "),y=a):(k=u.slice(0,m+1).join(" "),y="...");var C=s[k];if(!C)s[k]=y;else if(C!=y)throw new Error("Inconsistent bindings for "+k)}delete e[h]}for(var P in s)e[P]=s[P];return e}function Sr(e,s,h,a){s=Ea(s);var u=s.call?s.call(e,a):s[e];if(u===!1)return"nothing";if(u==="...")return"multi";if(u!=null&&h(u))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return Sr(e,s.fallthrough,h,a);for(var m=0;m<s.fallthrough.length;m++){var y=Sr(e,s.fallthrough[m],h,a);if(y)return y}}}function Rc(e){var s=typeof e=="string"?e:Jn[e.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function Hc(e,s,h){var a=e;return s.altKey&&a!="Alt"&&(e="Alt-"+e),(at?s.metaKey:s.ctrlKey)&&a!="Ctrl"&&(e="Ctrl-"+e),(at?s.ctrlKey:s.metaKey)&&a!="Mod"&&(e="Cmd-"+e),!h&&s.shiftKey&&a!="Shift"&&(e="Shift-"+e),e}function $c(e,s){if(L&&e.keyCode==34&&e.char)return!1;var h=Jn[e.keyCode];return h==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(h=e.code),Hc(h,e,s))}function Ea(e){return typeof e=="string"?Pn[e]:e}function xr(e,s){for(var h=e.doc.sel.ranges,a=[],u=0;u<h.length;u++){for(var m=s(h[u]);a.length&&I(m.from,Ht(a).to)<=0;){var y=a.pop();if(I(y.from,m.from)<0){m.from=y.from;break}}a.push(m)}bi(e,function(){for(var k=a.length-1;k>=0;k--)yr(e.doc,"",a[k].from,a[k].to,"+delete");pr(e)})}function th(e,s,h){var a=_(e.text,s+h,h);return a<0||a>e.text.length?null:a}function eh(e,s,h){var a=th(e,s.ch,h);return a==null?null:new Tt(s.line,a,h<0?"after":"before")}function ih(e,s,h,a,u){if(e){s.doc.direction=="rtl"&&(u=-u);var m=ut(h,s.doc.direction);if(m){var y=u<0?Ht(m):m[0],k=u<0==(y.level==1),C=k?"after":"before",P;if(y.level>0||s.doc.direction=="rtl"){var W=ur(s,h);P=u<0?h.text.length-1:0;var F=un(s,W,P).top;P=O(function(et){return un(s,W,et).top==F},u<0==(y.level==1)?y.from:y.to-1,P),C=="before"&&(P=th(h,P,1))}else P=u<0?y.to:y.from;return new Tt(a,P,C)}}return new Tt(a,u<0?h.text.length:0,u<0?"before":"after")}function Cg(e,s,h,a){var u=ut(s,e.doc.direction);if(!u)return eh(s,h,a);h.ch>=s.text.length?(h.ch=s.text.length,h.sticky="before"):h.ch<=0&&(h.ch=0,h.sticky="after");var m=nt(u,h.ch,h.sticky),y=u[m];if(e.doc.direction=="ltr"&&y.level%2==0&&(a>0?y.to>h.ch:y.from<h.ch))return eh(s,h,a);var k=function(At,$t){return th(s,At instanceof Tt?At.ch:At,$t)},C,P=function(At){return e.options.lineWrapping?(C=C||ur(e,s),Xu(e,s,C,At)):{begin:0,end:s.text.length}},W=P(h.sticky=="before"?k(h,-1):h.ch);if(e.doc.direction=="rtl"||y.level==1){var F=y.level==1==a<0,et=k(h,F?1:-1);if(et!=null&&(F?et<=y.to&&et<=W.end:et>=y.from&&et>=W.begin)){var Z=F?"before":"after";return new Tt(h.line,et,Z)}}var dt=function(At,$t,Mt){for(var Gt=function(Ce,qe){return qe?new Tt(h.line,k(Ce,1),"before"):new Tt(h.line,Ce,"after")};At>=0&&At<u.length;At+=$t){var ie=u[At],Jt=$t>0==(ie.level!=1),de=Jt?Mt.begin:k(Mt.end,-1);if(ie.from<=de&&de<ie.to||(de=Jt?ie.from:k(ie.to,-1),Mt.begin<=de&&de<Mt.end))return Gt(de,Jt)}},mt=dt(m+a,a,W);if(mt)return mt;var It=a>0?W.end:k(W.begin,-1);return It!=null&&!(a>0&&It==s.text.length)&&(mt=dt(a>0?0:u.length-1,a,P(It)),mt)?mt:null}var To={selectAll:Cc,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),U)},killLine:function(e){return xr(e,function(s){if(s.empty()){var h=Vt(e.doc,s.head.line).text.length;return s.head.ch==h&&s.head.line<e.lastLine()?{from:s.head,to:Tt(s.head.line+1,0)}:{from:s.head,to:Tt(s.head.line,h)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(e){return xr(e,function(s){return{from:Tt(s.from().line,0),to:Ft(e.doc,Tt(s.to().line+1,0))}})},delLineLeft:function(e){return xr(e,function(s){return{from:Tt(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(e){return xr(e,function(s){var h=e.charCoords(s.head,"div").top+5,a=e.coordsChar({left:0,top:h},"div");return{from:a,to:s.from()}})},delWrappedLineRight:function(e){return xr(e,function(s){var h=e.charCoords(s.head,"div").top+5,a=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:h},"div");return{from:s.from(),to:a}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(Tt(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(Tt(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(s){return zc(e,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(s){return Fc(e,s.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(s){return Dg(e,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(s){var h=e.cursorCoords(s.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:h},"div")},vt)},goLineLeft:function(e){return e.extendSelectionsBy(function(s){var h=e.cursorCoords(s.head,"div").top+5;return e.coordsChar({left:0,top:h},"div")},vt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(s){var h=e.cursorCoords(s.head,"div").top+5,a=e.coordsChar({left:0,top:h},"div");return a.ch<e.getLine(a.line).search(/\S/)?Fc(e,s.head):a},vt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var s=[],h=e.listSelections(),a=e.options.tabSize,u=0;u<h.length;u++){var m=h[u].from(),y=ce(e.getLine(m.line),m.ch,a);s.push(Qt(a-y%a))}e.replaceSelections(s)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return bi(e,function(){for(var s=e.listSelections(),h=[],a=0;a<s.length;a++)if(s[a].empty()){var u=s[a].head,m=Vt(e.doc,u.line).text;if(m){if(u.ch==m.length&&(u=new Tt(u.line,u.ch-1)),u.ch>0)u=new Tt(u.line,u.ch+1),e.replaceRange(m.charAt(u.ch-1)+m.charAt(u.ch-2),Tt(u.line,u.ch-2),u,"+transpose");else if(u.line>e.doc.first){var y=Vt(e.doc,u.line-1).text;y&&(u=new Tt(u.line,1),e.replaceRange(m.charAt(0)+e.doc.lineSeparator()+y.charAt(y.length-1),Tt(u.line-1,y.length-1),u,"+transpose"))}}h.push(new Se(u,u))}e.setSelections(h)})},newlineAndIndent:function(e){return bi(e,function(){for(var s=e.listSelections(),h=s.length-1;h>=0;h--)e.replaceRange(e.doc.lineSeparator(),s[h].anchor,s[h].head,"+input");s=e.listSelections();for(var a=0;a<s.length;a++)e.indentLine(s[a].from().line,null,!0);pr(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function zc(e,s){var h=Vt(e.doc,s),a=Yi(h);return a!=h&&(s=we(a)),ih(!0,e,a,s,1)}function Dg(e,s){var h=Vt(e.doc,s),a=lp(h);return a!=h&&(s=we(a)),ih(!0,e,h,s,-1)}function Fc(e,s){var h=zc(e,s.line),a=Vt(e.doc,h.line),u=ut(a,e.doc.direction);if(!u||u[0].level==0){var m=Math.max(h.ch,a.text.search(/\S/)),y=s.line==h.line&&s.ch<=m&&s.ch;return Tt(h.line,y?0:m,h.sticky)}return h}function Wa(e,s,h){if(typeof s=="string"&&(s=To[s],!s))return!1;e.display.input.ensurePolled();var a=e.display.shift,u=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),h&&(e.display.shift=!1),u=s(e)!=N}finally{e.display.shift=a,e.state.suppressEdits=!1}return u}function Tg(e,s,h){for(var a=0;a<e.state.keyMaps.length;a++){var u=Sr(s,e.state.keyMaps[a],h,e);if(u)return u}return e.options.extraKeys&&Sr(s,e.options.extraKeys,h,e)||Sr(s,e.options.keyMap,h,e)}var _g=new ot;function _o(e,s,h,a){var u=e.state.keySeq;if(u){if(Rc(s))return"handled";if(/\'$/.test(s)?e.state.keySeq=null:_g.set(50,function(){e.state.keySeq==u&&(e.state.keySeq=null,e.display.input.reset())}),jc(e,u+" "+s,h,a))return!0}return jc(e,s,h,a)}function jc(e,s,h,a){var u=Tg(e,s,a);return u=="multi"&&(e.state.keySeq=s),u=="handled"&&Xe(e,"keyHandled",e,s,h),(u=="handled"||u=="multi")&&(Fe(h),Rl(e)),!!u}function Gc(e,s){var h=$c(s,!0);return h?s.shiftKey&&!e.state.keySeq?_o(e,"Shift-"+h,s,function(a){return Wa(e,a,!0)})||_o(e,h,s,function(a){if(typeof a=="string"?/^go[A-Z]/.test(a):a.motion)return Wa(e,a)}):_o(e,h,s,function(a){return Wa(e,a)}):!1}function Pg(e,s,h){return _o(e,"'"+h+"'",s,function(a){return Wa(e,a,!0)})}var nh=null;function Xc(e){var s=this;if(!(e.target&&e.target!=s.display.input.getField())&&(s.curOp.focus=Zt(),!me(s,e))){w&&D<11&&e.keyCode==27&&(e.returnValue=!1);var h=e.keyCode;s.display.shift=h==16||e.shiftKey;var a=Gc(s,e);L&&(nh=a?h:null,!a&&h==88&&!aa&&(z?e.metaKey:e.ctrlKey)&&s.replaceSelection("",null,"cut")),l&&!z&&!a&&h==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),h==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&Ig(s)}}function Ig(e){var s=e.display.lineDiv;Yt(s,"CodeMirror-crosshair");function h(a){(a.keyCode==18||!a.altKey)&&(Wt(s,"CodeMirror-crosshair"),jt(document,"keyup",h),jt(document,"mouseover",h))}ft(document,"keyup",h),ft(document,"mouseover",h)}function Yc(e){e.keyCode==16&&(this.doc.sel.shift=!1),me(this,e)}function Uc(e){var s=this;if(!(e.target&&e.target!=s.display.input.getField())&&!(Tn(s.display,e)||me(s,e)||e.ctrlKey&&!e.altKey||z&&e.metaKey)){var h=e.keyCode,a=e.charCode;if(L&&h==nh){nh=null,Fe(e);return}if(!(L&&(!e.which||e.which<10)&&Gc(s,e))){var u=String.fromCharCode(a??h);u!="\b"&&(Pg(s,e,u)||s.display.input.onKeyPress(e))}}}var Lg=400,sh=function(e,s,h){this.time=e,this.pos=s,this.button=h};sh.prototype.compare=function(e,s,h){return this.time+Lg>e&&I(s,this.pos)==0&&h==this.button};var Po,Io;function Og(e,s){var h=+new Date;return Io&&Io.compare(h,e,s)?(Po=Io=null,"triple"):Po&&Po.compare(h,e,s)?(Io=new sh(h,e,s),Po=null,"double"):(Po=new sh(h,e,s),Io=null,"single")}function qc(e){var s=this,h=s.display;if(!(me(s,e)||h.activeTouch&&h.input.supportsTouch())){if(h.input.ensurePolled(),h.shift=e.shiftKey,Tn(h,e)){T||(h.scroller.draggable=!1,setTimeout(function(){return h.scroller.draggable=!0},100));return}if(!rh(s,e)){var a=bs(s,e),u=Gn(e),m=a?Og(a,u):"single";window.focus(),u==1&&s.state.selectingText&&s.state.selectingText(e),!(a&&Eg(s,u,a,m,e))&&(u==1?a?Ag(s,a,m,e):ai(e)==h.scroller&&Fe(e):u==2?(a&&_a(s.doc,a),setTimeout(function(){return h.input.focus()},20)):u==3&&(wt?s.display.input.onContextMenu(e):Hl(s)))}}}function Eg(e,s,h,a,u){var m="Click";return a=="double"?m="Double"+m:a=="triple"&&(m="Triple"+m),m=(s==1?"Left":s==2?"Middle":"Right")+m,_o(e,Hc(m,u),u,function(y){if(typeof y=="string"&&(y=To[y]),!y)return!1;var k=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),k=y(e,h)!=N}finally{e.state.suppressEdits=!1}return k})}function Wg(e,s,h){var a=e.getOption("configureMouse"),u=a?a(e,s,h):{};if(u.unit==null){var m=it?h.shiftKey&&h.metaKey:h.altKey;u.unit=m?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(u.extend==null||e.doc.extend)&&(u.extend=e.doc.extend||h.shiftKey),u.addNew==null&&(u.addNew=z?h.metaKey:h.ctrlKey),u.moveOnDrag==null&&(u.moveOnDrag=!(z?h.altKey:h.ctrlKey)),u}function Ag(e,s,h,a){w?setTimeout(pe(Vu,e),0):e.curOp.focus=Zt();var u=Wg(e,h,a),m=e.doc.sel,y;e.options.dragDrop&&nn&&!e.isReadOnly()&&h=="single"&&(y=m.contains(s))>-1&&(I((y=m.ranges[y]).from(),s)<0||s.xRel>0)&&(I(y.to(),s)>0||s.xRel<0)?Mg(e,a,s,u):Ng(e,a,s,u)}function Mg(e,s,h,a){var u=e.display,m=!1,y=Ye(e,function(P){T&&(u.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Hl(e)),jt(u.wrapper.ownerDocument,"mouseup",y),jt(u.wrapper.ownerDocument,"mousemove",k),jt(u.scroller,"dragstart",C),jt(u.scroller,"drop",y),m||(Fe(P),a.addNew||_a(e.doc,h,null,null,a.extend),T&&!E||w&&D==9?setTimeout(function(){u.wrapper.ownerDocument.body.focus({preventScroll:!0}),u.input.focus()},20):u.input.focus())}),k=function(P){m=m||Math.abs(s.clientX-P.clientX)+Math.abs(s.clientY-P.clientY)>=10},C=function(){return m=!0};T&&(u.scroller.draggable=!0),e.state.draggingText=y,y.copy=!a.moveOnDrag,ft(u.wrapper.ownerDocument,"mouseup",y),ft(u.wrapper.ownerDocument,"mousemove",k),ft(u.scroller,"dragstart",C),ft(u.scroller,"drop",y),e.state.delayingBlurEvent=!0,setTimeout(function(){return u.input.focus()},20),u.scroller.dragDrop&&u.scroller.dragDrop()}function Vc(e,s,h){if(h=="char")return new Se(s,s);if(h=="word")return e.findWordAt(s);if(h=="line")return new Se(Tt(s.line,0),Ft(e.doc,Tt(s.line+1,0)));var a=h(e,s);return new Se(a.from,a.to)}function Ng(e,s,h,a){w&&Hl(e);var u=e.display,m=e.doc;Fe(s);var y,k,C=m.sel,P=C.ranges;if(a.addNew&&!a.extend?(k=m.sel.contains(h),k>-1?y=P[k]:y=new Se(h,h)):(y=m.sel.primary(),k=m.sel.primIndex),a.unit=="rectangle")a.addNew||(y=new Se(h,h)),h=bs(e,s,!0,!0),k=-1;else{var W=Vc(e,h,a.unit);a.extend?y=Zl(y,W.anchor,W.head,a.extend):y=W}a.addNew?k==-1?(k=P.length,ti(m,qi(e,P.concat([y]),k),{scroll:!1,origin:"*mouse"})):P.length>1&&P[k].empty()&&a.unit=="char"&&!a.extend?(ti(m,qi(e,P.slice(0,k).concat(P.slice(k+1)),0),{scroll:!1,origin:"*mouse"}),C=m.sel):Jl(m,k,y,bt):(k=0,ti(m,new Ii([y],0),bt),C=m.sel);var F=h;function et(Mt){if(I(F,Mt)!=0)if(F=Mt,a.unit=="rectangle"){for(var Gt=[],ie=e.options.tabSize,Jt=ce(Vt(m,h.line).text,h.ch,ie),de=ce(Vt(m,Mt.line).text,Mt.ch,ie),Ce=Math.min(Jt,de),qe=Math.max(Jt,de),Le=Math.min(h.line,Mt.line),yi=Math.min(e.lastLine(),Math.max(h.line,Mt.line));Le<=yi;Le++){var ui=Vt(m,Le).text,Re=Lt(ui,Ce,ie);Ce==qe?Gt.push(new Se(Tt(Le,Re),Tt(Le,Re))):ui.length>Re&&Gt.push(new Se(Tt(Le,Re),Tt(Le,Lt(ui,qe,ie))))}Gt.length||Gt.push(new Se(h,h)),ti(m,qi(e,C.ranges.slice(0,k).concat(Gt),k),{origin:"*mouse",scroll:!1}),e.scrollIntoView(Mt)}else{var ci=y,Ze=Vc(e,Mt,a.unit),ze=ci.anchor,He;I(Ze.anchor,ze)>0?(He=Ze.head,ze=le(ci.from(),Ze.anchor)):(He=Ze.anchor,ze=_t(ci.to(),Ze.head));var Ae=C.ranges.slice(0);Ae[k]=Bg(e,new Se(Ft(m,ze),He)),ti(m,qi(e,Ae,k),bt)}}var Z=u.wrapper.getBoundingClientRect(),dt=0;function mt(Mt){var Gt=++dt,ie=bs(e,Mt,!0,a.unit=="rectangle");if(ie)if(I(ie,F)!=0){e.curOp.focus=Zt(),et(ie);var Jt=Sa(u,m);(ie.line>=Jt.to||ie.line<Jt.from)&&setTimeout(Ye(e,function(){dt==Gt&&mt(Mt)}),150)}else{var de=Mt.clientY<Z.top?-20:Mt.clientY>Z.bottom?20:0;de&&setTimeout(Ye(e,function(){dt==Gt&&(u.scroller.scrollTop+=de,mt(Mt))}),50)}}function It(Mt){e.state.selectingText=!1,dt=1/0,Mt&&(Fe(Mt),u.input.focus()),jt(u.wrapper.ownerDocument,"mousemove",At),jt(u.wrapper.ownerDocument,"mouseup",$t),m.history.lastSelOrigin=null}var At=Ye(e,function(Mt){Mt.buttons===0||!Gn(Mt)?It(Mt):mt(Mt)}),$t=Ye(e,It);e.state.selectingText=$t,ft(u.wrapper.ownerDocument,"mousemove",At),ft(u.wrapper.ownerDocument,"mouseup",$t)}function Bg(e,s){var h=s.anchor,a=s.head,u=Vt(e.doc,h.line);if(I(h,a)==0&&h.sticky==a.sticky)return s;var m=ut(u);if(!m)return s;var y=nt(m,h.ch,h.sticky),k=m[y];if(k.from!=h.ch&&k.to!=h.ch)return s;var C=y+(k.from==h.ch==(k.level!=1)?0:1);if(C==0||C==m.length)return s;var P;if(a.line!=h.line)P=(a.line-h.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var W=nt(m,a.ch,a.sticky),F=W-y||(a.ch-h.ch)*(k.level==1?-1:1);W==C-1||W==C?P=F<0:P=F>0}var et=m[C+(P?-1:0)],Z=P==(et.level==1),dt=Z?et.from:et.to,mt=Z?"after":"before";return h.ch==dt&&h.sticky==mt?s:new Se(new Tt(h.line,dt,mt),a)}function Kc(e,s,h,a){var u,m;if(s.touches)u=s.touches[0].clientX,m=s.touches[0].clientY;else try{u=s.clientX,m=s.clientY}catch{return!1}if(u>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;a&&Fe(s);var y=e.display,k=y.lineDiv.getBoundingClientRect();if(m>k.bottom||!Be(e,h))return Qe(s);m-=k.top-y.viewOffset;for(var C=0;C<e.display.gutterSpecs.length;++C){var P=y.gutters.childNodes[C];if(P&&P.getBoundingClientRect().right>=u){var W=an(e.doc,m),F=e.display.gutterSpecs[C];return Et(e,h,e,W,F.className,s),Qe(s)}}}function rh(e,s){return Kc(e,s,"gutterClick",!0)}function Qc(e,s){Tn(e.display,s)||Rg(e,s)||me(e,s,"contextmenu")||wt||e.display.input.onContextMenu(s)}function Rg(e,s){return Be(e,"gutterContextMenu")?Kc(e,s,"gutterContextMenu",!1):!1}function Zc(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),lo(e)}var kr={toString:function(){return"CodeMirror.Init"}},Jc={},Aa={};function Hg(e){var s=e.optionHandlers;function h(a,u,m,y){e.defaults[a]=u,m&&(s[a]=y?function(k,C,P){P!=kr&&m(k,C,P)}:m)}e.defineOption=h,e.Init=kr,h("value","",function(a,u){return a.setValue(u)},!0),h("mode",null,function(a,u){a.doc.modeOption=u,Vl(a)},!0),h("indentUnit",2,Vl,!0),h("indentWithTabs",!1),h("smartIndent",!0),h("tabSize",4,function(a){vo(a),lo(a),li(a)},!0),h("lineSeparator",null,function(a,u){if(a.doc.lineSep=u,!!u){var m=[],y=a.doc.first;a.doc.iter(function(C){for(var P=0;;){var W=C.text.indexOf(u,P);if(W==-1)break;P=W+u.length,m.push(Tt(y,W))}y++});for(var k=m.length-1;k>=0;k--)yr(a.doc,u,m[k],Tt(m[k].line,m[k].ch+u.length))}}),h("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(a,u,m){a.state.specialChars=new RegExp(u.source+(u.test("	")?"":"|	"),"g"),m!=kr&&a.refresh()}),h("specialCharPlaceholder",pp,function(a){return a.refresh()},!0),h("electricChars",!0),h("inputStyle",q?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),h("spellcheck",!1,function(a,u){return a.getInputField().spellcheck=u},!0),h("autocorrect",!1,function(a,u){return a.getInputField().autocorrect=u},!0),h("autocapitalize",!1,function(a,u){return a.getInputField().autocapitalize=u},!0),h("rtlMoveVisually",!xt),h("wholeLineUpdateBefore",!0),h("theme","default",function(a){Zc(a),mo(a)},!0),h("keyMap","default",function(a,u,m){var y=Ea(u),k=m!=kr&&Ea(m);k&&k.detach&&k.detach(a,y),y.attach&&y.attach(a,k||null)}),h("extraKeys",null),h("configureMouse",null),h("lineWrapping",!1,zg,!0),h("gutters",[],function(a,u){a.display.gutterSpecs=Ul(u,a.options.lineNumbers),mo(a)},!0),h("fixedGutter",!0,function(a,u){a.display.gutters.style.left=u?Ml(a.display)+"px":"0",a.refresh()},!0),h("coverGutterNextToScrollbar",!1,function(a){return gr(a)},!0),h("scrollbarStyle","native",function(a){ec(a),gr(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),h("lineNumbers",!1,function(a,u){a.display.gutterSpecs=Ul(a.options.gutters,u),mo(a)},!0),h("firstLineNumber",1,mo,!0),h("lineNumberFormatter",function(a){return a},mo,!0),h("showCursorWhenSelecting",!1,ho,!0),h("resetSelectionOnContextMenu",!0),h("lineWiseCopyCut",!0),h("pasteLinesPerSelection",!0),h("selectionsMayTouch",!1),h("readOnly",!1,function(a,u){u=="nocursor"&&(fr(a),a.display.input.blur()),a.display.input.readOnlyChanged(u)}),h("screenReaderLabel",null,function(a,u){u=u===""?null:u,a.display.input.screenReaderLabelChanged(u)}),h("disableInput",!1,function(a,u){u||a.display.input.reset()},!0),h("dragDrop",!0,$g),h("allowDropFileTypes",null),h("cursorBlinkRate",530),h("cursorScrollMargin",0),h("cursorHeight",1,ho,!0),h("singleCursorHeightPerLine",!0,ho,!0),h("workTime",100),h("workDelay",100),h("flattenSpans",!0,vo,!0),h("addModeClass",!1,vo,!0),h("pollInterval",100),h("undoDepth",200,function(a,u){return a.doc.history.undoDepth=u}),h("historyEventDelay",1250),h("viewportMargin",10,function(a){return a.refresh()},!0),h("maxHighlightLength",1e4,vo,!0),h("moveInputWithCursor",!0,function(a,u){u||a.display.input.resetPosition()}),h("tabindex",null,function(a,u){return a.display.input.getField().tabIndex=u||""}),h("autofocus",null),h("direction","ltr",function(a,u){return a.doc.setDirection(u)},!0),h("phrases",null)}function $g(e,s,h){var a=h&&h!=kr;if(!s!=!a){var u=e.display.dragFunctions,m=s?ft:jt;m(e.display.scroller,"dragstart",u.start),m(e.display.scroller,"dragenter",u.enter),m(e.display.scroller,"dragover",u.over),m(e.display.scroller,"dragleave",u.leave),m(e.display.scroller,"drop",u.drop)}}function zg(e){e.options.lineWrapping?(Yt(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Wt(e.display.wrapper,"CodeMirror-wrap"),Dl(e)),Nl(e),li(e),lo(e),setTimeout(function(){return gr(e)},100)}function Ie(e,s){var h=this;if(!(this instanceof Ie))return new Ie(e,s);this.options=s=s?oe(s):{},oe(Jc,s,!1);var a=s.value;typeof a=="string"?a=new hi(a,s.mode,null,s.lineSeparator,s.direction):s.mode&&(a.modeOption=s.mode),this.doc=a;var u=new Ie.inputStyles[s.inputStyle](this),m=this.display=new tg(e,a,u,s);m.wrapper.CodeMirror=this,Zc(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ec(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ot,keySeq:null,specialChars:null},s.autofocus&&!q&&m.input.focus(),w&&D<11&&setTimeout(function(){return h.display.input.reset(!0)},20),Fg(this),yg(),xs(this),this.curOp.forceUpdate=!0,cc(this,a),s.autofocus&&!q||this.hasFocus()?setTimeout(function(){h.hasFocus()&&!h.state.focused&&$l(h)},20):fr(this);for(var y in Aa)Aa.hasOwnProperty(y)&&Aa[y](this,s[y],kr);sc(this),s.finishInit&&s.finishInit(this);for(var k=0;k<oh.length;++k)oh[k](this);ks(this),T&&s.lineWrapping&&getComputedStyle(m.lineDiv).textRendering=="optimizelegibility"&&(m.lineDiv.style.textRendering="auto")}Ie.defaults=Jc,Ie.optionHandlers=Aa;function Fg(e){var s=e.display;ft(s.scroller,"mousedown",Ye(e,qc)),w&&D<11?ft(s.scroller,"dblclick",Ye(e,function(C){if(!me(e,C)){var P=bs(e,C);if(!(!P||rh(e,C)||Tn(e.display,C))){Fe(C);var W=e.findWordAt(P);_a(e.doc,W.anchor,W.head)}}})):ft(s.scroller,"dblclick",function(C){return me(e,C)||Fe(C)}),ft(s.scroller,"contextmenu",function(C){return Qc(e,C)}),ft(s.input.getField(),"contextmenu",function(C){s.scroller.contains(C.target)||Qc(e,C)});var h,a={end:0};function u(){s.activeTouch&&(h=setTimeout(function(){return s.activeTouch=null},1e3),a=s.activeTouch,a.end=+new Date)}function m(C){if(C.touches.length!=1)return!1;var P=C.touches[0];return P.radiusX<=1&&P.radiusY<=1}function y(C,P){if(P.left==null)return!0;var W=P.left-C.left,F=P.top-C.top;return W*W+F*F>20*20}ft(s.scroller,"touchstart",function(C){if(!me(e,C)&&!m(C)&&!rh(e,C)){s.input.ensurePolled(),clearTimeout(h);var P=+new Date;s.activeTouch={start:P,moved:!1,prev:P-a.end<=300?a:null},C.touches.length==1&&(s.activeTouch.left=C.touches[0].pageX,s.activeTouch.top=C.touches[0].pageY)}}),ft(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),ft(s.scroller,"touchend",function(C){var P=s.activeTouch;if(P&&!Tn(s,C)&&P.left!=null&&!P.moved&&new Date-P.start<300){var W=e.coordsChar(s.activeTouch,"page"),F;!P.prev||y(P,P.prev)?F=new Se(W,W):!P.prev.prev||y(P,P.prev.prev)?F=e.findWordAt(W):F=new Se(Tt(W.line,0),Ft(e.doc,Tt(W.line+1,0))),e.setSelection(F.anchor,F.head),e.focus(),Fe(C)}u()}),ft(s.scroller,"touchcancel",u),ft(s.scroller,"scroll",function(){s.scroller.clientHeight&&(co(e,s.scroller.scrollTop),ws(e,s.scroller.scrollLeft,!0),Et(e,"scroll",e))}),ft(s.scroller,"mousewheel",function(C){return ac(e,C)}),ft(s.scroller,"DOMMouseScroll",function(C){return ac(e,C)}),ft(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(C){me(e,C)||Ai(C)},over:function(C){me(e,C)||(bg(e,C),Ai(C))},start:function(C){return vg(e,C)},drop:Ye(e,mg),leave:function(C){me(e,C)||Mc(e)}};var k=s.input.getField();ft(k,"keyup",function(C){return Yc.call(e,C)}),ft(k,"keydown",Ye(e,Xc)),ft(k,"keypress",Ye(e,Uc)),ft(k,"focus",function(C){return $l(e,C)}),ft(k,"blur",function(C){return fr(e,C)})}var oh=[];Ie.defineInitHook=function(e){return oh.push(e)};function Lo(e,s,h,a){var u=e.doc,m;h==null&&(h="add"),h=="smart"&&(u.mode.indent?m=no(e,s).state:h="prev");var y=e.options.tabSize,k=Vt(u,s),C=ce(k.text,null,y);k.stateAfter&&(k.stateAfter=null);var P=k.text.match(/^\s*/)[0],W;if(!a&&!/\S/.test(k.text))W=0,h="not";else if(h=="smart"&&(W=u.mode.indent(m,k.text.slice(P.length),k.text),W==N||W>150)){if(!a)return;h="prev"}h=="prev"?s>u.first?W=ce(Vt(u,s-1).text,null,y):W=0:h=="add"?W=C+e.options.indentUnit:h=="subtract"?W=C-e.options.indentUnit:typeof h=="number"&&(W=C+h),W=Math.max(0,W);var F="",et=0;if(e.options.indentWithTabs)for(var Z=Math.floor(W/y);Z;--Z)et+=y,F+="	";if(et<W&&(F+=Qt(W-et)),F!=P)return yr(u,F,Tt(s,0),Tt(s,P.length),"+input"),k.stateAfter=null,!0;for(var dt=0;dt<u.sel.ranges.length;dt++){var mt=u.sel.ranges[dt];if(mt.head.line==s&&mt.head.ch<P.length){var It=Tt(s,P.length);Jl(u,dt,new Se(It,It));break}}}var Vi=null;function Ma(e){Vi=e}function ah(e,s,h,a,u){var m=e.doc;e.display.shift=!1,a||(a=m.sel);var y=+new Date-200,k=u=="paste"||e.state.pasteIncoming>y,C=Qr(s),P=null;if(k&&a.ranges.length>1)if(Vi&&Vi.text.join(`
`)==s){if(a.ranges.length%Vi.text.length==0){P=[];for(var W=0;W<Vi.text.length;W++)P.push(m.splitLines(Vi.text[W]))}}else C.length==a.ranges.length&&e.options.pasteLinesPerSelection&&(P=pt(C,function(At){return[At]}));for(var F=e.curOp.updateInput,et=a.ranges.length-1;et>=0;et--){var Z=a.ranges[et],dt=Z.from(),mt=Z.to();Z.empty()&&(h&&h>0?dt=Tt(dt.line,dt.ch-h):e.state.overwrite&&!k?mt=Tt(mt.line,Math.min(Vt(m,mt.line).text.length,mt.ch+Ht(C).length)):k&&Vi&&Vi.lineWise&&Vi.text.join(`
`)==C.join(`
`)&&(dt=mt=Tt(dt.line,0)));var It={from:dt,to:mt,text:P?P[et%P.length]:C,origin:u||(k?"paste":e.state.cutIncoming>y?"cut":"+input")};br(e.doc,It),Xe(e,"inputRead",e,It)}s&&!k&&ed(e,s),pr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=F),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function td(e,s){var h=e.clipboardData&&e.clipboardData.getData("Text");if(h)return e.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&bi(s,function(){return ah(s,h,0,null,"paste")}),!0}function ed(e,s){if(!(!e.options.electricChars||!e.options.smartIndent))for(var h=e.doc.sel,a=h.ranges.length-1;a>=0;a--){var u=h.ranges[a];if(!(u.head.ch>100||a&&h.ranges[a-1].head.line==u.head.line)){var m=e.getModeAt(u.head),y=!1;if(m.electricChars){for(var k=0;k<m.electricChars.length;k++)if(s.indexOf(m.electricChars.charAt(k))>-1){y=Lo(e,u.head.line,"smart");break}}else m.electricInput&&m.electricInput.test(Vt(e.doc,u.head.line).text.slice(0,u.head.ch))&&(y=Lo(e,u.head.line,"smart"));y&&Xe(e,"electricInput",e,u.head.line)}}}function nd(e){for(var s=[],h=[],a=0;a<e.doc.sel.ranges.length;a++){var u=e.doc.sel.ranges[a].head.line,m={anchor:Tt(u,0),head:Tt(u+1,0)};h.push(m),s.push(e.getRange(m.anchor,m.head))}return{text:s,ranges:h}}function sd(e,s,h,a){e.setAttribute("autocorrect",h?"":"off"),e.setAttribute("autocapitalize",a?"":"off"),e.setAttribute("spellcheck",!!s)}function rd(){var e=J("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=J("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return T?e.style.width="1000px":e.setAttribute("wrap","off"),B&&(e.style.border="1px solid black"),sd(e),s}function jg(e){var s=e.optionHandlers,h=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,u){var m=this.options,y=m[a];m[a]==u&&a!="mode"||(m[a]=u,s.hasOwnProperty(a)&&Ye(this,s[a])(this,u,y),Et(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,u){this.state.keyMaps[u?"push":"unshift"](Ea(a))},removeKeyMap:function(a){for(var u=this.state.keyMaps,m=0;m<u.length;++m)if(u[m]==a||u[m].name==a)return u.splice(m,1),!0},addOverlay:si(function(a,u){var m=a.token?a:e.getMode(this.options,a);if(m.startState)throw new Error("Overlays may not be stateful.");Ot(this.state.overlays,{mode:m,modeSpec:a,opaque:u&&u.opaque,priority:u&&u.priority||0},function(y){return y.priority}),this.state.modeGen++,li(this)}),removeOverlay:si(function(a){for(var u=this.state.overlays,m=0;m<u.length;++m){var y=u[m].modeSpec;if(y==a||typeof a=="string"&&y.name==a){u.splice(m,1),this.state.modeGen++,li(this);return}}}),indentLine:si(function(a,u,m){typeof u!="string"&&typeof u!="number"&&(u==null?u=this.options.smartIndent?"smart":"prev":u=u?"add":"subtract"),gs(this.doc,a)&&Lo(this,a,u,m)}),indentSelection:si(function(a){for(var u=this.doc.sel.ranges,m=-1,y=0;y<u.length;y++){var k=u[y];if(k.empty())k.head.line>m&&(Lo(this,k.head.line,a,!0),m=k.head.line,y==this.doc.sel.primIndex&&pr(this));else{var C=k.from(),P=k.to(),W=Math.max(m,C.line);m=Math.min(this.lastLine(),P.line-(P.ch?0:1))+1;for(var F=W;F<m;++F)Lo(this,F,a);var et=this.doc.sel.ranges;C.ch==0&&u.length==et.length&&et[y].from().ch>0&&Jl(this.doc,y,new Se(C,et[y].to()),U)}}}),getTokenAt:function(a,u){return fu(this,a,u)},getLineTokens:function(a,u){return fu(this,Tt(a),u,!0)},getTokenTypeAt:function(a){a=Ft(this.doc,a);var u=uu(this,Vt(this.doc,a.line)),m=0,y=(u.length-1)/2,k=a.ch,C;if(k==0)C=u[2];else for(;;){var P=m+y>>1;if((P?u[P*2-1]:0)>=k)y=P;else if(u[P*2+1]<k)m=P+1;else{C=u[P*2+2];break}}var W=C?C.indexOf("overlay "):-1;return W<0?C:W==0?null:C.slice(0,W-1)},getModeAt:function(a){var u=this.doc.mode;return u.innerMode?e.innerMode(u,this.getTokenAt(a).state).mode:u},getHelper:function(a,u){return this.getHelpers(a,u)[0]},getHelpers:function(a,u){var m=[];if(!h.hasOwnProperty(u))return m;var y=h[u],k=this.getModeAt(a);if(typeof k[u]=="string")y[k[u]]&&m.push(y[k[u]]);else if(k[u])for(var C=0;C<k[u].length;C++){var P=y[k[u][C]];P&&m.push(P)}else k.helperType&&y[k.helperType]?m.push(y[k.helperType]):y[k.name]&&m.push(y[k.name]);for(var W=0;W<y._global.length;W++){var F=y._global[W];F.pred(k,this)&&V(m,F.val)==-1&&m.push(F.val)}return m},getStateAfter:function(a,u){var m=this.doc;return a=be(m,a??m.first+m.size-1),no(this,a+1,u).state},cursorCoords:function(a,u){var m,y=this.doc.sel.primary();return a==null?m=y.head:typeof a=="object"?m=Ft(this.doc,a):m=a?y.from():y.to(),Ui(this,m,u||"page")},charCoords:function(a,u){return va(this,Ft(this.doc,a),u||"page")},coordsChar:function(a,u){return a=Fu(this,a,u||"page"),El(this,a.left,a.top)},lineAtHeight:function(a,u){return a=Fu(this,{top:a,left:0},u||"page").top,an(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,u,m){var y=!1,k;if(typeof a=="number"){var C=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>C&&(a=C,y=!0),k=Vt(this.doc,a)}else k=a;return ma(this,k,{top:0,left:0},u||"page",m||y).top+(y?this.doc.height-Dn(k):0)},defaultTextHeight:function(){return cr(this.display)},defaultCharWidth:function(){return dr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,u,m,y,k){var C=this.display;a=Ui(this,Ft(this.doc,a));var P=a.bottom,W=a.left;if(u.style.position="absolute",u.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(u),C.sizer.appendChild(u),y=="over")P=a.top;else if(y=="above"||y=="near"){var F=Math.max(C.wrapper.clientHeight,this.doc.height),et=Math.max(C.sizer.clientWidth,C.lineSpace.clientWidth);(y=="above"||a.bottom+u.offsetHeight>F)&&a.top>u.offsetHeight?P=a.top-u.offsetHeight:a.bottom+u.offsetHeight<=F&&(P=a.bottom),W+u.offsetWidth>et&&(W=et-u.offsetWidth)}u.style.top=P+"px",u.style.left=u.style.right="",k=="right"?(W=C.sizer.clientWidth-u.offsetWidth,u.style.right="0px"):(k=="left"?W=0:k=="middle"&&(W=(C.sizer.clientWidth-u.offsetWidth)/2),u.style.left=W+"px"),m&&$p(this,{left:W,top:P,right:W+u.offsetWidth,bottom:P+u.offsetHeight})},triggerOnKeyDown:si(Xc),triggerOnKeyPress:si(Uc),triggerOnKeyUp:Yc,triggerOnMouseDown:si(qc),execCommand:function(a){if(To.hasOwnProperty(a))return To[a].call(null,this)},triggerElectric:si(function(a){ed(this,a)}),findPosH:function(a,u,m,y){var k=1;u<0&&(k=-1,u=-u);for(var C=Ft(this.doc,a),P=0;P<u&&(C=lh(this.doc,C,k,m,y),!C.hitSide);++P);return C},moveH:si(function(a,u){var m=this;this.extendSelectionsBy(function(y){return m.display.shift||m.doc.extend||y.empty()?lh(m.doc,y.head,a,u,m.options.rtlMoveVisually):a<0?y.from():y.to()},vt)}),deleteH:si(function(a,u){var m=this.doc.sel,y=this.doc;m.somethingSelected()?y.replaceSelection("",null,"+delete"):xr(this,function(k){var C=lh(y,k.head,a,u,!1);return a<0?{from:C,to:k.head}:{from:k.head,to:C}})}),findPosV:function(a,u,m,y){var k=1,C=y;u<0&&(k=-1,u=-u);for(var P=Ft(this.doc,a),W=0;W<u;++W){var F=Ui(this,P,"div");if(C==null?C=F.left:F.left=C,P=od(this,F,k,m),P.hitSide)break}return P},moveV:si(function(a,u){var m=this,y=this.doc,k=[],C=!this.display.shift&&!y.extend&&y.sel.somethingSelected();if(y.extendSelectionsBy(function(W){if(C)return a<0?W.from():W.to();var F=Ui(m,W.head,"div");W.goalColumn!=null&&(F.left=W.goalColumn),k.push(F.left);var et=od(m,F,a,u);return u=="page"&&W==y.sel.primary()&&Fl(m,va(m,et,"div").top-F.top),et},vt),k.length)for(var P=0;P<y.sel.ranges.length;P++)y.sel.ranges[P].goalColumn=k[P]}),findWordAt:function(a){var u=this.doc,m=Vt(u,a.line).text,y=a.ch,k=a.ch;if(m){var C=this.getHelper(a,"wordChars");(a.sticky=="before"||k==m.length)&&y?--y:++k;for(var P=m.charAt(y),W=d(P,C)?function(F){return d(F,C)}:/\s/.test(P)?function(F){return/\s/.test(F)}:function(F){return!/\s/.test(F)&&!d(F)};y>0&&W(m.charAt(y-1));)--y;for(;k<m.length&&W(m.charAt(k));)++k}return new Se(Tt(a.line,y),Tt(a.line,k))},toggleOverwrite:function(a){a!=null&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?Yt(this.display.cursorDiv,"CodeMirror-overwrite"):Wt(this.display.cursorDiv,"CodeMirror-overwrite"),Et(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Zt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:si(function(a,u){uo(this,a,u)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-hn(this)-this.display.barHeight,width:a.scrollWidth-hn(this)-this.display.barWidth,clientHeight:Pl(this),clientWidth:ms(this)}},scrollIntoView:si(function(a,u){a==null?(a={from:this.doc.sel.primary().head,to:null},u==null&&(u=this.options.cursorScrollMargin)):typeof a=="number"?a={from:Tt(a,0),to:null}:a.from==null&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=u||0,a.from.line!=null?zp(this,a):Qu(this,a.from,a.to,a.margin)}),setSize:si(function(a,u){var m=this,y=function(C){return typeof C=="number"||/^\d+$/.test(String(C))?C+"px":C};a!=null&&(this.display.wrapper.style.width=y(a)),u!=null&&(this.display.wrapper.style.height=y(u)),this.options.lineWrapping&&Hu(this);var k=this.display.viewFrom;this.doc.iter(k,this.display.viewTo,function(C){if(C.widgets){for(var P=0;P<C.widgets.length;P++)if(C.widgets[P].noHScroll){Un(m,k,"widget");break}}++k}),this.curOp.forceUpdate=!0,Et(this,"refresh",this)}),operation:function(a){return bi(this,a)},startOperation:function(){return xs(this)},endOperation:function(){return ks(this)},refresh:si(function(){var a=this.display.cachedTextHeight;li(this),this.curOp.forceUpdate=!0,lo(this),uo(this,this.doc.scrollLeft,this.doc.scrollTop),Xl(this.display),(a==null||Math.abs(a-cr(this.display))>.5||this.options.lineWrapping)&&Nl(this),Et(this,"refresh",this)}),swapDoc:si(function(a){var u=this.doc;return u.cm=null,this.state.selectingText&&this.state.selectingText(),cc(this,a),lo(this),this.display.input.reset(),uo(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,Xe(this,"swapDoc",this,u),u}),phrase:function(a){var u=this.options.phrases;return u&&Object.prototype.hasOwnProperty.call(u,a)?u[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Wi(e),e.registerHelper=function(a,u,m){h.hasOwnProperty(a)||(h[a]=e[a]={_global:[]}),h[a][u]=m},e.registerGlobalHelper=function(a,u,m,y){e.registerHelper(a,u,y),h[a]._global.push({pred:m,val:y})}}function lh(e,s,h,a,u){var m=s,y=h,k=Vt(e,s.line),C=u&&e.direction=="rtl"?-h:h;function P(){var $t=s.line+C;return $t<e.first||$t>=e.first+e.size?!1:(s=new Tt($t,s.ch,s.sticky),k=Vt(e,$t))}function W($t){var Mt;if(a=="codepoint"){var Gt=k.text.charCodeAt(s.ch+(h>0?0:-1));if(isNaN(Gt))Mt=null;else{var ie=h>0?Gt>=55296&&Gt<56320:Gt>=56320&&Gt<57343;Mt=new Tt(s.line,Math.max(0,Math.min(k.text.length,s.ch+h*(ie?2:1))),-h)}}else u?Mt=Cg(e.cm,k,s,h):Mt=eh(k,s,h);if(Mt==null)if(!$t&&P())s=ih(u,e.cm,k,s.line,C);else return!1;else s=Mt;return!0}if(a=="char"||a=="codepoint")W();else if(a=="column")W(!0);else if(a=="word"||a=="group")for(var F=null,et=a=="group",Z=e.cm&&e.cm.getHelper(s,"wordChars"),dt=!0;!(h<0&&!W(!dt));dt=!1){var mt=k.text.charAt(s.ch)||`
`,It=d(mt,Z)?"w":et&&mt==`
`?"n":!et||/\s/.test(mt)?null:"p";if(et&&!dt&&!It&&(It="s"),F&&F!=It){h<0&&(h=1,W(),s.sticky="after");break}if(It&&(F=It),h>0&&!W(!dt))break}var At=Ia(e,s,m,y,!0);return j(m,At)&&(At.hitSide=!0),At}function od(e,s,h,a){var u=e.doc,m=s.left,y;if(a=="page"){var k=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),C=Math.max(k-.5*cr(e.display),3);y=(h>0?s.bottom:s.top)+h*C}else a=="line"&&(y=h>0?s.bottom+3:s.top-3);for(var P;P=El(e,m,y),!!P.outside;){if(h<0?y<=0:y>=u.height){P.hitSide=!0;break}y+=h*5}return P}var xe=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ot,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};xe.prototype.init=function(e){var s=this,h=this,a=h.cm,u=h.div=e.lineDiv;u.contentEditable=!0,sd(u,a.options.spellcheck,a.options.autocorrect,a.options.autocapitalize);function m(k){for(var C=k.target;C;C=C.parentNode){if(C==u)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(C.className))break}return!1}ft(u,"paste",function(k){!m(k)||me(a,k)||td(k,a)||D<=11&&setTimeout(Ye(a,function(){return s.updateFromDOM()}),20)}),ft(u,"compositionstart",function(k){s.composing={data:k.data,done:!1}}),ft(u,"compositionupdate",function(k){s.composing||(s.composing={data:k.data,done:!1})}),ft(u,"compositionend",function(k){s.composing&&(k.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),ft(u,"touchstart",function(){return h.forceCompositionEnd()}),ft(u,"input",function(){s.composing||s.readFromDOMSoon()});function y(k){if(!(!m(k)||me(a,k))){if(a.somethingSelected())Ma({lineWise:!1,text:a.getSelections()}),k.type=="cut"&&a.replaceSelection("",null,"cut");else if(a.options.lineWiseCopyCut){var C=nd(a);Ma({lineWise:!0,text:C.text}),k.type=="cut"&&a.operation(function(){a.setSelections(C.ranges,0,U),a.replaceSelection("",null,"cut")})}else return;if(k.clipboardData){k.clipboardData.clearData();var P=Vi.text.join(`
`);if(k.clipboardData.setData("Text",P),k.clipboardData.getData("Text")==P){k.preventDefault();return}}var W=rd(),F=W.firstChild;a.display.lineSpace.insertBefore(W,a.display.lineSpace.firstChild),F.value=Vi.text.join(`
`);var et=Zt();qt(F),setTimeout(function(){a.display.lineSpace.removeChild(W),et.focus(),et==u&&h.showPrimarySelection()},50)}}ft(u,"copy",y),ft(u,"cut",y)},xe.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},xe.prototype.prepareSelection=function(){var e=qu(this.cm,!1);return e.focus=Zt()==this.div,e},xe.prototype.showSelection=function(e,s){!e||!this.cm.display.view.length||((e.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(e))},xe.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},xe.prototype.showPrimarySelection=function(){var e=this.getSelection(),s=this.cm,h=s.doc.sel.primary(),a=h.from(),u=h.to();if(s.display.viewTo==s.display.viewFrom||a.line>=s.display.viewTo||u.line<s.display.viewFrom){e.removeAllRanges();return}var m=Na(s,e.anchorNode,e.anchorOffset),y=Na(s,e.focusNode,e.focusOffset);if(!(m&&!m.bad&&y&&!y.bad&&I(le(m,y),a)==0&&I(_t(m,y),u)==0)){var k=s.display.view,C=a.line>=s.display.viewFrom&&ad(s,a)||{node:k[0].measure.map[2],offset:0},P=u.line<s.display.viewTo&&ad(s,u);if(!P){var W=k[k.length-1].measure,F=W.maps?W.maps[W.maps.length-1]:W.map;P={node:F[F.length-1],offset:F[F.length-2]-F[F.length-3]}}if(!C||!P){e.removeAllRanges();return}var et=e.rangeCount&&e.getRangeAt(0),Z;try{Z=ee(C.node,C.offset,P.offset,P.node)}catch{}Z&&(!l&&s.state.focused?(e.collapse(C.node,C.offset),Z.collapsed||(e.removeAllRanges(),e.addRange(Z))):(e.removeAllRanges(),e.addRange(Z)),et&&e.anchorNode==null?e.addRange(et):l&&this.startGracePeriod()),this.rememberSelection()}},xe.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},xe.prototype.showMultipleSelections=function(e){K(this.cm.display.cursorDiv,e.cursors),K(this.cm.display.selectionDiv,e.selection)},xe.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},xe.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var s=e.getRangeAt(0).commonAncestorContainer;return Kt(this.div,s)},xe.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Zt()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},xe.prototype.blur=function(){this.div.blur()},xe.prototype.getField=function(){return this.div},xe.prototype.supportsTouch=function(){return!0},xe.prototype.receivedFocus=function(){var e=this,s=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):bi(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function h(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,h))}this.polling.set(this.cm.options.pollInterval,h)},xe.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},xe.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),s=this.cm;if(A&&M&&this.cm.display.gutterSpecs.length&&Gg(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var h=Na(s,e.anchorNode,e.anchorOffset),a=Na(s,e.focusNode,e.focusOffset);h&&a&&bi(s,function(){ti(s.doc,Vn(h,a),U),(h.bad||a.bad)&&(s.curOp.selectionChanged=!0)})}}},xe.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,s=e.display,h=e.doc.sel.primary(),a=h.from(),u=h.to();if(a.ch==0&&a.line>e.firstLine()&&(a=Tt(a.line-1,Vt(e.doc,a.line-1).length)),u.ch==Vt(e.doc,u.line).text.length&&u.line<e.lastLine()&&(u=Tt(u.line+1,0)),a.line<s.viewFrom||u.line>s.viewTo-1)return!1;var m,y,k;a.line==s.viewFrom||(m=ys(e,a.line))==0?(y=we(s.view[0].line),k=s.view[0].node):(y=we(s.view[m].line),k=s.view[m-1].node.nextSibling);var C=ys(e,u.line),P,W;if(C==s.view.length-1?(P=s.viewTo-1,W=s.lineDiv.lastChild):(P=we(s.view[C+1].line)-1,W=s.view[C+1].node.previousSibling),!k)return!1;for(var F=e.doc.splitLines(Xg(e,k,W,y,P)),et=on(e.doc,Tt(y,0),Tt(P,Vt(e.doc,P).text.length));F.length>1&&et.length>1;)if(Ht(F)==Ht(et))F.pop(),et.pop(),P--;else if(F[0]==et[0])F.shift(),et.shift(),y++;else break;for(var Z=0,dt=0,mt=F[0],It=et[0],At=Math.min(mt.length,It.length);Z<At&&mt.charCodeAt(Z)==It.charCodeAt(Z);)++Z;for(var $t=Ht(F),Mt=Ht(et),Gt=Math.min($t.length-(F.length==1?Z:0),Mt.length-(et.length==1?Z:0));dt<Gt&&$t.charCodeAt($t.length-dt-1)==Mt.charCodeAt(Mt.length-dt-1);)++dt;if(F.length==1&&et.length==1&&y==a.line)for(;Z&&Z>a.ch&&$t.charCodeAt($t.length-dt-1)==Mt.charCodeAt(Mt.length-dt-1);)Z--,dt++;F[F.length-1]=$t.slice(0,$t.length-dt).replace(/^\u200b+/,""),F[0]=F[0].slice(Z).replace(/\u200b+$/,"");var ie=Tt(y,Z),Jt=Tt(P,et.length?Ht(et).length-dt:0);if(F.length>1||F[0]||I(ie,Jt))return yr(e.doc,F,ie,Jt,"+input"),!0},xe.prototype.ensurePolled=function(){this.forceCompositionEnd()},xe.prototype.reset=function(){this.forceCompositionEnd()},xe.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},xe.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},xe.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&bi(this.cm,function(){return li(e.cm)})},xe.prototype.setUneditable=function(e){e.contentEditable="false"},xe.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Ye(this.cm,ah)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},xe.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},xe.prototype.onContextMenu=function(){},xe.prototype.resetPosition=function(){},xe.prototype.needsContentAttribute=!0;function ad(e,s){var h=Il(e,s.line);if(!h||h.hidden)return null;var a=Vt(e.doc,s.line),u=Au(h,a,s.line),m=ut(a,e.doc.direction),y="left";if(m){var k=nt(m,s.ch);y=k%2?"right":"left"}var C=Bu(u.map,s.ch,y);return C.offset=C.collapse=="right"?C.end:C.start,C}function Gg(e){for(var s=e;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function Cr(e,s){return s&&(e.bad=!0),e}function Xg(e,s,h,a,u){var m="",y=!1,k=e.doc.lineSeparator(),C=!1;function P(Z){return function(dt){return dt.id==Z}}function W(){y&&(m+=k,C&&(m+=k),y=C=!1)}function F(Z){Z&&(W(),m+=Z)}function et(Z){if(Z.nodeType==1){var dt=Z.getAttribute("cm-text");if(dt){F(dt);return}var mt=Z.getAttribute("cm-marker"),It;if(mt){var At=e.findMarks(Tt(a,0),Tt(u+1,0),P(+mt));At.length&&(It=At[0].find(0))&&F(on(e.doc,It.from,It.to).join(k));return}if(Z.getAttribute("contenteditable")=="false")return;var $t=/^(pre|div|p|li|table|br)$/i.test(Z.nodeName);if(!/^br$/i.test(Z.nodeName)&&Z.textContent.length==0)return;$t&&W();for(var Mt=0;Mt<Z.childNodes.length;Mt++)et(Z.childNodes[Mt]);/^(pre|p)$/i.test(Z.nodeName)&&(C=!0),$t&&(y=!0)}else Z.nodeType==3&&F(Z.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;et(s),s!=h;)s=s.nextSibling,C=!1;return m}function Na(e,s,h){var a;if(s==e.display.lineDiv){if(a=e.display.lineDiv.childNodes[h],!a)return Cr(e.clipPos(Tt(e.display.viewTo-1)),!0);s=null,h=0}else for(a=s;;a=a.parentNode){if(!a||a==e.display.lineDiv)return null;if(a.parentNode&&a.parentNode==e.display.lineDiv)break}for(var u=0;u<e.display.view.length;u++){var m=e.display.view[u];if(m.node==a)return Yg(m,s,h)}}function Yg(e,s,h){var a=e.text.firstChild,u=!1;if(!s||!Kt(a,s))return Cr(Tt(we(e.line),0),!0);if(s==a&&(u=!0,s=a.childNodes[h],h=0,!s)){var m=e.rest?Ht(e.rest):e.line;return Cr(Tt(we(m),m.text.length),u)}var y=s.nodeType==3?s:null,k=s;for(!y&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(y=s.firstChild,h&&(h=y.nodeValue.length));k.parentNode!=a;)k=k.parentNode;var C=e.measure,P=C.maps;function W(It,At,$t){for(var Mt=-1;Mt<(P?P.length:0);Mt++)for(var Gt=Mt<0?C.map:P[Mt],ie=0;ie<Gt.length;ie+=3){var Jt=Gt[ie+2];if(Jt==It||Jt==At){var de=we(Mt<0?e.line:e.rest[Mt]),Ce=Gt[ie]+$t;return($t<0||Jt!=It)&&(Ce=Gt[ie+($t?1:0)]),Tt(de,Ce)}}}var F=W(y,k,h);if(F)return Cr(F,u);for(var et=k.nextSibling,Z=y?y.nodeValue.length-h:0;et;et=et.nextSibling){if(F=W(et,et.firstChild,0),F)return Cr(Tt(F.line,F.ch-Z),u);Z+=et.textContent.length}for(var dt=k.previousSibling,mt=h;dt;dt=dt.previousSibling){if(F=W(dt,dt.firstChild,-1),F)return Cr(Tt(F.line,F.ch+mt),u);mt+=dt.textContent.length}}var Ne=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new ot,this.hasSelection=!1,this.composing=null};Ne.prototype.init=function(e){var s=this,h=this,a=this.cm;this.createField(e);var u=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),B&&(u.style.width="0px"),ft(u,"input",function(){w&&D>=9&&s.hasSelection&&(s.hasSelection=null),h.poll()}),ft(u,"paste",function(y){me(a,y)||td(y,a)||(a.state.pasteIncoming=+new Date,h.fastPoll())});function m(y){if(!me(a,y)){if(a.somethingSelected())Ma({lineWise:!1,text:a.getSelections()});else if(a.options.lineWiseCopyCut){var k=nd(a);Ma({lineWise:!0,text:k.text}),y.type=="cut"?a.setSelections(k.ranges,null,U):(h.prevInput="",u.value=k.text.join(`
`),qt(u))}else return;y.type=="cut"&&(a.state.cutIncoming=+new Date)}}ft(u,"cut",m),ft(u,"copy",m),ft(e.scroller,"paste",function(y){if(!(Tn(e,y)||me(a,y))){if(!u.dispatchEvent){a.state.pasteIncoming=+new Date,h.focus();return}var k=new Event("paste");k.clipboardData=y.clipboardData,u.dispatchEvent(k)}}),ft(e.lineSpace,"selectstart",function(y){Tn(e,y)||Fe(y)}),ft(u,"compositionstart",function(){var y=a.getCursor("from");h.composing&&h.composing.range.clear(),h.composing={start:y,range:a.markText(y,a.getCursor("to"),{className:"CodeMirror-composing"})}}),ft(u,"compositionend",function(){h.composing&&(h.poll(),h.composing.range.clear(),h.composing=null)})},Ne.prototype.createField=function(e){this.wrapper=rd(),this.textarea=this.wrapper.firstChild},Ne.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Ne.prototype.prepareSelection=function(){var e=this.cm,s=e.display,h=e.doc,a=qu(e);if(e.options.moveInputWithCursor){var u=Ui(e,h.sel.primary().head,"div"),m=s.wrapper.getBoundingClientRect(),y=s.lineDiv.getBoundingClientRect();a.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,u.top+y.top-m.top)),a.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,u.left+y.left-m.left))}return a},Ne.prototype.showSelection=function(e){var s=this.cm,h=s.display;K(h.cursorDiv,e.cursors),K(h.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Ne.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing)){var s=this.cm;if(s.somethingSelected()){this.prevInput="";var h=s.getSelection();this.textarea.value=h,s.state.focused&&qt(this.textarea),w&&D>=9&&(this.hasSelection=h)}else e||(this.prevInput=this.textarea.value="",w&&D>=9&&(this.hasSelection=null))}},Ne.prototype.getField=function(){return this.textarea},Ne.prototype.supportsTouch=function(){return!1},Ne.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!q||Zt()!=this.textarea))try{this.textarea.focus()}catch{}},Ne.prototype.blur=function(){this.textarea.blur()},Ne.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ne.prototype.receivedFocus=function(){this.slowPoll()},Ne.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Ne.prototype.fastPoll=function(){var e=!1,s=this;s.pollingFast=!0;function h(){var a=s.poll();!a&&!e?(e=!0,s.polling.set(60,h)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,h)},Ne.prototype.poll=function(){var e=this,s=this.cm,h=this.textarea,a=this.prevInput;if(this.contextMenuPending||!s.state.focused||oa(h)&&!a&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var u=h.value;if(u==a&&!s.somethingSelected())return!1;if(w&&D>=9&&this.hasSelection===u||z&&/[\uf700-\uf7ff]/.test(u))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var m=u.charCodeAt(0);if(m==8203&&!a&&(a=""),m==8666)return this.reset(),this.cm.execCommand("undo")}for(var y=0,k=Math.min(a.length,u.length);y<k&&a.charCodeAt(y)==u.charCodeAt(y);)++y;return bi(s,function(){ah(s,u.slice(y),a.length-y,null,e.composing?"*compose":null),u.length>1e3||u.indexOf(`
`)>-1?h.value=e.prevInput="":e.prevInput=u,e.composing&&(e.composing.range.clear(),e.composing.range=s.markText(e.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ne.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ne.prototype.onKeyPress=function(){w&&D>=9&&(this.hasSelection=null),this.fastPoll()},Ne.prototype.onContextMenu=function(e){var s=this,h=s.cm,a=h.display,u=s.textarea;s.contextMenuPending&&s.contextMenuPending();var m=bs(h,e),y=a.scroller.scrollTop;if(!m||L)return;var k=h.options.resetSelectionOnContextMenu;k&&h.doc.sel.contains(m)==-1&&Ye(h,ti)(h.doc,Vn(m),U);var C=u.style.cssText,P=s.wrapper.style.cssText,W=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",u.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-W.top-5)+"px; left: "+(e.clientX-W.left-5)+`px;
      z-index: 1000; background: `+(w?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var F;T&&(F=window.scrollY),a.input.focus(),T&&window.scrollTo(null,F),a.input.reset(),h.somethingSelected()||(u.value=s.prevInput=" "),s.contextMenuPending=Z,a.selForContextMenu=h.doc.sel,clearTimeout(a.detectingSelectAll);function et(){if(u.selectionStart!=null){var mt=h.somethingSelected(),It=""+(mt?u.value:"");u.value="",u.value=It,s.prevInput=mt?"":"",u.selectionStart=1,u.selectionEnd=It.length,a.selForContextMenu=h.doc.sel}}function Z(){if(s.contextMenuPending==Z&&(s.contextMenuPending=!1,s.wrapper.style.cssText=P,u.style.cssText=C,w&&D<9&&a.scrollbars.setScrollTop(a.scroller.scrollTop=y),u.selectionStart!=null)){(!w||w&&D<9)&&et();var mt=0,It=function(){a.selForContextMenu==h.doc.sel&&u.selectionStart==0&&u.selectionEnd>0&&s.prevInput==""?Ye(h,Cc)(h):mt++<10?a.detectingSelectAll=setTimeout(It,500):(a.selForContextMenu=null,a.input.reset())};a.detectingSelectAll=setTimeout(It,200)}}if(w&&D>=9&&et(),wt){Ai(e);var dt=function(){jt(window,"mouseup",dt),setTimeout(Z,20)};ft(window,"mouseup",dt)}else setTimeout(Z,50)},Ne.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Ne.prototype.setUneditable=function(){},Ne.prototype.needsContentAttribute=!1;function Ug(e,s){if(s=s?oe(s):{},s.value=e.value,!s.tabindex&&e.tabIndex&&(s.tabindex=e.tabIndex),!s.placeholder&&e.placeholder&&(s.placeholder=e.placeholder),s.autofocus==null){var h=Zt();s.autofocus=h==e||e.getAttribute("autofocus")!=null&&h==document.body}function a(){e.value=k.getValue()}var u;if(e.form&&(ft(e.form,"submit",a),!s.leaveSubmitMethodAlone)){var m=e.form;u=m.submit;try{var y=m.submit=function(){a(),m.submit=u,m.submit(),m.submit=y}}catch{}}s.finishInit=function(C){C.save=a,C.getTextArea=function(){return e},C.toTextArea=function(){C.toTextArea=isNaN,a(),e.parentNode.removeChild(C.getWrapperElement()),e.style.display="",e.form&&(jt(e.form,"submit",a),!s.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=u))}},e.style.display="none";var k=Ie(function(C){return e.parentNode.insertBefore(C,e.nextSibling)},s);return k}function qg(e){e.off=jt,e.on=ft,e.wheelEventPixels=eg,e.Doc=hi,e.splitLines=Qr,e.countColumn=ce,e.findColumn=Lt,e.isWordChar=o,e.Pass=N,e.signal=Et,e.Line=lr,e.changeEnd=Kn,e.scrollbarModel=tc,e.Pos=Tt,e.cmpPos=I,e.modes=Mi,e.mimeModes=Ti,e.resolveMode=rr,e.getMode=or,e.modeExtensions=Gi,e.extendMode=Xi,e.copyState=_i,e.startState=to,e.innerMode=Jr,e.commands=To,e.keyMap=Pn,e.keyName=$c,e.isModifierKey=Rc,e.lookupKey=Sr,e.normalizeKeyMap=kg,e.StringStream=We,e.SharedTextMarker=ko,e.TextMarker=Zn,e.LineWidget=xo,e.e_preventDefault=Fe,e.e_stopPropagation=je,e.e_stop=Ai,e.addClass=Yt,e.contains=Kt,e.rmClass=Wt,e.keyNames=Jn}Hg(Ie),jg(Ie);var Vg="iter insert remove copy getEditor constructor".split(" ");for(var Ba in hi.prototype)hi.prototype.hasOwnProperty(Ba)&&V(Vg,Ba)<0&&(Ie.prototype[Ba]=function(e){return function(){return e.apply(this.doc,arguments)}}(hi.prototype[Ba]));return Wi(hi),Ie.inputStyles={textarea:Ne,contenteditable:xe},Ie.defineMode=function(e){!Ie.defaults.mode&&e!="null"&&(Ie.defaults.mode=e),la.apply(this,arguments)},Ie.defineMIME=kn,Ie.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ie.defineMIME("text/plain","null"),Ie.defineExtension=function(e,s){Ie.prototype[e]=s},Ie.defineDocExtension=function(e,s){hi.prototype[e]=s},Ie.fromTextArea=Ug,qg(Ie),Ie.version="5.65.1",Ie})}(dh)),dh.exports}var Rm=Gs();const Ya=Mh(Rm);(function(i,t){(function(n){n(Gs())})(function(n){n.defineMode("verilog",function(M,L){var E=M.indentUnit,Q=L.statementIndentUnit||E,lt=L.dontAlignCalls,B=L.compilerDirectivesUseRegularIndentation,A=L.noIndentKeywords||[],q=L.multiLineStrings,z=L.hooks||{};function it(pt){for(var Ot={},kt=pt.split(" "),zt=0;zt<kt.length;++zt)Ot[kt[zt]]=!0;return Ot}var xt=it("accept_on alias always always_comb always_ff always_latch and assert assign assume automatic before begin bind bins binsof bit break buf bufif0 bufif1 byte case casex casez cell chandle checker class clocking cmos config const constraint context continue cover covergroup coverpoint cross deassign default defparam design disable dist do edge else end endcase endchecker endclass endclocking endconfig endfunction endgenerate endgroup endinterface endmodule endpackage endprimitive endprogram endproperty endspecify endsequence endtable endtask enum event eventually expect export extends extern final first_match for force foreach forever fork forkjoin function generate genvar global highz0 highz1 if iff ifnone ignore_bins illegal_bins implements implies import incdir include initial inout input inside instance int integer interconnect interface intersect join join_any join_none large let liblist library local localparam logic longint macromodule matches medium modport module nand negedge nettype new nexttime nmos nor noshowcancelled not notif0 notif1 null or output package packed parameter pmos posedge primitive priority program property protected pull0 pull1 pulldown pullup pulsestyle_ondetect pulsestyle_onevent pure rand randc randcase randsequence rcmos real realtime ref reg reject_on release repeat restrict return rnmos rpmos rtran rtranif0 rtranif1 s_always s_eventually s_nexttime s_until s_until_with scalared sequence shortint shortreal showcancelled signed small soft solve specify specparam static string strong strong0 strong1 struct super supply0 supply1 sync_accept_on sync_reject_on table tagged task this throughout time timeprecision timeunit tran tranif0 tranif1 tri tri0 tri1 triand trior trireg type typedef union unique unique0 unsigned until until_with untyped use uwire var vectored virtual void wait wait_order wand weak weak0 weak1 while wildcard wire with within wor xnor xor"),rt=/[\+\-\*\/!~&|^%=?:<>]/,at=/[\[\]{}()]/,wt=/\d[0-9_]*/,Dt=/\d*\s*'s?d\s*\d[0-9_]*/i,Wt=/\d*\s*'s?b\s*[xz01][xz01_]*/i,Pt=/\d*\s*'s?o\s*[xz0-7][xz0-7_]*/i,K=/\d*\s*'s?h\s*[0-9a-fxz?][0-9a-fxz?_]*/i,J=/(\d[\d_]*(\.\d[\d_]*)?E-?[\d_]+)|(\d[\d_]*\.\d[\d_]*)/i,Y=/^((`?\w+)|[)}\]])/,ee=/[)}\]]/,Kt=new RegExp("^(`(?:ifdef|ifndef|elsif|else|endif|undef|undefineall|define|include|begin_keywords|celldefine|default|nettype|end_keywords|endcelldefine|line|nounconnected_drive|pragma|resetall|timescale|unconnected_drive))\\b"),Zt=/^(`(?:ifdef|ifndef|elsif|else))\b/,Yt=/^(`(?:elsif|else|endif))\b/,Rt,qt,pe=it("case checker class clocking config function generate interface module package primitive program property specify sequence table task"),oe={};for(var ce in pe)oe[ce]="end"+ce;oe.begin="end",oe.casex="endcase",oe.casez="endcase",oe.do="while",oe.fork="join;join_any;join_none",oe.covergroup="endgroup",oe.macro_begin="macro_end";for(var ot in A){var ce=A[ot];oe[ce]&&(oe[ce]=void 0)}var V=it("always always_comb always_ff always_latch assert assign assume else export for foreach forever if import initial repeat while extern typedef");function st(pt,Ot){var kt=pt.peek(),zt;if(z[kt]&&(zt=z[kt](pt,Ot))!=!1||z.tokenBase&&(zt=z.tokenBase(pt,Ot))!=!1)return zt;if(/[,;:\.]/.test(kt))return Rt=pt.next(),null;if(at.test(kt))return Rt=pt.next(),"bracket";if(kt=="`")if(pt.next(),pt.eatWhile(/[\w\$_]/)){var he=pt.current();if(qt=he,he.startsWith("`uvm_")&&he.endsWith("_begin")){var o=qt.substr(0,qt.length-5)+"end";oe[he]=o,Rt="newblock"}else{pt.eatSpace(),pt.peek()=="("&&(Rt="newmacro");var d=pt.current();pt.backUp(d.length-he.length)}return"def"}else return null;if(kt=="$")return pt.next(),pt.eatWhile(/[\w\$_]/)?"meta":null;if(kt=="#")return pt.next(),pt.eatWhile(/[\d_.]/),"def";if(kt=="@")return pt.next(),pt.eatWhile(/[@]/),"def";if(kt=='"')return pt.next(),Ot.tokenize=N(kt),Ot.tokenize(pt,Ot);if(kt=="/"){if(pt.next(),pt.eat("*"))return Ot.tokenize=U,U(pt,Ot);if(pt.eat("/"))return pt.skipToEnd(),"comment";pt.backUp(1)}if(pt.match(J)||pt.match(Dt)||pt.match(Wt)||pt.match(Pt)||pt.match(K)||pt.match(wt)||pt.match(J))return"number";if(pt.eatWhile(rt))return Rt=pt.current(),"meta";if(pt.eatWhile(/[\w\$_]/)){var he=pt.current();return xt[he]?(oe[he]&&(Rt="newblock",he==="fork"&&(pt.eatSpace(),pt.peek()==";"&&(Rt="newstatement"),pt.backUp(pt.current().length-he.length))),V[he]&&(Rt="newstatement"),qt=he,"keyword"):"variable"}return pt.next(),null}function N(pt){return function(Ot,kt){for(var zt=!1,he,o=!1;(he=Ot.next())!=null;){if(he==pt&&!zt){o=!0;break}zt=!zt&&he=="\\"}return(o||!(zt||q))&&(kt.tokenize=st),"string"}}function U(pt,Ot){for(var kt=!1,zt;zt=pt.next();){if(zt=="/"&&kt){Ot.tokenize=st;break}kt=zt=="*"}return"comment"}function bt(pt,Ot,kt,zt,he,o){this.indented=pt,this.column=Ot,this.type=kt,this.scopekind=zt,this.align=he,this.prev=o}function vt(pt,Ot,kt,zt){var he=pt.indented,o=new bt(he,Ot,kt,zt||"",null,pt.context);return pt.context=o}function Lt(pt){var Ot=pt.context.type;return(Ot==")"||Ot=="]"||Ot=="}")&&(pt.indented=pt.context.indented),pt.context=pt.context.prev}function Ut(pt,Ot){if(pt==Ot)return!0;var kt=Ot.split(";");for(var zt in kt)if(pt==kt[zt])return!0;return!1}function Qt(pt,Ot){return pt==null?!1:pt.scopekind===Ot?!0:Qt(pt.prev,Ot)}function Ht(){var pt=[];for(var Ot in oe)if(oe[Ot]){var kt=oe[Ot].split(";");for(var zt in kt)pt.push(kt[zt])}var he=new RegExp("[{}()\\[\\]]|("+pt.join("|")+")$");return he}return{electricInput:Ht(),startState:function(pt){var Ot={tokenize:null,context:new bt((pt||0)-E,0,"top","top",!1),indented:0,compilerDirectiveIndented:0,startOfLine:!0};return z.startState&&z.startState(Ot),Ot},token:function(pt,Ot){var kt=Ot.context;if(pt.sol()&&(kt.align==null&&(kt.align=!1),Ot.indented=pt.indentation(),Ot.startOfLine=!0),z.token){var zt=z.token(pt,Ot);if(zt!==void 0)return zt}if(pt.eatSpace())return null;Rt=null,qt=null;var zt=(Ot.tokenize||st)(pt,Ot);if(zt=="comment"||zt=="meta"||zt=="variable")return(Rt==="="||Rt==="<=")&&!Qt(kt,"assignment")&&(vt(Ot,pt.column()+Rt.length,"assignment","assignment"),kt.align==null&&(kt.align=!0)),zt;kt.align==null&&(kt.align=!0);var he=kt.type=="assignment"&&ee.test(Rt)&&kt.prev&&kt.prev.type===Rt;if(Rt==kt.type||he){if(he&&(kt=Lt(Ot)),kt=Lt(Ot),Rt==")"){if(kt&&kt.type==="macro")for(kt=Lt(Ot);kt&&(kt.type=="statement"||kt.type=="assignment");)kt=Lt(Ot)}else if(Rt=="}"&&kt&&kt.type==="statement")for(;kt&&kt.type=="statement";)kt=Lt(Ot)}else if((Rt==";"||Rt==",")&&(kt.type=="statement"||kt.type=="assignment")||kt.type&&Ut(qt,kt.type))for(kt=Lt(Ot);kt&&(kt.type=="statement"||kt.type=="assignment");)kt=Lt(Ot);else if(Rt=="{")vt(Ot,pt.column(),"}");else if(Rt=="[")vt(Ot,pt.column(),"]");else if(Rt=="(")vt(Ot,pt.column(),")");else if(kt&&kt.type=="endcase"&&Rt==":")vt(Ot,pt.column(),"statement","case");else if(Rt=="newstatement")vt(Ot,pt.column(),"statement",qt);else if(Rt=="newblock"){if(!(qt=="function"&&kt&&(kt.type=="statement"||kt.type=="endgroup"))){if(!(qt=="task"&&kt&&kt.type=="statement")){if(!(qt=="class"&&kt&&kt.type=="statement")){var o=oe[qt];vt(Ot,pt.column(),o,qt)}}}}else(Rt=="newmacro"||qt&&qt.match(Kt))&&(Rt=="newmacro"&&vt(Ot,pt.column(),"macro","macro"),qt.match(Yt)&&(Ot.compilerDirectiveIndented-=Q),qt.match(Zt)&&(Ot.compilerDirectiveIndented+=Q));return Ot.startOfLine=!1,zt},indent:function(pt,Ot){if(pt.tokenize!=st&&pt.tokenize!=null)return n.Pass;if(z.indent){var kt=z.indent(pt);if(kt>=0)return kt}var zt=pt.context,he=Ot&&Ot.charAt(0);zt.type=="statement"&&he=="}"&&(zt=zt.prev);var o=!1,d=Ot.match(Y);return d&&(o=Ut(d[0],zt.type)),!B&&Ot.match(Kt)?Ot.match(Yt)?pt.compilerDirectiveIndented-Q:pt.compilerDirectiveIndented:zt.type=="statement"?zt.indented+(he=="{"?0:Q):(ee.test(zt.type)||zt.type=="assignment")&&zt.align&&!lt?zt.column+(o?0:1):zt.type==")"&&!o?zt.indented+Q:zt.indented+(o?0:E)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"indent"}}),n.defineMIME("text/x-verilog",{name:"verilog"}),n.defineMIME("text/x-systemverilog",{name:"verilog"});var r={"|":"link",">":"property",$:"variable",$$:"variable","?$":"qualifier","?*":"qualifier","-":"hr","/":"property","/-":"property","@":"variable-3","@-":"variable-3","@++":"variable-3","@+=":"variable-3","@+=-":"variable-3","@--":"variable-3","@-=":"variable-3","%+":"tag","%-":"tag","%":"tag",">>":"tag","<<":"tag","<>":"tag","#":"tag","^":"attribute","^^":"attribute","^!":"attribute","*":"variable-2","**":"variable-2","\\":"keyword",'"':"comment"},l={"/":"beh-hier",">":"beh-hier","-":"phys-hier","|":"pipe","?":"when","@":"stage","\\":"keyword"},c=3,g=/^([~!@#\$%\^&\*-\+=\?\/\\\|'"<>]+)([\d\w_]*)/,v=/^[! ]  /,w=/^[! ] */,D=/^\/[\/\*]/;function T(M,L,E){var Q=L/c;return"tlv-"+M.tlvIndentationStyle[Q]+"-"+E}function R(M){var L;return(L=M.match(g,!1))&&L[2].length>0}n.defineMIME("text/x-tlv",{name:"verilog",hooks:{electricInput:!1,token:function(M,L){var E=void 0,Q;if(M.sol()&&!L.tlvInBlockComment){M.peek()=="\\"&&(E="def",M.skipToEnd(),M.string.match(/\\SV/)?L.tlvCodeActive=!1:M.string.match(/\\TLV/)&&(L.tlvCodeActive=!0)),L.tlvCodeActive&&M.pos==0&&L.indented==0&&(Q=M.match(w,!1))&&(L.indented=Q[0].length);var lt=L.indented,B=lt/c;if(B<=L.tlvIndentationStyle.length){var A=M.string.length==lt,q=B*c;if(q<M.string.length){var z=M.string.slice(q),it=z[0];l[it]&&(Q=z.match(g))&&r[Q[1]]&&(lt+=c,it=="\\"&&q>0||(L.tlvIndentationStyle[B]=l[it],B++))}if(!A)for(;L.tlvIndentationStyle.length>B;)L.tlvIndentationStyle.pop()}L.tlvNextIndent=lt}if(L.tlvCodeActive){var xt=!1,Q;if(E!==void 0)E+=" "+T(L,0,"scope-ident");else if(M.pos/c<L.tlvIndentationStyle.length&&(Q=M.match(M.sol()?v:/^   /)))E="tlv-indent-"+(M.pos%2==0?"even":"odd")+" "+T(L,M.pos-c,"indent"),Q[0].charAt(0)=="!"&&(E+=" tlv-alert-line-prefix"),R(M)&&(E+=" "+T(L,M.pos,"before-scope-ident"));else if(L.tlvInBlockComment)M.match(/^.*?\*\//)?L.tlvInBlockComment=!1:M.skipToEnd(),E="comment";else if((Q=M.match(D))&&!L.tlvInBlockComment)Q[0]=="//"?M.skipToEnd():L.tlvInBlockComment=!0,E="comment";else if(Q=M.match(g)){var rt=Q[1],at=Q[2];r.hasOwnProperty(rt)&&(at.length>0||M.eol())?(E=r[rt],M.column()==L.indented&&(E+=" "+T(L,M.column(),"scope-ident"))):(M.backUp(M.current().length-1),E="tlv-default")}else M.match(/^\t+/)?E="tlv-tab":M.match(/^[\[\]{}\(\);\:]+/)?E="meta":(Q=M.match(/^[mM]4([\+_])?[\w\d_]*/))?E=Q[1]=="+"?"tlv-m4-plus":"tlv-m4":M.match(/^ +/)?M.eol()?E="error":E="tlv-default":M.match(/^[\w\d_]+/)?E="number":(M.next(),E="tlv-default");xt&&(E+=" tlv-statement")}else M.match(/^[mM]4([\w\d_]*)/)&&(E="tlv-m4");return E},indent:function(M){return M.tlvCodeActive==!0?M.tlvNextIndent:-1},startState:function(M){M.tlvIndentationStyle=[],M.tlvCodeActive=!0,M.tlvNextIndent=-1,M.tlvInBlockComment=!1}}})})})();(function(i,t){(function(n){n(Gs())})(function(n){var r={pairs:`()[]{}''""`,closeBefore:`)]}'":;>`,triples:"",explode:"[]{}"},l=n.Pos;n.defineOption("autoCloseBrackets",!1,function(B,A,q){q&&q!=n.Init&&(B.removeKeyMap(g),B.state.closeBrackets=null),A&&(v(c(A,"pairs")),B.state.closeBrackets=A,B.addKeyMap(g))});function c(B,A){return A=="pairs"&&typeof B=="string"?B:typeof B=="object"&&B[A]!=null?B[A]:r[A]}var g={Backspace:T,Enter:R};function v(B){for(var A=0;A<B.length;A++){var q=B.charAt(A),z="'"+q+"'";g[z]||(g[z]=w(q))}}v(r.pairs+"`");function w(B){return function(A){return E(A,B)}}function D(B){var A=B.state.closeBrackets;if(!A||A.override)return A;var q=B.getModeAt(B.getCursor());return q.closeBrackets||A}function T(B){var A=D(B);if(!A||B.getOption("disableInput"))return n.Pass;for(var q=c(A,"pairs"),z=B.listSelections(),it=0;it<z.length;it++){if(!z[it].empty())return n.Pass;var xt=Q(B,z[it].head);if(!xt||q.indexOf(xt)%2!=0)return n.Pass}for(var it=z.length-1;it>=0;it--){var rt=z[it].head;B.replaceRange("",l(rt.line,rt.ch-1),l(rt.line,rt.ch+1),"+delete")}}function R(B){var A=D(B),q=A&&c(A,"explode");if(!q||B.getOption("disableInput"))return n.Pass;for(var z=B.listSelections(),it=0;it<z.length;it++){if(!z[it].empty())return n.Pass;var xt=Q(B,z[it].head);if(!xt||q.indexOf(xt)%2!=0)return n.Pass}B.operation(function(){var rt=B.lineSeparator()||`
`;B.replaceSelection(rt+rt,null),M(B,-1),z=B.listSelections();for(var at=0;at<z.length;at++){var wt=z[at].head.line;B.indentLine(wt,null,!0),B.indentLine(wt+1,null,!0)}})}function M(B,A){for(var q=[],z=B.listSelections(),it=0,xt=0;xt<z.length;xt++){var rt=z[xt];rt.head==B.getCursor()&&(it=xt);var at=rt.head.ch||A>0?{line:rt.head.line,ch:rt.head.ch+A}:{line:rt.head.line-1};q.push({anchor:at,head:at})}B.setSelections(q,it)}function L(B){var A=n.cmpPos(B.anchor,B.head)>0;return{anchor:new l(B.anchor.line,B.anchor.ch+(A?-1:1)),head:new l(B.head.line,B.head.ch+(A?1:-1))}}function E(B,A){var q=D(B);if(!q||B.getOption("disableInput"))return n.Pass;var z=c(q,"pairs"),it=z.indexOf(A);if(it==-1)return n.Pass;for(var xt=c(q,"closeBefore"),rt=c(q,"triples"),at=z.charAt(it+1)==A,wt=B.listSelections(),Dt=it%2==0,Wt,Pt=0;Pt<wt.length;Pt++){var K=wt[Pt],J=K.head,Y,ee=B.getRange(J,l(J.line,J.ch+1));if(Dt&&!K.empty())Y="surround";else if((at||!Dt)&&ee==A)at&&lt(B,J)?Y="both":rt.indexOf(A)>=0&&B.getRange(J,l(J.line,J.ch+3))==A+A+A?Y="skipThree":Y="skip";else if(at&&J.ch>1&&rt.indexOf(A)>=0&&B.getRange(l(J.line,J.ch-2),J)==A+A){if(J.ch>2&&/\bstring/.test(B.getTokenTypeAt(l(J.line,J.ch-2))))return n.Pass;Y="addFour"}else if(at){var Kt=J.ch==0?" ":B.getRange(l(J.line,J.ch-1),J);if(!n.isWordChar(ee)&&Kt!=A&&!n.isWordChar(Kt))Y="both";else return n.Pass}else if(Dt&&(ee.length===0||/\s/.test(ee)||xt.indexOf(ee)>-1))Y="both";else return n.Pass;if(!Wt)Wt=Y;else if(Wt!=Y)return n.Pass}var Zt=it%2?z.charAt(it-1):A,Yt=it%2?A:z.charAt(it+1);B.operation(function(){if(Wt=="skip")M(B,1);else if(Wt=="skipThree")M(B,3);else if(Wt=="surround"){for(var Rt=B.getSelections(),qt=0;qt<Rt.length;qt++)Rt[qt]=Zt+Rt[qt]+Yt;B.replaceSelections(Rt,"around"),Rt=B.listSelections().slice();for(var qt=0;qt<Rt.length;qt++)Rt[qt]=L(Rt[qt]);B.setSelections(Rt)}else Wt=="both"?(B.replaceSelection(Zt+Yt,null),B.triggerElectric(Zt+Yt),M(B,-1)):Wt=="addFour"&&(B.replaceSelection(Zt+Zt+Zt+Zt,"before"),M(B,1))})}function Q(B,A){var q=B.getRange(l(A.line,A.ch-1),l(A.line,A.ch+1));return q.length==2?q:null}function lt(B,A){var q=B.getTokenAt(l(A.line,A.ch+1));return/\bstring/.test(q.type)&&q.start==A.ch&&(A.ch==0||!/\bstring/.test(B.getTokenTypeAt(A)))}})})();(function(i,t){(function(n){n(Gs())})(function(n){var r=/[\w$]+/,l=500;n.registerHelper("hint","anyword",function(c,g){for(var v=g&&g.word||r,w=g&&g.range||l,D=c.getCursor(),T=c.getLine(D.line),R=D.ch,M=R;M&&v.test(T.charAt(M-1));)--M;for(var L=M!=R&&T.slice(M,R),E=g&&g.list||[],Q={},lt=new RegExp(v.source,"g"),B=-1;B<=1;B+=2)for(var A=D.line,q=Math.min(Math.max(A+B*w,c.firstLine()),c.lastLine())+B;A!=q;A+=B)for(var z=c.getLine(A),it;it=lt.exec(z);)A==D.line&&it[0]===L||(!L||it[0].lastIndexOf(L,0)==0)&&!Object.prototype.hasOwnProperty.call(Q,it[0])&&(Q[it[0]]=!0,E.push(it[0]));return{list:E,from:n.Pos(D.line,M),to:n.Pos(D.line,R)}})})})();(function(i,t){(function(n){n(Gs())})(function(n){var r="CodeMirror-hint",l="CodeMirror-hint-active";n.showHint=function(B,A,q){if(!A)return B.showHint(q);q&&q.async&&(A.async=!0);var z={hint:A};if(q)for(var it in q)z[it]=q[it];return B.showHint(z)},n.defineExtension("showHint",function(B){B=w(this,this.getCursor("start"),B);var A=this.listSelections();if(!(A.length>1)){if(this.somethingSelected()){if(!B.hint.supportsSelection)return;for(var q=0;q<A.length;q++)if(A[q].head.line!=A[q].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var z=this.state.completionActive=new c(this,B);z.options.hint&&(n.signal(this,"startCompletion",this),z.update(!0))}}),n.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function c(B,A){if(this.cm=B,this.options=A,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var q=this;B.on("cursorActivity",this.activityFunc=function(){q.cursorActivity()})}}var g=window.requestAnimationFrame||function(B){return setTimeout(B,1e3/60)},v=window.cancelAnimationFrame||clearTimeout;c.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&n.signal(this.data,"close"),this.widget&&this.widget.close(),n.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(B,A){var q=B.list[A],z=this;this.cm.operation(function(){q.hint?q.hint(z.cm,B,q):z.cm.replaceRange(D(q),q.from||B.from,q.to||B.to,"complete"),n.signal(B,"pick",q),z.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(v(this.debounce),this.debounce=0);var B=this.startPos;this.data&&(B=this.data.from);var A=this.cm.getCursor(),q=this.cm.getLine(A.line);if(A.line!=this.startPos.line||q.length-A.ch!=this.startLen-this.startPos.ch||A.ch<B.ch||this.cm.somethingSelected()||!A.ch||this.options.closeCharacters.test(q.charAt(A.ch-1)))this.close();else{var z=this;this.debounce=g(function(){z.update()}),this.widget&&this.widget.disable()}},update:function(B){if(this.tick!=null){var A=this,q=++this.tick;E(this.options.hint,this.cm,this.options,function(z){A.tick==q&&A.finishUpdate(z,B)})}},finishUpdate:function(B,A){this.data&&n.signal(this.data,"update");var q=this.widget&&this.widget.picked||A&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=B,B&&B.list.length&&(q&&B.list.length==1?this.pick(B,0):(this.widget=new M(this,B),n.signal(B,"shown")))}};function w(B,A,q){var z=B.options.hintOptions,it={};for(var xt in lt)it[xt]=lt[xt];if(z)for(var xt in z)z[xt]!==void 0&&(it[xt]=z[xt]);if(q)for(var xt in q)q[xt]!==void 0&&(it[xt]=q[xt]);return it.hint.resolve&&(it.hint=it.hint.resolve(B,A)),it}function D(B){return typeof B=="string"?B:B.text}function T(B,A){var q={Up:function(){A.moveFocus(-1)},Down:function(){A.moveFocus(1)},PageUp:function(){A.moveFocus(-A.menuSize()+1,!0)},PageDown:function(){A.moveFocus(A.menuSize()-1,!0)},Home:function(){A.setFocus(0)},End:function(){A.setFocus(A.length-1)},Enter:A.pick,Tab:A.pick,Esc:A.close},z=/Mac/.test(navigator.platform);z&&(q["Ctrl-P"]=function(){A.moveFocus(-1)},q["Ctrl-N"]=function(){A.moveFocus(1)});var it=B.options.customKeys,xt=it?{}:q;function rt(Dt,Wt){var Pt;typeof Wt!="string"?Pt=function(K){return Wt(K,A)}:q.hasOwnProperty(Wt)?Pt=q[Wt]:Pt=Wt,xt[Dt]=Pt}if(it)for(var at in it)it.hasOwnProperty(at)&&rt(at,it[at]);var wt=B.options.extraKeys;if(wt)for(var at in wt)wt.hasOwnProperty(at)&&rt(at,wt[at]);return xt}function R(B,A){for(;A&&A!=B;){if(A.nodeName.toUpperCase()==="LI"&&A.parentNode==B)return A;A=A.parentNode}}function M(B,A){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=B,this.data=A,this.picked=!1;var q=this,z=B.cm,it=z.getInputField().ownerDocument,xt=it.defaultView||it.parentWindow,rt=this.hints=it.createElement("ul");rt.setAttribute("role","listbox"),rt.setAttribute("aria-expanded","true"),rt.id=this.id;var at=B.cm.options.theme;rt.className="CodeMirror-hints "+at,this.selectedHint=A.selectedHint||0;for(var wt=A.list,Dt=0;Dt<wt.length;++Dt){var Wt=rt.appendChild(it.createElement("li")),Pt=wt[Dt],K=r+(Dt!=this.selectedHint?"":" "+l);Pt.className!=null&&(K=Pt.className+" "+K),Wt.className=K,Dt==this.selectedHint&&Wt.setAttribute("aria-selected","true"),Wt.id=this.id+"-"+Dt,Wt.setAttribute("role","option"),Pt.render?Pt.render(Wt,A,Pt):Wt.appendChild(it.createTextNode(Pt.displayText||D(Pt))),Wt.hintId=Dt}var J=B.options.container||it.body,Y=z.cursorCoords(B.options.alignWithWord?A.from:null),ee=Y.left,Kt=Y.bottom,Zt=!0,Yt=0,Rt=0;if(J!==it.body){var qt=["absolute","relative","fixed"].indexOf(xt.getComputedStyle(J).position)!==-1,pe=qt?J:J.offsetParent,oe=pe.getBoundingClientRect(),ce=it.body.getBoundingClientRect();Yt=oe.left-ce.left-pe.scrollLeft,Rt=oe.top-ce.top-pe.scrollTop}rt.style.left=ee-Yt+"px",rt.style.top=Kt-Rt+"px";var ot=xt.innerWidth||Math.max(it.body.offsetWidth,it.documentElement.offsetWidth),V=xt.innerHeight||Math.max(it.body.offsetHeight,it.documentElement.offsetHeight);J.appendChild(rt),z.getInputField().setAttribute("aria-autocomplete","list"),z.getInputField().setAttribute("aria-owns",this.id),z.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var st=B.options.moveOnOverlap?rt.getBoundingClientRect():new DOMRect,N=B.options.paddingForScrollbar?rt.scrollHeight>rt.clientHeight+1:!1,U;setTimeout(function(){U=z.getScrollInfo()});var bt=st.bottom-V;if(bt>0){var vt=st.bottom-st.top,Lt=Y.top-(Y.bottom-st.top);if(Lt-vt>0)rt.style.top=(Kt=Y.top-vt-Rt)+"px",Zt=!1;else if(vt>V){rt.style.height=V-5+"px",rt.style.top=(Kt=Y.bottom-st.top-Rt)+"px";var Ut=z.getCursor();A.from.ch!=Ut.ch&&(Y=z.cursorCoords(Ut),rt.style.left=(ee=Y.left-Yt)+"px",st=rt.getBoundingClientRect())}}var Qt=st.right-ot;if(N&&(Qt+=z.display.nativeBarWidth),Qt>0&&(st.right-st.left>ot&&(rt.style.width=ot-5+"px",Qt-=st.right-st.left-ot),rt.style.left=(ee=Y.left-Qt-Yt)+"px"),N)for(var Ht=rt.firstChild;Ht;Ht=Ht.nextSibling)Ht.style.paddingRight=z.display.nativeBarWidth+"px";if(z.addKeyMap(this.keyMap=T(B,{moveFocus:function(kt,zt){q.changeActive(q.selectedHint+kt,zt)},setFocus:function(kt){q.changeActive(kt)},menuSize:function(){return q.screenAmount()},length:wt.length,close:function(){B.close()},pick:function(){q.pick()},data:A})),B.options.closeOnUnfocus){var pt;z.on("blur",this.onBlur=function(){pt=setTimeout(function(){B.close()},100)}),z.on("focus",this.onFocus=function(){clearTimeout(pt)})}z.on("scroll",this.onScroll=function(){var kt=z.getScrollInfo(),zt=z.getWrapperElement().getBoundingClientRect();U||(U=z.getScrollInfo());var he=Kt+U.top-kt.top,o=he-(xt.pageYOffset||(it.documentElement||it.body).scrollTop);if(Zt||(o+=rt.offsetHeight),o<=zt.top||o>=zt.bottom)return B.close();rt.style.top=he+"px",rt.style.left=ee+U.left-kt.left+"px"}),n.on(rt,"dblclick",function(kt){var zt=R(rt,kt.target||kt.srcElement);zt&&zt.hintId!=null&&(q.changeActive(zt.hintId),q.pick())}),n.on(rt,"click",function(kt){var zt=R(rt,kt.target||kt.srcElement);zt&&zt.hintId!=null&&(q.changeActive(zt.hintId),B.options.completeOnSingleClick&&q.pick())}),n.on(rt,"mousedown",function(){setTimeout(function(){z.focus()},20)});var Ot=this.getSelectedHintRange();return(Ot.from!==0||Ot.to!==0)&&this.scrollToActive(),n.signal(A,"select",wt[this.selectedHint],rt.childNodes[this.selectedHint]),!0}M.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var B=this.completion.cm.getInputField();B.removeAttribute("aria-activedescendant"),B.removeAttribute("aria-owns");var A=this.completion.cm;this.completion.options.closeOnUnfocus&&(A.off("blur",this.onBlur),A.off("focus",this.onFocus)),A.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var B=this;this.keyMap={Enter:function(){B.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(B,A){if(B>=this.data.list.length?B=A?this.data.list.length-1:0:B<0&&(B=A?0:this.data.list.length-1),this.selectedHint!=B){var q=this.hints.childNodes[this.selectedHint];q&&(q.className=q.className.replace(" "+l,""),q.removeAttribute("aria-selected")),q=this.hints.childNodes[this.selectedHint=B],q.className+=" "+l,q.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",q.id),this.scrollToActive(),n.signal(this.data,"select",this.data.list[this.selectedHint],q)}},scrollToActive:function(){var B=this.getSelectedHintRange(),A=this.hints.childNodes[B.from],q=this.hints.childNodes[B.to],z=this.hints.firstChild;A.offsetTop<this.hints.scrollTop?this.hints.scrollTop=A.offsetTop-z.offsetTop:q.offsetTop+q.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=q.offsetTop+q.offsetHeight-this.hints.clientHeight+z.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var B=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-B),to:Math.min(this.data.list.length-1,this.selectedHint+B)}}};function L(B,A){if(!B.somethingSelected())return A;for(var q=[],z=0;z<A.length;z++)A[z].supportsSelection&&q.push(A[z]);return q}function E(B,A,q,z){if(B.async)B(A,z,q);else{var it=B(A,q);it&&it.then?it.then(z):z(it)}}function Q(B,A){var q=B.getHelpers(A,"hint"),z;if(q.length){var it=function(xt,rt,at){var wt=L(xt,q);function Dt(Wt){if(Wt==wt.length)return rt(null);E(wt[Wt],xt,at,function(Pt){Pt&&Pt.list.length>0?rt(Pt):Dt(Wt+1)})}Dt(0)};return it.async=!0,it.supportsSelection=!0,it}else return(z=B.getHelper(B.getCursor(),"hintWords"))?function(xt){return n.hint.fromList(xt,{words:z})}:n.hint.anyword?function(xt,rt){return n.hint.anyword(xt,rt)}:function(){}}n.registerHelper("hint","auto",{resolve:Q}),n.registerHelper("hint","fromList",function(B,A){var q=B.getCursor(),z=B.getTokenAt(q),it,xt=n.Pos(q.line,z.start),rt=q;z.start<q.ch&&/\w/.test(z.string.charAt(q.ch-z.start-1))?it=z.string.substr(0,q.ch-z.start):(it="",xt=q);for(var at=[],wt=0;wt<A.words.length;wt++){var Dt=A.words[wt];Dt.slice(0,it.length)==it&&at.push(Dt)}if(at.length)return{list:at,from:xt,to:rt}}),n.commands.autocomplete=n.showHint;var lt={hint:n.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};n.defineOption("hintOptions",null)})})();(function(i,t){(function(n){n(Gs())})(function(n){n.defineOption("autoRefresh",!1,function(c,g){c.state.autoRefresh&&(l(c,c.state.autoRefresh),c.state.autoRefresh=null),g&&c.display.wrapper.offsetHeight==0&&r(c,c.state.autoRefresh={delay:g.delay||250})});function r(c,g){function v(){c.display.wrapper.offsetHeight?(l(c,g),c.display.lastWrapHeight!=c.display.wrapper.clientHeight&&c.refresh()):g.timeout=setTimeout(v,g.delay)}g.timeout=setTimeout(v,g.delay),g.hurry=function(){clearTimeout(g.timeout),g.timeout=setTimeout(v,50)},n.on(window,"mouseup",g.hurry),n.on(window,"keyup",g.hurry)}function l(c,g){clearTimeout(g.timeout),n.off(window,"mouseup",g.hurry),n.off(window,"keyup",g.hurry)}})})();class tn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=2,g=1){if(super(t,n,r,l,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new X(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new X(-10,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new X(-10,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new X(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new X(-10,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new X(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t&=this.inp[n].value||0;this.output1.value=t>>>0,f.simulationQueue.add(this.output1)}}customDraw(){var t=f.context;t.beginPath(),t.lineWidth=Nt(3),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill;const n=this.x,r=this.y;ne(t,-10,-20,n,r,this.direction),Ct(t,0,-20,n,r,this.direction),os(t,0,0,20,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-10,20,n,r,this.direction),Ct(t,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return Vr.call(this,"&")}}tn.prototype.tooltipText="And Gate Tooltip : Implements logical conjunction";tn.prototype.alwaysResolve=!0;tn.prototype.verilogType="and";tn.prototype.changeInputSize=js;tn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=and-gate";tn.prototype.objectType="AndGate";class Sn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=2,g=1){if(super(t,n,r,l,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new X(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new X(-10,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new X(-10,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new X(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new X(-10,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new X(30,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t&=this.inp[n].value||0;t=~t>>>0<<32-this.bitWidth>>>32-this.bitWidth,this.output1.value=t,f.simulationQueue.add(this.output1)}}customDraw(){var t=f.context;t.beginPath(),t.lineWidth=Nt(3),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill;const n=this.x,r=this.y;ne(t,-10,-20,n,r,this.direction),Ct(t,0,-20,n,r,this.direction),os(t,0,0,20,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-10,20,n,r,this.direction),Ct(t,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),Fi(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return Vr.call(this,"&",!0)}}Sn.prototype.tooltipText="Nand Gate ToolTip : Combination of AND and NOT gates";Sn.prototype.alwaysResolve=!0;Sn.prototype.changeInputSize=js;Sn.prototype.verilogType="nand";Sn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=nand-gate";Sn.prototype.objectType="NandGate";class Ri extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g=1){super(t,n,r,l,c),this.controlSignalSize=g||parseInt(prompt("Enter control signal bitWidth"),10),this.inputSize=1<<this.controlSignalSize,this.xOff=0,this.yOff=1,this.controlSignalSize===1&&(this.xOff=10),this.controlSignalSize<=3&&(this.yOff=2),this.setDimensions(20-this.xOff,this.yOff*5*this.inputSize),this.rectangleObject=!1,this.inp=[];for(let v=0;v<this.inputSize;v++){const w=new X(-20+this.xOff,+this.yOff*10*(v-this.inputSize/2)+10,0,this);this.inp.push(w)}this.output1=new X(20-this.xOff,0,1,this),this.controlSignalInput=new X(0,this.yOff*10*(this.inputSize/2-1)+this.xOff+10,0,this,this.controlSignalSize,"Control Signal")}changeControlSignalSize(t){if(t===void 0||t<1||t>32||this.controlSignalSize===t)return;const n=new Ri(this.x,this.y,this.scope,this.direction,this.bitWidth,t);return this.cleanDelete(),f.lastSelected=n,n}newBitWidth(t){this.bitWidth=t;for(let n=0;n<this.inputSize;n++)this.inp[n].bitWidth=t;this.output1.bitWidth=t}isResolvable(){return this.controlSignalInput.value!==void 0&&this.inp[this.controlSignalInput.value].value!==void 0}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.controlSignalSize],nodes:{inp:this.inp.map(tt),output1:tt(this.output1),controlSignalInput:tt(this.controlSignalInput)}}}resolve(){this.isResolvable()!==!1&&(this.output1.value=this.inp[this.controlSignalInput.value].value,f.simulationQueue.add(this.output1))}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),ne(t,0,this.yOff*10*(this.inputSize/2-1)+10+.5*this.xOff,n,r,this.direction),Ct(t,0,this.yOff*5*(this.inputSize-1)+this.xOff,n,r,this.direction),t.stroke(),t.lineWidth=Nt(3),t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,ne(t,-20+this.xOff,-this.yOff*10*(this.inputSize/2),n,r,this.direction),Ct(t,-20+this.xOff,20+this.yOff*10*(this.inputSize/2-1),n,r,this.direction),Ct(t,20-this.xOff,+this.yOff*10*(this.inputSize/2-1)+this.xOff,n,r,this.direction),Ct(t,20-this.xOff,-this.yOff*10*(this.inputSize/2)-this.xOff+20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let l=0;l<this.inputSize;l++)this.direction==="RIGHT"?Xt(t,String(l),n+this.inp[l].x+7,r+this.inp[l].y+2,10):this.direction==="LEFT"?Xt(t,String(l),n+this.inp[l].x-7,r+this.inp[l].y+2,10):this.direction==="UP"?Xt(t,String(l),n+this.inp[l].x,r+this.inp[l].y-4,10):Xt(t,String(l),n+this.inp[l].x,r+this.inp[l].y+10,10);t.fill()}verilogBaseType(){return this.verilogName()+this.inp.length}generateVerilog(){return Ri.selSizes.add(this.controlSignalSize),Bt.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of Ri.selSizes){for(var r=1<<n,l="",c=0;c<r;c++)l+=`in${c}, `;t+=`
module Multiplexer${r}(out, ${l}sel);
`,t+=`  parameter WIDTH = 1;
`,t+=`  output reg [WIDTH-1:0] out;
`,t+="  input [WIDTH-1:0] ";for(var c=0;c<r-1;c++)t+=`in${c}, `;t+="in"+(r-1)+`;
`,t+=`  input [${n-1}:0] sel;
`,t+=`  
`,t+=`  always @ (*)
`,t+=`    case (sel)
`;for(var c=0;c<r;c++)t+=`      ${c} : out = in${c};
`;t+=`    endcase
`,t+=`endmodule
`,t+=`
`}return t}static resetVerilog(){Ri.selSizes=new Set}}Ri.prototype.tooltipText="Multiplexer ToolTip : Multiple inputs and a single line output.";Ri.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=multiplexer";Ri.prototype.mutableProperties={controlSignalSize:{name:"Control Signal Size",type:"number",max:"10",min:"1",func:"changeControlSignalSize"}};Ri.prototype.objectType="Multiplexer";class zn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=2,g=1){if(super(t,n,r,l,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new X(-20,-10*(w+1),0,this);this.inp.push(D)}let v=new X(-20,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new X(-20,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new X(-20,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new X(-20,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new X(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t^=this.inp[n].value||0;this.output1.value=t,f.simulationQueue.add(this.output1)}}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-20,n,r,this.direction,!0),$i(0,-20,15,-10,20,0,n,r,this.direction),$i(0+15,0+10,0,0+20,-10,20,n,r,this.direction),$i(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),rf(t,-35,0,25,1.7*Math.PI,.3*Math.PI,n,r,this.direction),t.stroke()}generateVerilog(){return Vr.call(this,"^")}}zn.prototype.tooltipText="Xor Gate Tooltip : Implements an exclusive OR.";zn.prototype.alwaysResolve=!0;zn.prototype.changeInputSize=js;zn.prototype.verilogType="xor";zn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=xor-gate";zn.prototype.objectType="XorGate";class en extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=2,g=1){if(super(t,n,r,l,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new X(-20,-10*(w+1),0,this);this.inp.push(D)}let v=new X(-20,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new X(-20,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new X(-20,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new X(-20,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new X(30,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t^=this.inp[n].value||0;t=~t>>>0<<32-this.bitWidth>>>32-this.bitWidth,this.output1.value=t,f.simulationQueue.add(this.output1)}}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-20,n,r,this.direction,!0),$i(0,-20,15,-10,20,0,n,r,this.direction),$i(0+15,0+10,0,0+20,-10,20,n,r,this.direction),$i(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),rf(t,-35,0,25,1.7*Math.PI,.3*Math.PI,n,r,this.direction),t.stroke(),t.beginPath(),Fi(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return Vr.call(this,"^",!0)}}en.prototype.alwaysResolve=!0;en.prototype.tooltipText="Xnor Gate ToolTip : Logical complement of the XOR gate";en.prototype.changeInputSize=js;en.prototype.verilogType="xnor";en.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=xnor-gate";en.prototype.objectType="XnorGate";class Xs extends Bt{constructor(t,n,r=globalScope,l="Red"){super(t,n,r,"RIGHT",1),this.fixedBitWidth=!0,this.directionFixed=!0,this.setDimensions(30,50),this.g=new X(-20,-50,0,this),this.f=new X(-10,-50,0,this),this.a=new X(10,-50,0,this),this.b=new X(20,-50,0,this),this.e=new X(-20,50,0,this),this.d=new X(-10,50,0,this),this.c=new X(10,50,0,this),this.dot=new X(20,50,0,this),this.direction="RIGHT",this.color=l,this.actualColor=l}changeColor(t){if(jo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}customSave(){return{constructorParamaters:[this.color],nodes:{g:tt(this.g),f:tt(this.f),a:tt(this.a),b:tt(this.b),d:tt(this.d),e:tt(this.e),c:tt(this.c),dot:tt(this.dot)}}}customDrawSegment(t,n,r,l,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Nt(5);const v=this.x,w=this.y;ne(g,t,n,v,w,this.direction),Ct(g,r,l,v,w,this.direction),g.closePath(),g.stroke()}customDraw(){var t=f.context;const n=this.x,r=this.y;this.customDrawSegment(18,-3,18,-38,["lightgrey",this.actualColor][this.b.value]),this.customDrawSegment(18,3,18,38,["lightgrey",this.actualColor][this.c.value]),this.customDrawSegment(-18,-3,-18,-38,["lightgrey",this.actualColor][this.f.value]),this.customDrawSegment(-18,3,-18,38,["lightgrey",this.actualColor][this.e.value]),this.customDrawSegment(-17,-38,17,-38,["lightgrey",this.actualColor][this.a.value]),this.customDrawSegment(-17,0,17,0,["lightgrey",this.actualColor][this.g.value]),this.customDrawSegment(-15,38,17,38,["lightgrey",this.actualColor][this.d.value]),t.beginPath();const l=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";t.strokeStyle=l,ji(t,n+22,r+42,2,2),t.stroke()}subcircuitDrawSegment(t,n,r,l,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Nt(3);var D=g,T=v;ne(w,t,n,D,T,this.direction),Ct(w,r,l,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;this.subcircuitDrawSegment(10,-20,10,-38,["lightgrey",this.actualColor][this.b.value],l,c),this.subcircuitDrawSegment(10,-17,10,1,["lightgrey",this.actualColor][this.c.value],l,c),this.subcircuitDrawSegment(-10,-20,-10,-38,["lightgrey",this.actualColor][this.f.value],l,c),this.subcircuitDrawSegment(-10,-17,-10,1,["lightgrey",this.actualColor][this.e.value],l,c),this.subcircuitDrawSegment(-8,-38,8,-38,["lightgrey",this.actualColor][this.a.value],l,c),this.subcircuitDrawSegment(-8,-18,8,-18,["lightgrey",this.actualColor][this.g.value],l,c),this.subcircuitDrawSegment(-8,1,8,1,["lightgrey",this.actualColor][this.d.value],l,c),r.beginPath();var g=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";r.strokeStyle=g,ji(r,l+13,c+5,1,1),r.stroke(),r.beginPath(),r.strokeStyle="black",r.lineWidth=Nt(1),Ee(r,-15,-42,33,51,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}generateVerilog(){return`
      always @ (*)
        $display("SevenSegDisplay:${this.verilogLabel}.abcdefg. = %b%b%b%b%b%b%b%b}",
                 ${this.a.verilogLabel}, ${this.b.verilogLabel}, ${this.c.verilogLabel}, ${this.d.verilogLabel}, ${this.e.verilogLabel}, ${this.f.verilogLabel}, ${this.g.verilogLabel}, ${this.dot.verilogLabel});`}}Xs.prototype.tooltipText="Seven Display ToolTip: Consists of 7+1 single bit inputs.";Xs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=sevensegdisplay";Xs.prototype.objectType="SevenSegDisplay";Xs.prototype.canShowInSubcircuit=!0;Xs.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:15,upDimensionY:42,downDimensionY:10};Xs.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};class Ys extends Bt{constructor(t,n,r=globalScope,l="Red"){super(t,n,r,"RIGHT",16),this.fixedBitWidth=!0,this.directionFixed=!0,this.setDimensions(30,50),this.input1=new X(0,-50,0,this,16),this.dot=new X(0,50,0,this,1),this.direction="RIGHT",this.color=l,this.actualColor=l}changeColor(t){if(jo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}customSave(){return{constructorParamaters:[this.color],nodes:{input1:tt(this.input1),dot:tt(this.dot)}}}customDrawSegment(t,n,r,l,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Nt(4);const v=this.x,w=this.y;ne(g,t,n,v,w,this.direction),Ct(g,r,l,v,w,this.direction),g.closePath(),g.stroke()}customDrawSegmentSlant(t,n,r,l,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Nt(3);const v=this.x,w=this.y;ne(g,t,n,v,w,this.direction),Ct(g,r,l,v,w,this.direction),g.closePath(),g.stroke()}customDraw(){var t=f.context;const n=this.x,r=this.y;this.actualColor;const{value:l}=this.input1;this.customDrawSegment(-20,-38,0,-38,["lightgrey",this.actualColor][l>>15&1]),this.customDrawSegment(20,-38,0,-38,["lightgrey",this.actualColor][l>>14&1]),this.customDrawSegment(21.5,-2,21.5,-36,["lightgrey",this.actualColor][l>>13&1]),this.customDrawSegment(21.5,2,21.5,36,["lightgrey",this.actualColor][l>>12&1]),this.customDrawSegment(-20,38,0,38,["lightgrey",this.actualColor][l>>11&1]),this.customDrawSegment(20,38,0,38,["lightgrey",this.actualColor][l>>10&1]),this.customDrawSegment(-21.5,2,-21.5,36,["lightgrey",this.actualColor][l>>9&1]),this.customDrawSegment(-21.5,-36,-21.5,-2,["lightgrey",this.actualColor][l>>8&1]),this.customDrawSegment(-20,0,0,0,["lightgrey",this.actualColor][l>>7&1]),this.customDrawSegment(20,0,0,0,["lightgrey",this.actualColor][l>>6&1]),this.customDrawSegmentSlant(0,0,-21,-37,["lightgrey",this.actualColor][l>>5&1]),this.customDrawSegment(0,-2,0,-36,["lightgrey",this.actualColor][l>>4&1]),this.customDrawSegmentSlant(0,0,21,-37,["lightgrey",this.actualColor][l>>3&1]),this.customDrawSegmentSlant(0,0,21,37,["lightgrey",this.actualColor][l>>2&1]),this.customDrawSegment(0,2,0,36,["lightgrey",this.actualColor][l>>1&1]),this.customDrawSegmentSlant(0,0,-21,37,["lightgrey",this.actualColor][l>>0&1]),t.beginPath();const c=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";t.strokeStyle=c,ji(t,n+22,r+42,2,2),t.stroke()}subcircuitDrawSegment(t,n,r,l,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Nt(3);var D=g,T=v;ne(w,t,n,D,T,this.direction),Ct(w,r,l,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDrawSegmentSlant(t,n,r,l,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Nt(2);var D=g,T=v;ne(w,t,n,D,T,this.direction),Ct(w,r,l,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;this.actualColor;var g=this.input1.value;this.subcircuitDrawSegment(-10,-38,0,-38,["lightgrey",this.actualColor][g>>15&1],l,c),this.subcircuitDrawSegment(10,-38,0,-38,["lightgrey",this.actualColor][g>>14&1],l,c),this.subcircuitDrawSegment(11.5,-19,11.5,-36,["lightgrey",this.actualColor][g>>13&1],l,c),this.subcircuitDrawSegment(11.5,2,11.5,-15,["lightgrey",this.actualColor][g>>12&1],l,c),this.subcircuitDrawSegment(-10,4,0,4,["lightgrey",this.actualColor][g>>11&1],l,c),this.subcircuitDrawSegment(10,4,0,4,["lightgrey",this.actualColor][g>>10&1],l,c),this.subcircuitDrawSegment(-11.5,2,-11.5,-15,["lightgrey",this.actualColor][g>>9&1],l,c),this.subcircuitDrawSegment(-11.5,-36,-11.5,-19,["lightgrey",this.actualColor][g>>8&1],l,c),this.subcircuitDrawSegment(-10,-17,0,-17,["lightgrey",this.actualColor][g>>7&1],l,c),this.subcircuitDrawSegment(10,-17,0,-17,["lightgrey",this.actualColor][g>>6&1],l,c),this.subcircuitDrawSegmentSlant(0,-17,-9,-36,["lightgrey",this.actualColor][g>>5&1],l,c),this.subcircuitDrawSegment(0,-36,0,-19,["lightgrey",this.actualColor][g>>4&1],l,c),this.subcircuitDrawSegmentSlant(0,-17,9,-36,["lightgrey",this.actualColor][g>>3&1],l,c),this.subcircuitDrawSegmentSlant(0,-17,9,0,["lightgrey",this.actualColor][g>>2&1],l,c),this.subcircuitDrawSegment(0,-17,0,2,["lightgrey",this.actualColor][g>>1&1],l,c),this.subcircuitDrawSegmentSlant(0,-17,-9,0,["lightgrey",this.actualColor][g>>0&1],l,c),r.beginPath();var v=["lightgrey",this.actualColor][this.dot.value]||"lightgrey";r.strokeStyle=v,ji(r,l+13,c+5,1,1),r.stroke(),r.beginPath(),r.strokeStyle="black",r.lineWidth=Nt(1),Ee(r,-15,-42,33,51,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}generateVerilog(){return`
      always @ (*)
        $display("SixteenSegDisplay:{${this.input1.verilogLabel},${this.dot.verilogLabel}} = {%16b,%1b}", ${this.input1.verilogLabel}, ${this.dot.verilogLabel});`}}Ys.prototype.tooltipText="Sixteen Display ToolTip: Consists of 16+1 bit inputs.";Ys.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=sixteensegdisplay";Ys.prototype.objectType="SixteenSegDisplay";Ys.prototype.canShowInSubcircuit=!0;Ys.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:15,upDimensionY:42,downDimensionY:10};Ys.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};class Us extends Bt{constructor(t,n,r=globalScope,l="Red"){super(t,n,r,"RIGHT",4),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(30,50),this.inp=new X(0,-50,0,this,4),this.direction="RIGHT",this.color=l,this.actualColor=l}changeColor(t){if(jo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}customSave(){return{constructorParamaters:[this.color],nodes:{inp:tt(this.inp)}}}customDrawSegment(t,n,r,l,c){c===void 0&&(c="lightgrey");var g=f.context;g.beginPath(),g.strokeStyle=c,g.lineWidth=Nt(5);const v=this.x,w=this.y;ne(g,t,n,v,w,this.direction),Ct(g,r,l,v,w,this.direction),g.closePath(),g.stroke()}customDraw(){var t=f.context;this.x,this.y,t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);let n=0,r=0,l=0,c=0,g=0,v=0,w=0;switch(this.inp.value){case 0:n=r=l=c=g=v=1;break;case 1:r=l=1;break;case 2:n=r=w=g=c=1;break;case 3:n=r=w=l=c=1;break;case 4:v=w=r=l=1;break;case 5:n=v=w=l=c=1;break;case 6:n=v=w=g=l=c=1;break;case 7:n=r=l=1;break;case 8:n=r=l=c=g=w=v=1;break;case 9:n=v=w=r=l=1;break;case 10:n=v=r=l=w=g=1;break;case 11:v=g=w=l=c=1;break;case 12:n=v=g=c=1;break;case 13:r=l=w=g=c=1;break;case 14:n=v=w=g=c=1;break;case 15:n=v=w=g=1;break}this.customDrawSegment(18,-3,18,-38,["lightgrey",this.actualColor][r]),this.customDrawSegment(18,3,18,38,["lightgrey",this.actualColor][l]),this.customDrawSegment(-18,-3,-18,-38,["lightgrey",this.actualColor][v]),this.customDrawSegment(-18,3,-18,38,["lightgrey",this.actualColor][g]),this.customDrawSegment(-17,-38,17,-38,["lightgrey",this.actualColor][n]),this.customDrawSegment(-17,0,17,0,["lightgrey",this.actualColor][w]),this.customDrawSegment(-15,38,17,38,["lightgrey",this.actualColor][c])}subcircuitDrawSegment(t,n,r,l,c,g,v){c==null&&(c="lightgrey");var w=f.context;w.beginPath(),w.strokeStyle=c,w.lineWidth=Nt(3);var D=g,T=v;ne(w,t,n,D,T,this.direction),Ct(w,r,l,D,T,this.direction),w.closePath(),w.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.strokeStyle="black",r.lineWidth=Nt(3);let g=0,v=0,w=0,D=0,T=0,R=0,M=0;switch(this.inp.value){case 0:g=v=w=D=T=R=1;break;case 1:v=w=1;break;case 2:g=v=M=T=D=1;break;case 3:g=v=M=w=D=1;break;case 4:R=M=v=w=1;break;case 5:g=R=M=w=D=1;break;case 6:g=R=M=T=w=D=1;break;case 7:g=v=w=1;break;case 8:g=v=w=D=T=M=R=1;break;case 9:g=R=M=v=w=1;break;case 10:g=R=v=w=M=T=1;break;case 11:R=T=M=w=D=1;break;case 12:g=R=T=D=1;break;case 13:v=w=M=T=D=1;break;case 14:g=R=M=T=D=1;break;case 15:g=R=M=T=1;break}this.subcircuitDrawSegment(10,-20,10,-38,["lightgrey",this.actualColor][v],l,c),this.subcircuitDrawSegment(10,-17,10,1,["lightgrey",this.actualColor][w],l,c),this.subcircuitDrawSegment(-10,-20,-10,-38,["lightgrey",this.actualColor][R],l,c),this.subcircuitDrawSegment(-10,-17,-10,1,["lightgrey",this.actualColor][T],l,c),this.subcircuitDrawSegment(-8,-38,8,-38,["lightgrey",this.actualColor][g],l,c),this.subcircuitDrawSegment(-8,-18,8,-18,["lightgrey",this.actualColor][M],l,c),this.subcircuitDrawSegment(-8,1,8,1,["lightgrey",this.actualColor][D],l,c),r.beginPath(),r.strokeStyle="black",r.lineWidth=Nt(1),Ee(r,-15,-42,33,51,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}generateVerilog(){return`
      always @ (*)
        $display("HexDisplay:${this.verilogLabel}=%d", ${this.inp.verilogLabel});`}}Us.prototype.tooltipText="Hex Display ToolTip: Inputs a 4 Bit Hex number and displays it.";Us.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=hexdisplay";Us.prototype.objectType="HexDisplay";Us.prototype.canShowInSubcircuit=!0;Us.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:15,upDimensionY:42,downDimensionY:10};Us.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};class xn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=2,g=1){if(super(t,n,r,l,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=Math.floor(c/2)-1;w>=0;w--){const D=new X(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new X(-10,0,0,this);this.inp.push(v);for(let w=0;w<Math.floor(c/2);w++)v=new X(-10,10*(w+1),0,this),this.inp.push(v)}else{for(let v=c/2-1;v>=0;v--){const w=new X(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=0;v<c/2;v++){const w=new X(-10,10*(v+1),0,this);this.inp.push(w)}}this.output1=new X(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;if(this.isResolvable()!==!1){for(let n=1;n<this.inputSize;n++)t|=this.inp[n].value||0;this.output1.value=t>>>0,f.simulationQueue.add(this.output1)}}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-20,n,r,this.direction,!0),$i(0,-20,15,-10,20,0,n,r,this.direction),$i(0+15,0+10,0,0+20,-10,20,n,r,this.direction),$i(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return Vr.call(this,"|")}}xn.prototype.tooltipText="Or Gate Tooltip : Implements logical disjunction";xn.prototype.changeInputSize=js;xn.prototype.alwaysResolve=!0;xn.prototype.verilogType="or";xn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=or-gate";xn.prototype.objectType="OrGate";class rl extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=8){super(t,n,r,l,c),this.setDimensions(20,20),this.output1=new X(20,0,1,this,c),this.state=0}customSave(){var t={constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1)},values:{state:this.state}};return t}customDraw(){var t=f.context;t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Xt(t,this.state.toString(16),this.x,this.y+5),t.fill()}resolve(){this.state=Math.min(this.state,(1<<this.bitWidth)-1),this.output1.value=this.state,f.simulationQueue.add(this.output1)}keyDown2(t){this.state<1<<this.bitWidth&&(t==="+"||t==="=")&&this.state++,this.state>0&&(t==="_"||t==="-")&&this.state--}}rl.prototype.tooltipText="Stepper ToolTip: Increase/Decrease value by selecting the stepper and using +/- keys.";rl.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=stepper";rl.prototype.objectType="Stepper";class Oi extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new X(-10,0,0,this),this.output1=new X(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1)}}}resolve(){this.isResolvable()!==!1&&(this.output1.value=~this.inp1.value>>>0<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output1))}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-10,n,r,this.direction),Ct(t,10,0,n,r,this.direction),Ct(t,-10,10,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),Fi(t,15,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return"assign "+this.output1.verilogLabel+" = ~"+this.inp1.verilogLabel+";"}}Oi.prototype.tooltipText="Not Gate Tooltip : Inverts the input digital signal.";Oi.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=not-gate";Oi.prototype.objectType="NotGate";Oi.prototype.verilogType="not";function ol(i){if(i!==void 0){var t=JSON.parse(i);if(t.logixClipBoardData){var n=globalScope.id;for(let E=0;E<t.scopes.length;E++)if(ae[t.scopes[E].id]===void 0){var r=!1,l=!1;t.scopes[E].verilogMetadata&&(r=t.scopes[E].verilogMetadata.isVerilogCircuit,l=t.scopes[E].verilogMetadata.isMainCircuit);var c=fs(t.scopes[E].name,t.scopes[E].id,r,l);as(c,t.scopes[E]),ae[t.scopes[E].id]=c}Ur(n);var g=new $s(globalScope.name,globalScope.id),v=globalScope.ox,w=globalScope.oy,D=globalScope.scale;as(g,t);var T=g.allNodes.length;for(let E=0;E<g.allNodes.length;E++)g.allNodes[E].checkDeleted(),g.allNodes.length!=T&&(T--,E--);var R=0,M=0,L=0;for(let E=0;E<updateOrder.length;E++)for(let Q=0;Q<g[updateOrder[E]].length;Q++){const lt=g[updateOrder[E]][Q];lt.updateScope(globalScope),lt.objectType!="Wire"&&(R+=lt.x,M+=lt.y,L++)}for(let E=0;E<g.CircuitElement.length;E++)g.CircuitElement[E].updateScope(globalScope);R/=L,M/=L,R=Math.round(R/10)*10,M=Math.round(M/10)*10;for(let E=0;E<updateOrder.length;E++)for(let Q=0;Q<g[updateOrder[E]].length;Q++){const lt=g[updateOrder[E]][Q];lt.objectType!=="Wire"&&(lt.x+=f.mouseX-R,lt.y+=f.mouseY-M)}Object.keys(g).forEach(E=>{g[E]instanceof Array&&E!=="objects"&&E!=="CircuitElement"&&globalScope[E].extend(g[E])});for(let E=0;E<g.Input.length;E++)g.Input[E].layoutProperties.y=Za(0,globalScope),g.Input[E].layoutProperties.id=us();for(let E=0;E<g.Output.length;E++)g.Output[E].layoutProperties.x=globalScope.layout.width,g.Output[E].layoutProperties.id=us(),g.Output[E].layoutProperties.y=Za(globalScope.layout.width,globalScope);$e(!0),vl(!0),ge(),globalScope.ox=v,globalScope.oy=w,globalScope.scale=D,Ei(!0)}}}function Ch(i,t=!1){if(i.length===0)return;var n=new $s(globalScope.name,globalScope.id),r=globalScope.ox,l=globalScope.oy,c=globalScope.scale,g=Bo(globalScope);const v=globalScope.testbenchData;if(as(n,g),ae[n.id]=n,t)for(let E=0;E<i.length;E++){const Q=i[E];Q.objectType==="Node"&&(Q.objectType="allNodes");for(let lt=0;lt<n[Q.objectType].length;lt++)if(n[Q.objectType][lt].x===Q.x&&n[Q.objectType][lt].y===Q.y&&(Q.objectType!="Node"||Q.type===2)){n[Q.objectType][lt].delete();break}}n.backups=globalScope.backups;for(let E=0;E<updateOrder.length;E++){let Q=globalScope[updateOrder[E]].length;for(let lt=0;lt<globalScope[updateOrder[E]].length;lt++)globalScope[updateOrder[E]][lt].objectType!="Wire"&&(i.contains(globalScope[updateOrder[E]][lt])||globalScope[updateOrder[E]][lt].cleanDelete()),globalScope[updateOrder[E]].length!=Q&&(Q--,lt--)}var w=globalScope.wires.length;for(let E=0;E<globalScope.wires.length;E++)globalScope.wires[E].checkConnections(),globalScope.wires.length!=w&&(w--,E--);$e(!0);var D=Bo(globalScope);D.scopes=[];var T={},R=globalScope.getDependencies(),M={};Object.keys(ae).forEach(E=>{T[E]=ae[E].getDependencies()});function L(E){if(!M[E]){for(let Q=0;Q<T[E].length;Q++)L(T[E][Q]);M[E]=!0,D.scopes.push(Bo(ae[E]))}}for(let E=0;E<R.length;E++)L(R[E]);return D.logixClipBoardData=!0,D.testbenchData=void 0,D=JSON.stringify(D),f.multipleObjectSelections=[],f.copyList=[],$e(!0),globalScope=n,ge(),globalScope.ox=r,globalScope.oy=l,globalScope.scale=c,v&&(globalScope.testbenchData=new es(v.testData,v.currentGroup,v.currentCase)),Ei(!0),D}function Hm(i=globalScope){moduleList.forEach((t,n,r)=>{i.hasOwnProperty(t)&&f.multipleObjectSelections.push(...i[t])}),i.nodes&&f.multipleObjectSelections.push(...i.nodes)}class qs extends Bt{constructor(t,n,r=globalScope,l="",c=14){super(t,n,r,"RIGHT",1),this.fixedBitWidth=!0,this.directionFixed=!0,this.labelDirectionFixed=!0,this.setLabel(l),this.setFontSize(c)}setLabel(t=""){this.label=t;var n=f.context;n.font=`${this.fontSize}px Raleway`,this.leftDimensionX=10,this.rightDimensionX=n.measureText(this.label).width+10,this.setTextboxSize()}setFontSize(t=14){this.fontSize=t;var n=f.context;n.font=`${this.fontSize}px Raleway`,this.setTextboxSize()}setTextboxSize(){this.leftDimensionX=10;var t=0,n=this.label.split(`
`),r=f.context;n.forEach(l=>t=Math.max(t,r.measureText(l).width)),this.rightDimensionX=t+10,this.downDimensionY=n.length*this.fontSize}customSave(){return{constructorParamaters:[this.label,this.fontSize]}}keyDown(t){if(f.controlDown&&(t==="c"||t==="C")){const n=Ch([this]);navigator.clipboard.writeText(n),localStorage.setItem("clipboardData",n)}else f.controlDown&&(t==="v"||t==="V")?ol(localStorage.getItem("clipboardData")):t.length===1?this.label==="Enter Text Here"?this.setLabel(t):this.setLabel(this.label+t):t==="Backspace"?this.label==="Enter Text Here"?this.setLabel(""):this.setLabel(this.label.slice(0,-1)):t==="Enter"&&(this.label==="Enter Text Here"?this.setLabel(""):this.setLabel(this.label+`
`));$("[name=setLabel]").val(this.label)}draw(){this.label.length===0&&f.lastSelected!==this&&this.delete();var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=1;const n=this.x,r=this.y;if(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this)){t.beginPath(),t.fillStyle=ht.fill;const g=this.fontSize-14;Ee(t,-this.leftDimensionX,-this.upDimensionY-g,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY+g,this.x,this.y,"RIGHT"),t.fillStyle="rgba(255, 255, 32,0.1)",t.fill(),t.stroke()}t.beginPath(),t.textAlign="left",t.fillStyle=ht.text;for(var l=this.label.split(`
`),c=0;c<l.length;c++)Xt(t,l[c],n,r+5+c*this.fontSize,this.fontSize);t.fill()}}qs.prototype.tooltipText="Text ToolTip: Use this to document your circuit.";qs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/7annotation?id=text";qs.prototype.mutableProperties={fontSize:{name:"Font size: ",type:"number",max:"84",min:"14",func:"setFontSize"},label:{name:"Text: ",type:"textarea",func:"setLabel"}};qs.prototype.disableLabel=!0;qs.prototype.objectType="Text";qs.prototype.propagationDelayFixed=!0;class al extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new X(-10,0,0,this),this.output1=new X(20,0,1,this),this.state=new X(0,0,0,this,1,"Enable")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),state:tt(this.state)}}}newBitWidth(t){this.inp1.bitWidth=t,this.output1.bitWidth=t,this.bitWidth=t}resolve(){this.isResolvable()!==!1&&(this.state.value===1?(this.output1.value!==this.inp1.value&&(this.output1.value=this.inp1.value,f.simulationQueue.add(this.output1)),f.contentionPending.clean(this)):this.output1.value!==void 0&&!f.contentionPending.contains(this)&&(this.output1.value=void 0,f.simulationQueue.add(this.output1)),f.contentionPending.clean(this))}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-15,n,r,this.direction),Ct(t,20,0,n,r,this.direction),Ct(t,-10,15,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.state.verilogLabel}!=0) ? ${this.inp1.verilogLabel} : ${this.inp1.bitWidth}'b?;`}}al.prototype.tooltipText="TriState ToolTip : Effectively removes the output from the circuit.";al.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=tristate-buffer";al.prototype.objectType="TriState";class Uo extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.rectangleObject=!1,this.setDimensions(15,15),this.state=0,this.preState=0,this.inp1=new X(-10,0,0,this),this.reset=new X(0,0,0,this,1,"reset"),this.output1=new X(20,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),reset:tt(this.reset)}}}newBitWidth(t){this.inp1.bitWidth=t,this.output1.bitWidth=t,this.bitWidth=t}isResolvable(){return!0}resolve(){this.reset.value===1&&(this.state=this.preState),this.inp1.value!==void 0&&(this.state=this.inp1.value),this.output1.value=this.state,f.simulationQueue.add(this.output1)}customDraw(){var t=f.context;t.strokeStyle=ht.stroke_alt,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-15,n,r,this.direction),Ct(t,20,0,n,r,this.direction),Ct(t,-10,15,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke()}generateVerilog(){return"assign "+this.output1.verilogLabel+" = "+this.inp1.verilogLabel+";"}}Uo.prototype.tooltipText="Buffer ToolTip : Isolate the input from the output.";Uo.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=buffer";Uo.prototype.objectType="Buffer";class jh extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new X(-10,0,0,this),this.output1=new X(30,0,1,this),this.state=new X(0,0,0,this,1,"Enable")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),state:tt(this.state)}}}newBitWidth(t){this.inp1.bitWidth=t,this.output1.bitWidth=t,this.bitWidth=t}resolve(){this.isResolvable()!==!1&&(this.state.value===1&&(this.output1.value=~this.inp1.value>>>0<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output1)),this.state.value===0&&(this.output1.value=void 0))}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-15,n,r,this.direction),Ct(t,20,0,n,r,this.direction),Ct(t,-10,15,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),Fi(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.state.verilogLabel}!=0) ? ~${this.inp1.verilogLabel} : ${this.inp1.verilogLabel};`}}jh.prototype.tooltipText="Controlled Inverter ToolTip : Controlled buffer and NOT gate.";jh.prototype.objectType="ControlledInverter";class Vs extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.setDimensions(20,20),this.inpA=new X(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new X(-20,0,0,this,this.bitWidth,"B"),this.carryIn=new X(-20,10,0,this,1,"Cin"),this.sum=new X(20,0,1,this,this.bitWidth,"Sum"),this.carryOut=new X(20,10,1,this,1,"Cout")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),carryIn:tt(this.carryIn),carryOut:tt(this.carryOut),sum:tt(this.sum)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.sum.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;let t=this.carryIn.value;t===void 0&&(t=0);const n=this.inpA.value+this.inpB.value+t;this.sum.value=n<<32-this.bitWidth>>>32-this.bitWidth,this.carryOut.value=+(n>>>this.bitWidth!==0),f.simulationQueue.add(this.carryOut),f.simulationQueue.add(this.sum)}generateVerilog(){return this.carryIn.verilogLabel?`assign ${this.sum.verilogLabel} = ${this.inpA.verilogLabel} + ${this.inpB.verilogLabel} + ${this.carryIn.verilogLabel};`:`assign ${this.sum.verilogLabel} = ${this.inpA.verilogLabel} + ${this.inpB.verilogLabel};`}}Vs.prototype.tooltipText="Adder ToolTip : Performs addition of numbers.";Vs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=adder";Vs.prototype.objectType="Adder";class qo extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g=1){super(t,n,r,l,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inpA=new X(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new X(-20,0,0,this,this.bitWidth,"B"),this.product=new X(20,0,1,this,this.outputBitWidth,"Product")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),product:tt(this.product)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.product.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inpA.value*this.inpB.value;this.product.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.product)}}qo.prototype.tooltipText="verilogMultiplier ToolTip : Performs addition of numbers.";qo.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogMultiplier";qo.prototype.objectType="verilogMultiplier";class Rr extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g=1){super(t,n,r,l,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inpA=new X(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new X(-20,0,0,this,this.bitWidth,"B"),this.quotient=new X(20,0,1,this,this.outputBitWidth,"Quotient"),this.remainder=new X(20,0,1,this,this.outputBitWidth,"Remainder")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),quotient:tt(this.quotient),remainder:tt(this.remainder)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.quotient.bitWidth=t,this.remainder.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inpA.value/this.inpB.value,n=this.inpA.value%this.inpB.value;this.remainder.value=n<<32-this.outputBitWidth>>>32-this.outputBitWidth,this.quotient.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.quotient),f.simulationQueue.add(this.remainder)}}Rr.prototype.tooltipText="verilogDivider ToolTip : Performs addition of numbers.";Rr.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogDivider";Rr.prototype.objectType="verilogDivider";class Vo extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g=1){super(t,n,r,l,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inpA=new X(-20,-10,0,this,this.bitWidth,"A"),this.inpB=new X(-20,0,0,this,this.bitWidth,"B"),this.answer=new X(20,0,1,this,this.outputBitWidth,"Answer")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inpA:tt(this.inpA),inpB:tt(this.inpB),answer:tt(this.answer)}}}isResolvable(){return this.inpA.value!==void 0&&this.inpB.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inpA.bitWidth=t,this.inpB.bitWidth=t,this.answer.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=Math.pow(this.inpA.value,this.inpB.value);this.answer.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.answer)}}Vo.prototype.tooltipText="verilogPower ToolTip : Performs addition of numbers.";Vo.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogPower";Vo.prototype.objectType="verilogPower";class Ko extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g=1){super(t,n,r,l,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inp1=new X(-20,-10,0,this,this.bitWidth,"Input"),this.shiftInp=new X(-20,0,0,this,this.bitWidth,"ShiftInput"),this.output1=new X(20,0,1,this,this.outputBitWidth,"Output")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inp1:tt(this.inp1),shiftInp:tt(this.shiftInp),output1:tt(this.output1)}}}isResolvable(){return this.inp1.value!==void 0&&this.shiftInp.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inp1.bitWidth=t,this.shiftInp.bitWidth=t,this.output1.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inp1.value<<this.shiftInp.value;this.output1.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.output1)}}Ko.prototype.tooltipText="verilogShiftLeft ToolTip : Performs addition of numbers.";Ko.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogShiftLeft";Ko.prototype.objectType="verilogShiftLeft";class Qo extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g=1){super(t,n,r,l,c),this.setDimensions(20,20),this.outputBitWidth=g,this.inp1=new X(-20,-10,0,this,this.bitWidth,"Input"),this.shiftInp=new X(-20,0,0,this,this.bitWidth,"ShiftInput"),this.output1=new X(20,0,1,this,this.outputBitWidth,"Output")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.outputBitWidth],nodes:{inp1:tt(this.inp1),shiftInp:tt(this.shiftInp),output1:tt(this.output1)}}}isResolvable(){return this.inp1.value!==void 0&&this.shiftInp.value!==void 0}newBitWidth(t){this.bitWidth=t,this.inp1.bitWidth=t,this.shiftInp.bitWidth=t,this.output1.bitWidth=t}resolve(){if(this.isResolvable()===!1)return;const t=this.inp1.value>>this.shiftInp.value;this.output1.value=t<<32-this.outputBitWidth>>>32-this.outputBitWidth,f.simulationQueue.add(this.output1)}}Qo.prototype.tooltipText="verilogShiftRight ToolTip : Performs addition of numbers.";Qo.prototype.helplink="https://docs.circuitverse.org/#/miscellaneous?id=verilogShiftRight";Qo.prototype.objectType="verilogShiftRight";class Gh extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.rectangleObject=!1,this.setDimensions(15,15),this.inp1=new X(-10,0,0,this,this.bitWidth,"input stream"),this.output1=new X(20,0,1,this,this.bitWidth,"2's complement")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1)}}}resolve(){if(this.isResolvable()===!1)return;let t=~this.inp1.value>>>0<<32-this.bitWidth>>>32-this.bitWidth;t+=1,this.output1.value=t<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output1)}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle="black",Xt(t,"2'",n,r,10),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.beginPath(),Fi(t,5,0,15,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ~${this.inp1.verilogLabel} + 1;`}}Gh.prototype.tooltipText="Two's Complement Tooltip : Calculates the two's complement";Gh.prototype.objectType="TwoComplement";function $m(i,t,n){return i<<32-n>>>32-(n-t+1)}class ke extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=void 0,g=void 0){super(t,n,r,l,c),this.rectangleObject=!1,this.bitWidthSplit=g||(prompt("Enter bitWidth Split")||`${"1 ".repeat((this.bitWidth||1)-1)}1`).split(" ").filter(v=>v!=="").map(v=>parseInt(v,10)||1),this.splitCount=this.bitWidthSplit.length,this.setDimensions(10,(this.splitCount-1)*10+10),this.yOffset=(this.splitCount/2-1)*20,this.inp1=new X(-10,10+this.yOffset,0,this,this.bitWidth),this.outputs=[];for(let v=0;v<this.splitCount;v++)this.outputs.push(new X(20,v*20-this.yOffset-20,0,this,this.bitWidthSplit[v]));this.prevInpValue=void 0}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.bitWidthSplit],nodes:{outputs:this.outputs.map(tt),inp1:tt(this.inp1)}}}removePropagation(){if(this.inp1.value===void 0){let t=0;for(t=0;t<this.outputs.length;t++)if(this.outputs[t].value===void 0)return;for(t=0;t<this.outputs.length;t++)this.outputs[t].value!==void 0&&(this.outputs[t].value=void 0,f.simulationQueue.add(this.outputs[t]))}else this.inp1.value!==void 0&&(this.inp1.value=void 0,f.simulationQueue.add(this.inp1));this.prevInpValue=void 0}isResolvable(){let t=!1;if(this.inp1.value!==this.prevInpValue)return this.inp1.value!==void 0;let n;for(n=0;n<this.splitCount&&this.outputs[n].value!==void 0;n++);return n===this.splitCount&&(t=!0),t}resolve(){if(this.isResolvable()!==!1){if(this.inp1.value!==void 0&&this.inp1.value!==this.prevInpValue){let t=1;for(let n=0;n<this.splitCount;n++){const r=$m(this.inp1.value,t,t+this.bitWidthSplit[n]-1);this.outputs[n].value!==r&&this.outputs[n].value!==r&&(this.outputs[n].value=r,f.simulationQueue.add(this.outputs[n])),t+=this.bitWidthSplit[n]}}else{let t=0;for(let n=this.splitCount-1;n>=0;n--)t<<=this.bitWidthSplit[n],t+=this.outputs[n].value;this.inp1.value!==t>>>0&&(this.inp1.value=t>>>0,f.simulationQueue.add(this.inp1))}this.prevInpValue=this.inp1.value}}reset(){this.prevInpValue=void 0}processVerilog(){if(this.inp1.verilogLabel!==""&&this.outputs[0].verilogLabel===""){let t=0;for(let n=0;n<this.splitCount;n++)this.bitWidthSplit[n]>1?(`${this.inp1.verilogLabel}`,t+this.bitWidthSplit[n]-1,`${t}`):`${this.inp1.verilogLabel}${t}`,this.outputs[n].verilogLabel!==label&&(this.outputs[n].verilogLabel=label,this.scope.stack.push(this.outputs[n])),t+=this.bitWidthSplit[n]}else if(this.inp1.verilogLabel===""&&this.outputs[0].verilogLabel!==""){const t=`{${this.outputs.map(n=>n.verilogLabel).join(",")}}`;this.inp1.verilogLabel!==t&&(this.inp1.verilogLabel=t,this.scope.stack.push(this.inp1))}}customDraw(){var t=f.context;t.strokeStyle=[ht.splitter,"brown"][(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))+0],t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),ne(t,-10,10+this.yOffset,n,r,this.direction),Ct(t,0,0+this.yOffset,n,r,this.direction),Ct(t,0,-20*(this.splitCount-1)+this.yOffset,n,r,this.direction);let l=0;for(let g=this.splitCount-1;g>=0;g--)ne(t,0,-20*g+this.yOffset,n,r,this.direction),Ct(t,20,-20*g+this.yOffset,n,r,this.direction);t.stroke(),t.beginPath(),t.fillStyle=ht.text;for(let g=this.splitCount-1;g>=0;g--){var c;this.bitWidthSplit[this.splitCount-g-1]==1?c=`${l}`:c=`${l}:${l+this.bitWidthSplit[this.splitCount-g-1]-1}`,Eo(t,c,16,-20*g+this.yOffset+10,n,r,this.direction),l+=this.bitWidthSplit[this.splitCount-g-1]}t.fill()}processVerilog(){if(this.inp1.verilogLabel==""){this.isSplitter=!1,this.inp1.verilogLabel=this.verilogLabel+"_cmb",this.scope.verilogWireList[this.bitWidth].contains(this.inp1.verilogLabel)||this.scope.verilogWireList[this.bitWidth].push(this.inp1.verilogLabel),this.scope.stack.push(this.inp1);return}this.isSplitter=!0;for(var t=0;t<this.outputs.length;t++){var n=0,r=this.inp1.verilogLabel,l=/^(.*)\[(\d*):(\d*)\]$/;if(l.test(r)){var c=r.match(l);r=c[1],n=parseInt(c[3])}for(var g=0;g<this.splitCount;g++){if(this.bitWidthSplit[g]>1)var v=r+"["+(n+this.bitWidthSplit[g]-1)+":"+n+"]";else var v=r+"["+n+"]";this.outputs[g].verilogLabel!=v&&(this.outputs[g].verilogLabel=v,this.scope.stack.push(this.outputs[g])),n+=this.bitWidthSplit[g]}}}generateVerilog(){var t="";if(!this.isSplitter){t+="assign "+this.inp1.verilogLabel+" = {";for(var n=this.outputs.length-1;n>0;n--)t+=this.outputs[n].verilogLabel+",";t+=this.outputs[0].verilogLabel+"};"}return t}}ke.prototype.tooltipText="Splitter ToolTip: Split multiBit Input into smaller bitwidths or vice versa.";ke.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=splitter";ke.prototype.objectType="Splitter";class Zo extends Bt{constructor(t,n,r=globalScope,l=1){super(t,n,r,"RIGHT",l),this.rectangleObject=!1,this.setDimensions(10,10),this.directionFixed=!0,this.output1=new X(0,-10,1,this)}customSave(){return{nodes:{output1:tt(this.output1)},values:{state:this.state},constructorParamaters:[this.direction,this.bitWidth]}}resolve(){this.output1.value=0,f.simulationQueue.add(this.output1)}customSave(){return{nodes:{output1:tt(this.output1)},constructorParamaters:[this.bitWidth]}}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=[ht.stroke,"brown"][(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))+0],t.lineWidth=Nt(3);const n=this.x,r=this.y;ne(t,0,-10,n,r,this.direction),Ct(t,0,0,n,r,this.direction),ne(t,-10,0,n,r,this.direction),Ct(t,10,0,n,r,this.direction),ne(t,-6,5,n,r,this.direction),Ct(t,6,5,n,r,this.direction),ne(t,-2.5,10,n,r,this.direction),Ct(t,2.5,10,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ${this.bitWidth}'b0;`}}Zo.prototype.tooltipText="Ground: All bits are Low(0).";Zo.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=ground";Zo.prototype.propagationDelay=0;Zo.prototype.objectType="Ground";class Jo extends Bt{constructor(t,n,r=globalScope,l=1){super(t,n,r,"RIGHT",l),this.directionFixed=!0,this.rectangleObject=!1,this.setDimensions(10,10),this.output1=new X(0,10,1,this)}resolve(){this.output1.value=-1>>>32-this.bitWidth,f.simulationQueue.add(this.output1)}customSave(){return{nodes:{output1:tt(this.output1)},constructorParamaters:[this.bitWidth]}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.lineWidth=Nt(3),t.fillStyle=ht.fill,ne(t,0,-10,n,r,this.direction),Ct(t,-10,0,n,r,this.direction),Ct(t,10,0,n,r,this.direction),Ct(t,0,-10,n,r,this.direction),t.closePath(),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),ne(t,0,0,n,r,this.direction),Ct(t,0,10,n,r,this.direction),t.stroke()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ~${this.bitWidth}'b0;`}}Jo.prototype.tooltipText="Power: All bits are High(1).";Jo.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=power";Jo.prototype.propagationDelay=0;Jo.prototype.objectType="Power";function zm(i){return parseInt(i,2)}function Fm(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}class cs extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g){super(t,n,r,l,c),g?this.layoutProperties=g:(this.layoutProperties={},this.layoutProperties.x=0,this.layoutProperties.y=Za(0,r),this.layoutProperties.id=us()),this.state=0,this.orientationFixed=!1,this.state=zm(this.state),this.output1=new X(this.bitWidth*10,0,1,this),this.wasClicked=!1,this.directionFixed=!0,this.setWidth(this.bitWidth*10),this.rectangleObject=!0}customSave(){return{nodes:{output1:tt(this.output1)},values:{state:this.state},constructorParamaters:[this.direction,this.bitWidth,this.layoutProperties]}}resolve(){this.output1.value=this.state,f.simulationQueue.add(this.output1)}newBitWidth(t){if(t<1)return;const n=t-this.bitWidth;this.bitWidth=t,this.setWidth(this.bitWidth*10),this.state=0,this.output1.bitWidth=t,this.direction==="RIGHT"?(this.x-=10*n,this.output1.x=10*this.bitWidth,this.output1.leftx=10*this.bitWidth):this.direction==="LEFT"&&(this.x+=10*n,this.output1.x=-10*this.bitWidth,this.output1.leftx=10*this.bitWidth)}click(){let t=this.findPos();t===0&&(t=1),!(t<1||t>this.bitWidth)&&(this.state=(this.state>>>0^1<<this.bitWidth-t)>>>0)}customDraw(){var t=f.context;t.beginPath(),t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";const l=Fm(this.state,this.bitWidth);for(let c=0;c<this.bitWidth;c++)Xt(t,l[c],n-10*this.bitWidth+10+c*20,r+5);t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.output1.refresh(),t==="RIGHT"||t==="LEFT"?(this.output1.leftx=10*this.bitWidth,this.output1.lefty=0):(this.output1.leftx=10,this.output1.lefty=0),this.output1.refresh(),this.labelDirection=Go[this.direction])}findPos(){return Math.round((f.mouseX-this.x+10*this.bitWidth)/20)}}cs.prototype.tooltipText="Input ToolTip: Toggle the individual bits by clicking on them.";cs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=input";cs.prototype.propagationDelay=0;cs.prototype.objectType="Input";function jm(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}class ls extends Bt{constructor(t,n,r=globalScope,l="LEFT",c=1,g){super(t,n,r,l,c),g?this.layoutProperties=g:(this.layoutProperties={},this.layoutProperties.x=r.layout.width,this.layoutProperties.y=Za(r.layout.width,r),this.layoutProperties.id=us()),this.rectangleObject=!1,this.directionFixed=!0,this.orientationFixed=!1,this.setDimensions(this.bitWidth*10,10),this.inp1=new X(this.bitWidth*10,0,0,this)}generateVerilog(){return`assign ${this.label} = ${this.inp1.verilogLabel};`}customSave(){return{nodes:{inp1:tt(this.inp1)},constructorParamaters:[this.direction,this.bitWidth,this.layoutProperties]}}newBitWidth(t){if(t<1)return;const n=t-this.bitWidth;this.state=void 0,this.inp1.bitWidth=t,this.bitWidth=t,this.setWidth(10*this.bitWidth),this.direction==="RIGHT"?(this.x-=10*n,this.inp1.x=10*this.bitWidth,this.inp1.leftx=10*this.bitWidth):this.direction==="LEFT"&&(this.x+=10*n,this.inp1.x=-10*this.bitWidth,this.inp1.leftx=10*this.bitWidth)}customDraw(){this.state=this.inp1.value;var t=f.context;t.beginPath(),t.strokeStyle=[ht.out_rect,ht.stroke_alt][+(this.inp1.value===void 0)],t.fillStyle=ht.fill,t.lineWidth=Nt(3);const n=this.x,r=this.y;Ee(t,-10*this.bitWidth,-10,20*this.bitWidth,20,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center";let l;this.state===void 0?l="x".repeat(this.bitWidth):l=jm(this.state,this.bitWidth);for(let c=0;c<this.bitWidth;c++)Xt(t,l[c],n-10*this.bitWidth+10+c*20,r+5);t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.inp1.refresh(),t==="RIGHT"||t==="LEFT"?(this.inp1.leftx=10*this.bitWidth,this.inp1.lefty=0):(this.inp1.leftx=10,this.inp1.lefty=0),this.inp1.refresh(),this.labelDirection=Go[this.direction])}generateVerilog(){return"assign "+this.verilogLabel+" = "+this.inp1.verilogLabel+";"}}ls.prototype.tooltipText="Output ToolTip: Simple output element showing output in binary.";ls.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=output-1";ls.prototype.propagationDelay=0;ls.prototype.objectType="Output";class ta extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=2,g=1){super(t,n,r,l,c),this.setDimensions(20,20),this.selectorBitWidth=g||parseInt(prompt("Enter Selector bitWidth"),10),this.rectangleObject=!1,this.inp1=new X(-20,0,0,this,this.bitWidth,"Input"),this.output1=new X(20,0,1,this,1,"Output"),this.bitSelectorInp=new X(0,20,0,this,this.selectorBitWidth,"Bit Selector")}changeSelectorBitWidth(t){t===void 0||t<1||t>32||(this.selectorBitWidth=t,this.bitSelectorInp.bitWidth=t)}customSave(){return{nodes:{inp1:tt(this.inp1),output1:tt(this.output1),bitSelectorInp:tt(this.bitSelectorInp)},constructorParamaters:[this.direction,this.bitWidth,this.selectorBitWidth]}}newBitWidth(t){this.inp1.bitWidth=t,this.bitWidth=t}resolve(){this.output1.value=bm(this.inp1.value,this.bitSelectorInp.value+1,this.bitSelectorInp.value+1),f.simulationQueue.add(this.output1)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=["blue",ht.stroke_alt][(this.state===void 0)+0],t.fillStyle=ht.fill,t.lineWidth=Nt(3);const n=this.x,r=this.y;ji(t,n-20,r-20,40,40),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center";var l;this.bitSelectorInp.value===void 0?l="x":l=this.bitSelectorInp.value,Xt(t,l,n,r+5),t.fill()}generateVerilog(){return`assign ${this.output1.verilogLabel} = ${this.inp1.verilogLabel} >> ${this.bitSelectorInp.verilogLabel};`}}ta.prototype.tooltipText="BitSelector ToolTip : Divides input bits into several equal-sized groups.";ta.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=bitselector";ta.prototype.mutableProperties={selectorBitWidth:{name:"Selector Bit Width: ",type:"number",max:"32",min:"1",func:"changeSelectorBitWidth"}};ta.prototype.objectType="BitSelector";function Gm(i){return parseInt(i,2)}class Ke extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g="0"){super(t,n,r,l,g.length),this.state=g,this.setDimensions(10*this.state.length,10),this.bitWidth=c||this.state.length,this.directionFixed=!0,this.orientationFixed=!1,this.rectangleObject=!1,this.output1=new X(this.bitWidth*10,0,1,this),this.wasClicked=!1,this.label=""}generateVerilog(){return`localparam [${this.bitWidth-1}:0] ${this.verilogLabel}=${this.bitWidth}b'${this.state};`}customSave(){return{nodes:{output1:tt(this.output1)},constructorParamaters:[this.direction,this.bitWidth,this.state]}}resolve(){this.output1.value=Gm(this.state),f.simulationQueue.add(this.output1)}dblclick(){this.state=prompt("Re enter the value")||"0",this.newBitWidth(this.state.toString().length)}newBitWidth(t){t>this.state.length?this.state="0".repeat(t-this.state.length)+this.state:t<this.state.length&&(this.state=this.state.slice(this.bitWidth-t)),this.bitWidth=t,this.output1.bitWidth=t,this.setDimensions(10*this.bitWidth,10),this.direction==="RIGHT"?(this.output1.x=10*this.bitWidth,this.output1.leftx=10*this.bitWidth):this.direction==="LEFT"&&(this.output1.x=-10*this.bitWidth,this.output1.leftx=10*this.bitWidth)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(1);const n=this.x,r=this.y;Ee(t,-10*this.bitWidth,-10,20*this.bitWidth,20,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";const l=this.state;for(let c=0;c<this.bitWidth;c++)Xt(t,l[c],n-10*this.bitWidth+10+c*20,r+5);t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.output1.refresh(),t==="RIGHT"||t==="LEFT"?(this.output1.leftx=10*this.bitWidth,this.output1.lefty=0):(this.output1.leftx=10,this.output1.lefty=0),this.output1.refresh(),this.labelDirection=Go[this.direction])}generateVerilog(){return`assign ${this.output1.verilogLabel} = ${this.bitWidth}'b${this.state};`}}Ke.prototype.tooltipText="Constant ToolTip: Bits are fixed. Double click element to change the bits.";Ke.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=constantval";Ke.prototype.propagationDelay=0;Ke.prototype.objectType="ConstantVal";class Fn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=2,g=1){if(super(t,n,r,l,g),this.rectangleObject=!1,this.setDimensions(15,20),this.inp=[],this.inputSize=c,c%2===1){for(let w=0;w<c/2-1;w++){const D=new X(-10,-10*(w+1),0,this);this.inp.push(D)}let v=new X(-10,0,0,this);this.inp.push(v);for(let w=c/2+1;w<c;w++)v=new X(-10,10*(w+1-c/2-1),0,this),this.inp.push(v)}else{for(let v=0;v<c/2;v++){const w=new X(-10,-10*(v+1),0,this);this.inp.push(w)}for(let v=c/2;v<c;v++){const w=new X(-10,10*(v+1-c/2),0,this);this.inp.push(w)}}this.output1=new X(30,0,1,this)}customSave(){return{constructorParamaters:[this.direction,this.inputSize,this.bitWidth],nodes:{inp:this.inp.map(tt),output1:tt(this.output1)}}}resolve(){let t=this.inp[0].value||0;for(let n=1;n<this.inputSize;n++)t|=this.inp[n].value||0;t=~t>>>0<<32-this.bitWidth>>>32-this.bitWidth,this.output1.value=t,f.simulationQueue.add(this.output1)}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.lineWidth=Nt(3);const n=this.x,r=this.y;t.beginPath(),t.fillStyle=ht.fill,ne(t,-10,-20,n,r,this.direction,!0),$i(0,-20,15,-10,20,0,n,r,this.direction),$i(0+15,0+10,0,0+20,-10,20,n,r,this.direction),$i(0,0,0,0,-10,-20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),Fi(t,25,0,5,n,r,this.direction),t.stroke()}generateVerilog(){return Vr.call(this,"|",!0)}}Fn.prototype.tooltipText="Nor Gate ToolTip : Combination of OR gate and NOT gate.";Fn.prototype.alwaysResolve=!0;Fn.prototype.changeInputSize=js;Fn.prototype.verilogType="nor";Fn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/4gates?id=nor-gate";Fn.prototype.objectType="NorGate";class Ks extends Bt{constructor(t,n,r=globalScope,l="Red"){super(t,n,r,"UP",1),this.rectangleObject=!1,this.setWidth(10),this.upDimensionY=20,this.downDimensionY=40,this.inp1=new X(-40,0,0,this,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.color=l;const c=Ms(this.color);this.actualColor=`rgba(${c[0]},${c[1]},${c[2]},${.8})`}customSave(){return{constructorParamaters:[this.color],nodes:{inp1:tt(this.inp1)}}}changeColor(t){if(jo(t)){this.color=t;const n=Ms(this.color);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]},${.8})`}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle="#e3e4e5",t.lineWidth=Nt(3),t.beginPath(),ne(t,-20,0,n,r,this.direction),Ct(t,-40,0,n,r,this.direction),t.stroke(),t.strokeStyle="#d3d4d5",t.fillStyle=["rgba(227,228,229,0.8)",this.actualColor][this.inp1.value||0],t.lineWidth=Nt(1),t.beginPath(),ne(t,-15,-9,n,r,this.direction),Ct(t,0,-9,n,r,this.direction),os(t,0,0,9,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-15,9,n,r,this.direction),Ct(t,-18,12,n,r,this.direction),os(t,0,0,Math.sqrt(468),Math.PI/2+Math.acos(12/Math.sqrt(468)),-Math.PI/2-Math.asin(18/Math.sqrt(468)),n,r,this.direction),Ct(t,-15,-9,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.strokeStyle="#090a0a",r.fillStyle=["rgba(227,228,229,0.8)",this.actualColor][this.inp1.value||0],r.lineWidth=Nt(1),r.beginPath(),Fi(r,0,0,6,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.8)"),r.fill()}generateVerilog(){var t=this.label?this.verilogLabel:this.inp1.verilogLabel;return`
      always @ (*)
        $display("DigitalLed:${t}=%d", ${this.inp1.verilogLabel});`}}Ks.prototype.tooltipText="Digital Led ToolTip: Digital LED glows high when input is High(1).";Ks.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=digital-led";Ks.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};Ks.prototype.objectType="DigitalLed";Ks.prototype.canShowInSubcircuit=!0;class Hr extends Bt{constructor(t,n,r=globalScope,l="Red"){super(t,n,r,"UP",8),this.rectangleObject=!1,this.setDimensions(10,20),this.downDimensionY=40,this.inp1=new X(-40,0,0,this,8),this.directionFixed=!0,this.fixedBitWidth=!0,this.color=l;const c=Ms(this.color);this.actualColor=`rgba(${c[0]},${c[1]},${c[2]},${.8})`}changeColor(t){if(jo(t))if(t.trim()==="")this.color="Red",this.actualColor="rgba(255, 0, 0, 1)";else{this.color=t;const n=Ms(t);this.actualColor=`rgba(${n[0]},${n[1]},${n[2]}, ${n[3]})`}}createRGBA(t=1){const n=this.actualColor.length,r=this.actualColor.split("").slice(5,n-1).join("").split(",");return t.toString()==="NaN"?`rgba(${r[0]}, ${r[1]}, ${r[2]}, 1)`:`rgba(${r[0]},${r[1]},${r[2]},${t})`}customSave(){return{constructorParamaters:[this.color],nodes:{inp1:tt(this.inp1)}}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle="#353535",t.lineWidth=Nt(3),t.beginPath(),ne(t,-20,0,n,r,this.direction),Ct(t,-40,0,n,r,this.direction),t.stroke();const l=this.inp1.value,c=l/255;t.strokeStyle="#090a0a",t.fillStyle=[this.createRGBA(c),"rgba(227, 228, 229, 0.8)"][(l===void 0||l===0)+0],t.lineWidth=Nt(1),t.beginPath(),ne(t,-20,-9,n,r,this.direction),Ct(t,0,-9,n,r,this.direction),os(t,0,0,9,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-20,9,n,r,this.direction),Ct(t,-20,-9,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n,g=this.inp1.value,v=g/255;r.strokeStyle="#090a0a",r.fillStyle=[this.createRGBA(v),"rgba(227, 228, 229, 0.8)"][(g===void 0||g==0)+0],r.lineWidth=Nt(1),r.beginPath(),Fi(r,0,0,6,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.8)"),r.fill()}generateVerilog(){return`
      always @ (*)
        $display("VeriableLed:${this.inp1.verilogLabel}=%d", ${this.inp1.verilogLabel});`}}Hr.prototype.tooltipText="Variable Led ToolTip: Variable LED inputs an 8 bit value and glows with a proportional intensity.";Hr.prototype.mutableProperties={color:{name:"Color: ",type:"text",func:"changeColor"}};Hr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=variableled";Hr.prototype.objectType="VariableLed";Hr.prototype.canShowInSubcircuit=!0;class Hi extends Bt{constructor(t,n,r=globalScope,l="RIGHT"){super(t,n,r,l,1),this.state=0,this.output1=new X(30,0,1,this),this.wasClicked=!1,this.rectangleObject=!1,this.setDimensions(10,10)}customSave(){return{nodes:{output1:tt(this.output1)},values:{state:this.state},constructorParamaters:[this.direction,this.bitWidth]}}resolve(){this.wasClicked?(this.state=1,this.output1.value=this.state):(this.state=0,this.output1.value=this.state),f.simulationQueue.add(this.output1)}customDraw(){var t=f.context;const n=this.x,r=this.y;t.fillStyle="#ddd",t.strokeStyle="#353535",t.lineWidth=Nt(5),t.beginPath(),ne(t,10,0,n,r,this.direction),Ct(t,30,0,n,r,this.direction),t.stroke(),t.beginPath(),Fi(t,0,0,12,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(232, 13, 13,0.6)"),this.wasClicked&&(t.fillStyle="rgba(232, 13, 13,0.8)"),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.fillStyle="#ddd",r.strokeStyle="#353535",r.lineWidth=Nt(3),r.beginPath(),Fi(r,0,0,6,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(232, 13, 13,0.6)"),this.wasClicked&&(r.fillStyle="rgba(232, 13, 13,0.8)"),r.fill()}static verilogInstructions(){return`Button - Buttons are not natively supported in verilog, consider using Inputs instead
`}verilogBaseType(){return this.verilogName()+(Hi.selSizes.length-1)}generateVerilog(){return Hi.selSizes.push(this.data),Bt.prototype.generateVerilog.call(this)}static moduleVerilog(){for(var t="",n=0;n<Hi.selSizes.length;n++)t+=`// Skeleton for Button${n}
    /*
    module Button${n}(out);
      output reg out;
    
      initial begin
        //do something with the button here
      end
    endmodule
    */
    `;return t}static resetVerilog(){Hi.selSizes=[]}}Hi.prototype.tooltipText="Button ToolTip: High(1) when pressed and Low(0) when released.";Hi.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=button";Hi.prototype.propagationDelay=0;Hi.prototype.objectType="Button";Hi.prototype.canShowInSubcircuit=!0;class ea extends Bt{constructor(t,n,r=globalScope){super(t,n,r,"UP",8),this.rectangleObject=!1,this.inp=[],this.setDimensions(10,10),this.downDimensionY=40,this.inp1=new X(-40,-10,0,this,8),this.inp2=new X(-40,0,0,this,8),this.inp3=new X(-40,10,0,this,8),this.inp.push(this.inp1),this.inp.push(this.inp2),this.inp.push(this.inp3),this.directionFixed=!0,this.fixedBitWidth=!0}customSave(){return{nodes:{inp1:tt(this.inp1),inp2:tt(this.inp2),inp3:tt(this.inp3)}}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle="green",t.lineWidth=Nt(3),t.beginPath(),ne(t,-20,0,n,r,this.direction),Ct(t,-40,0,n,r,this.direction),t.stroke(),t.strokeStyle="red",t.lineWidth=Nt(3),t.beginPath(),ne(t,-20,-10,n,r,this.direction),Ct(t,-40,-10,n,r,this.direction),t.stroke(),t.strokeStyle="blue",t.lineWidth=Nt(3),t.beginPath(),ne(t,-20,10,n,r,this.direction),Ct(t,-40,10,n,r,this.direction),t.stroke();const l=this.inp1.value,c=this.inp2.value,g=this.inp3.value;t.strokeStyle="#d3d4d5",t.fillStyle=[`rgba(${l}, ${c}, ${g}, 0.8)`,"rgba(227, 228, 229, 0.8)"][(l===void 0||c===void 0||g===void 0)+0],t.lineWidth=Nt(1),t.beginPath(),ne(t,-18,-11,n,r,this.direction),Ct(t,0,-11,n,r,this.direction),os(t,0,0,11,-Math.PI/2,Math.PI/2,n,r,this.direction),Ct(t,-18,11,n,r,this.direction),Ct(t,-21,15,n,r,this.direction),os(t,0,0,Math.sqrt(666),Math.PI/2+Math.acos(15/Math.sqrt(666)),-Math.PI/2-Math.asin(21/Math.sqrt(666)),n,r,this.direction),Ct(t,-18,-11,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n,g=6,v=this.inp1.value,w=this.inp2.value,D=this.inp3.value;r.strokeStyle="#090a0a",r.fillStyle=["rgba("+v+", "+w+", "+D+", 0.8)","rgba(227, 228, 229, 0.8)"][(v===void 0||w===void 0||D===void 0)+0],r.lineWidth=Nt(1),r.beginPath(),Fi(r,0,0,g,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.8)"),r.fill()}generateVerilog(){return`
      always @ (*)
        $display("RGBLed:{${this.inp1.verilogLabel},${this.inp2.verilogLabel},${this.inp3.verilogLabel}} = {%d,%d,%d}", ${this.inp1.verilogLabel}, ${this.inp2.verilogLabel}, ${this.inp3.verilogLabel});`}}ea.prototype.tooltipText="RGB Led ToolTip: RGB Led inputs 8 bit values for the colors RED, GREEN and BLUE.";ea.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=rgbled";ea.prototype.objectType="RGBLed";ea.prototype.canShowInSubcircuit=!0;class ds extends Bt{constructor(t,n,r=globalScope,l="UP",c=1){super(t,n,r,l,8),this.rectangleObject=!1,this.setDimensions(15,15),this.pinLength=c===void 0?1:c;const g=-10-10*c;this.inp1=new X(g,-10,0,this,8,"R"),this.inp2=new X(g,0,0,this,8,"G"),this.inp3=new X(g,10,0,this,8,"B"),this.inp=[this.inp1,this.inp2,this.inp3],this.labelDirection="UP",this.fixedBitWidth=!0,this.changePinLength=function(v){if(v===void 0||(v=parseInt(v,10),v<0||v>1e3))return;const w=10*(v-this.pinLength),D=this.direction==="LEFT"?-w:this.direction==="RIGHT"?w:0,T=this.direction==="UP"?-w:this.direction==="DOWN"?w:0,R=new ds(this.x+D,this.y+T,this.scope,this.direction,v);return R.label=this.label,R.labelDirection=this.labelDirection,this.cleanDelete(),f.lastSelected=R,R},this.mutableProperties={pinLength:{name:"Pin Length",type:"number",max:"1000",min:"0",func:"changePinLength"}}}customSave(){return{constructorParamaters:[this.direction,this.pinLength],nodes:{inp1:tt(this.inp1),inp2:tt(this.inp2),inp3:tt(this.inp3)}}}customDraw(){const t=f.context,n=this.x,r=this.y,l=this.inp1.value,c=this.inp2.value,g=this.inp3.value,v=["rgb(174,20,20)","rgb(40,174,40)","rgb(0,100,255)"];for(let w=0;w<3;w++){const D=-10-10*this.pinLength,T=w*10-10;t.lineWidth=Nt(3),t.beginPath(),t.lineCap="butt",t.strokeStyle="rgb(227, 228, 229)",ne(t,-15,T,n,r,this.direction),Ct(t,D+10,T,n,r,this.direction),t.stroke(),t.lineCap="round",t.beginPath(),t.strokeStyle=v[w],ne(t,D+10,T,n,r,this.direction),Ct(t,D,T,n,r,this.direction),t.stroke()}t.strokeStyle="#d3d4d5",t.fillStyle=l===void 0&&c===void 0&&g===void 0?"rgb(227, 228, 229)":`rgb(${l||0}, ${c||0}, ${g||0})`,t.lineWidth=Nt(1),t.beginPath(),Ee(t,-15,-15,30,30,n,r,this.direction),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(255, 255, 32)"),t.fill()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n,g=this.inp1.value,v=this.inp2.value,w=this.inp3.value;r.strokeStyle="#d3d4d5",r.fillStyle=g===void 0&&v===void 0&&w===void 0?"rgb(227, 228, 229)":"rgb("+(g||0)+", "+(v||0)+", "+(w||0)+")",r.lineWidth=Nt(1),r.beginPath(),Ee(r,0,0,15,15,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32)"),r.fill()}generateVerilog(){return this.generateVerilog.call(this)}}ds.prototype.tooltipText="Square RGB Led ToolTip: RGB Led inputs 8 bit values for the colors RED, GREEN and BLUE.";ds.prototype.helplink="https://docs.circuitverse.org/#/chapter4/3output?id=squarergbled";ds.prototype.objectType="SquareRGBLed";ds.prototype.canShowInSubcircuit=!0;ds.prototype.layoutProperties={rightDimensionX:15,leftDimensionX:0,upDimensionY:15,downDimensionY:0};class Mn extends Bt{constructor(t,n,r=globalScope,l="LEFT",c=1,g=1){super(t,n,r,l,c),this.controlSignalSize=g||parseInt(prompt("Enter control signal bitWidth"),10),this.outputsize=1<<this.controlSignalSize,this.xOff=0,this.yOff=1,this.controlSignalSize===1&&(this.xOff=10),this.controlSignalSize<=3&&(this.yOff=2),this.changeControlSignalSize=function(v){if(v===void 0||v<1||v>32||this.controlSignalSize===v)return;const w=new Mn(this.x,this.y,this.scope,this.direction,this.bitWidth,v);return this.cleanDelete(),f.lastSelected=w,w},this.mutableProperties={controlSignalSize:{name:"Control Signal Size",type:"number",max:"10",min:"1",func:"changeControlSignalSize"}},this.newBitWidth=function(v){this.bitWidth=v;for(let w=0;w<this.outputsize;w++)this.output1[w].bitWidth=v;this.input.bitWidth=v},this.setDimensions(20-this.xOff,this.yOff*5*this.outputsize),this.rectangleObject=!1,this.input=new X(20-this.xOff,0,0,this),this.output1=[];for(let v=0;v<this.outputsize;v++){const w=new X(-20+this.xOff,+this.yOff*10*(v-this.outputsize/2)+10,1,this);this.output1.push(w)}this.controlSignalInput=new X(0,this.yOff*10*(this.outputsize/2-1)+this.xOff+10,0,this,this.controlSignalSize,"Control Signal")}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.controlSignalSize],nodes:{output1:this.output1.map(tt),input:tt(this.input),controlSignalInput:tt(this.controlSignalInput)}}}resolve(){for(let t=0;t<this.output1.length;t++)this.output1[t].value=0;this.output1[this.controlSignalInput.value].value=this.input.value;for(let t=0;t<this.output1.length;t++)f.simulationQueue.add(this.output1[t])}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),ne(t,0,this.yOff*10*(this.outputsize/2-1)+10+.5*this.xOff,n,r,this.direction),Ct(t,0,this.yOff*5*(this.outputsize-1)+this.xOff,n,r,this.direction),t.stroke(),t.beginPath(),t.strokeStyle=ht.stroke,t.lineWidth=Nt(4),t.fillStyle=ht.fill,ne(t,-20+this.xOff,-this.yOff*10*(this.outputsize/2),n,r,this.direction),Ct(t,-20+this.xOff,20+this.yOff*10*(this.outputsize/2-1),n,r,this.direction),Ct(t,20-this.xOff,+this.yOff*10*(this.outputsize/2-1)+this.xOff,n,r,this.direction),Ct(t,20-this.xOff,-this.yOff*10*(this.outputsize/2)-this.xOff+20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let l=0;l<this.outputsize;l++)this.direction==="LEFT"?Xt(t,String(l),n+this.output1[l].x-7,r+this.output1[l].y+2,10):this.direction==="RIGHT"?Xt(t,String(l),n+this.output1[l].x+7,r+this.output1[l].y+2,10):this.direction==="UP"?Xt(t,String(l),n+this.output1[l].x,r+this.output1[l].y-5,10):Xt(t,String(l),n+this.output1[l].x,r+this.output1[l].y+10,10);t.fill()}verilogBaseType(){return this.verilogName()+this.output1.length}generateVerilog(){return Mn.selSizes.add(this.controlSignalSize),Bt.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of Mn.selSizes){var r=1<<n;t+=`
`,t+="module Demultiplexer"+r,t+="(";for(var l=0;l<r;l++)t+="out"+l+", ";t+=`in, sel);
`,t+=`  parameter WIDTH = 1;
`,t+="  output reg [WIDTH-1:0] ";for(var l=0;l<r-1;l++)t+="out"+l+", ";t+="out"+(r-1)+`;
`,t+=`  input [WIDTH-1:0] in;
`,t+="  input ["+(n-1)+`:0] sel;
`,t+=`  
`,t+=`  always @ (*) begin
`;for(var l=0;l<r;l++)t+="    out"+l+` = 0;
`;t+=`    case (sel)
`;for(var l=0;l<r;l++)t+="      "+l+" : out"+l+` = in;
`;t+=`    endcase
`,t+=`  end
`,t+=`endmodule
`}return t}static resetVerilog(){Mn.selSizes=new Set}}Mn.prototype.tooltipText="DeMultiplexer ToolTip : Multiple outputs and a single line input.";Mn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=demultiplexer";Mn.prototype.objectType="Demultiplexer";class Nn extends Bt{constructor(t,n,r=globalScope,l="LEFT",c=1){super(t,n,r,l,c),this.outputsize=1<<this.bitWidth,this.xOff=0,this.yOff=1,this.bitWidth===1&&(this.xOff=10),this.bitWidth<=3&&(this.yOff=2),this.newBitWidth=function(g){if(g===void 0||g<1||g>32||this.bitWidth===g)return;const v=new Nn(this.x,this.y,this.scope,this.direction,g);return this.cleanDelete(),f.lastSelected=v,v},this.setDimensions(20-this.xOff,this.yOff*5*this.outputsize),this.rectangleObject=!1,this.input=new X(20-this.xOff,0,0,this),this.output1=[];for(let g=0;g<this.outputsize;g++){const v=new X(-20+this.xOff,+this.yOff*10*(g-this.outputsize/2)+10,1,this,1);this.output1.push(v)}}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:this.output1.map(tt),input:tt(this.input)}}}resolve(){for(let t=0;t<this.output1.length;t++)this.output1[t].value=0;this.input.value!==void 0&&(this.output1[this.input.value].value=1);for(let t=0;t<this.output1.length;t++)f.simulationQueue.add(this.output1[t])}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),t.strokeStyle=ht.stroke,t.lineWidth=Nt(4),t.fillStyle=ht.fill,ne(t,-20+this.xOff,-this.yOff*10*(this.outputsize/2),n,r,this.direction),Ct(t,-20+this.xOff,20+this.yOff*10*(this.outputsize/2-1),n,r,this.direction),Ct(t,20-this.xOff,+this.yOff*10*(this.outputsize/2-1)+this.xOff,n,r,this.direction),Ct(t,20-this.xOff,-this.yOff*10*(this.outputsize/2)-this.xOff+20,n,r,this.direction),t.closePath(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let l=0;l<this.outputsize;l++)this.direction==="LEFT"?Xt(t,String(l),n+this.output1[l].x-7,r+this.output1[l].y+2,10):this.direction==="RIGHT"?Xt(t,String(l),n+this.output1[l].x+7,r+this.output1[l].y+2,10):this.direction==="UP"?Xt(t,String(l),n+this.output1[l].x,r+this.output1[l].y-5,10):Xt(t,String(l),n+this.output1[l].x,r+this.output1[l].y+10,10);t.fill()}verilogBaseType(){return this.verilogName()+this.output1.length}generateVerilog(){return Nn.selSizes.add(this.bitWidth),Bt.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of Nn.selSizes){var r=1<<n;t+=`
`,t+="module Decoder"+r,t+="(";for(var l=0;l<r;l++)t+="out"+l+", ";t+=`sel);
`,t+="  output reg ";for(var l=0;l<r-1;l++)t+="out"+l+", ";t+="out"+(r-1)+`;
`,t+="  input ["+(n-1)+`:0] sel;
`,t+=`  
`,t+=`  always @ (*) begin
`;for(var l=0;l<r;l++)t+="    out"+l+` = 0;
`;t+=`    case (sel)
`;for(var l=0;l<r;l++)t+="      "+l+" : out"+l+` = 1;
`;t+=`    endcase
`,t+=`  end
`,t+=`endmodule
`}return t}static resetVerilog(){Nn.selSizes=new Set}}Nn.prototype.tooltipText="Decoder ToolTip : Converts coded inputs into coded outputs.";Nn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=decoder";Nn.prototype.objectType="Decoder";class $r extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1,g){super(t,n,r,l,c),this.setWidth(60),this.setHeight(20),this.rectangleObject=!1,this.directionFixed=!0,this.orientationFixed=!1,this.identifier=g||`F${this.scope.Flag.length}`,this.plotValues=[],this.xSize=10,this.flagTimeUnit=0,this.inp1=new X(40,0,0,this)}resolve(){this.flagTimeUnit=f.simulationQueue.time;const t=ir.getPlotTime(this.flagTimeUnit);if(this.plotValues.length&&this.plotValues[this.plotValues.length-1][0]===t&&this.plotValues.pop(),this.plotValues.length===0){this.plotValues.push([t,this.inp1.value]);return}this.plotValues[this.plotValues.length-1][1]!==this.inp1.value&&this.plotValues.push([t,this.inp1.value])}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{inp1:tt(this.inp1)},values:{identifier:this.identifier}}}setIdentifier(t=""){if(t.length===0)return;this.identifier=t;const n=this.identifier.length;n===1?this.xSize=20:n>1&&n<4?this.xSize=10:this.xSize=0}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(1);const n=this.x,r=this.y;Ee(t,-50+this.xSize,-20,100-2*this.xSize,40,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.font="14px Raleway",this.xOff=t.measureText(this.identifier).width,t.beginPath(),Ee(t,-40+this.xSize,-12,this.xOff+10,25,n,r,"RIGHT"),t.fillStyle="#eee",t.strokeStyle="#ccc",t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",Xt(t,this.identifier,n-35+this.xOff/2+this.xSize,r+5,14),t.fill(),t.beginPath(),t.font="30px Raleway",t.textAlign="center",t.fillStyle=["blue","red"][+(this.inp1.value===void 0)],this.inp1.value!==void 0?Xt(t,this.inp1.value.toString(16),n+35-this.xSize,r+8,25):Xt(t,"x",n+35-this.xSize,r+8,25),t.fill()}newDirection(t){t!==this.direction&&(this.direction=t,this.inp1.refresh(),t==="RIGHT"||t==="LEFT"?this.inp1.leftx=50-this.xSize:t==="UP"?this.inp1.leftx=20:this.inp1.leftx=20,this.inp1.refresh())}}$r.prototype.tooltipText="FLag ToolTip: Use this for debugging and plotting.";$r.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=flag";$r.prototype.mutableProperties={identifier:{name:"Debug Flag identifier",type:"text",maxlength:"5",func:"setIdentifier"}};$r.prototype.objectType="Flag";$r.prototype.propagationDelay=0;class ll extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.leftDimensionX=10,this.rightDimensionX=20,this.setHeight(30),this.directionFixed=!0,this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10),this.rectangleObject=!1,this.intputSize=this.bitWidth,this.inp1=new X(-10,0,0,this,this.inputSize),this.output1=new X(20,0,1,this,this.bitWidth),this.enable=new X(20,20,1,this,1)}customSave(){return{nodes:{inp1:tt(this.inp1),output1:tt(this.output1),enable:tt(this.enable)},constructorParamaters:[this.direction,this.bitWidth]}}newBitWidth(t){this.inputSize=t,this.inp1.bitWidth=this.inputSize,this.bitWidth=t,this.output1.bitWidth=t}resolve(){const t=this.inp1.value;this.output1.value=Rh(t).length-1,f.simulationQueue.add(this.output1),t!=0?this.enable.value=1:this.enable.value=0,f.simulationQueue.add(this.enable)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(3);const n=this.x,r=this.y;ji(t,n-10,r-30,30,60),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center",Xt(t,"MSB",n+6,r-12,10),Xt(t,"EN",n+this.enable.x-12,r+this.enable.y+3,8),t.fill(),t.beginPath(),t.fillStyle="green",t.textAlign="center",this.output1.value!==void 0&&Xt(t,this.output1.value,n+5,r+14,13),t.stroke(),t.fill()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.enable.verilogLabel}!=0) ? ${this.inp1.verilogLabel}[${this.inp1.bitWidth-1}] : 0;`}}ll.prototype.tooltipText="MSB ToolTip : The most significant bit or the high-order bit.";ll.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=most-significant-bit-msb-detector";ll.prototype.objectType="MSB";class ia extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.leftDimensionX=10,this.rightDimensionX=20,this.setHeight(30),this.directionFixed=!0,this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10),this.rectangleObject=!1,this.intputSize=this.bitWidth,this.inp1=new X(-10,0,0,this,this.inputSize),this.output1=new X(20,0,1,this,this.bitWidth),this.enable=new X(20,20,1,this,1)}customSave(){return{nodes:{inp1:tt(this.inp1),output1:tt(this.output1),enable:tt(this.enable)},constructorParamaters:[this.direction,this.bitWidth]}}newBitWidth(t){this.inputSize=t,this.inp1.bitWidth=this.inputSize,this.bitWidth=t,this.output1.bitWidth=t}resolve(){const t=Rh(this.inp1.value);let n=0;for(let r=t.length-1;r>=0;r--)if(t[r]==="1"){n=t.length-1-r;break}this.output1.value=n,f.simulationQueue.add(this.output1),t!=0?this.enable.value=1:this.enable.value=0,f.simulationQueue.add(this.enable)}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(3);const n=this.x,r=this.y;ji(t,n-10,r-30,30,60),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center",Xt(t,"LSB",n+6,r-12,10),Xt(t,"EN",n+this.enable.x-12,r+this.enable.y+3,8),t.fill(),t.beginPath(),t.fillStyle="green",t.textAlign="center",this.output1.value!==void 0&&Xt(t,this.output1.value,n+5,r+14,13),t.stroke(),t.fill()}generateVerilog(){return`assign ${this.output1.verilogLabel} = (${this.enable.verilogLabel}!=0) ? ${this.inp1.verilogLabel}[0] : 0;`}}ia.prototype.tooltipText="LSB ToolTip : The least significant bit or the low-order bit.";ia.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=least-significant-bit-lsb-detector";ia.prototype.objectType="LSB";class Bn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.bitWidth=c||parseInt(prompt("Enter bitWidth"),10),this.inputSize=1<<this.bitWidth,this.yOff=1,this.bitWidth<=3&&(this.yOff=2),this.setDimensions(20,this.yOff*5*this.inputSize+10),this.rightDimensionX+=10,this.directionFixed=!0,this.rectangleObject=!1,this.inp1=[];for(let g=0;g<this.inputSize;g++){const v=new X(-10,+this.yOff*10*(g-this.inputSize/2)+10,0,this,1);this.inp1.push(v)}this.output1=[];for(let g=0;g<this.bitWidth;g++){const v=new X(30,20*(g-this.bitWidth/2)+10,1,this,1);this.output1.push(v)}this.enable=new X(10,20+this.inp1[this.inputSize-1].y,1,this,1)}customSave(){return{nodes:{inp1:this.inp1.map(tt),output1:this.output1.map(tt),enable:tt(this.enable)},constructorParamaters:[this.direction,this.bitWidth]}}newBitWidth(t){if(t===void 0||t<1||t>32||this.bitWidth===t)return;this.bitWidth=t;const n=new Bn(this.x,this.y,this.scope,this.direction,this.bitWidth);return this.inputSize=1<<t,this.cleanDelete(),f.lastSelected=n,n}resolve(){let t=0,n=0;for(let r=this.inputSize-1;r>=0;r--)if(this.inp1[r].value===1){t=Rh(r);break}if(n=t,t.length!==void 0?this.enable.value=1:this.enable.value=0,f.simulationQueue.add(this.enable),n.length===void 0){n="0";for(let r=0;r<this.bitWidth-1;r++)n=`0${n}`}if(n.length!==this.bitWidth)for(let r=n.length;r<this.bitWidth;r++)n=`0${n}`;for(let r=this.bitWidth-1;r>=0;r--)this.output1[this.bitWidth-1-r].value=Number(n[r]),f.simulationQueue.add(this.output1[this.bitWidth-1-r])}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(3);const n=this.x,r=this.y;this.bitWidth<=3?ji(t,n-10,r-10-this.yOff*5*this.inputSize,40,20*(this.inputSize+1)):ji(t,n-10,r-10-this.yOff*5*this.inputSize,40,10*(this.inputSize+3)),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="black",t.textAlign="center";for(let l=0;l<this.inputSize;l++)Xt(t,String(l),n,r+this.inp1[l].y+2,10);for(let l=0;l<this.bitWidth;l++)Xt(t,String(l),n+this.output1[0].x-10,r+this.output1[l].y+2,10);Xt(t,"EN",n+this.enable.x,r+this.enable.y-5,10),t.fill()}verilogBaseType(){return this.verilogName()+this.inp1.length}generateVerilog(){return Bn.selSizes.add(this.bitWidth),Bt.prototype.generateVerilog.call(this)}static moduleVerilog(){var t="";for(var n of Bn.selSizes){var r=1<<n;t+=`
`,t+="module PriorityEncoder"+r,t+="(sel, ze, ";for(var l=0;l<r-1;l++)t+="in"+l+", ";t+="in"+(r-1)+`);
`,t+="  output reg ["+(n-1)+`:0] sel;
`,t+=`  output reg ze;
`,t+="  input ";for(var l=0;l<r-1;l++)t+="in"+l+", ";t+="in"+(r-1)+`;
`,t+=`
`,t+=`  always @ (*) begin
`,t+=`    sel = 0;
`,t+=`    ze = 0;
`,t+="    if (in"+(r-1)+`)
`,t+="      sel = "+(r-1)+`;
`;for(var l=r-2;l<=0;l++)t+="    else if (in"+l+`)
`,t+="      sel = "+l+`;
`;t+=`    else
`,t+=`      ze = 1;
`,t+=`  end
`,t+=`endmodule
`}return t}static resetVerilog(){Bn.selSizes=new Set}}Bn.prototype.tooltipText="Priority Encoder ToolTip : Compresses binary inputs into a smaller number of outputs.";Bn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/5muxandplex?id=priority-encoder";Bn.prototype.objectType="PriorityEncoder";class zr extends Bt{constructor(t,n,r=globalScope,l="LEFT",c=1,g){super(t,n,r,l,c),this.rectangleObject=!1,this.centerElement=!0,this.xSize=10,this.plotValues=[],this.inp1=new X(0,0,0,this),this.checked=!1,this.setIdentifier(g||"T"),this.setBounds(),this.scope.tunnelList[this.identifier].length>0&&this.newBitWidth(this.scope.tunnelList[this.identifier][0].bitWidth)}newDirection(t){this.direction!==t&&(this.direction=t,this.setBounds())}setBounds(){let t=0,n=0;this.direction==="LEFT"?(t=0,n=0):this.direction==="RIGHT"?(t=120-this.xSize,n=0):this.direction==="UP"?(t=60-this.xSize/2,n=-20):(t=60-this.xSize/2,n=20),this.leftDimensionX=Math.abs(-120+t+this.xSize),this.upDimensionY=Math.abs(-20+n),this.rightDimensionX=Math.abs(t),this.downDimensionY=Math.abs(20+n)}resolve(){if(this.checked){this.checked=!1;return}for(const t of this.scope.tunnelList[this.identifier])t.inp1.bitWidth!==this.inp1.bitWidth&&(this.inp1.highlighted=!0,t.inp1.highlighted=!0,ii(`BitWidth Error: ${this.inp1.bitWidth} and ${t.inp1.bitWidth}`)),t.inp1.value!==this.inp1.value&&(t.inp1.value=this.inp1.value,f.simulationQueue.add(t.inp1)),t!==this&&(t.checked=!0)}updateScope(t){this.scope=t,this.inp1.updateScope(t),this.setIdentifier(this.identifier)}setPlotValue(){}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.identifier],nodes:{inp1:tt(this.inp1)},values:{identifier:this.identifier}}}setIdentifier(t=""){if(t.length===0)return;this.scope.tunnelList[this.identifier]&&this.scope.tunnelList[this.identifier].clean(this),this.identifier=t,this.scope.tunnelList[this.identifier]?this.scope.tunnelList[this.identifier].push(this):this.scope.tunnelList[this.identifier]=[this],this.scope.tunnelList[this.identifier]&&this.scope.tunnelList[this.identifier].length>1&&(this.bitWidth=this.inp1.bitWidth=this.scope.tunnelList[this.identifier][0].bitWidth);const n=this.identifier.length;n===1?this.xSize=40:n>1&&n<4?this.xSize=20:this.xSize=0,this.setBounds()}delete(){this.scope.Tunnel.clean(this),this.scope.tunnelList[this.identifier].clean(this),super.delete()}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(1);const n=this.x,r=this.y;let l=0,c=0;this.direction==="LEFT"?(l=0,c=0):this.direction==="RIGHT"?(l=120-this.xSize,c=0):this.direction==="UP"?(l=60-this.xSize/2,c=-20):(l=60-this.xSize/2,c=20),Ee(t,-120+l+this.xSize,-20+c,120-this.xSize,40,n,r,"RIGHT"),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.font="14px Raleway",this.xOff=t.measureText(this.identifier).width,t.beginPath(),Ee(t,-105+l+this.xSize,-11+c,this.xOff+10,23,n,r,"RIGHT"),t.fillStyle="#eee",t.strokeStyle="#ccc",t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",Xt(t,this.identifier,n-100+this.xOff/2+l+this.xSize,r+6+c,14),t.fill(),t.beginPath(),t.font="30px Raleway",t.textAlign="center",t.fillStyle=["blue","red"][+(this.inp1.value===void 0)],this.inp1.value!==void 0?Xt(t,this.inp1.value.toString(16),n-23+l,r+8+c,25):Xt(t,"x",n-23+l,r+8+c,25),t.fill()}newBitWidth(t){for(let n of this.scope.tunnelList[this.identifier])if(!n.fixedBitWidth&&n.bitWidth!==void 0&&!(n.bitWidth<1)){n.bitWidth=t;for(let r=0;r<n.nodeList.length;r++)n.nodeList[r].bitWidth=t}}}zr.prototype.tooltipText="Tunnel ToolTip : Tunnel Selected.";zr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=tunnel";zr.prototype.overrideDirectionRotation=!0;zr.prototype.mutableProperties={identifier:{name:"Debug Flag identifier",type:"text",maxlength:"5",func:"setIdentifier"}};zr.prototype.objectType="Tunnel";class jn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.message="ALU",this.setDimensions(30,40),this.rectangleObject=!1,this.inp1=new X(-30,-30,0,this,this.bitwidth,"A"),this.inp2=new X(-30,30,0,this,this.bitwidth,"B"),this.controlSignalInput=new X(-10,-40,0,this,3,"Ctrl"),this.carryOut=new X(-10,40,1,this,1,"Cout"),this.output=new X(30,0,1,this,this.bitwidth,"Out")}newBitWidth(t){this.bitWidth=t,this.inp1.bitWidth=t,this.inp2.bitWidth=t,this.output.bitWidth=t}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{inp1:tt(this.inp1),inp2:tt(this.inp2),output:tt(this.output),carryOut:tt(this.carryOut),controlSignalInput:tt(this.controlSignalInput)}}}customDraw(){var t=f.context;const n=this.x,r=this.y;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(3),t.beginPath(),ne(t,30,10,n,r,this.direction),Ct(t,30,-10,n,r,this.direction),Ct(t,10,-40,n,r,this.direction),Ct(t,-30,-40,n,r,this.direction),Ct(t,-30,-20,n,r,this.direction),Ct(t,-20,-10,n,r,this.direction),Ct(t,-20,10,n,r,this.direction),Ct(t,-30,20,n,r,this.direction),Ct(t,-30,40,n,r,this.direction),Ct(t,10,40,n,r,this.direction),Ct(t,30,10,n,r,this.direction),t.closePath(),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.beginPath(),t.fillStyle="Black",t.textAlign="center",pn(t,"B",-23,30,n,r,this.direction,6),pn(t,"A",-23,-30,n,r,this.direction,6),pn(t,"CTR",-10,-30,n,r,this.direction,6),pn(t,"Carry",-10,30,n,r,this.direction,6),pn(t,"Ans",20,0,n,r,this.direction,6),t.fill(),t.beginPath(),t.fillStyle="DarkGreen",pn(t,this.message,0,0,n,r,this.direction,12),t.fill()}resolve(){if(this.controlSignalInput.value===0)this.output.value=this.inp1.value&this.inp2.value,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut),this.message="A&B";else if(this.controlSignalInput.value===1)this.output.value=this.inp1.value|this.inp2.value,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut),this.message="A|B";else if(this.controlSignalInput.value===2){const t=this.inp1.value+this.inp2.value;this.output.value=t<<32-this.bitWidth>>>32-this.bitWidth,this.carryOut.value=+(t>>>this.bitWidth!==0),f.simulationQueue.add(this.carryOut),f.simulationQueue.add(this.output),this.message="A+B"}else this.controlSignalInput.value===3?this.message="ALU":this.controlSignalInput.value===4?(this.message="A&~B",this.output.value=this.inp1.value&this.flipBits(this.inp2.value),f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut)):this.controlSignalInput.value===5?(this.message="A|~B",this.output.value=this.inp1.value|this.flipBits(this.inp2.value),f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut)):this.controlSignalInput.value===6?(this.message="A-B",this.output.value=this.inp1.value-this.inp2.value<<32-this.bitWidth>>>32-this.bitWidth,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut)):this.controlSignalInput.value===7&&(this.message="A<B",this.inp1.value<this.inp2.value?this.output.value=1:this.output.value=0,f.simulationQueue.add(this.output),this.carryOut.value=0,f.simulationQueue.add(this.carryOut))}}jn.prototype.tooltipText="ALU ToolTip: 0: A&B, 1:A|B, 2:A+B, 4:A&~B, 5:A|~B, 6:A-B, 7:SLT ";jn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/8misc?id=alu";jn.prototype.objectType="ALU";class Fr extends Bt{constructor(t,n,r=globalScope,l=15,c=20){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.rectangleObject=!1,this.cols=c||parseInt(prompt("Enter cols:"),10),this.rows=l||parseInt(prompt("Enter rows:"),10),this.setSize()}changeRowSize(t){if(!(t===void 0||t<5||t>1e3)&&this.rows!==t)return this.rows=parseInt(t,10),this.setSize(),this}changeColSize(t){if(!(t===void 0||t<5||t>1e3)&&this.cols!==t)return this.cols=parseInt(t,10),this.setSize(),this}keyDown3(t){t==="ArrowRight"&&this.changeColSize(this.cols+2),t==="ArrowLeft"&&this.changeColSize(this.cols-2),t==="ArrowDown"&&this.changeRowSize(this.rows+2),t==="ArrowUp"&&this.changeRowSize(this.rows-2)}customSave(){return{constructorParamaters:[this.rows,this.cols]}}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([5*globalScope.scale,5*globalScope.scale]),t.lineWidth=Nt(1.5);const n=this.x,r=this.y;ji(t,n,r,this.elementWidth,this.elementHeight),t.stroke(),(f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(255, 255, 32,0.1)",t.fill()),t.setLineDash([])}setSize(){this.elementWidth=this.cols*10,this.elementHeight=this.rows*10,this.upDimensionY=0,this.leftDimensionX=0,this.rightDimensionX=this.elementWidth,this.downDimensionY=this.elementHeight}}Fr.prototype.tooltipText="Rectangle ToolTip : Used to Box the Circuit or area you want to highlight.";Fr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/7annotation?id=rectangle";Fr.prototype.propagationDelayFixed=!0;Fr.prototype.mutableProperties={cols:{name:"Columns",type:"number",max:"1000",min:"5",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"1000",min:"5",func:"changeRowSize"}};Fr.prototype.objectType="Rectangle";class na extends Bt{constructor(t,n,r=globalScope,l="RIGHT"){super(t,n,r,l,8),this.rectangleObject=!1,this.fixedBitWidth=!0,this.setDimensions(30,20)}customSave(){return{constructorParamaters:[this.direction]}}customDraw(){var t=f.context;t.lineWidth=Nt(3);const n=this.x,r=this.y;t.strokeStyle=ht.stroke_alt,t.fillStyle=ht.fill,t.beginPath(),ne(t,-30,-3,n,r,this.direction),Ct(t,10,-3,n,r,this.direction),Ct(t,10,-15,n,r,this.direction),Ct(t,30,0,n,r,this.direction),Ct(t,10,15,n,r,this.direction),Ct(t,10,3,n,r,this.direction),Ct(t,-30,3,n,r,this.direction),t.closePath(),t.stroke(),(this.hover&&!f.shiftDown||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill()}}na.prototype.tooltipText="Arrow ToolTip : Arrow Selected.";na.prototype.propagationDelayFixed=!0;na.prototype.helplink="https://docs.circuitverse.org/#/chapter4/7annotation?id=arrow";na.prototype.objectType="Arrow";class Qs extends Bt{constructor(t,n,r=globalScope,l=8){super(t,n,r,"RIGHT",l),this.directionFixed=!0,this.rectangleObject=!0,this.setDimensions(20,20),this.maxValue=new X(-20,-10,0,this,this.bitWidth,"MaxValue"),this.clock=new X(-20,10,0,this,1,"Clock"),this.reset=new X(0,20,0,this,1,"Reset"),this.output=new X(20,-10,1,this,this.bitWidth,"Value"),this.zero=new X(20,10,1,this,1,"Zero"),this.value=0,this.prevClockState=void 0}customSave(){return{nodes:{maxValue:tt(this.maxValue),clock:tt(this.clock),reset:tt(this.reset),output:tt(this.output),zero:tt(this.zero)},constructorParamaters:[this.bitWidth]}}newBitWidth(t){this.bitWidth=t,this.maxValue.bitWidth=t,this.output.bitWidth=t}isResolvable(){return!0}resolve(){var t=this.maxValue.value!=null?this.maxValue.value:(1<<this.bitWidth)-1,n=this.value;this.clock.value!=this.prevClockState&&this.clock.value==1&&n++,this.prevClockState=this.clock.value,n=n%(t+1),this.reset.value==1&&(n=0),this.value=n,this.output.value!=n&&(this.output.value=n,f.simulationQueue.add(this.output));var r=this.clock.value==1&&n==0?1:0;this.zero.value!=r&&(this.zero.value=r,f.simulationQueue.add(this.zero))}customDraw(){var t=f.context,n=this.x,r=this.y;t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Xt(t,this.value.toString(16),this.x,this.y+5),t.fill(),t.strokeStyle=ht.stroke,t.beginPath(),ne(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.beginPath(),r.font="20px Raleway",r.fillStyle="green",r.textAlign="center",Xt(r,this.value.toString(16),l+10,c+17),r.fill(),r.beginPath(),r.lineWidth=Nt(1),Ee(r,0,0,20,20,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}static moduleVerilog(){return`
    module Counter(val, zero, max, clk, rst);
      parameter WIDTH = 1;
      output reg [WIDTH-1:0] val;
      output reg zero;
      input [WIDTH-1:0] max;
      input clk, rst;
    
      initial
        val = 0;
    
      always @ (val)
        if (val == 0)
          zero = 1;
        else
          zero = 0;
    
      always @ (posedge clk or posedge rst) begin
        if (rst)
          val <= 0;
        else
          if (val == max)
            val <= 0;
          else
            val <= val + 1;
      end
    endmodule`}}Qs.prototype.tooltipText="Counter: a binary counter from zero to a given maximum value";Qs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=counter";Qs.prototype.objectType="Counter";Qs.prototype.objectType="Counter";Qs.prototype.canShowInSubcircuit=!0;Qs.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:0,upDimensionY:0,downDimensionY:20};class jr extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.directionFixed=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.currentRandomNo=0,this.clockInp=new X(-20,10,0,this,1,"Clock"),this.maxValue=new X(-20,-10,0,this,this.bitWidth,"MaxValue"),this.output=new X(20,-10,1,this,this.bitWidth,"RandomValue"),this.prevClockState=0,this.wasClicked=!1}isResolvable(){return this.clockInp.value!=null&&(this.maxValue.value!=null||this.maxValue.connections.length==0)}newBitWidth(t){this.bitWidth=t,this.maxValue.bitWidth=t,this.output.bitWidth=t}resolve(){var t=this.maxValue.connections.length?this.maxValue.value+1:2<<this.bitWidth-1;this.clockInp.value!=null&&this.clockInp.value!=this.prevClockState&&(this.clockInp.value==1&&(this.currentRandomNo=Math.floor(Math.random()*t)),this.prevClockState=this.clockInp.value),this.output.value!=this.currentRandomNo&&(this.output.value=this.currentRandomNo,f.simulationQueue.add(this.output))}customSave(){var t={nodes:{clockInp:tt(this.clockInp),maxValue:tt(this.maxValue),output:tt(this.output)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.fillStyle=ht.fill,t.strokeStyle=ht.stroke,t.beginPath();var n=this.x,r=this.y;t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Xt(t,this.currentRandomNo.toString(10),this.x,this.y+5),t.fill(),t.beginPath(),ne(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke()}subcircuitDraw(t=0,n=0){var r=f.context,l=this.subcircuitMetadata.x+t,c=this.subcircuitMetadata.y+n;r.beginPath(),r.font="20px Raleway",r.fillStyle="green",r.textAlign="center",Xt(r,this.currentRandomNo.toString(16),l+10,c+17),r.fill(),r.beginPath(),r.lineWidth=Nt(1),Ee(r,0,0,20,20,l,c,this.direction),r.stroke(),(this.hover&&!f.shiftDown||f.lastSelected==this||f.multipleObjectSelections.contains(this))&&(r.fillStyle="rgba(255, 255, 32,0.6)",r.fill())}static moduleVerilog(){return`
      module Random(val, clk, max);
        parameter WIDTH = 1;
        output reg [WIDTH-1:0] val;
        input clk;
        input [WIDTH-1:0] max;
      
        always @ (posedge clk)
          if (^max === 1'bX)
            val = $urandom_range(0, {WIDTH{1'b1}});
          else
            val = $urandom_range(0, max);
      endmodule
      `}}jr.prototype.tooltipText="Random ToolTip : Random Selected.";jr.prototype.helplink="https://docs.circuitverse.org/#/chapter4/2input?id=random";jr.prototype.objectType="Random";jr.prototype.canShowInSubcircuit=!0;jr.prototype.layoutProperties={rightDimensionX:20,leftDimensionX:0,upDimensionY:0,downDimensionY:20};class Zi extends Bt{constructor(t,n,r=globalScope,{rows:l=8,columns:c=8,ledSize:g=2,showGrid:v=!0,colors:w=[]}={}){super(t,n,r,"RIGHT",8),this.fixedBitWidth=!0,this.directionFixed=!0,this.rectangleObject=!0,this.alwaysResolve=!0,this.labelDirection="UP",this.leftDimensionX=0,this.upDimensionY=0,this.rowEnableNodes=[],this.columnEnableNodes=[],this.columnColorNodes=[],this.colorNode=new X(0,-10,NODE_INPUT,this,24,"COLOR"),this.rowNode=new X(0,0,NODE_INPUT,this,1,"ROW"),this.columnNode=new X(0,10,NODE_INPUT,this,1,"COLUMN"),this.colors=w,this.showGrid=v,this.changeSize(l,c,g,!1)}toggleGrid(){this.showGrid=!this.showGrid}changeRows(t){this.changeSize(t,this.columns,this.ledSize,!0)}changeColumns(t){this.changeSize(this.rows,t,this.ledSize,!0)}changeLedSize(t){this.changeSize(this.rows,this.columns,t,!0)}changeSize(t,n,r,l){if(t=parseInt(t,10),!(isNaN(t)||t<0||t>this.maxRows)&&(n=parseInt(n,10),!(isNaN(n)||n<0||n>this.maxColumns)&&(r=parseInt(r,10),!(isNaN(r)||r<0||r>this.maxLedSize)))){var c=10*r,g=10*r,v=c*n,w=g*t,D=r%2?5:10,T=v/2+D,R=w/2+D;l&&(this.x-=this.leftDimensionX-T,this.y-=this.upDimensionY-R),this.setDimensions(T,R);var M=[10,20,20][r-1],L=M-T,E=M-R,Q=r!=this.ledSize;for(this.rowEnableNodes.splice(Q?0:t).forEach(A=>A.delete()),this.rowEnableNodes.forEach((A,q)=>{A.x=A.leftx=-T,A.y=A.lefty=q*g+E});this.rowEnableNodes.length<t;)this.rowEnableNodes.push(new X(-T,this.rowEnableNodes.length*g+E,NODE_INPUT,this,1,"R"+this.rowEnableNodes.length));for(this.columnEnableNodes.splice(Q?0:n).forEach(A=>A.delete()),this.columnEnableNodes.forEach((A,q)=>{A.x=A.leftx=q*c+L,A.y=A.lefty=R});this.columnEnableNodes.length<n;)this.columnEnableNodes.push(new X(this.columnEnableNodes.length*c+L,R,NODE_INPUT,this,1,"C"+this.columnEnableNodes.length));for(this.columnColorNodes.splice(Q?0:n).forEach(A=>A.delete()),this.columnColorNodes.forEach((A,q)=>{A.x=A.leftx=q*c+L,A.y=A.lefty=-R});this.columnColorNodes.length<n;)this.columnColorNodes.push(new X(this.columnColorNodes.length*c+L,-R,NODE_INPUT,this,24,"CLR"+this.columnColorNodes.length));for(this.colors.splice(t),this.colors.forEach(A=>A.splice(n));this.colors.length<t;)this.colors.push([]);this.rowNode.bitWidth=Math.ceil(Math.log2(t)),this.rowNode.label="ROW ("+this.rowNode.bitWidth+" bits)",this.columnNode.bitWidth=Math.ceil(Math.log2(n)),this.columnNode.label="COLUMN ("+this.columnNode.bitWidth+" bits)";var lt=t>1?E:E-10,B=t<=2?10:g;return[this.colorNode,this.rowNode,this.columnNode].forEach((A,q)=>{A.x=A.leftx=T,A.y=A.lefty=q*B+lt}),this.rows=t,this.columns=n,this.ledSize=r,this}}customSave(){return{constructorParamaters:[{rows:this.rows,columns:this.columns,ledSize:this.ledSize,showGrid:this.showGrid,colors:this.colors}],nodes:{rowEnableNodes:this.rowEnableNodes.map(tt),columnEnableNodes:this.columnEnableNodes.map(tt),columnColorNodes:this.columnColorNodes.map(tt),colorNode:tt(this.colorNode),rowNode:tt(this.rowNode),columnNode:tt(this.columnNode)}}}resolve(){for(var t=this.colorNode.value,n=t!=null,r=this.rows,l=this.columns,c=this.rowEnableNodes,g=this.columnEnableNodes,v=this.columnColorNodes,w=this.colors,D=0;D<r;D++)if(c[D].value===1)for(var T=0;T<l;T++){var R=v[T].value;R!==void 0&&(w[D][T]=R),n&&g[T].value===1&&(w[D][T]=t)}var M=this.rowNode.value!=null||r==1,L=this.columnNode.value!=null||l==1;if(n&&M&&L){var E=this.rowNode.value||0,Q=this.columnNode.value||0;E<r&&Q<l&&(w[E][Q]=t)}}customDraw(){for(var t=f.context,n=this.rows,r=this.columns,l=this.colors,c=this.x,g=this.y,v=this.direction,w=10*this.ledSize,D=10*this.ledSize,T=this.rowEnableNodes[0].y-D/2,R=this.columnColorNodes[0].x-w/2,M=this.columns*w,L=this.rows*D,E=T+L,Q=R+M,[lt,B]=Ci(w*globalScope.scale,D*globalScope.scale,v),A=Math.round(globalScope.ox+c*globalScope.scale),q=Math.round(globalScope.oy+g*globalScope.scale),z=0;z<n;z++)for(var it=0;it<r;it++){var xt=l[z][it]||0;t.beginPath(),t.fillStyle="rgb("+((xt&16711680)>>16)+","+((xt&65280)>>8)+","+(xt&255)+")";let wt,Dt;[wt,Dt]=Ci(R+it*w,T+z*D,v),wt=wt*globalScope.scale,Dt=Dt*globalScope.scale,t.rect(A+wt,q+Dt,lt,B),t.fill()}if(this.showGrid){t.beginPath(),t.strokeStyle="#323232",t.lineWidth=Nt(1),Ee(t,R,T,M,L,c,g,v);for(var rt=R+w;rt<Q;rt+=w)ne(t,rt,T,c,g,v),Ct(t,rt,E,c,g,v);for(var at=T+D;at<E;at+=D)ne(t,R,at,c,g,v),Ct(t,Q,at,c,g,v);t.stroke()}}}Zi.prototype.tooltipText="RGB Led Matrix";Zi.prototype.maxRows=128;Zi.prototype.maxColumns=128;Zi.prototype.maxLedSize=3;Zi.prototype.mutableProperties={rows:{name:"Rows",type:"number",max:Zi.prototype.maxRows,min:1,func:"changeRows"},columns:{name:"Columns",type:"number",max:Zi.prototype.maxColumns,min:1,func:"changeColumns"},ledSize:{name:"LED Size",type:"number",max:Zi.prototype.maxLedSize,min:1,func:"changeLedSize"},showGrid:{name:"Toggle Grid",type:"button",max:Zi.prototype.maxLedSize,min:1,func:"toggleGrid"}};Zi.prototype.objectType="RGBLedMatrix";class hl extends Bt{constructor(t,n,r=globalScope,l="RIGHT"){super(t,n,r,l,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.clockInp=new X(-20,10,0,this,1,"Clock"),this.dInp=new X(-20,-10,0,this,this.bitWidth,"T"),this.qOutput=new X(20,-10,1,this,this.bitWidth,"Q"),this.qInvOutput=new X(20,10,1,this,this.bitWidth,"Q Inverse"),this.reset=new X(10,20,0,this,1,"Asynchronous Reset"),this.preset=new X(0,20,0,this,this.bitWidth,"Preset"),this.en=new X(-10,20,0,this,1,"Enable"),this.masterState=0,this.slaveState=0,this.prevClockState=0}isResolvable(){return this.reset.value==1||this.clockInp.value!=null&&this.dInp.value!=null}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}resolve(){this.reset.value==1?this.masterState=this.slaveState=this.preset.value||0:this.en.value==0?this.prevClockState=this.clockInp.value:(this.en.value==1||this.en.connections.length==0)&&(this.clockInp.value==this.prevClockState?this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value^this.slaveState):this.clockInp.value!=null&&(this.clockInp.value==1?this.slaveState=this.masterState:this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value^this.slaveState),this.prevClockState=this.clockInp.value)),this.qOutput.value!=this.slaveState&&(this.qOutput.value=this.slaveState,this.qInvOutput.value=this.flipBits(this.slaveState),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput))}customSave(){var t={nodes:{clockInp:tt(this.clockInp),dInp:tt(this.dInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Nt(3);var n=this.x,r=this.y;ne(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Xt(t,this.slaveState.toString(16),n,r+5),t.fill()}static moduleVerilog(){return`
        module TflipFlop(q, q_inv, clk, t, a_rst, pre, en);
          parameter WIDTH = 1;
          output reg [WIDTH-1:0] q, q_inv;
          input clk, a_rst, pre, en;
          input [WIDTH-1:0] t;
        
          always @ (posedge clk or posedge a_rst)
            if (a_rst) begin
              q <= 'b0;
              q_inv <= 'b1;
            end else if (en == 0) ;
            else if (t) begin
              q <= q ^ t;
              q_inv <= ~q ^ t;
            end
        endmodule
        `}}hl.prototype.tooltipText="T FlipFlop ToolTip :  Changes state / Toggles whenever the clock input is strobed.";hl.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=t-flip-flop";hl.prototype.objectType="TflipFlop";class sa extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.directionFixed=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.clockInp=new X(-20,10,0,this,1,"Clock"),this.dInp=new X(-20,-10,0,this,this.bitWidth,"D"),this.qOutput=new X(20,-10,1,this,this.bitWidth,"Q"),this.qInvOutput=new X(20,10,1,this,this.bitWidth,"Q Inverse"),this.reset=new X(10,20,0,this,1,"Asynchronous Reset"),this.preset=new X(0,20,0,this,this.bitWidth,"Preset"),this.en=new X(-10,20,0,this,1,"Enable"),this.masterState=0,this.slaveState=0,this.prevClockState=0,this.wasClicked=!1}isResolvable(){return!0}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}resolve(){this.reset.value==1?this.masterState=this.slaveState=this.preset.value||0:this.en.value==0?this.prevClockState=this.clockInp.value:(this.en.value==1||this.en.connections.length==0)&&(this.clockInp.value==this.prevClockState?this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value):this.clockInp.value!=null&&(this.clockInp.value==1?this.slaveState=this.masterState:this.clockInp.value==0&&this.dInp.value!=null&&(this.masterState=this.dInp.value),this.prevClockState=this.clockInp.value)),this.qOutput.value!=this.slaveState&&(this.qOutput.value=this.slaveState,this.qInvOutput.value=this.flipBits(this.slaveState),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput))}customSave(){var t={nodes:{clockInp:tt(this.clockInp),dInp:tt(this.dInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Nt(3);var n=this.x,r=this.y;ne(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Xt(t,this.slaveState.toString(16),n,r+5),t.fill()}static moduleVerilog(){return`
module DflipFlop(q, q_inv, clk, d, a_rst, pre, en);
    parameter WIDTH = 1;
    output reg [WIDTH-1:0] q, q_inv;
    input clk, a_rst, pre, en;
    input [WIDTH-1:0] d;

    always @ (posedge clk or posedge a_rst)
    if (a_rst) begin
        q <= 'b0;
        q_inv <= 'b1;
    end else if (en == 0) ;
    else begin
        q <= d;
        q_inv <= ~d;
    end
endmodule
    `}}sa.prototype.tooltipText="D FlipFlop ToolTip : Introduces delay in timing circuit.";sa.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=d-flip-flop";sa.prototype.objectType="DflipFlop";class ul extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.directionFixed=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.clockInp=new X(-20,10,0,this,1,"Clock"),this.dInp=new X(-20,-10,0,this,this.bitWidth,"D"),this.qOutput=new X(20,-10,1,this,this.bitWidth,"Q"),this.qInvOutput=new X(20,10,1,this,this.bitWidth,"Q Inverse"),this.state=0,this.prevClockState=0,this.wasClicked=!1}isResolvable(){return this.clockInp.value!=null&&this.dInp.value!=null}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t}resolve(){this.clockInp.value==1&&this.dInp.value!=null&&(this.state=this.dInp.value),this.qOutput.value!=this.state&&(this.qOutput.value=this.state,this.qInvOutput.value=this.flipBits(this.state),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput))}customSave(){var t={nodes:{clockInp:tt(this.clockInp),dInp:tt(this.dInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput)},constructorParamaters:[this.direction,this.bitWidth]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Nt(3);var n=this.x,r=this.y;ne(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Xt(t,this.state.toString(16),n,r+5),t.fill()}}ul.prototype.tooltipText="D Latch : Single input Flip flop or D FlipFlop";ul.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=d-latch";ul.prototype.objectType="Dlatch";class cl extends Bt{constructor(t,n,r=globalScope,l="RIGHT"){super(t,n,r,l,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.R=new X(-20,10,0,this,1,"R"),this.S=new X(-20,-10,0,this,1,"S"),this.qOutput=new X(20,-10,1,this,1,"Q"),this.qInvOutput=new X(20,10,1,this,1,"Q Inverse"),this.reset=new X(10,20,0,this,1,"Asynchronous Reset"),this.preset=new X(0,20,0,this,1,"Preset"),this.en=new X(-10,20,0,this,1,"Enable"),this.state=0}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}isResolvable(){return!0}resolve(){this.reset.value==1?this.state=this.preset.value||0:(this.en.value==1||this.en.connections==0)&&this.S.value^this.R.value&&(this.state=this.S.value),this.qOutput.value!=this.state&&(this.qOutput.value=this.state,this.qInvOutput.value=this.flipBits(this.state),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput))}customSave(){var t={nodes:{S:tt(this.S),R:tt(this.R),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Nt(3);var n=this.x,r=this.y;t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",this.state?Xt(t,this.state.toString(16),n,r+5):Xt(t,"0",n,r+5),t.fill()}}cl.prototype.tooltipText="SR FlipFlop ToolTip : SR FlipFlop Selected.";cl.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=sr-flip-flop";cl.prototype.objectType="SRflipFlop";class dl extends Bt{constructor(t,n,r=globalScope,l="RIGHT"){super(t,n,r,l,1),this.directionFixed=!0,this.fixedBitWidth=!0,this.setDimensions(20,20),this.rectangleObject=!0,this.J=new X(-20,-10,0,this,1,"J"),this.K=new X(-20,0,0,this,1,"K"),this.clockInp=new X(-20,10,0,this,1,"Clock"),this.qOutput=new X(20,-10,1,this,1,"Q"),this.qInvOutput=new X(20,10,1,this,1,"Q Inverse"),this.reset=new X(10,20,0,this,1,"Asynchronous Reset"),this.preset=new X(0,20,0,this,1,"Preset"),this.en=new X(-10,20,0,this,1,"Enable"),this.state=0,this.slaveState=0,this.masterState=0,this.prevClockState=0}isResolvable(){return this.reset.value==1||this.clockInp.value!=null&&this.J.value!=null&&this.K.value!=null}newBitWidth(t){this.bitWidth=t,this.dInp.bitWidth=t,this.qOutput.bitWidth=t,this.qInvOutput.bitWidth=t,this.preset.bitWidth=t}resolve(){this.reset.value==1?this.masterState=this.slaveState=this.preset.value||0:this.en.value==0?this.prevClockState=this.clockInp.value:(this.en.value==1||this.en.connections.length==0)&&(this.clockInp.value==this.prevClockState?this.clockInp.value==0&&this.J.value!=null&&this.K.value!=null&&(this.J.value&&this.K.value?this.masterState=1^this.slaveState:this.J.value^this.K.value&&(this.masterState=this.J.value)):this.clockInp.value!=null&&(this.clockInp.value==1?this.slaveState=this.masterState:this.clockInp.value==0&&this.J.value!=null&&this.K.value!=null&&(this.J.value&&this.K.value?this.masterState=1^this.slaveState:this.J.value^this.K.value&&(this.masterState=this.J.value)),this.prevClockState=this.clockInp.value)),this.qOutput.value!=this.slaveState&&(this.qOutput.value=this.slaveState,this.qInvOutput.value=this.flipBits(this.slaveState),f.simulationQueue.add(this.qOutput),f.simulationQueue.add(this.qInvOutput))}customSave(){var t={nodes:{J:tt(this.J),K:tt(this.K),clockInp:tt(this.clockInp),qOutput:tt(this.qOutput),qInvOutput:tt(this.qInvOutput),reset:tt(this.reset),preset:tt(this.preset),en:tt(this.en)},constructorParamaters:[this.direction]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Nt(3);var n=this.x,r=this.y;ne(t,-20,5,n,r,this.direction),Ct(t,-15,10,n,r,this.direction),Ct(t,-20,15,n,r,this.direction),t.stroke(),t.beginPath(),t.font="20px Raleway",t.fillStyle=ht.input_text,t.textAlign="center",Xt(t,this.slaveState.toString(16),n,r+5),t.fill()}}dl.prototype.tooltipText="JK FlipFlop ToolTip : gated SR flip-flop with the addition of a clock input.";dl.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=jk-flip-flop";dl.prototype.objectType="JKflipFlop";class hs extends Bt{constructor(t,n,r=globalScope,l=3,c=32){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.cols=c||parseInt(prompt("Enter cols:")),this.rows=l||parseInt(prompt("Enter rows:")),this.elementWidth=Math.max(40,Math.ceil(this.cols/2)*20),this.elementHeight=Math.max(40,Math.ceil(this.rows*15/20)*20),this.setWidth(this.elementWidth/2),this.setHeight(this.elementHeight/2),this.clockInp=new X(-this.elementWidth/2,this.elementHeight/2-10,0,this,1,"Clock"),this.asciiInp=new X(-this.elementWidth/2,this.elementHeight/2-30,0,this,7,"Ascii Input"),this.reset=new X(30-this.elementWidth/2,this.elementHeight/2,0,this,1,"Reset"),this.en=new X(10-this.elementWidth/2,this.elementHeight/2,0,this,1,"Enable"),this.prevClockState=0,this.data="",this.buffer=""}changeRowSize(t){if(!(t==null||t<1||t>10)&&this.rows!=t){var n=new hs(this.x,this.y,this.scope,t,this.cols);return this.delete(),f.lastSelected=n,n}}changeColSize(t){if(!(t==null||t<20||t>100)&&this.cols!=t){var n=new hs(this.x,this.y,this.scope,this.rows,t);return this.delete(),f.lastSelected=n,n}}isResolvable(){return this.reset.value==1?!0:this.en.value==0||this.en.connections.length&&this.en.value==null||this.clockInp.value==null?!1:this.asciiInp.value!=null}resolve(){if(this.reset.value==1){this.data="";return}if(this.en.value==0){this.buffer="";return}this.clockInp.value==this.prevClockState?this.clockInp.value==0&&(this.buffer=String.fromCharCode(this.asciiInp.value)):this.clockInp.value!=null&&(this.clockInp.value==1?(this.data+=this.buffer,this.data.length>this.cols*this.rows&&(this.data=this.data.slice(1))):this.clockInp.value==0&&(this.buffer=String.fromCharCode(this.asciiInp.value)),this.prevClockState=this.clockInp.value)}customSave(){var t={nodes:{clockInp:tt(this.clockInp),asciiInp:tt(this.asciiInp),reset:tt(this.reset),en:tt(this.en)},constructorParamaters:[this.rows,this.cols]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Nt(3);var n=this.x,r=this.y;ne(t,-this.elementWidth/2,this.elementHeight/2-15,n,r,this.direction),Ct(t,5-this.elementWidth/2,this.elementHeight/2-10,n,r,this.direction),Ct(t,-this.elementWidth/2,this.elementHeight/2-5,n,r,this.direction),t.stroke(),t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";for(var l=-7.5*this.rows+3,c=0;c<this.data.length;c+=this.cols){var g=this.data.slice(c,c+this.cols);g+=" ".repeat(this.cols-g.length),Es(t,g,0,l+c/this.cols*15+9,n,r,15,"Courier New","center")}t.fill()}}hs.prototype.tooltipText="TTY ToolTip : Tele typewriter selected.";hs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=tty";hs.prototype.mutableProperties={cols:{name:"Columns",type:"number",max:"100",min:"20",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"10",min:"1",func:"changeRowSize"}};hs.prototype.objectType="TTY";class Zs extends Bt{constructor(t,n,r=globalScope,l=32){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.bufferSize=l||parseInt(prompt("Enter buffer size:")),this.elementWidth=Math.max(80,Math.ceil(this.bufferSize/2)*20),this.elementHeight=40,this.setWidth(this.elementWidth/2),this.setHeight(this.elementHeight/2),this.clockInp=new X(-this.elementWidth/2,this.elementHeight/2-10,0,this,1,"Clock"),this.asciiOutput=new X(30,this.elementHeight/2,1,this,7,"Ascii Output"),this.available=new X(10,this.elementHeight/2,1,this,1,"Available"),this.reset=new X(-10,this.elementHeight/2,0,this,1,"Reset"),this.en=new X(-30,this.elementHeight/2,0,this,1,"Enable"),this.prevClockState=0,this.buffer="",this.bufferOutValue=void 0}changeBufferSize(t){if(!(t==null||t<20||t>100)&&this.bufferSize!=t){var n=new Zs(this.x,this.y,this.scope,t);return this.delete(),f.lastSelected=n,n}}keyDown(t){t.length==1&&(this.buffer+=t,this.buffer.length>this.bufferSize&&(this.buffer=this.buffer.slice(1)))}isResolvable(){return this.reset.value==1?!0:this.en.value==0||this.en.connections.length&&this.en.value==null?!1:this.clockInp.value!=null}resolve(){if(this.reset.value==1){this.buffer="";return}this.en.value!=0&&(this.available.value!=0&&(this.available.value=0,f.simulationQueue.add(this.available)),this.clockInp.value==this.prevClockState?this.clockInp.value==0&&(this.buffer.length?this.bufferOutValue=this.buffer[0].charCodeAt(0):this.bufferOutValue=void 0):this.clockInp.value!=null&&(this.clockInp.value==1&&this.buffer.length?this.bufferOutValue==this.buffer[0].charCodeAt(0)&&(this.buffer=this.buffer.slice(1)):this.buffer.length?this.bufferOutValue=this.buffer[0].charCodeAt(0):this.bufferOutValue=void 0,this.prevClockState=this.clockInp.value),this.asciiOutput.value!=this.bufferOutValue&&(this.asciiOutput.value=this.bufferOutValue,f.simulationQueue.add(this.asciiOutput)),this.bufferOutValue!==void 0&&this.available.value!=1&&(this.available.value=1,f.simulationQueue.add(this.available)))}customSave(){var t={nodes:{clockInp:tt(this.clockInp),asciiOutput:tt(this.asciiOutput),available:tt(this.available),reset:tt(this.reset),en:tt(this.en)},constructorParamaters:[this.bufferSize]};return t}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.beginPath(),t.lineWidth=Nt(3);var n=this.x,r=this.y;ne(t,-this.elementWidth/2,this.elementHeight/2-15,n,r,this.direction),Ct(t,5-this.elementWidth/2,this.elementHeight/2-10,n,r,this.direction),Ct(t,-this.elementWidth/2,this.elementHeight/2-5,n,r,this.direction),t.stroke(),t.beginPath(),t.fillStyle=ht.input_text,t.textAlign="center";var l=this.buffer+" ".repeat(this.bufferSize-this.buffer.length);Es(t,l,0,5,n,r,15,"Courier New","center"),t.fill()}}Zs.prototype.tooltipText="Keyboard";Zs.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=keyboard";Zs.prototype.mutableProperties={bufferSize:{name:"Buffer Size",type:"number",max:"100",min:"20",func:"changeBufferSize"}};Zs.prototype.objectType="Keyboard";class yn extends Bt{constructor(t,n,r=globalScope,l="RIGHT"){super(t,n,r,l,1),this.fixedBitWidth=!0,this.output1=new X(10,0,1,this,1),this.state=0,this.output1.value=this.state,this.wasClicked=!1,this.interval=null}customSave(){var t={nodes:{output1:tt(this.output1)},constructorParamaters:[this.direction]};return t}resolve(){this.output1.value=this.state,f.simulationQueue.add(this.output1)}toggleState(){this.state=(this.state+1)%2,this.output1.value=this.state}customDraw(){var t=f.context;t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(3);var n=this.x,r=this.y;t.beginPath(),t.strokeStyle=[ht.color_wire_con,ht.color_wire_pow][this.state],t.lineWidth=Nt(2),this.state==0?(ne(t,-6,0,n,r,"RIGHT"),Ct(t,-6,5,n,r,"RIGHT"),Ct(t,0,5,n,r,"RIGHT"),Ct(t,0,-5,n,r,"RIGHT"),Ct(t,6,-5,n,r,"RIGHT"),Ct(t,6,0,n,r,"RIGHT")):(ne(t,-6,0,n,r,"RIGHT"),Ct(t,-6,-5,n,r,"RIGHT"),Ct(t,0,-5,n,r,"RIGHT"),Ct(t,0,5,n,r,"RIGHT"),Ct(t,6,5,n,r,"RIGHT"),Ct(t,6,0,n,r,"RIGHT")),t.stroke()}static verilogInstructions(){return`Clock - Use a single global clock
`}}yn.prototype.tooltipText="Clock";yn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=clock";yn.prototype.click=yn.prototype.toggleState;yn.prototype.objectType="Clock";yn.prototype.propagationDelay=0;yn.prototype.propagationDelayFixed=!0;class vn extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=8,g=10){super(t,n,r,l,Math.min(Math.max(1,c),32)),this.setDimensions(60,40),this.directionFixed=!0,this.labelDirection="UP",this.addressWidth=Math.min(Math.max(1,g),this.maxAddressWidth),this.address=new X(-this.leftDimensionX,-20,0,this,this.addressWidth,"ADDRESS"),this.dataIn=new X(-this.leftDimensionX,0,0,this,this.bitWidth,"DATA IN"),this.write=new X(-this.leftDimensionX,20,0,this,1,"WRITE"),this.reset=new X(0,this.downDimensionY,0,this,1,"RESET"),this.coreDump=new X(-20,this.downDimensionY,0,this,1,"CORE DUMP"),this.dataOut=new X(this.rightDimensionX,0,1,this,this.bitWidth,"DATA OUT"),this.prevCoreDumpValue=void 0,this.clearData()}customSave(){return{constructorParamaters:[this.direction,this.bitWidth,this.addressWidth],nodes:{address:tt(this.address),dataIn:tt(this.dataIn),write:tt(this.write),reset:tt(this.reset),coreDump:tt(this.coreDump),dataOut:tt(this.dataOut)}}}newBitWidth(t){t=parseInt(t),!isNaN(t)&&this.bitWidth!=t&&t>=1&&t<=32&&(this.bitWidth=t,this.dataIn.bitWidth=t,this.dataOut.bitWidth=t,this.clearData())}changeAddressWidth(t){t=parseInt(t),!isNaN(t)&&this.addressWidth!=t&&t>=1&&t<=this.maxAddressWidth&&(this.addressWidth=t,this.address.bitWidth=t,this.clearData())}clearData(){this.data=new Array(Math.pow(2,this.addressWidth)),this.tooltipText=`${this.memSizeString()} ${this.shortName}`}isResolvable(){return this.address.value!==void 0||this.reset.value!==void 0||this.coreDump.value!==void 0}resolve(){this.write.value==1&&(this.data[this.address.value]=this.dataIn.value),this.reset.value==1&&this.clearData(),this.coreDump.value&&this.prevCoreDumpValue!=this.coreDump.value&&this.dump(),this.prevCoreDumpValue=this.coreDump.value,this.dataOut.value=this.data[this.address.value]||0,f.simulationQueue.add(this.dataOut)}customDraw(){var t=f.context,n=this.x,r=this.y;t.beginPath(),t.strokeStyle="gray",t.fillStyle=this.write.value?"red":"lightgreen",t.lineWidth=Nt(1),Fi(t,50,-30,3,n,r,this.direction),t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",pn(t,this.memSizeString(),0,-10,n,r,this.direction,12),pn(t,this.shortName,0,10,n,r,this.direction,12),Eo(t,"A",this.address.x+12,this.address.y,n,r,this.direction),Eo(t,"DI",this.dataIn.x+12,this.dataIn.y,n,r,this.direction),Eo(t,"W",this.write.x+12,this.write.y,n,r,this.direction),Eo(t,"DO",this.dataOut.x-15,this.dataOut.y,n,r,this.direction),t.fill()}memSizeString(){for(var t=["","K","M"],n=this.bitWidth==8?"B":this.bitWidth==1?"b":` x ${this.bitWidth}b`,r=Math.pow(2,this.addressWidth),l=0;r>=1024&&l<t.length-1;)r/=1024,l++;return r+t[l]+n}dump(){var t=console.group&&this.label;t&&console.group(this.label),De("Data dumped to developer Console"),console.log(JSON.stringify(this.data)),t&&console.groupEnd()}dblclick(){this.promptData()}promptData(){var t=prompt("Enter Data (separated by space, comma, tab or newline) (data can be in hex, binary, octal or decimal)");if(!t){ii("No data entered.");return}var n=this.data;try{var r=1<<this.addressWidth,l=1<<this.bitWidth;if(this.clearData(),t=t.split(/[, \n\t]/),t=t.filter(v=>v.length),t.length>r)throw`Capacity: ${r}. But ${t.length} data cells found`;for(var c=0;c<t.length;c++){var g=ib(t[c]);if(isNaN(g))throw`Address ${c}: ${t[c]} is not a number`;if(g<0)throw`Address ${c}: ${t[c]} is negative`;if(g>=l)throw`Address ${c}: ${t[c]} is too large`;this.data[c]=g}De(`${t.length} data cells loaded`)}catch(v){this.data=n,ii(v)}}static moduleVerilog(){return`
    module RAM(dout, addr, din, we, dmp, rst);
        parameter WIDTH = 8;
        parameter ADDR = 10;
        output [WIDTH-1:0] dout;
        input [ADDR-1:0] addr;
        input [WIDTH-1:0] din;
        input we;
        input dmp;
        input rst;
        reg [WIDTH-1:0] mem [2**ADDR-1:0];
    
        assign dout = mem[addr];
    
        always @ (*) begin
        if (!we)
            mem[addr] = din;
        end
    endmodule
    `}}vn.prototype.tooltipText="Random Access Memory";vn.prototype.shortName="RAM";vn.prototype.maxAddressWidth=20;vn.prototype.mutableProperties={addressWidth:{name:"Address Width",type:"number",max:"20",min:"1",func:"changeAddressWidth"},dump:{name:"Core Dump",type:"button",func:"dump"},load:{name:"Load Data",type:"button",func:"promptData"},reset:{name:"Reset",type:"button",func:"clearData"}};vn.prototype.objectType="RAM";function vd(i,t,n,r,l,c,g,v,w,D){for(var T=0;T<D;T++)v[T]!=null&&v[T]==!0,w[T]!=null&&w[T]==!0,v[T]==null&&w[T]==null?t[T].value!=null&&(n[T].value=t[T].value,f.simulationQueue.add(n[T])):v[T]==null&&w[T]!=null?(en_value[T]==null||r[T].value==w[T])&&t[T].value!=null&&(n[T].value=t[T].value,f.simulationQueue.add(n[T])):v[T]!=null&&w[T]==null?(i[T].value==g[T]?i[T].value==0&&t[T].value!=null&&(l[T]=t[T].value):i[T].value!=null&&(i[T].value==1?c[T]=l[T]:i[T].value==0&&t[T].value!=null&&(l[T]=t[T].value),g[T]=i[T].value),n[T].value!=c[T]&&(n[T].value=c[T],f.simulationQueue.add(n[T]))):(r[T].value==0?g[T]=i[T].value:(r[T].value==1||r[T].connections.length==0)&&(i[T].value==g[T]?i[T].value==0&&t[T].value!=null&&(l[T]=t[T].value):i[T].value!=null&&(i[T].value==1?c[T]=l[T]:i[T].value==0&&t[T].value!=null&&(l[T]=t[T].value),g[T]=i[T].value)),n[T].value!=c[T]&&(n[T].value=c[T],f.simulationQueue.add(n[T])))}class Js extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=8,g=10,v,w,D,T,R,M){super(t,n,r,l,Math.min(Math.max(1,c),32)),this.setDimensions(60,40),this.directionFixed=!0,this.labelDirection="UP",this.addressWidth=Math.min(Math.max(1,g),this.maxAddressWidth),this.readAddress=[];for(var L=0;L<D;L++)this.readAddress.push(new X(-this.leftDimensionX,-20,0,this,this.addressWidth,"READ_ADDRESS"+L.toString()));this.writeAddress=[];for(var L=0;L<T;L++)this.writeAddress.push(new X(-this.leftDimensionX,-20,0,this,this.addressWidth,"WRITE_ADDRESS"+L.toString()));this.writeDataIn=[],this.writeEnable=[],this.writeDffClock=[],this.writeDffDInp=[],this.writeDffQOutput=[],this.writeDffEn=[],this.writeDffMasterState=[],this.writeDffSlaveState=[],this.writeDffprevClockState=[],this.writeDffClockPolarity=[],this.writeDffEnPolarity=[];for(var L=0;L<T;L++){var E=new X(-this.leftDimensionX,0,0,this,this.bitWidth,"DATA IN"+L.toString()),Q=new X(-20,10,0,this,1,"Clock"),lt=new X(-20,-10,0,this,this.bitWidth,"D"),B=new X(20,-10,1,this,this.bitWidth,"Q"),A=new X(-10,20,0,this,1,"Enable"),q=0,z=0,it=0,xt=M[L].clock_polarity,rt=M[L].enable_polarity;rt==null&&(rt=!0),E.connect(lt),this.writeDffClock.push(Q),this.writeDffDInp.push(lt),this.writeDffQOutput.push(B),this.writeDffEn.push(A),this.writeDffMasterState.push(q),this.writeDffSlaveState.push(z),this.writeDffprevClockState.push(it),this.writeDffClockPolarity.push(xt),this.writeDffEnPolarity.push(rt),this.writeDataIn.push(E),this.writeEnable.push(new X(-this.leftDimensionX,20,0,this,1,"WRITE_ENABLE"+L.toString()))}this.reset=new X(0,this.downDimensionY,0,this,1,"RESET"),this.coreDump=new X(-20,this.downDimensionY,0,this,1,"CORE DUMP"),this.dataOut=[],this.readDffClock=[],this.readDffDInp=[],this.readDffQOutput=[],this.readDffEn=[],this.readDffMasterState=[],this.readDffSlaveState=[],this.readDffprevClockState=[],this.readDffClockPolarity=[],this.readDffEnPolarity=[];for(var L=0;L<D;L++){var at=new X(this.rightDimensionX,0,1,this,this.bitWidth,"DATA OUT"+L.toString()),Q=new X(-20,10,0,this,1,"Clock"),lt=new X(-20,-10,0,this,this.bitWidth,"D"),B=new X(20,-10,1,this,this.bitWidth,"Q"),A=new X(-10,20,0,this,1,"Enable"),q=0,z=0,it=0,xt=R[L].clock_polarity,rt=R[L].enable_polarity;this.readDffClock.push(Q),this.readDffDInp.push(lt),this.readDffQOutput.push(B),this.readDffEn.push(A),this.readDffMasterState.push(q),this.readDffSlaveState.push(z),this.readDffprevClockState.push(it),this.readDffClockPolarity.push(xt),this.readDffEnPolarity.push(rt),at.connect(lt),this.dataOut.push(at)}this.prevCoreDumpValue=void 0,this.words=w,this.numRead=D,this.numWrite=T,this.memData=v,this.rdports=R,this.wrports=M,this.clearData(),this.fillData(v)}fillData(t){for(var n=0;n<this.words;n++)this.data[n]=0;for(var r=t.length,l=0,n=0;n<r;n++)if(Number.isInteger(t[n])){var c=t[n+1];if(c.startsWith("x")){l+=t[n];continue}for(var g=0,v=1,w=this.bitWidth-1;w>=0;w--)c[w]=="1"&&(g+=v),v*=2;for(var w=0;w<t[n];w++)this.data[l++]=g;n++}else{var c=t[n];if(c.startsWith("x")){l++;continue}for(var g=0,v=1,w=this.bitWidth-1;w>=0;w--)c[w]=="1"&&(g+=v),v*=2;this.data[l++]=g}}customSave(){return this.dataOut.map(tt),{constructorParamaters:[this.direction,this.bitWidth,this.addressWidth,this.memData,this.words,this.numRead,this.numWrite,this.rdports,this.wrports],nodes:{readAddress:this.readAddress.map(tt),writeAddress:this.writeAddress.map(tt),writeDataIn:this.writeDataIn.map(tt),writeEnable:this.writeEnable.map(tt),dataOut:this.dataOut.map(tt),reset:tt(this.reset),coreDump:tt(this.coreDump),readDffClock:this.readDffClock.map(tt),readDffDInp:this.readDffDInp.map(tt),readDffQOutput:this.readDffQOutput.map(tt),readDffEn:this.readDffEn.map(tt),writeDffClock:this.writeDffClock.map(tt),writeDffDInp:this.writeDffDInp.map(tt),writeDffQOutput:this.writeDffQOutput.map(tt),writeDffEn:this.writeDffEn.map(tt)}}}newBitWidth(t){}changeAddressWidth(t){}clearData(){this.data=new Array(this.words),this.tooltipText=`${this.memSizeString()} ${this.shortName}`}isResolvable(){for(var t=0;t<this.numRead;t++)if(this.readAddress[t]!=null)return!0;return this.reset.value!=null||this.coreDump.value!=null}resolve(){vd(this.writeDffClock,this.writeDffDInp,this.writeDffQOutput,this.writeDffEn,this.writeDffMasterState,this.writeDffSlaveState,this.writeDffprevClockState,this.writeDffClockPolarity,this.writeDffEnPolarity,this.numWrite);for(var t=0;t<this.numWrite;t++)this.writeEnable[t].value==1&&(this.data[this.writeAddress[t].value]=this.writeDffQOutput[t].value);this.reset.value==1&&this.clearData(),this.coreDump.value&&this.prevCoreDumpValue!=this.coreDump.value&&this.dump(),this.prevCoreDumpValue=this.coreDump.value;for(var t=0;t<this.numRead;t++)this.dataOut[t].value=this.data[this.readAddress[t].value]||0,f.simulationQueue.add(this.dataOut[t]);vd(this.readDffClock,this.readDffDInp,this.readDffQOutput,this.readDffEn,this.readDffMasterState,this.readDffSlaveState,this.readDffprevClockState,this.readDffClockPolarity,this.readDffEnPolarity,this.numRead)}customDraw(){}memSizeString(){for(var t=["","K","M"],n=this.bitWidth==8?"B":this.bitWidth==1?"b":` x ${this.bitWidth}b`,r=Math.pow(2,this.addressWidth),l=0;r>=1024&&l<t.length-1;)r/=1024,l++;return r+t[l]+n}dump(){var t=console.group&&this.label;t&&console.group(this.label),console.log(this.data),t&&console.groupEnd()}}Js.prototype.tooltipText="Random Access Memory";Js.prototype.shortName="verilogRAM";Js.prototype.maxAddressWidth=20;Js.prototype.mutableProperties={addressWidth:{name:"Address Width",type:"number",max:"20",min:"1",func:"changeAddressWidth"},dump:{name:"Core Dump",type:"button",func:"dump"},reset:{name:"Reset",type:"button",func:"clearData"}};Js.prototype.objectType="verilogRAM";class Gr extends vn{constructor(t,n,r=globalScope,l="RIGHT",c=8,g=8,v=null){super(t,n,r,l,c,g),this.data=v||this.data}clearData(){super.clearData();for(var t=0;t<this.data.length;t++)this.data[t]=this.data[t]||0}customSave(){var t=super.customSave(this),{data:n}=this;return t.constructorParamaters.push(n),t}static moduleVerilog(){return`
    module EEPROM(dout, addr, din, we, dmp, rst);
        parameter WIDTH = 8;
        parameter ADDR = 10;
        output [WIDTH-1:0] dout;
        input [ADDR-1:0] addr;
        input [WIDTH-1:0] din;
        input we;
        input dmp;
        input rst;
        reg [WIDTH-1:0] mem[2**ADDR-1:0];
        integer j;
    
        assign dout = mem[addr];
    
        always @ (*) begin
        if (!rst)
            for (j=0; j < 2**ADDR-1; j=j+1) begin
                mem[j] = 0;
            end
        if (!we)
            mem[addr] = din;
        dout = mem[addr];
        end
    endmodule
    `}}Gr.prototype.tooltipText="Electrically Erasable Programmable Read-Only Memory";Gr.prototype.shortName="EEPROM";Gr.prototype.maxAddressWidth=10;Gr.prototype.mutableProperties={addressWidth:{name:"Address Width",type:"number",max:"10",min:"1",func:"changeAddressWidth"},dump:vn.prototype.mutableProperties.dump,load:vn.prototype.mutableProperties.load,reset:vn.prototype.mutableProperties.reset};Gr.prototype.objectType="EEPROM";class gn extends Bt{constructor(t,n,r=globalScope,l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]){super(t,n,r,"RIGHT",1),this.fixedBitWidth=!0,this.directionFixed=!0,this.rectangleObject=!1,this.setDimensions(80,50),this.memAddr=new X(-80,0,0,this,4,"Address"),this.en=new X(0,50,0,this,1,"Enable"),this.dataOut=new X(80,0,1,this,8,"DataOut"),this.data=l||prompt("Enter data").split(" ").map(c=>parseInt(c,16))}isResolvable(){return(this.en.value===1||this.en.connections.length===0)&&this.memAddr.value!==void 0}customSave(){return{constructorParamaters:[this.data],nodes:{memAddr:tt(this.memAddr),dataOut:tt(this.dataOut),en:tt(this.en)}}}findPos(){const t=Math.floor((f.mouseX-this.x+35)/20),n=Math.floor((f.mouseY-this.y+35)/16);if(!(t<0||n<0||t>3||n>3))return n*4+t}click(){this.selectedIndex=this.findPos()}keyDown(t){t==="Backspace"&&this.delete(),this.selectedIndex!==void 0&&(t=t.toLowerCase(),~"1234567890abcdef".indexOf(t)&&(this.data[this.selectedIndex]=(this.data[this.selectedIndex]*16+parseInt(t,16))%256))}customDraw(){const t=f.context,n=this.x,r=this.y,l=this.findPos();t.strokeStyle=ht.stroke,t.fillStyle=ht.fill,t.lineWidth=Nt(3),t.beginPath(),Ee(t,-this.leftDimensionX,-this.upDimensionY,this.leftDimensionX+this.rightDimensionX,this.upDimensionY+this.downDimensionY,this.x,this.y,[this.direction,"RIGHT"][+this.directionFixed]),l===void 0&&(!f.shiftDown&&this.hover||f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle=ht.hover_select),t.fill(),t.stroke(),t.strokeStyle="black",t.fillStyle="#fafafa",t.lineWidth=Nt(1),t.beginPath();for(let c=0;c<16;c+=4)for(let g=c;g<c+4;g++)Ee(t,g%4*20,c*4,20,16,n-35,r-35);t.fill(),t.stroke(),l!==void 0&&(t.beginPath(),t.fillStyle="yellow",Ee(t,l%4*20,Math.floor(l/4)*16,20,16,n-35,r-35),t.fill(),t.stroke()),this.selectedIndex!==void 0&&(t.beginPath(),t.fillStyle="lightgreen",Ee(t,this.selectedIndex%4*20,Math.floor(this.selectedIndex/4)*16,20,16,n-35,r-35),t.fill(),t.stroke()),this.memAddr.value!==void 0&&(t.beginPath(),t.fillStyle=ht.input_text,Ee(t,this.memAddr.value%4*20,Math.floor(this.memAddr.value/4)*16,20,16,n-35,r-35),t.fill(),t.stroke()),t.beginPath(),t.fillStyle="Black",Es(t,"A",-65,5,n,r,16,"Raleway","right"),Es(t,"D",75,5,n,r,16,"Raleway","right"),Es(t,"En",5,47,n,r,16,"Raleway","right"),t.fill(),t.beginPath(),t.fillStyle="Black";for(let c=0;c<16;c+=4)for(let g=c;g<c+4;g++){let v=this.data[g].toString(16);v.length<2&&(v=`0${v}`),Es(t,v,g%4*20,c*4,n-35+10,r-35+12,14,"Raleway","center")}t.fill(),t.beginPath(),t.fillStyle="Black";for(let c=0;c<16;c+=4){let g=c.toString(16);g.length<2&&(g=`0${g}`),Es(t,g,0,c*4,n-40,r-35+12,14,"Raleway","right")}t.fill()}resolve(){this.isResolvable()!==!1&&(this.dataOut.value=this.data[this.memAddr.value],f.simulationQueue.add(this.dataOut))}verilogBaseType(){return this.verilogName()+(gn.selSizes.length-1)}generateVerilog(){return gn.selSizes.push(this.data),Bt.prototype.generateVerilog.call(this)}static moduleVerilog(){for(var t="",n=0;n<gn.selSizes.length;n++){t+=`
    module Rom${n}(dout, addr, en);
    parameter WIDTH = 8;
    parameter ADDR = 4;
    output reg [WIDTH-1:0] dout;
    input [ADDR-1:0] addr;
    input en;

    always @ (*) begin
        if (en == 0)
        dout = {WIDTH{1'bz}};
        else
        case (addr)
    `;for(var r=0;r<16;r++)t+="        "+r+" : dout = "+gn.selSizes[n][r]+`;
`;t+=`      endcase
    end
    endmodule
    `}return t}static resetVerilog(){gn.selSizes=[]}}gn.prototype.tooltipText="Read-only memory";gn.prototype.helplink="https://docs.circuitverse.org/#/chapter4/6sequentialelements?id=rom";gn.prototype.objectType="Rom";class Xr extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c,g){super(t,n,r,l,1),this.objectType="TB_Input",this.scope.TB_Input.push(this),this.setIdentifier(c||"Test1"),this.testData=g||{inputs:[],outputs:[],n:0},this.clockInp=new X(0,20,0,this,1),this.outputs=[],this.running=!1,this.iteration=0,this.setup()}dblclick(){this.testData=JSON.parse(prompt("Enter TestBench Json")),this.setup()}setDimensions(){this.leftDimensionX=0,this.rightDimensionX=120,this.upDimensionY=0,this.downDimensionY=40+this.testData.inputs.length*20}setup(){this.iteration=0,this.running=!1,this.nodeList.clean(this.clockInp),this.deleteNodes(),this.nodeList=[],this.nodeList.push(this.clockInp),this.testData=this.testData||{inputs:[],outputs:[],n:0},this.setDimensions(),this.prevClockState=0,this.outputs=[];for(var t=0;t<this.testData.inputs.length;t++)this.outputs.push(new X(this.rightDimensionX,30+t*20,1,this,this.testData.inputs[t].bitWidth,this.testData.inputs[t].label));for(var t=0;t<this.scope.TB_Output.length;t++)this.scope.TB_Output[t].identifier==this.identifier&&this.scope.TB_Output[t].setup()}toggleState(){this.running=!this.running,this.prevClockState=0}resetIterations(){this.iteration=0,this.prevClockState=0}resolve(){if(this.clockInp.value!=this.prevClockState&&(this.prevClockState=this.clockInp.value,this.clockInp.value==1&&this.running&&(this.iteration<this.testData.n?this.iteration++:this.running=!1)),this.running&&this.iteration)for(var t=0;t<this.testData.inputs.length;t++)this.outputs[t].value=parseInt(this.testData.inputs[t].values[this.iteration-1],2),f.simulationQueue.add(this.outputs[t])}setPlotValue(){}customSave(){var t={constructorParamaters:[this.direction,this.identifier,this.testData],nodes:{outputs:this.outputs.map(tt),clockInp:tt(this.clockInp)}};return t}setIdentifier(t=""){if(!(t.length==0||t==this.identifier)){for(var n=0;n<this.scope.TB_Output.length;n++)this.scope.TB_Output[n].checkPairing();for(var n=0;n<this.scope.TB_Output.length;n++)this.scope.TB_Output[n].identifier==this.identifier&&(this.scope.TB_Output[n].identifier=t);this.identifier=t,this.checkPaired()}}checkPaired(){for(var t=0;t<this.scope.TB_Output.length;t++)this.scope.TB_Output[t].identifier==this.identifier&&this.scope.TB_Output[t].checkPairing()}delete(){super.delete(),this.checkPaired()}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle="grey",t.fillStyle="#fcfcfc",t.lineWidth=Nt(1);var r=this.x,l=this.y;this.direction=="LEFT"||(this.direction=="RIGHT"?120-this.xSize:this.direction=="UP"?60-this.xSize/2:60-this.xSize/2),t.beginPath(),t.textAlign="center",t.fillStyle="black",Xt(t,`${this.identifier} [INPUT]`,r+this.rightDimensionX/2,l+14,10),Xt(t,["Not Running","Running"][+this.running],r+this.rightDimensionX/2,l+14+10+20*this.testData.inputs.length,10),Xt(t,`Case: ${this.iteration}`,r+this.rightDimensionX/2,l+14+20+20*this.testData.inputs.length,10),t.fill(),t.font="30px Raleway",t.textAlign="right",t.fillStyle="blue",t.beginPath();for(var n=0;n<this.testData.inputs.length;n++)Xt(t,this.testData.inputs[n].label,this.rightDimensionX-5+r,30+n*20+l+4,10);if(t.fill(),this.running&&this.iteration){t.font="30px Raleway",t.textAlign="left",t.fillStyle="blue",t.beginPath();for(var n=0;n<this.testData.inputs.length;n++)Xt(t,this.testData.inputs[n].values[this.iteration-1],5+r,30+n*20+l+4,10);t.fill()}t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.lineWidth=Nt(3);var r=this.x,l=this.y;ne(t,0,15,r,l,this.direction),Ct(t,5,20,r,l,this.direction),Ct(t,0,25,r,l,this.direction),t.stroke()}}Xr.prototype.tooltipText="Test Bench Input Selected";Xr.prototype.centerElement=!0;Xr.prototype.helplink="https://docs.circuitverse.org/#/chapter7/3testcircuits";Xr.prototype.mutableProperties={identifier:{name:"TestBench Name:",type:"text",maxlength:"10",func:"setIdentifier"},iteration:{name:"Reset Iterations",type:"button",func:"resetIterations"},toggleState:{name:"Toggle State",type:"button",func:"toggleState"}};Xr.prototype.objectType="TB_Input";function Xm(i,t=void 0){var n=i.toString(2);return t==null?n:"0".repeat(t-n.length)+n}class Yr extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c){super(t,n,r,l,1),this.objectType="TB_Output",this.scope.TB_Output.push(this),this.setIdentifier(c||"Test1"),this.inputs=[],this.testBenchInput=void 0,this.setup()}setDimensions(){this.leftDimensionX=0,this.rightDimensionX=160,this.upDimensionY=0,this.downDimensionY=40,this.testBenchInput&&(this.downDimensionY=40+this.testBenchInput.testData.outputs.length*20)}setup(){this.deleteNodes(),this.nodeList=[],this.inputs=[],this.testBenchInput=void 0;for(var t=0;t<this.scope.TB_Input.length;t++)if(this.scope.TB_Input[t].identifier==this.identifier){this.testBenchInput=this.scope.TB_Input[t];break}if(this.setDimensions(),this.testBenchInput)for(var t=0;t<this.testBenchInput.testData.outputs.length;t++)this.inputs.push(new X(0,30+t*20,NODE_INPUT,this,this.testBenchInput.testData.outputs[t].bitWidth,this.testBenchInput.testData.outputs[t].label))}customSave(){var t={constructorParamaters:[this.direction,this.identifier],nodes:{inputs:this.inputs.map(tt)}};return t}setIdentifier(t=""){t.length==0||t==this.identifier||(this.identifier=t,this.setup())}checkPairing(t=""){this.testBenchInput?(this.testBenchInput.deleted||this.testBenchInput.identifier!=this.identifier)&&this.setup():this.setup()}customDraw(){var t=f.context;t.beginPath(),t.strokeStyle="grey",t.fillStyle="#fcfcfc",t.lineWidth=Nt(1);var n=this.x,r=this.y;if(this.direction=="LEFT"||(this.direction=="RIGHT"?120-this.xSize:this.direction=="UP"?60-this.xSize/2:60-this.xSize/2),t.beginPath(),t.textAlign="center",t.fillStyle="black",Xt(t,`${this.identifier} [OUTPUT]`,n+this.rightDimensionX/2,r+14,10),Xt(t,["Unpaired","Paired"][+(this.testBenchInput!=null)],n+this.rightDimensionX/2,r+this.downDimensionY-5,10),t.fill(),this.testBenchInput){t.beginPath(),t.font="30px Raleway",t.textAlign="left",t.fillStyle="blue";for(var l=0;l<this.testBenchInput.testData.outputs.length;l++)Xt(t,this.testBenchInput.testData.outputs[l].label,5+n,30+l*20+r+4,10);if(t.fill(),this.testBenchInput.running&&this.testBenchInput.iteration){t.beginPath(),t.font="30px Raleway",t.textAlign="right",t.fillStyle="blue",t.beginPath();for(var l=0;l<this.testBenchInput.testData.outputs.length;l++)Xt(t,this.testBenchInput.testData.outputs[l].values[this.testBenchInput.iteration-1],n+this.rightDimensionX-5,30+l*20+r+4,10);t.fill()}if(this.testBenchInput.running&&this.testBenchInput.iteration){t.beginPath(),t.font="30px Raleway",t.textAlign="center",t.fillStyle="blue";for(var l=0;l<this.testBenchInput.testData.outputs.length;l++)this.inputs[l].value!=null?(t.beginPath(),this.testBenchInput.testData.outputs[l].values[this.testBenchInput.iteration-1]=="x"||parseInt(this.testBenchInput.testData.outputs[l].values[this.testBenchInput.iteration-1],2)==this.inputs[l].value?t.fillStyle="green":t.fillStyle="red",Xt(t,Xm(this.inputs[l].value,this.inputs[l].bitWidth),n+this.rightDimensionX/2,30+l*20+r+4,10),t.fill()):(t.beginPath(),this.testBenchInput.testData.outputs[l].values[this.testBenchInput.iteration-1]=="x"?t.fillStyle="green":t.fillStyle="red",Xt(t,"X",n+this.rightDimensionX/2,30+l*20+r+4,10),t.fill())}}}}Yr.prototype.tooltipText="Test Bench Output Selected";Yr.prototype.helplink="https://docs.circuitverse.org/#/chapter7/3testcircuits";Yr.prototype.centerElement=!0;Yr.prototype.mutableProperties={identifier:{name:"TestBench Name:",type:"text",maxlength:"10",func:"setIdentifier"}};Yr.prototype.objectType="TB_Output";class Xh extends Bt{constructor(t,n,r=globalScope,l="RIGHT",c=1){super(t,n,r,l,c),this.setDimensions(20,10),this.objectType="ForceGate",this.scope.ForceGate.push(this),this.inp1=new X(-20,0,0,this),this.inp2=new X(0,0,0,this),this.output1=new X(20,0,1,this)}isResolvable(){return this.inp1.value!==void 0||this.inp2.value!==void 0}customSave(){return{constructorParamaters:[this.direction,this.bitWidth],nodes:{output1:tt(this.output1),inp1:tt(this.inp1),inp2:tt(this.inp2)}}}resolve(){this.inp2.value!==void 0?this.output1.value=this.inp2.value:this.output1.value=this.inp1.value,f.simulationQueue.add(this.output1)}customDraw(){var t=f.context;const n=this.x,r=this.y;t.beginPath(),t.fillStyle="Black",t.textAlign="center",pn(t,"I",-10,0,n,r,this.direction,10),pn(t,"O",10,0,n,r,this.direction,10),t.fill()}}Xh.prototype.tooltipText="Force Gate ToolTip : ForceGate Selected.";Xh.prototype.objectType="ForceGate";function Yh(i){if(Number.isInteger(i))return i;var t=1;for(var n in i)t=Math.max(t,i[n]);return t}class ni{constructor(t){this.bitWidth=1,t.bits&&(this.bitWidth=Yh(t.bits))}getPort(t){if(t=="in")return this.input;if(t=="out")return this.output}}class Ym extends ni{constructor(t){super(t),t.net=="clk"||t.net=="clock"?this.element=new yn(0,0):this.element=new cs(0,0,void 0,void 0,this.bitWidth),this.output=this.element.output1,this.element.label=t.net}}class Um extends ni{constructor(t){super(t),this.element=new ls(0,0,void 0,void 0,this.bitWidth),this.input=this.element.inp1,this.element.label=t.net}}class qm extends ni{constructor(t){super(t),this.element=new yn(0,0),this.output=this.element.output1}}class Vm extends ni{constructor(t){super(t),this.element=new Hi(0,0),this.output=this.element.output1}}class Km extends ni{constructor(t){super(t),this.element=new Ks(0,0),this.input=this.element.inp1}}class Qm extends ni{constructor(t){super(t),this.element=new Oi(0,0,void 0,void 0,this.bitWidth),this.input=this.element.inp1,this.output=this.element.output1}}class Zm extends ni{constructor(t){super(t),this.element=new Uo(0,0,void 0,void 0,this.bitWidth),this.input=this.element.inp1,this.output=this.element.output1}}class Jm extends ni{constructor(t){super(t),this.bitWidth=t.constant.length,this.state=t.constant,this.state[0]=="x"&&(this.state=void 0),this.element=new Ke(0,0,void 0,void 0,this.bitWidth,this.state),this.input=this.element.inp1,this.output=this.element.output1}}class tv extends ni{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.andGate=new tn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.andGate.inp[n]);this.input=this.splitter.inp1,this.output=this.andGate.output1}}class ev extends ni{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.nandGate=new Sn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.nandGate.inp[n]);this.input=this.splitter.inp1,this.output=this.nandGate.output1}}class iv extends ni{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.orGate=new xn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.orGate.inp[n]);this.input=this.splitter.inp1,this.output=this.orGate.output1}}class nv extends ni{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.norGate=new Fn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.norGate.inp[n]);this.input=this.splitter.inp1,this.output=this.norGate.output1}}class sv extends ni{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.xorGate=new zn(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.xorGate.inp[n]);this.input=this.splitter.inp1,this.output=this.xorGate.output1}}class rv extends ni{constructor(t){super(t),this.bitWidthSplit=[];for(var n=0;n<this.bitWidth;n++)this.bitWidthSplit.push(1);this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.xnorGate=new en(0,0,void 0,void 0,this.bitWidth,1);for(var n=0;n<this.bitWidth;n++)this.splitter.outputs[n].connect(this.xnorGate.inp[n]);this.input=this.splitter.inp1,this.output=this.xnorGate.output1}}class ov extends ni{constructor(t){super(t),this.bitWidth=t.slice.total,this.start=t.slice.first,this.count=t.slice.count,this.start==0?(this.count==this.bitWidth?this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.bitWidth]):this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.count,this.bitWidth-this.count]),this.input=this.splitter.inp1,this.output=this.splitter.outputs[0]):(this.start+this.count==this.bitWidth?this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.start,this.count]):this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.start,this.count,this.bitWidth-this.start-this.count]),this.input=this.splitter.inp1,this.output=this.splitter.outputs[1])}}class av extends ni{constructor(t){super(t),this.inputBitWidth=t.extend.input,this.outputBitWidth=t.extend.output;for(var n=this.outputBitWidth-this.inputBitWidth,r="",l=0;l<n;l++)r+="0";this.zeroConstant=new Ke(0,0,void 0,void 0,n,r),this.splitter=new ke(0,0,void 0,void 0,this.outputBitWidth,[this.inputBitWidth,n]),this.zeroConstant.output1.connect(this.splitter.outputs[1]),this.input=this.splitter.outputs[0],this.output=this.splitter.inp1}}class lv extends ni{constructor(t){if(super(t),this.inputBitWidth=t.bits.in,this.notGate=new Oi(400,0,void 0,void 0,this.bitWidth),this.adder=new Vs(300,0,void 0,void 0,this.bitWidth),this.inputBitWidth!=this.bitWidth){var n=this.bitWidth-this.inputBitWidth;this.splitter=new ke(600,600,void 0,void 0,this.bitWidth,[this.inputBitWidth,n]);for(var r="",l=0;l<n;l++)r+="0";this.zeroConstant=new Ke(550,550,void 0,void 0,n,r),this.zeroConstant.output1.connect(this.splitter.outputs[1]),this.splitter.inp1.connect(this.notGate.inp1),this.input=this.splitter.outputs[0]}else this.input=this.notGate.inp1;for(var c="",l=0;l<this.bitWidth-1;l++)c+="0";c+="1",this.oneConstant=new Ke(0,0,void 0,void 0,this.bitWidth,c),this.notGate.output1.connect(this.adder.inpA),this.oneConstant.output1.connect(this.adder.inpB),this.output=this.adder.sum}}class tr{constructor(t){this.bitWidth=1,t.bits&&(this.bitWidth=Yh(t.bits))}getPort(t){if(t=="in1")return this.input[0];if(t=="in2")return this.input[1];if(t=="out")return this.output}}class hv extends tr{constructor(t){super(t),this.element=new tn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class uv extends tr{constructor(t){super(t),this.element=new Sn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class cv extends tr{constructor(t){super(t),this.element=new xn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class dv extends tr{constructor(t){super(t),this.element=new Fn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class fv extends tr{constructor(t){super(t),this.element=new zn(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class pv extends tr{constructor(t){super(t),this.element=new en(0,0,void 0,void 0,void 0,this.bitWidth),this.input=[this.element.inp[0],this.element.inp[1]],this.output=this.element.output1}}class Di extends tr{constructor(t,n){super(t),this.bitWidth=Math.max(t.bits.in1,t.bits.in2),n&&(this.bitWidth=Math.max(t.bits.out,this.bitWidth)),Number.isInteger(t.bits)||(this.in1BitWidth=t.bits.in1,this.in2BitWidth=t.bits.in2),this.input=[];var c=this.bitWidth-this.in1BitWidth;if(c!=0){this.in1Splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.in1BitWidth,c]);for(var r="",l=0;l<c;l++)r+="0";this.in1ZeroConstant=new Ke(0,0,void 0,void 0,c,r),this.in1ZeroConstant.output1.connect(this.in1Splitter.outputs[1])}else this.in1Splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.bitWidth]);var c=this.bitWidth-this.in2BitWidth;if(c!=0){this.in2Splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.in2BitWidth,c]);for(var r="",l=0;l<c;l++)r+="0";this.in2ZeroConstant=new Ke(0,0,void 0,void 0,c,r),this.in2ZeroConstant.output1.connect(this.in2Splitter.outputs[1])}else this.in2Splitter=new ke(0,0,void 0,void 0,this.bitWidth,[this.bitWidth]);this.input=[this.in1Splitter.outputs[0],this.in2Splitter.outputs[0]]}}class gv extends Di{constructor(t){super(t,!1);for(var n=[],r=0;r<this.bitWidth;r++)n.push(1);this.xnorGate=new en(0,0,void 0,void 0,void 0,this.bitWidth),this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,n),this.andGate=new tn(0,0,void 0,void 0,this.bitWidth),this.in1Splitter.inp1.connect(this.xnorGate.inp[0]),this.in2Splitter.inp1.connect(this.xnorGate.inp[1]),this.xnorGate.output1.connect(this.splitter.inp1);for(var r=0;r<this.bitWidth;r++)this.splitter.outputs[r].connect(this.andGate.inp[r]);this.output=this.andGate.output1}}class mv extends Di{constructor(t){super(t,!1);for(var n=[],r=0;r<this.bitWidth;r++)n.push(1);this.xnorGate=new en(0,0,void 0,void 0,void 0,this.bitWidth),this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,n),this.nandGate=new Sn(0,0,void 0,void 0,this.bitWidth),this.in1Splitter.inp1.connect(this.xnorGate.inp[0]),this.in2Splitter.inp1.connect(this.xnorGate.inp[1]),this.xnorGate.output1.connect(this.splitter.inp1);for(var r=0;r<this.bitWidth;r++)this.splitter.outputs[r].connect(this.nandGate.inp[r]);this.output=this.nandGate.output1}}class vv extends Di{constructor(t){super(t,!1),this.constant7=new Ke(0,0,void 0,void 0,3,"111"),this.alu=new jn(0,0,void 0,void 0,this.bitWidth),this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[1]),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.output=this.splitter.outputs[0]}}class bv extends Di{constructor(t){super(t,!1),this.constant7=new Ke(0,0,void 0,void 0,3,"111"),this.alu=new jn(0,0,void 0,void 0,this.bitWidth),this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[1]),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.output=this.splitter.outputs[0]}}class yv extends Di{constructor(t){super(t,!1),this.constant7=new Ke(0,0,void 0,void 0,3,"111"),this.alu=new jn(0,0,void 0,void 0,this.bitWidth),this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[1]),this.notGate=new Oi(0,0),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.splitter.outputs[0].connect(this.notGate.inp1),this.output=this.notGate.output1}}class wv extends Di{constructor(t){super(t,!1),this.constant7=new Ke(0,0,void 0,void 0,3,"111"),this.alu=new jn(0,0,void 0,void 0,this.bitWidth),this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,[1]),this.notGate=new Oi(0,0),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.constant7.output1.connect(this.alu.controlSignalInput),this.alu.output.connect(this.splitter.inp1),this.splitter.outputs[0].connect(this.notGate.inp1),this.output=this.notGate.output1}}class Sv extends Di{constructor(t){super(t,!1),this.outBitWidth=t.bits.out,this.adder=new Vs(0,0,void 0,void 0,this.bitWidth),this.in1Splitter.inp1.connect(this.adder.inpA),this.in2Splitter.inp1.connect(this.adder.inpB),this.outBitWidth==this.bitWidth?this.output=this.adder.sum:this.outBitWidth==this.bitWidth+1&&(this.outputSplitter=new ke(0,0,void 0,void 0,this.outBitWidth,[this.bitWidth,1]),this.adder.sum.connect(this.outputSplitter.outputs[0]),this.adder.carryOut.connect(this.outputSplitter.outputs[1]),this.output=this.outputSplitter.inp1)}}class xv extends Di{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogMultiplier=new qo(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogMultiplier.inpA),this.in2Splitter.inp1.connect(this.verilogMultiplier.inpB),this.output=this.verilogMultiplier.product}}class kv extends Di{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogDivider=new Rr(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogDivider.inpA),this.in2Splitter.inp1.connect(this.verilogDivider.inpB),this.output=this.verilogDivider.quotient}}class Cv extends Di{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogPower=new Vo(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogPower.inpA),this.in2Splitter.inp1.connect(this.verilogPower.inpB),this.output=this.verilogPower.answer}}class Dv extends Di{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogDivider=new Rr(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogDivider.inpA),this.in2Splitter.inp1.connect(this.verilogDivider.inpB),this.output=this.verilogDivider.remainder}}class Tv extends Di{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogShiftLeft=new Ko(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogShiftLeft.inp1),this.in2Splitter.inp1.connect(this.verilogShiftLeft.shiftInp),this.output=this.verilogShiftLeft.output1}}class _v extends Di{constructor(t){super(t),this.outBitWidth=t.bits.out,this.verilogShiftRight=new Qo(300,300,void 0,void 0,this.bitWidth,this.outBitWidth),this.in1Splitter.inp1.connect(this.verilogShiftRight.inp1),this.in2Splitter.inp1.connect(this.verilogShiftRight.shiftInp),this.output=this.verilogShiftRight.output1}}class Pv extends Di{constructor(t){super(t,!0),this.alu=new jn(0,0,void 0,void 0,this.bitWidth),this.controlConstant=new Ke(0,0,void 0,void 0,3,"110"),this.alu.controlSignalInput.connect(this.controlConstant.output1),this.in1Splitter.inp1.connect(this.alu.inp1),this.in2Splitter.inp1.connect(this.alu.inp2),this.output=this.alu.output}}class Iv{constructor(t){this.bitWidth=1,t.bits&&(this.bitWidth=Yh(t.bits)),this.dff=new sa(0,0,void 0,void 0,this.bitWidth),this.clockInput=this.dff.clockInp,this.arstInput=this.dff.reset,this.enableInput=this.dff.en,this.clockPolarity=!0,this.arstPolarity=!0,this.enablePolarity=!0,t.polarity.clock!=null&&(this.clockPolarity=t.polarity.clock),this.clockPolarity==!1&&(this.notGateClock=new Oi(0,0),this.notGateClock.output1.connect(this.dff.clockInp),this.clockInput=this.notGateClock.inp1),t.polarity.enable!=null&&(this.enablePolarity=t.polarity.enable),this.enablePolarity==!1&&(this.notGateEnable=new Oi(0,0),this.notGateEnable.output1.connect(this.dff.en),this.enableInput=this.notGateEnable.inp1),t.polarity.arst!=null&&(this.arstPolarity=t.polarity.arst),this.arstPolarity==!1&&(this.notGateArst=new Oi(0,0),this.notGateArst.output1.connect(this.dff.reset),this.arstInput=this.notGateArst.inp1),t.arst_value!=null&&(this.arst_value_constant=new Ke(0,0,void 0,void 0,this.bitWidth,t.arst_value),this.arst_value_constant.output1.connect(this.dff.preset)),this.dInput=this.dff.dInp,this.qOutput=this.dff.qOutput}getPort(t){if(t=="clk")return this.clockInput;if(t=="in")return this.dInput;if(t=="arst")return this.arstInput;if(t=="en")return this.enableInput;if(t=="out")return this.qOutput}}class Lv{constructor(t){this.bitWidth=1,this.selectBitWidth=void 0,t.bits.in!=null&&(this.bitWidth=t.bits.in),t.bits.sel!=null&&(this.selectBitWidth=t.bits.sel),this.multiplexer=new Ri(0,0,void 0,void 0,this.bitWidth,this.selectBitWidth),this.input=this.multiplexer.inp,this.selectInput=this.multiplexer.controlSignalInput,this.output=this.multiplexer.output1}getPort(t){if(t=="sel")return this.selectInput;if(t=="out")return this.output;var n=t.length,r=parseInt(t.substring(2,n));return this.input[r]}}class Ov{constructor(t){this.bitWidth=1,this.selectBitWidth=void 0,t.bits.in!=null&&(this.bitWidth=t.bits.in),t.bits.sel!=null&&(this.selectBitWidth=t.bits.sel),this.multiplexer=new Ri(0,0,void 0,void 0,this.bitWidth,this.selectBitWidth),this.lsb=new ia(0,0,void 0,void 0,this.selectBitWidth),this.adder=new Vs(0,0,void 0,void 0,this.selectBitWidth);for(var n="",r=0;r<this.selectBitWidth-1;r++)n+="0";this.zeroPadEnable=new Ke(0,0,void 0,void 0,this.selectBitWidth-1,n),this.enbaleSplitter=new ke(0,0,void 0,void 0,this.selectBitWidth,[1,this.selectBitWidth-1]),this.lsb.enable.connect(this.enbaleSplitter.outputs[0]),this.zeroPadEnable.output1.connect(this.enbaleSplitter.outputs[1]),this.adder.inpA.connect(this.lsb.output1),this.adder.inpB.connect(this.enbaleSplitter.inp1),this.adder.sum.connect(this.multiplexer.controlSignalInput),this.input=this.multiplexer.inp,this.selectInput=this.lsb.inp1,this.output=this.multiplexer.output1}getPort(t){if(t=="sel")return this.selectInput;if(t=="out")return this.output;var n=t.length,r=parseInt(t.substring(2,n));return this.input[r]}}class Ev{constructor(t){this.bitWidth=0,this.bitWidthSplit=t.groups;for(var n=0;n<this.bitWidthSplit.length;n++)this.bitWidth+=this.bitWidthSplit[n];this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.input=this.splitter.outputs,this.output=this.splitter.inp1}getPort(t){if(t=="out")return this.output;var n=t.length,r=parseInt(t.substring(2,n));return this.input[r]}}class Wv{constructor(t){this.bitWidth=0,this.bitWidthSplit=t.groups;for(var n=0;n<this.bitWidthSplit.length;n++)this.bitWidth+=this.bitWidthSplit[n];this.splitter=new ke(0,0,void 0,void 0,this.bitWidth,this.bitWidthSplit),this.input=this.splitter.inp1,this.output=this.splitter.outputs}getPort(t){if(t=="in")return this.input;var n=t.length,r=parseInt(t.substring(3,n));return this.output[r]}}class Av{constructor(t){this.memData=t.memdata,this.dataBitWidth=t.bits,this.addressBitWidth=t.abits,this.words=t.words,this.numRead=t.rdports.length,this.numWrite=t.wrports.length,this.verilogRAM=new Js(0,0,void 0,void 0,this.dataBitWidth,this.addressBitWidth,this.memData,this.words,this.numRead,this.numWrite,t.rdports,t.wrports),this.writeAddressInput=this.verilogRAM.writeAddress,this.readAddressInput=this.verilogRAM.readAddress,this.writeDataInput=this.verilogRAM.writeDataIn,this.writeEnableInput=this.verilogRAM.writeEnable,this.readDataOutput=this.verilogRAM.dataOut,this.readDffOut=this.verilogRAM.readDff;for(var n=0;n<this.numWrite;n++){var r=new cs(0,0,void 0,void 0,1,void 0);r.label="en"+n.toString(),r.output1.connect(this.verilogRAM.writeEnable[n])}}getPort(t){var n=t.length,r=t.slice(n-4,n)=="addr",l=t.slice(n-4,n)=="data",c=t.slice(n-3,n)=="clk",g=t.slice(n-2,n)=="en";if(t.startsWith("rd")){if(r){var v=t.slice(2,n-4);return v=parseInt(v),this.readAddressInput[v]}if(l){var v=t.slice(2,n-4);return v=parseInt(v),this.verilogRAM.readDffQOutput[v]}if(c){var v=t.slice(2,n-3);return v=parseInt(v),this.verilogRAM.readDffClock[v]}if(g){var v=t.slice(2,n-2);return v=parseInt(v),this.verilogRAM.readDffEn[v]}}else{if(r){var v=t.slice(2,n-4);return v=parseInt(v),this.writeAddressInput[v]}if(l){var v=t.slice(2,n-4);return v=parseInt(v),this.writeDataInput[v]}if(c){var v=t.slice(2,n-3);return v=parseInt(v),this.verilogRAM.writeDffClock[v]}if(g){var v=t.slice(2,n-2);return v=parseInt(v),this.verilogRAM.writeDffEn[v]}}}}let ue={};ue.Not=Qm;ue.Repeater=Zm;ue.And=hv;ue.Nand=uv;ue.Or=cv;ue.Nor=dv;ue.Xor=fv;ue.Xnor=pv;ue.Constant=Jm;ue.Input=Ym;ue.Output=Um;ue.AndReduce=tv;ue.NandReduce=ev;ue.OrReduce=iv;ue.NorReduce=nv;ue.XorReduce=sv;ue.XnorReduce=rv;ue.Eq=gv;ue.Ne=mv;ue.Lt=vv;ue.Le=wv;ue.Ge=yv;ue.Gt=bv;ue.ZeroExtend=av;ue.Negation=lv;ue.Dff=Iv;ue.Mux=Lv;ue.Mux1Hot=Ov;ue.BusSlice=ov;ue.BusGroup=Ev;ue.BusUngroup=Wv;ue.Addition=Sv;ue.Subtraction=Pv;ue.Multiplication=xv;ue.Division=kv;ue.Modulo=Dv;ue.Power=Cv;ue.ShiftLeft=Tv;ue.ShiftRight=_v;ue.Clock=qm;ue.Lamp=Km;ue.Button=Vm;ue.Memory=Av;var Ws,Dh=!1;function Mv(){fs(void 0,void 0,!0,!0),Ar(!0)}function Nv(){var i=Ws.getValue();globalScope.verilogMetadata.code=i,Hv(i)}function Bv(){var i=document.getElementById("selectVerilogTheme"),t=i.options[i.selectedIndex].innerHTML;localStorage.setItem("verilog-theme",t),Ws.setOption("theme",t)}function cf(){Ws.setValue(globalScope.verilogMetadata.code)}function Bs(){return Dh}function Ar(i){i!=Dh&&(Dh=i,i?($("#code-window").show(),$(".elementPanel").hide(),$(".timing-diagram-panel").hide(),$(".quick-btn").hide(),$("#verilogEditorPanel").show(),embed||(simulationArea.lastSelected=globalScope.root,$n(void 0),$n(simulationArea.lastSelected)),cf()):($("#code-window").hide(),$(".elementPanel").show(),$(".timing-diagram-panel").show(),$(".quick-btn").show(),$("#verilogEditorPanel").hide()))}class Rv{constructor(t){this.circuit=t}getPort(t){for(var n=this.circuit.inputNodes.length,r=this.circuit.outputNodes.length,l=0;l<n;l++)if(this.circuit.data.Input[l].label==t)return this.circuit.inputNodes[l];for(var l=0;l<r;l++)if(this.circuit.data.Output[l].label==t)return this.circuit.outputNodes[l]}}function df(i,t=globalScope,n="verilogCircuit",r={},l=!1){var c=t.id,g;l?g=t:g=fs(n,void 0,!0,!1);var v={};for(var w in i.subcircuits){var D=df(i.subcircuits[w],g,w,r);r[w]=D.id}for(var T in i.devices){var R=i.devices[T].type;if(R=="Subcircuit"){var w=i.devices[T].celltype;v[T]=new Rv(new Yo(500,500,void 0,r[w]))}else v[T]=new ue[R](i.devices[T])}for(var M in i.connectors){var L=i.connectors[M].from.id,E=i.connectors[M].from.port,Q=i.connectors[M].to.id,lt=i.connectors[M].to.port,B=v[L],A=v[Q],q=B.getPort(E),z=A.getPort(lt);q.connect(z)}if(!l)return Ur(c),g}function Hv(i,t=globalScope){const n="/simulator/verilogcv";var r={code:i};$.ajax({url:n,type:"POST",beforeSend:function(l){l.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:r,success:function(l){var c=l;t.initialize();for(var g in t.verilogMetadata.subCircuitScopeIds)delete scopeList[g];t.verilogMetadata.subCircuitScopeIds=[],t.verilogMetadata.code=i;var v={};df(c,globalScope,"verilogCircuit",v,!0),Af(c.name),De("Verilog Circuit Successfully Created"),$("#verilogOutput").empty()},error:function(l,c,g){var v=l.status;if(v==500)ii("Could not connect to Yosys");else{ii("There is some issue with the code");var w=l.responseJSON;$("#verilogOutput").html(w.message)}},failure:function(l){}})}function $v(){var i=document.getElementById("codeTextArea");if(Ya.commands.autocomplete=function(t){t.showHint({hint:Ya.hint.anyword})},Ws=Ya.fromTextArea(i,{mode:"verilog",autoRefresh:!0,styleActiveLine:!0,lineNumbers:!0,autoCloseBrackets:!0,smartIndent:!0,indentWithTabs:!0,extraKeys:{"Ctrl-Space":"autocomplete"}}),!localStorage.getItem("verilog-theme"))localStorage.setItem("verilog-theme","default");else{const t=localStorage.getItem("verilog-theme");Ws.setOption("theme",t)}Ws.setValue("// Write Some Verilog Code Here!"),setTimeout(function(){Ws.refresh()},1)}var ff={exports:{}};(function(i){(function(t){var n=q(),r=z(),l=it(),c=xt(),g={imagePlaceholder:void 0,cacheBust:!1},v={toSvg:w,toPng:T,toJpeg:R,toBlob:M,toPixelData:D,impl:{fontFaces:l,images:c,util:n,inliner:r,options:{}}};i.exports=v;function w(rt,at){return at=at||{},L(at),Promise.resolve(rt).then(function(Dt){return Q(Dt,at.filter,!0)}).then(lt).then(B).then(wt).then(function(Dt){return A(Dt,at.width||n.width(rt),at.height||n.height(rt))});function wt(Dt){return at.bgcolor&&(Dt.style.backgroundColor=at.bgcolor),at.width&&(Dt.style.width=at.width+"px"),at.height&&(Dt.style.height=at.height+"px"),at.style&&Object.keys(at.style).forEach(function(Wt){Dt.style[Wt]=at.style[Wt]}),Dt}}function D(rt,at){return E(rt,at||{}).then(function(wt){return wt.getContext("2d").getImageData(0,0,n.width(rt),n.height(rt)).data})}function T(rt,at){return E(rt,at||{}).then(function(wt){return wt.toDataURL()})}function R(rt,at){return at=at||{},E(rt,at).then(function(wt){return wt.toDataURL("image/jpeg",at.quality||1)})}function M(rt,at){return E(rt,at||{}).then(n.canvasToBlob)}function L(rt){typeof rt.imagePlaceholder>"u"?v.impl.options.imagePlaceholder=g.imagePlaceholder:v.impl.options.imagePlaceholder=rt.imagePlaceholder,typeof rt.cacheBust>"u"?v.impl.options.cacheBust=g.cacheBust:v.impl.options.cacheBust=rt.cacheBust}function E(rt,at){return w(rt,at).then(n.makeImage).then(n.delay(100)).then(function(Dt){var Wt=wt(rt);return Wt.getContext("2d").drawImage(Dt,0,0),Wt});function wt(Dt){var Wt=document.createElement("canvas");if(Wt.width=at.width||n.width(Dt),Wt.height=at.height||n.height(Dt),at.bgcolor){var Pt=Wt.getContext("2d");Pt.fillStyle=at.bgcolor,Pt.fillRect(0,0,Wt.width,Wt.height)}return Wt}}function Q(rt,at,wt){if(!wt&&at&&!at(rt))return Promise.resolve();return Promise.resolve(rt).then(Dt).then(function(K){return Wt(rt,K,at)}).then(function(K){return Pt(rt,K)});function Dt(K){return K instanceof HTMLCanvasElement?n.makeImage(K.toDataURL()):K.cloneNode(!1)}function Wt(K,J,Y){var ee=K.childNodes;if(ee.length===0)return Promise.resolve(J);return Kt(J,n.asArray(ee),Y).then(function(){return J});function Kt(Zt,Yt,Rt){var qt=Promise.resolve();return Yt.forEach(function(pe){qt=qt.then(function(){return Q(pe,Rt)}).then(function(oe){oe&&Zt.appendChild(oe)})}),qt}}function Pt(K,J){if(!(J instanceof Element))return J;return Promise.resolve().then(Y).then(ee).then(Kt).then(Zt).then(function(){return J});function Y(){Yt(window.getComputedStyle(K),J.style);function Yt(Rt,qt){Rt.cssText?qt.cssText=Rt.cssText:pe(Rt,qt);function pe(oe,ce){n.asArray(oe).forEach(function(ot){ce.setProperty(ot,oe.getPropertyValue(ot),oe.getPropertyPriority(ot))})}}}function ee(){[":before",":after"].forEach(function(Rt){Yt(Rt)});function Yt(Rt){var qt=window.getComputedStyle(K,Rt),pe=qt.getPropertyValue("content");if(pe===""||pe==="none")return;var oe=n.uid();J.className=J.className+" "+oe;var ce=document.createElement("style");ce.appendChild(ot(oe,Rt,qt)),J.appendChild(ce);function ot(V,st,N){var U="."+V+":"+st,bt=N.cssText?vt(N):Lt(N);return document.createTextNode(U+"{"+bt+"}");function vt(Ut){var Qt=Ut.getPropertyValue("content");return Ut.cssText+" content: "+Qt+";"}function Lt(Ut){return n.asArray(Ut).map(Qt).join("; ")+";";function Qt(Ht){return Ht+": "+Ut.getPropertyValue(Ht)+(Ut.getPropertyPriority(Ht)?" !important":"")}}}}}function Kt(){K instanceof HTMLTextAreaElement&&(J.innerHTML=K.value),K instanceof HTMLInputElement&&J.setAttribute("value",K.value)}function Zt(){J instanceof SVGElement&&(J.setAttribute("xmlns","http://www.w3.org/2000/svg"),J instanceof SVGRectElement&&["width","height"].forEach(function(Yt){var Rt=J.getAttribute(Yt);Rt&&J.style.setProperty(Yt,Rt)}))}}}function lt(rt){return l.resolveAll().then(function(at){var wt=document.createElement("style");return rt.appendChild(wt),wt.appendChild(document.createTextNode(at)),rt})}function B(rt){return c.inlineAll(rt).then(function(){return rt})}function A(rt,at,wt){return Promise.resolve(rt).then(function(Dt){return Dt.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Dt)}).then(n.escapeXhtml).then(function(Dt){return'<foreignObject x="0" y="0" width="100%" height="100%">'+Dt+"</foreignObject>"}).then(function(Dt){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+at+'" height="'+wt+'">'+Dt+"</svg>"}).then(function(Dt){return"data:image/svg+xml;charset=utf-8,"+Dt})}function q(){return{escape:Zt,parseExtension:at,mimeType:wt,dataAsUrl:Kt,isDataUrl:Dt,canvasToBlob:Pt,resolveUrl:K,getAndEncode:ee,uid:J(),delay:Yt,asArray:Rt,escapeXhtml:qt,makeImage:Y,width:pe,height:oe};function rt(){var ot="application/font-woff",V="image/jpeg";return{woff:ot,woff2:ot,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:V,jpeg:V,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function at(ot){var V=/\.([^\.\/]*?)$/g.exec(ot);return V?V[1]:""}function wt(ot){var V=at(ot).toLowerCase();return rt()[V]||""}function Dt(ot){return ot.search(/^(data:)/)!==-1}function Wt(ot){return new Promise(function(V){for(var st=window.atob(ot.toDataURL().split(",")[1]),N=st.length,U=new Uint8Array(N),bt=0;bt<N;bt++)U[bt]=st.charCodeAt(bt);V(new Blob([U],{type:"image/png"}))})}function Pt(ot){return ot.toBlob?new Promise(function(V){ot.toBlob(V)}):Wt(ot)}function K(ot,V){var st=document.implementation.createHTMLDocument(),N=st.createElement("base");st.head.appendChild(N);var U=st.createElement("a");return st.body.appendChild(U),N.href=V,U.href=ot,U.href}function J(){var ot=0;return function(){return"u"+V()+ot++;function V(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function Y(ot){return new Promise(function(V,st){var N=new Image;N.onload=function(){V(N)},N.onerror=st,N.src=ot})}function ee(ot){var V=3e4;return v.impl.options.cacheBust&&(ot+=(/\?/.test(ot)?"&":"?")+new Date().getTime()),new Promise(function(st){var N=new XMLHttpRequest;N.onreadystatechange=vt,N.ontimeout=Lt,N.responseType="blob",N.timeout=V,N.open("GET",ot,!0),N.send();var U;if(v.impl.options.imagePlaceholder){var bt=v.impl.options.imagePlaceholder.split(/,/);bt&&bt[1]&&(U=bt[1])}function vt(){if(N.readyState===4){if(N.status!==200){U?st(U):Ut("cannot fetch resource: "+ot+", status: "+N.status);return}var Qt=new FileReader;Qt.onloadend=function(){var Ht=Qt.result.split(/,/)[1];st(Ht)},Qt.readAsDataURL(N.response)}}function Lt(){U?st(U):Ut("timeout of "+V+"ms occured while fetching resource: "+ot)}function Ut(Qt){console.error(Qt),st("")}})}function Kt(ot,V){return"data:"+V+";base64,"+ot}function Zt(ot){return ot.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function Yt(ot){return function(V){return new Promise(function(st){setTimeout(function(){st(V)},ot)})}}function Rt(ot){for(var V=[],st=ot.length,N=0;N<st;N++)V.push(ot[N]);return V}function qt(ot){return ot.replace(/#/g,"%23").replace(/\n/g,"%0A")}function pe(ot){var V=ce(ot,"border-left-width"),st=ce(ot,"border-right-width");return ot.scrollWidth+V+st}function oe(ot){var V=ce(ot,"border-top-width"),st=ce(ot,"border-bottom-width");return ot.scrollHeight+V+st}function ce(ot,V){var st=window.getComputedStyle(ot).getPropertyValue(V);return parseFloat(st.replace("px",""))}}function z(){var rt=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:Wt,shouldProcess:at,impl:{readUrls:wt,inline:Dt}};function at(Pt){return Pt.search(rt)!==-1}function wt(Pt){for(var K=[],J;(J=rt.exec(Pt))!==null;)K.push(J[1]);return K.filter(function(Y){return!n.isDataUrl(Y)})}function Dt(Pt,K,J,Y){return Promise.resolve(K).then(function(Kt){return J?n.resolveUrl(Kt,J):Kt}).then(Y||n.getAndEncode).then(function(Kt){return n.dataAsUrl(Kt,n.mimeType(K))}).then(function(Kt){return Pt.replace(ee(K),"$1"+Kt+"$3")});function ee(Kt){return new RegExp(`(url\\(['"]?)(`+n.escape(Kt)+`)(['"]?\\))`,"g")}}function Wt(Pt,K,J){if(Y())return Promise.resolve(Pt);return Promise.resolve(Pt).then(wt).then(function(ee){var Kt=Promise.resolve(Pt);return ee.forEach(function(Zt){Kt=Kt.then(function(Yt){return Dt(Yt,Zt,K,J)})}),Kt});function Y(){return!at(Pt)}}}function it(){return{resolveAll:rt,impl:{readAll:at}};function rt(){return at().then(function(wt){return Promise.all(wt.map(function(Dt){return Dt.resolve()}))}).then(function(wt){return wt.join(`
`)})}function at(){return Promise.resolve(n.asArray(document.styleSheets)).then(Dt).then(wt).then(function(Pt){return Pt.map(Wt)});function wt(Pt){return Pt.filter(function(K){return K.type===CSSRule.FONT_FACE_RULE}).filter(function(K){return r.shouldProcess(K.style.getPropertyValue("src"))})}function Dt(Pt){var K=[];return Pt.forEach(function(J){try{n.asArray(J.cssRules||[]).forEach(K.push.bind(K))}catch(Y){console.log("Error while reading CSS rules from "+J.href,Y.toString())}}),K}function Wt(Pt){return{resolve:function(){var J=(Pt.parentStyleSheet||{}).href;return r.inlineAll(Pt.cssText,J)},src:function(){return Pt.style.getPropertyValue("src")}}}}}function xt(){return{inlineAll:at,impl:{newImage:rt}};function rt(wt){return{inline:Dt};function Dt(Wt){return n.isDataUrl(wt.src)?Promise.resolve():Promise.resolve(wt.src).then(Wt||n.getAndEncode).then(function(Pt){return n.dataAsUrl(Pt,n.mimeType(wt.src))}).then(function(Pt){return new Promise(function(K,J){wt.onload=K,wt.onerror=J,wt.src=Pt})})}}function at(wt){if(!(wt instanceof Element))return Promise.resolve(wt);return Dt(wt).then(function(){return wt instanceof HTMLImageElement?rt(wt).inline():Promise.all(n.asArray(wt.childNodes).map(function(Wt){return at(Wt)}))});function Dt(Wt){var Pt=Wt.style.getPropertyValue("background");return Pt?r.inlineAll(Pt).then(function(K){Wt.style.setProperty("background",K,Wt.style.getPropertyPriority("background"))}).then(function(){return Wt}):Promise.resolve(Wt)}}}})()})(ff);var zv=ff.exports;const Fv=Mh(zv);/*!!
* Canvas 2 Svg v1.0.19
* A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
*
* Licensed under the MIT license:
* http://www.opensource.org/licenses/mit-license.php
*
* Author:
* Kerry Liu
*
* Copyright (c) 2014 Gliffy Inc.
*/var Mr,re,ra,Uh,Th;function gi(i,t){var n=Object.keys(t),r;for(r=0;r<n.length;r++)i=i.replace(new RegExp("\\{"+n[r]+"\\}","gi"),t[n[r]]);return i}function fl(i){var t,n,r;if(!i)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do for(n="",r=0;r<12;r++)n+=t[Math.floor(Math.random()*t.length)];while(i[n]);return n}function jv(i,t){var n,r,l={},c;for(i=i.split(","),t=t||10,n=0;n<i.length;n+=2)r="&"+i[n+1]+";",c=parseInt(i[n],t),l[r]="&#"+c+";";return l["\\xa0"]="&#160;",l}function Gv(i){var t={left:"start",right:"end",center:"middle",start:"start",end:"end"};return t[i]||t.start}function Xv(i){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[i]||t.alphabetic}Th=jv("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);Mr={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}};ra=function(i,t){this.__root=i,this.__ctx=t};ra.prototype.addColorStop=function(i,t){var n=this.__ctx.__createElement("stop"),r,l;n.setAttribute("offset",i),t.indexOf("rgba")!==-1?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,l=r.exec(t),n.setAttribute("stop-color",gi("rgb({r},{g},{b})",{r:l[1],g:l[2],b:l[3]})),n.setAttribute("stop-opacity",l[4])):n.setAttribute("stop-color",t),this.__root.appendChild(n)};Uh=function(i,t){this.__root=i,this.__ctx=t};re=function(i){var t={width:500,height:500,enableMirroring:!1},n;if(arguments.length>1?(n=t,n.width=arguments[0],n.height=arguments[1]):i?n=i:n=t,!(this instanceof re))return new re(n);this.width=n.width||t.width,this.height=n.height||t.height,this.enableMirroring=n.enableMirroring!==void 0?n.enableMirroring:t.enableMirroring,this.canvas=this,this.__document=n.document||document,n.ctx?this.__ctx=n.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)};re.prototype.__createElement=function(i,t,n){typeof t>"u"&&(t={});var r=this.__document.createElementNS("http://www.w3.org/2000/svg",i),l=Object.keys(t),c,g;for(n&&(r.setAttribute("fill","none"),r.setAttribute("stroke","none")),c=0;c<l.length;c++)g=l[c],r.setAttribute(g,t[g]);return r};re.prototype.__setDefaultStyles=function(){var i=Object.keys(Mr),t,n;for(t=0;t<i.length;t++)n=i[t],this[n]=Mr[n].canvas};re.prototype.__applyStyleState=function(i){var t=Object.keys(i),n,r;for(n=0;n<t.length;n++)r=t[n],this[r]=i[r]};re.prototype.__getStyleState=function(){var i,t={},n=Object.keys(Mr),r;for(i=0;i<n.length;i++)r=n[i],t[r]=this[r];return t};re.prototype.__applyStyleToCurrentElement=function(i){var t=this.__currentElement,n=this.__currentElementsToStyle;n&&(t.setAttribute(i,""),t=n.element,n.children.forEach(function(L){L.setAttribute(i,"")}));var r=Object.keys(Mr),l,c,g,v,w,D;for(l=0;l<r.length;l++)if(c=Mr[r[l]],g=this[r[l]],c.apply){if(g instanceof Uh){if(g.__ctx)for(;g.__ctx.__defs.childNodes.length;)v=g.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[v]=v,this.__defs.appendChild(g.__ctx.__defs.childNodes[0]);t.setAttribute(c.apply,gi("url(#{id})",{id:g.__root.getAttribute("id")}))}else if(g instanceof ra)t.setAttribute(c.apply,gi("url(#{id})",{id:g.__root.getAttribute("id")}));else if(c.apply.indexOf(i)!==-1&&c.svg!==g)if((c.svgAttr==="stroke"||c.svgAttr==="fill")&&g.indexOf("rgba")!==-1){w=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,D=w.exec(g),t.setAttribute(c.svgAttr,gi("rgb({r},{g},{b})",{r:D[1],g:D[2],b:D[3]}));var T=D[4],R=this.globalAlpha;R!=null&&(T*=R),t.setAttribute(c.svgAttr+"-opacity",T)}else{var M=c.svgAttr;if(r[l]==="globalAlpha"&&(M=i+"-"+c.svgAttr,t.getAttribute(M)))continue;t.setAttribute(M,g)}}};re.prototype.__closestGroupOrSvg=function(i){return i=i||this.__currentElement,i.nodeName==="g"||i.nodeName==="svg"?i:this.__closestGroupOrSvg(i.parentNode)};re.prototype.getSerializedSvg=function(i){var t=new XMLSerializer().serializeToString(this.__root),n,r,l,c,g,v;if(v=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,v.test(t)&&(t=t.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),i)for(n=Object.keys(Th),r=0;r<n.length;r++)l=n[r],c=Th[l],g=new RegExp(l,"gi"),g.test(t)&&(t=t.replace(g,c));return t};re.prototype.getSvg=function(){return this.__root};re.prototype.save=function(){var i=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(i),this.__currentElement=i,this.__stack.push(this.__getStyleState())};re.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var i=this.__stack.pop();this.__applyStyleState(i)};re.prototype.__addTransform=function(i){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){this.__currentElement.nodeName==="path"&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:t,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath());var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=i,this.__currentElement.setAttribute("transform",r)};re.prototype.scale=function(i,t){t===void 0&&(t=i),this.__addTransform(gi("scale({x},{y})",{x:i,y:t}))};re.prototype.rotate=function(i){var t=i*180/Math.PI;this.__addTransform(gi("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))};re.prototype.translate=function(i,t){this.__addTransform(gi("translate({x},{y})",{x:i,y:t}))};re.prototype.transform=function(i,t,n,r,l,c){this.__addTransform(gi("matrix({a},{b},{c},{d},{e},{f})",{a:i,b:t,c:n,d:r,e:l,f:c}))};re.prototype.beginPath=function(){var i,t;this.__currentDefaultPath="",this.__currentPosition={},i=this.__createElement("path",{},!0),t=this.__closestGroupOrSvg(),t.appendChild(i),this.__currentElement=i};re.prototype.__applyCurrentDefaultPath=function(){var i=this.__currentElement;i.nodeName==="path"?i.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",i.nodeName)};re.prototype.__addPathCommand=function(i){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=i};re.prototype.moveTo=function(i,t){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:i,y:t},this.__addPathCommand(gi("M {x} {y}",{x:i,y:t}))};re.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")};re.prototype.lineTo=function(i,t){this.__currentPosition={x:i,y:t},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(gi("L {x} {y}",{x:i,y:t})):this.__addPathCommand(gi("M {x} {y}",{x:i,y:t}))};re.prototype.bezierCurveTo=function(i,t,n,r,l,c){this.__currentPosition={x:l,y:c},this.__addPathCommand(gi("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:i,cp1y:t,cp2x:n,cp2y:r,x:l,y:c}))};re.prototype.quadraticCurveTo=function(i,t,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(gi("Q {cpx} {cpy} {x} {y}",{cpx:i,cpy:t,x:n,y:r}))};var fh=function(i){var t=Math.sqrt(i[0]*i[0]+i[1]*i[1]);return[i[0]/t,i[1]/t]};re.prototype.arcTo=function(i,t,n,r,l){var c=this.__currentPosition&&this.__currentPosition.x,g=this.__currentPosition&&this.__currentPosition.y;if(!(typeof c>"u"||typeof g>"u")){if(l<0)throw new Error("IndexSizeError: The radius provided ("+l+") is negative.");if(c===i&&g===t||i===n&&t===r||l===0){this.lineTo(i,t);return}var v=fh([c-i,g-t]),w=fh([n-i,r-t]);if(v[0]*w[1]===v[1]*w[0]){this.lineTo(i,t);return}var D=v[0]*w[0]+v[1]*w[1],T=Math.acos(Math.abs(D)),R=fh([v[0]+w[0],v[1]+w[1]]),M=l/Math.sin(T/2),L=i+M*R[0],E=t+M*R[1],Q=[-v[1],v[0]],lt=[w[1],-w[0]],B=function(z){var it=z[0],xt=z[1];return xt>=0?Math.acos(it):-Math.acos(it)},A=B(Q),q=B(lt);this.lineTo(L+Q[0]*l,E+Q[1]*l),this.arc(L,E,l,A,q)}};re.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")};re.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")};re.prototype.rect=function(i,t,n,r){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(i,t),this.lineTo(i+n,t),this.lineTo(i+n,t+r),this.lineTo(i,t+r),this.lineTo(i,t),this.closePath()};re.prototype.fillRect=function(i,t,n,r){var l,c;l=this.__createElement("rect",{x:i,y:t,width:n,height:r},!0),c=this.__closestGroupOrSvg(),c.appendChild(l),this.__currentElement=l,this.__applyStyleToCurrentElement("fill")};re.prototype.strokeRect=function(i,t,n,r){var l,c;l=this.__createElement("rect",{x:i,y:t,width:n,height:r},!0),c=this.__closestGroupOrSvg(),c.appendChild(l),this.__currentElement=l,this.__applyStyleToCurrentElement("stroke")};re.prototype.__clearCanvas=function(){for(var i=this.__closestGroupOrSvg(),t=i.getAttribute("transform"),n=this.__root.childNodes[1],r=n.childNodes,l=r.length-1;l>=0;l--)r[l]&&n.removeChild(r[l]);this.__currentElement=n,this.__groupStack=[],t&&this.__addTransform(t)};re.prototype.clearRect=function(i,t,n,r){if(i===0&&t===0&&n===this.width&&r===this.height){this.__clearCanvas();return}var l,c=this.__closestGroupOrSvg();l=this.__createElement("rect",{x:i,y:t,width:n,height:r,fill:"#FFFFFF"},!0),c.appendChild(l)};re.prototype.createLinearGradient=function(i,t,n,r){var l=this.__createElement("linearGradient",{id:fl(this.__ids),x1:i+"px",x2:n+"px",y1:t+"px",y2:r+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(l),new ra(l,this)};re.prototype.createRadialGradient=function(i,t,n,r,l,c){var g=this.__createElement("radialGradient",{id:fl(this.__ids),cx:r+"px",cy:l+"px",r:c+"px",fx:i+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(g),new ra(g,this)};re.prototype.__parseFont=function(){var i=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i,t=i.exec(this.font),n={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(n.decoration="underline"),this.__fontHref&&(n.href=this.__fontHref),n};re.prototype.__wrapTextLink=function(i,t){if(i.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.href),n.appendChild(t),n}return t};re.prototype.__applyText=function(i,t,n,r){var l=this.__parseFont(),c=this.__closestGroupOrSvg(),g=this.__createElement("text",{"font-family":l.family,"font-size":l.size,"font-style":l.style,"font-weight":l.weight,"text-decoration":l.decoration,x:t,y:n,"text-anchor":Gv(this.textAlign),"dominant-baseline":Xv(this.textBaseline)},!0);g.appendChild(this.__document.createTextNode(i)),this.__currentElement=g,this.__applyStyleToCurrentElement(r),c.appendChild(this.__wrapTextLink(l,g))};re.prototype.fillText=function(i,t,n){this.__applyText(i,t,n,"fill")};re.prototype.strokeText=function(i,t,n){this.__applyText(i,t,n,"stroke")};re.prototype.measureText=function(i){return this.__ctx.font=this.font,this.__ctx.measureText(i)};re.prototype.arc=function(i,t,n,r,l,c){if(r!==l){r=r%(2*Math.PI),l=l%(2*Math.PI),r===l&&(l=(l+2*Math.PI-.001*(c?-1:1))%(2*Math.PI));var g=i+n*Math.cos(l),v=t+n*Math.sin(l),w=i+n*Math.cos(r),D=t+n*Math.sin(r),T=c?0:1,R=0,M=l-r;M<0&&(M+=2*Math.PI),c?R=M>Math.PI?0:1:R=M>Math.PI?1:0,this.lineTo(w,D),this.__addPathCommand(gi("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:R,sweepFlag:T,endX:g,endY:v})),this.__currentPosition={x:g,y:v}}};re.prototype.clip=function(){var i=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=fl(this.__ids),r=this.__createElement("g");this.__applyCurrentDefaultPath(),i.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),i.setAttribute("clip-path",gi("url(#{id})",{id:n})),i.appendChild(r),this.__currentElement=r};re.prototype.drawImage=function(){var i=Array.prototype.slice.call(arguments),t=i[0],n,r,l,c,g=0,v=0,w,D,T,R,M,L,E,Q,lt,B;if(i.length===3)n=i[1],r=i[2],w=t.width,D=t.height,l=w,c=D;else if(i.length===5)n=i[1],r=i[2],l=i[3],c=i[4],w=t.width,D=t.height;else if(i.length===9)g=i[1],v=i[2],w=i[3],D=i[4],n=i[5],r=i[6],l=i[7],c=i[8];else throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);T=this.__closestGroupOrSvg(),this.__currentElement;var A="translate("+n+", "+r+")";if(t instanceof re){if(R=t.getSvg().cloneNode(!0),R.childNodes&&R.childNodes.length>1){for(M=R.childNodes[0];M.childNodes.length;)B=M.childNodes[0].getAttribute("id"),this.__ids[B]=B,this.__defs.appendChild(M.childNodes[0]);if(L=R.childNodes[1],L){var q=L.getAttribute("transform"),z;q?z=q+" "+A:z=A,L.setAttribute("transform",z),T.appendChild(L)}}}else(t.nodeName==="CANVAS"||t.nodeName==="IMG")&&(E=this.__createElement("image"),E.setAttribute("width",l),E.setAttribute("height",c),E.setAttribute("preserveAspectRatio","none"),(g||v||w!==t.width||D!==t.height)&&(Q=this.__document.createElement("canvas"),Q.width=l,Q.height=c,lt=Q.getContext("2d"),lt.drawImage(t,g,v,w,D,0,0,l,c),t=Q),E.setAttribute("transform",A),E.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.nodeName==="CANVAS"?t.toDataURL():t.getAttribute("src")),T.appendChild(E))};re.prototype.createPattern=function(i,t){var n=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),r=fl(this.__ids),l;return n.setAttribute("id",r),n.setAttribute("width",i.width),n.setAttribute("height",i.height),i.nodeName==="CANVAS"||i.nodeName==="IMG"?(l=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),l.setAttribute("width",i.width),l.setAttribute("height",i.height),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.nodeName==="CANVAS"?i.toDataURL():i.getAttribute("src")),n.appendChild(l),this.__defs.appendChild(n)):i instanceof re&&(n.appendChild(i.__root.childNodes[1]),this.__defs.appendChild(n)),new Uh(n,this)};re.prototype.setLineDash=function(i){i&&i.length>0?this.lineDash=i.join(","):this.lineDash=null};re.prototype.drawFocusRing=function(){};re.prototype.createImageData=function(){};re.prototype.getImageData=function(){};re.prototype.putImageData=function(){};re.prototype.globalCompositeOperation=function(){};re.prototype.setTransform=function(){};const Yv=re;var pf=void 0;function Ro(i){if(i==null){$("#projectName").html("Untitled");return}i=Nr(i),pf=i,$("#projectName").html(i)}function Rs(){return pf}function Uv(i,t){const n=f.canvas.toDataURL(`image/${t}`),r=document.createElement("a");r.href=n,r.download=`${i}.${t}`,r.click()}function qv(){var i=$("#tabsBar").children().not("button"),t=[];for(let n=0;n<i.length;n++)t.push(i[n].id);return t}function er(i,t=!0){data={},i=Rs()||i||prompt("Enter Project Name:")||"Untitled",data.name=Nr(i),t&&Ro(data.name),data.timePeriod=f.timePeriod,data.clockEnabled=f.clockEnabled,data.projectId=projectId,data.focussedCircuit=globalScope.id,data.orderedTabs=qv(),data.scopes=[];const n={},r={};for(id in ae)n[id]=ae[id].getDependencies();function l(c){if(!r[c]){for(let g=0;g<n[c].length;g++)l(n[c][g]);r[c]=!0,ps(ae[c],!0),data.scopes.push(Bo(ae[c]))}}for(let c in ae)l(c);return data=JSON.stringify(data),data}function gf(i,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",i),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}function qh(i,t,n,r,l=!0){const c=globalScope.ox,g=globalScope.oy,v=width,w=height,D=globalScope.scale,T=oi.context,R=f.context;oi.context=f.context,globalScope.ox*=1/D,globalScope.oy*=1/D,i==="svg"?(f.context=new Yv(width,height),r=1):i!=="png"&&(n=!1),globalScope.scale=r;const M=globalScope;if(t==="full"){Br();const E=f.minWidth,Q=f.minHeight,lt=f.maxWidth,B=f.maxHeight;width=(lt-E+100)*r,height=(B-Q+100)*r,globalScope.ox=(-E+50)*r,globalScope.oy=(-Q+50)*r}else globalScope.ox*=r,globalScope.oy*=r,width=width*r/D,height=height*r/D;globalScope.ox=Math.round(globalScope.ox),globalScope.oy=Math.round(globalScope.oy),f.canvas.width=width,f.canvas.height=height,oi.canvas.width=width,oi.canvas.height=height,oi.context=f.context,f.clear(),n||(f.context.fillStyle=ht.canvas_fill,f.context.rect(0,0,width,height),f.context.fill());for(let E=0;E<renderOrder.length;E++)for(let Q=0;Q<M[renderOrder[E]].length;Q++)M[renderOrder[E]][Q].draw();let L;if(l)if(i==="svg"){const E=f.context.getSerializedSvg();gf(`${globalScope.name}.svg`,E)}else Uv(globalScope.name,i);else L=f.canvas.toDataURL(`image/${i}`);if(width=v,height=w,f.canvas.width=width,f.canvas.height=height,oi.canvas.width=width,oi.canvas.height=height,globalScope.scale=D,oi.context=T,f.context=R,globalScope.ox=c,globalScope.oy=g,sr(),!l)return L}async function Vv(i,t,n){var r=document.createElement("CANVAS");r.width=t,r.height=n;var l=r.getContext("2d"),c,g=new Image;return new Promise(function(v,w){g.src=i,g.onload=()=>{l.drawImage(g,0,0,t,n,0,0,t,n),l.save(),c=r.toDataURL("image/jpeg"),v(c)}})}async function Kv(){var i=1.6;if(Bs()){var t=document.getElementsByClassName("CodeMirror")[0],n=$(t).css("height"),r=$(t).css("width"),l=500,c=Math.round(l/i);$(t).css("height",c),$(t).css("width",l);var g=await Fv.toJpeg(t);return $(t).css("width",r),$(t).css("height",n),g=await Vv(g,l,c),g}f.lastSelected=void 0,width>height*i?height=width/i:width=height*1.6,globalScope.centerFocus();const v=Math.min(700/(f.maxWidth-f.minWidth),440/(f.maxHeight-f.minHeight));return g=qh("jpeg","current",!1,v,!1),globalScope.centerFocus(!1),g}async function Vh(){Pe()&&qr(),bf(!0),$(".loadingIcon").fadeIn();const i=er(),t=Rs();var n=await Kv();if(!userSignedIn)localStorage.setItem("recover_login",i),confirm("You have to login to save the project, you will be redirected to the login page.")?window.location.href="/users/sign_in":$(".loadingIcon").fadeOut();else if(__logix_project_id=="0"){const r=$("<form/>",{action:"/simulator/create_data",method:"post"});r.append($("<input>",{type:"hidden",name:"authenticity_token",value:$('meta[name="csrf-token"]').attr("content")})),r.append($("<input>",{type:"text",name:"data",value:i})),r.append($("<input>",{type:"text",name:"image",value:n})),r.append($("<input>",{type:"text",name:"name",value:t})),$("body").append(r),r.submit()}else $.ajax({url:"/simulator/update_data",type:"POST",contentType:"application/json",beforeSend(r){r.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:JSON.stringify({data:i,id:__logix_project_id,image:n,name:t}),success(r){De(`We have saved your project: ${t} in our servers.`),$(".loadingIcon").fadeOut(),localStorage.removeItem("recover")},failure(r){De("There was an error, we couldn't save to our servers"),$(".loadingIcon").fadeOut()}});sr()}var bd=1;function Qv(){var i=er("Untitled");localStorage.setItem("autosave",i)}function Zv(){bd<globalScope.backups.length&&(Qv(),bd=globalScope.backups.length)}setInterval(Zv,3e3);const Jv=["layout","verilogMetadata","allNodes","id","name","restrictedCircuitElementsUsed","nodes"],t0=["name","timePeriod","clockEnabled","projectId","focussedCircuit","orderedTabs","scopes"],e0=()=>'<div><label for="CircuitDataFile">Choose file</label><div id="message-box"><i class="fas fa-plus"></i><br/>Browse files or Drag & Drop files here<div id="message">No file chosen!!</div><input style="background:none;" type="file" id="CircuitDataFile"/></div></div>',mf=()=>{$("#ImportCircuitFilesDialog").empty(),$("#ImportCircuitFilesDialog").append(e0()),$("#ImportCircuitFilesDialog").dialog({resizable:!1,close(){},buttons:[{text:"Close",click(){$(this).dialog("close")}}]}),$("#ImportCircuitFilesDialog").focus();function i(n){try{const r=JSON.parse(n);if(JSON.stringify(Object.keys(r))!==JSON.stringify(t0))throw new Error("Invalid JSON data");return r.scopes.forEach(l=>{const c=Object.keys(l);Jv.forEach(g=>{if(!c.includes(g))throw new Error("Invalid Scope data")})}),Hn(r),!0}catch{return $("#message").text("Invalid file format"),!1}}function t(n){const r=JSON.parse(er(ml($("#projectName").text()).trim(),!1));i(n.target.result)?$("#ImportCircuitFilesDialog").dialog("close"):Hn(r)}$("#CircuitDataFile").on("change",n=>{var r=n.target.files[0],l=new FileReader;l.onload=t,l.readAsText(r)})};function yd(i){const t=`Would you like to recover: ${i.name}`;confirm(t)&&Hn(i),localStorage.removeItem("recover"),localStorage.removeItem("autosave")}function i0(){const i=localStorage.getItem("recover"),t=localStorage.getItem("autosave");if(i){const n=JSON.parse(i);yd(n)}else if(t){const n=JSON.parse(t);yd(n)}else ii("No recover project found")}function vf(){$("#openProjectDialog").empty();const i=JSON.parse(localStorage.getItem("projectList"));let t=!0;for(id in i)t=!1,$("#openProjectDialog").append(`<label class="option custom-radio"><input type="radio" name="projectId" value="${id}" />${i[id]}<span></span><i class="fa fa-trash deleteOfflineProject" onclick="deleteOfflineProject('${id}')"></i></label>`);t&&$("#openProjectDialog").append("<p>Looks like no circuit has been saved yet. Create or upload a new one and save it!</p>"),$("#openProjectDialog").dialog({resizable:!1,width:"auto",buttons:t?[{text:"Open CV File",click(){$(this).dialog("close"),mf()}}]:[{id:"Open_offline_btn",text:"Open Project",click(){$("input[name=projectId]:checked").val()&&(Hn(JSON.parse(localStorage.getItem($("input[name=projectId]:checked").val()))),window.projectId=$("input[name=projectId]:checked").val(),$(this).dialog("close"))}}]})}var Kh=!0;function bf(i){Kh=i}function yf(){const i=er();localStorage.setItem(projectId,i);const t=JSON.parse(localStorage.getItem("projectList"))||{};t[projectId]=Rs(),localStorage.setItem("projectList",JSON.stringify(t)),De(`We have saved your project: ${Rs()} in your browser's localStorage`)}function wf(){let i=!1;for(id in ae)i|=xf(ae[id]);return i}window.onbeforeunload=function(){if(Kh||embed||!wf())return;alert("You have unsaved changes on this page. Do you want to leave this page and discard your changes or stay on this page?");const i=er("Untitled");return localStorage.setItem("recover",i),"Are u sure u want to leave? Any unsaved changes may not be recoverable"};function Sf(){confirm("Would you like to clear the project?")&&(globalScope=void 0,Of(),$(".circuits").remove(),fs("main"),De("Your project is as good as new!"))}function n0(i){(i||Kh||!wf()||confirm("What you like to start a new project? Any unsaved changes will be lost."))&&(Sf(),localStorage.removeItem("recover"),window.location="/simulator",Ro(void 0),projectId=us(),De("New Project has been created!"))}function wd(i){return i.saveObject()}function xf(i){for(let t=0;t<updateOrder.length;t++)if(i[updateOrder[t]].length)return!0;return!1}function Bo(i=globalScope){for(let n=0;n<i.SubCircuit.length;n++)i.SubCircuit[n].removeConnections();var t={};t.layout=i.layout,t.verilogMetadata=i.verilogMetadata,t.allNodes=i.allNodes.map(wd),t.testbenchData=i.testbenchData,t.id=i.id,t.name=i.name;for(let n=0;n<moduleList.length;n++)i[moduleList[n]].length&&(t[moduleList[n]]=i[moduleList[n]].map(wd));t.restrictedCircuitElementsUsed=i.restrictedCircuitElementsUsed,t.nodes=[];for(let n=0;n<i.nodes.length;n++)t.nodes.push(i.allNodes.indexOf(i.nodes[n]));for(let n=0;n<i.SubCircuit.length;n++)i.SubCircuit[n].makeConnections();return t}function Hs(i=globalScope){var t=JSON.stringify(Bo(i));return(i.backups.length===0||i.backups[i.backups.length-1]!==t)&&(i.backups.push(t),i.history=[],i.timeStamp=new Date().getTime(),bf(!1)),t}function Ua(i=globalScope){if(Pe()||i.history.length===0)return;const t=globalScope.ox,n=globalScope.oy,r=globalScope.scale;globalScope.ox=0,globalScope.oy=0;const l=new $s(i.name);loading=!0;const c=i.history.pop();i.backups.push(c),as(l,JSON.parse(c)),l.backups=i.backups,l.history=i.history,l.id=i.id,l.name=i.name,l.testbenchData=i.testbenchData,ae[i.id]=l,globalScope=l,globalScope.ox=t,globalScope.oy=n,globalScope.scale=r,loading=!1,Ei(!0),As()}function pl(i=globalScope){$("#saveImageDialog").dialog({resizable:!1,width:"auto",buttons:[{text:"Render Circuit Image",click(){qh($("input[name=imgType]:checked").val(),$("input[name=view]:checked").val(),$("input[name=transparent]:checked").val(),$("input[name=resolution]:checked").val()),$(this).dialog("close")},class:"render-btn"}]}),$("input[name=imgType]").change(()=>{$("input[name=resolution]").prop("disabled",!1),$("input[name=transparent]").prop("disabled",!1);const t=$("input[name=imgType]:checked").val();t=="svg"?$(".btn-group-toggle, .download-dialog-section-3").addClass("disable"):$(".btn-group-toggle, .download-dialog-section-3, .cb-inner").removeClass("disable"),t==="svg"?($("input[name=resolution][value=1]").trigger("click"),$('input[name=view][value="full"]').trigger("click"),$("input[name=resolution]").prop("disabled",!0),$("input[name=view]").prop("disabled",!0)):t!=="png"?($("input[name=transparent]").attr("checked",!1),$("input[name=transparent]").prop("disabled",!0),$("input[name=view]").prop("disabled",!1),$(".cb-inner").addClass("disable")):($("input[name=view]").prop("disabled",!1),$(".cb-inner").removeClass("disable"))})}function Qh(i,t,n=[]){var r;Object.defineProperties(this,{minTerms:{value:t,enumerable:!1,writable:!1,configurable:!0},dontCares:{value:n,enumerable:!1,writable:!1,configurable:!0},numVars:{value:i,enumerable:!1,writable:!1,configurable:!0},result:{enumerable:!0,configurable:!0,get:function(){return r===void 0&&(r=Qh.prototype.solve.call(this)),r},set:function(){throw new Error("result cannot be assigned a value")}}})}Qh.prototype.solve=function(){function i(g){for(var v=g.toString(2);v.length!=this.numVars;)v="0"+v;return v}function t(g){var v=0;for(let w=0;w<g.length;++w)g[w]==="1"&&v++;return v}function n(g){for(var v=[],w=new Set,D;;){for(let T=0;T<=this.numVars;++T)v[T]=new Set;for(let T=0;T<g.length;++T)v[t(g[T])].add(g[T]);g=[],D=new Set;for(let T=0;T<v.length-1;++T)for(let R of v[T])for(let M of v[T+1]){let L=-1;for(let E=0;E<this.numVars;++E)if(R[E]!=M[E])if(L===-1)L=E;else{L=-1;break}L!==-1&&(g.push(R.slice(0,L)+"-"+R.slice(L+1)),D.add(R),D.add(M))}for(let T of v)for(let R of T)D.has(R)||w.add(R);if(!D.size)break}return w}function r(g,v){var w=[],D;function T(B,A){for(let q=0;q<A.length;++q)if(A[q]!=="-"&&B[q]!==A[q])return!1;return!0}function R(B){var A=B.length;for(let q of B)for(let z=0;z<q.length;++z)q[z]!=="-"&&(A++,q[z]==="0"&&A++);return A}function M(B,A){for(let q of B)if(!A.has(q))return!1;return!0}for(let B of v){D=[];for(let A=0;A<g.length;++A)T(B,g[A])&&D.push(A);w.push(D)}var L=[],E;for(let B of w[0])L.push(new Set([B]));for(let B=1;B<w.length;++B){E=[];for(let A of L){for(let q of w[B]){let z=new Set(A);z.add(q);let it=!0;for(let xt=E.length-1;xt>=0;--xt)M(z,E[xt])?E.splice(xt,1):it=!1;it&&E.push(z)}L=E}}var Q,lt=1e9;for(let B of L){let A=[];for(let z of B)A.push(g[z]);let q=R(A);q<lt&&(Q=A,lt=q)}return Q}var l=this.minTerms.map(i.bind(this)),c=this.dontCares.map(i.bind(this));return r.call(this,Array.from(n.call(this,l.concat(c))),l)};const s0=(i,t,n,r=globalScope)=>{var l=Nr(i).split(","),c=Nr(t).split(","),g=n;l=l.map(T=>T.trim()),l=l.filter(T=>T),c=c.map(T=>T.trim()),c=c.filter(T=>T),g=g.replace(/ /g,""),g=g.toUpperCase();for(var v=[],w=0;w<g.length;w++)g[w]>="A"&&g[w]<="Z"&&g.indexOf(g[w])==w&&v.push(g[w]);if(v.sort(),l.length>0&&c.length>0&&v.length==0)Sd(l,c,null,r);else if(v.length>0&&l.length==0&&c.length==0){var D=a0(v,g);D!=null&&Sd(v,g,D,r)}else(l.length==0||c.length==0)&&v==0?alert("Enter Input / Output Variable(s) OR Boolean Function!"):alert("Use Either Combinational Analysis Or Boolean Function To Generate Circuit!")},r0=(i,t,n,r,l=globalScope)=>{var c=o0(i),g=[];let v=t.length;for(const w in c){let D=c[w][1].length,T=c[w][0].length;if(D==0)g.push(["-".repeat(v)+"0"]);else if(T==0)g.push(["-".repeat(v)+"1"]);else{const R=new Qh(t.length,c[w][1].map(Number),c[w].x.map(Number));g.push(R.result)}}n==null?xd(g,t,r,l):xd(g,t,[`${r}`],l)};function kf(i=globalScope){Hs(),$("#combinationalAnalysis").empty(),$("#combinationalAnalysis").append("<p>Enter Input names separated by commas: <input id='inputNameList' type='text'  placeHolder='eg. In A, In B'></p>"),$("#combinationalAnalysis").append("<p>Enter Output names separated by commas: <input id='outputNameList' type='text'  placeHolder='eg. Out X, Out Y'></p>"),$("#combinationalAnalysis").append("<p style='text-align:center;'>OR</p>"),$("#combinationalAnalysis").append("<p>Enter Boolean Function: <input class='truth_table_input' autofocus id='booleanExpression' placeholder='Example: (AB)' type='text'></p>"),$("#combinationalAnalysis").append("<label class='cb-checkbox'>I need a decimal column.<input id='decimalColumnBox' type='checkbox'></label>"),$("#combinationalAnalysis").dialog({resizable:!1,width:"auto",buttons:[{style:"padding: 5px",text:"Next",click(){s0($("#inputNameList").val(),$("#outputNameList").val(),$("#booleanExpression").val())}}]}),$("#combinationalAnalysis").checkBo()}function Sd(l,c,n,r=globalScope){var l=l||prompt("Enter inputs separated by commas").split(","),c=c||prompt("Enter outputs separated by commas").split(","),g=[];if(n==null)for(var v=0;v<c.length;v++)g[v]=7*v+13;else g=[13];var w='<table  class="content-table">';w+='<tbody style="display:block; max-height:70vh; overflow-y:scroll" >',w+="<tr>",$("#decimalColumnBox").is(":checked")&&(w+="<th>dec</th>");for(var v=0;v<l.length;v++)w+=`<th>${l[v]}</th>`;if(n==null)for(var v=0;v<c.length;v++)w+=`<th>${c[v]}</th>`;else w+=`<th>${c}</th>`;w+="</tr>";for(var D=[],v=0;v<l.length;v++)D[v]=new Array(1<<l.length);for(var v=0;v<l.length;v++)for(var T=0;T<1<<l.length;T++)D[v][T]=+((T&1<<l.length-v-1)!=0);for(var T=0;T<1<<l.length;T++){w+="<tr>",$("#decimalColumnBox").is(":checked")&&(w+=`<td>${T}</td>`);for(var v=0;v<l.length;v++)w+=`<td>${D[v][T]}</td>`;for(var v=0;v<g.length;v++)n==null&&(w+=`<td class ="output ${g[v]}" id="${T}">x</td>`);n!=null&&(w+=`<td class="${g[0]}" id="${T}">${n[T]}</td>`),w+="</tr>"}w+="</tbody>",w+="</table>",$("#combinationalAnalysis").empty(),$("#combinationalAnalysis").append(w),$("#combinationalAnalysis").dialog({resizable:!1,width:"auto",buttons:[{style:"padding: 6px",text:"Generate Circuit",click(){$(this).dialog("close"),r0(g,l,n,c)}},{style:"padding: 6px",text:"Print Truth Table",click(){var R=document.getElementById("combinationalAnalysis").innerHTML,M="<style> table {font: 20px Calibri;} table, th, td {border: solid 1px #DDD;border-collapse: collapse;} padding: 2px 3px;text-align: center;} </style>",L=window.open("","","height=700,width=700"),E=`
                      <html><head>                      <title>Boolean Logic Table</title>                      ${M}                      </head>                      <body>                      <center>${R}</center>                      </body></html>
                    `;L.document.write(E),L.document.close(),L.print()}}]}),$(".output").on("click",function(){var R=$(this).html();R==0?R=$(this).html(1):R==1?R=$(this).html("x"):R=="x"&&(R=$(this).html(0))})}function o0(i){for(var t={},n=0;n<i.length;n++){t[i[n]]={x:[],1:[],0:[]};var r=$(`.${i[n]}`);for(let l=0;l<r.length;l++)t[i[n]][r[l].innerHTML].push(r[l].id)}return t}function xd(i,t,n,r=globalScope){Br(r);for(var l=t.length,c=0,g=0;g<i.length;g++)c=Math.max(c,i[g].length);var v=200,w=200,D=300;f.maxWidth&&f.maxHeight&&(f.maxHeight+D>f.maxWidth?v+=f.maxWidth:(w+=f.maxHeight,D+=f.maxHeight));for(var T=v+l*40+40+40,R=T+Math.floor(c/2)*10+80,M=R+60,L=[],E=[],g=0;g<=l;g++){g<l?(L.push(new cs(v+g*40,w,r,"DOWN",1)),L[g].setLabel(t[g])):(L.push(new Ke(v+g*40,w,r,"DOWN",1,"1")),L[g].setLabel("_C_")),L[g].newLabelDirection("UP");var Q=new X(v+g*40,w+20,2,r.root);L[g].output1.connect(Q);var lt=new X(v+g*40+20,w+20,2,r.root);Q.connect(lt);var B=new Oi(v+g*40+20,w+40,r,"DOWN",1);B.inp1.connect(lt),E.push(Q),E.push(B.output1)}function A(Kt){for(var Zt=0,Yt=0;Yt<Kt.length;Yt++)Kt[Yt]!=="-"&&Zt++;return Zt}for(var g=0;g<i.length;g++){for(var q=[],z=0;z<i[g].length;z++){var it=A(i[g][z]);if(it>1){var xt=new tn(T,D,r,"RIGHT",it,1);q.push(xt.output1);for(var rt=0,at=0;at<i[g][z].length;at++){if(i[g][z][at]=="-"){rt++;continue}var wt=2*at+(i[g][z][at]==0),Dt=new X(E[wt].absX(),xt.inp[at-rt].absY(),2,r.root);E[wt].connect(Dt),E[wt]=Dt,Dt.connect(xt.inp[at-rt])}}else for(var at=0;at<i[g][z].length;at++)if(i[g][z][at]!="-"){var wt=2*at+(i[g][z][at]==0),Wt=new X(T,D,2,r.root),Dt=new X(E[wt].absX(),Wt.absY(),2,r.root);E[wt].connect(Dt),E[wt]=Dt,Dt.connect(Wt),q.push(Wt)}D+=it*10+30}var Pt=q.length,K=Math.floor(Pt/2),J=(q[K].absY()+q[Math.floor((Pt-1)/2)].absY())/2;if(J%10==5&&(J+=5),Pt>1){var Y=new xn(R,J,r,"RIGHT",Pt,1);Pt%2==1&&q[K].connect(Y.inp[K]);for(var z=0;z<K;z++){var Dt=new X(T+30+(K-z)*10,q[z].absY(),2,r.root);Dt.connect(q[z]);var lt=new X(T+30+(K-z)*10,Y.inp[z].absY(),2,r.root);lt.connect(Dt),Y.inp[z].connect(lt);var Dt=new X(T+30+(K-z)*10,q[Pt-z-1].absY(),2,r.root);Dt.connect(q[Pt-z-1]);var lt=new X(T+30+(K-z)*10,Y.inp[Pt-z-1].absY(),2,r.root);lt.connect(Dt),Y.inp[Pt-z-1].connect(lt)}var ee=new ls(M,Y.y,r,"LEFT",1);ee.inp1.connect(Y.output1)}else{var ee=new ls(M,q[0].absY(),r,"LEFT",1);ee.inp1.connect(q[0])}ee.setLabel(n[g]),ee.newLabelDirection("RIGHT")}for(var g=0;g<E.length;g++)if(E[g].absY()!=D){var Dt=new X(E[g].absX(),D,2,r.root);E[g].connect(Dt)}globalScope.centerFocus()}function a0(i,t){let n,r,l=[];if(t.match(/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01+'() ]/g)!=null){alert("One of the characters is not allowed.");return}if(i.length>8){alert("You can only have 8 variables at a time.");return}var c='<table  class="content-table">';for(c+='<tbody style="display:block; max-height:70vh; overflow-y:scroll" >',c+="<tr>",$("#decimalColumnBox").is(":checked")&&(c+="<th>dec</th>"),n=0;n<i.length;n++)c+=`<th>${i[n]}</th>`;c+=`<th>${t}</th>`,c+="</tr>";var g=[];for(n=0;n<i.length;n++)g[n]=new Array(i.length);for(n=0;n<i.length;n++)for(r=0;r<1<<i.length;r++)g[n][r]=+((r&1<<i.length-n-1)!=0);for(n=0;n<2**i.length;n++){const w=[];for(r=0;r<i.length;r++)w[r]=Math.floor(n/Math.pow(2,i.length-r-1))%2;let D=t;for(r=0;r<i.length;r++)D=D.replace(new RegExp(i[r],"g"),w[r]);l[n]=v(D)}for(r=0;r<1<<i.length;r++){for(c+="<tr>",$("#decimalColumnBox").is(":checked")&&(c+=`<td>${r}</td>`),n=0;n<i.length;n++)c+=`<td>${g[n][r]}</td>`;c+=`<td class="13" id="${r}">${l[r]}</td>`,c+="</tr>"}c+="</tbody>",c+="</table>";function v(w){for(;w.indexOf("(")!=-1;){const D=w.lastIndexOf("("),T=w.indexOf(")",D);D!=-1&&(w=w.substring(0,D)+v(w.substring(D+1,T))+w.substring(T+1))}w=w.replace(/''/g,""),w=w.replace(/0'/g,"1"),w=w.replace(/1'/g,"0");for(let D=0;D<w.length-1;D++)(w[D]=="0"||w[D]=="1")&&(w[D+1]=="0"||w[D+1]=="1")&&(w=w.substring(0,D+1)+"*"+w.substring(D+1,w.length));try{const T=(0,eval)(w);return T==0?0:T>0?1:""}catch{return""}}return l}var Cf={exports:{}};(function(i,t){(function(n,r){i.exports=r()})(window,function(){return function(n){var r={};function l(c){if(r[c])return r[c].exports;var g=r[c]={i:c,l:!1,exports:{}};return n[c].call(g.exports,g,g.exports,l),g.l=!0,g.exports}return l.m=n,l.c=r,l.d=function(c,g,v){l.o(c,g)||Object.defineProperty(c,g,{enumerable:!0,get:v})},l.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},l.t=function(c,g){if(1&g&&(c=l(c)),8&g||4&g&&typeof c=="object"&&c&&c.__esModule)return c;var v=Object.create(null);if(l.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:c}),2&g&&typeof c!="string")for(var w in c)l.d(v,w,function(D){return c[D]}.bind(null,w));return v},l.n=function(c){var g=c&&c.__esModule?function(){return c.default}:function(){return c};return l.d(g,"a",g),g},l.o=function(c,g){return Object.prototype.hasOwnProperty.call(c,g)},l.p="/dist/",l(l.s=57)}([function(n,r,l){var c=l(2),g=l(11),v=l(4),w=l(13),D=l(22),T=function(R,M,L){var E,Q,lt,B,A=R&T.F,q=R&T.G,z=R&T.S,it=R&T.P,xt=R&T.B,rt=q?c:z?c[M]||(c[M]={}):(c[M]||{}).prototype,at=q?g:g[M]||(g[M]={}),wt=at.prototype||(at.prototype={});for(E in q&&(L=M),L)lt=((Q=!A&&rt&&rt[E]!==void 0)?rt:L)[E],B=xt&&Q?D(lt,c):it&&typeof lt=="function"?D(Function.call,lt):lt,rt&&w(rt,E,lt,R&T.U),at[E]!=lt&&v(at,E,B),it&&wt[E]!=lt&&(wt[E]=lt)};c.core=g,T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128,n.exports=T},function(n,r,l){var c=l(17)("wks"),g=l(14),v=l(2).Symbol,w=typeof v=="function";(n.exports=function(D){return c[D]||(c[D]=w&&v[D]||(w?v:g)("Symbol."+D))}).store=c},function(n,r){var l=n.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=l)},function(n,r){n.exports=function(l){return typeof l=="object"?l!==null:typeof l=="function"}},function(n,r,l){var c=l(5),g=l(16);n.exports=l(6)?function(v,w,D){return c.f(v,w,g(1,D))}:function(v,w,D){return v[w]=D,v}},function(n,r,l){var c=l(12),g=l(35),v=l(21),w=Object.defineProperty;r.f=l(6)?Object.defineProperty:function(D,T,R){if(c(D),T=v(T,!0),c(R),g)try{return w(D,T,R)}catch{}if("get"in R||"set"in R)throw TypeError("Accessors not supported!");return"value"in R&&(D[T]=R.value),D}},function(n,r,l){n.exports=!l(7)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(n,r){n.exports=function(l){try{return!!l()}catch{return!0}}},function(n,r){var l={}.hasOwnProperty;n.exports=function(c,g){return l.call(c,g)}},function(n,r,l){var c=l(39),g=l(24);n.exports=function(v){return c(g(v))}},function(n,r,l){var c=l(0);c(c.S+c.F*!l(6),"Object",{defineProperty:l(5).f})},function(n,r){var l=n.exports={version:"2.6.9"};typeof __e=="number"&&(__e=l)},function(n,r,l){var c=l(3);n.exports=function(g){if(!c(g))throw TypeError(g+" is not an object!");return g}},function(n,r,l){var c=l(2),g=l(4),v=l(8),w=l(14)("src"),D=l(59),T=(""+D).split("toString");l(11).inspectSource=function(R){return D.call(R)},(n.exports=function(R,M,L,E){var Q=typeof L=="function";Q&&(v(L,"name")||g(L,"name",M)),R[M]!==L&&(Q&&(v(L,w)||g(L,w,R[M]?""+R[M]:T.join(String(M)))),R===c?R[M]=L:E?R[M]?R[M]=L:g(R,M,L):(delete R[M],g(R,M,L)))})(Function.prototype,"toString",function(){return typeof this=="function"&&this[w]||D.call(this)})},function(n,r){var l=0,c=Math.random();n.exports=function(g){return"Symbol(".concat(g===void 0?"":g,")_",(++l+c).toString(36))}},function(n,r,l){var c=l(45),g=l(28);n.exports=Object.keys||function(v){return c(v,g)}},function(n,r){n.exports=function(l,c){return{enumerable:!(1&l),configurable:!(2&l),writable:!(4&l),value:c}}},function(n,r,l){var c=l(11),g=l(2),v=g["__core-js_shared__"]||(g["__core-js_shared__"]={});(n.exports=function(w,D){return v[w]||(v[w]=D!==void 0?D:{})})("versions",[]).push({version:c.version,mode:l(18)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(n,r){n.exports=!1},function(n,r,l){var c=l(24);n.exports=function(g){return Object(c(g))}},function(n,r,l){var c=l(2),g=l(8),v=l(6),w=l(0),D=l(13),T=l(62).KEY,R=l(7),M=l(17),L=l(26),E=l(14),Q=l(1),lt=l(43),B=l(44),A=l(63),q=l(42),z=l(12),it=l(3),xt=l(19),rt=l(9),at=l(21),wt=l(16),Dt=l(30),Wt=l(67),Pt=l(49),K=l(47),J=l(5),Y=l(15),ee=Pt.f,Kt=J.f,Zt=Wt.f,Yt=c.Symbol,Rt=c.JSON,qt=Rt&&Rt.stringify,pe=Q("_hidden"),oe=Q("toPrimitive"),ce={}.propertyIsEnumerable,ot=M("symbol-registry"),V=M("symbols"),st=M("op-symbols"),N=Object.prototype,U=typeof Yt=="function"&&!!K.f,bt=c.QObject,vt=!bt||!bt.prototype||!bt.prototype.findChild,Lt=v&&R(function(){return Dt(Kt({},"a",{get:function(){return Kt(this,"a",{value:7}).a}})).a!=7})?function(_,O,H){var G=ee(N,O);G&&delete N[O],Kt(_,O,H),G&&_!==N&&Kt(N,O,G)}:Kt,Ut=function(_){var O=V[_]=Dt(Yt.prototype);return O._k=_,O},Qt=U&&typeof Yt.iterator=="symbol"?function(_){return typeof _=="symbol"}:function(_){return _ instanceof Yt},Ht=function(_,O,H){return _===N&&Ht(st,O,H),z(_),O=at(O,!0),z(H),g(V,O)?(H.enumerable?(g(_,pe)&&_[pe][O]&&(_[pe][O]=!1),H=Dt(H,{enumerable:wt(0,!1)})):(g(_,pe)||Kt(_,pe,wt(1,{})),_[pe][O]=!0),Lt(_,O,H)):Kt(_,O,H)},pt=function(_,O){z(_);for(var H,G=A(O=rt(O)),nt=0,ct=G.length;ct>nt;)Ht(_,H=G[nt++],O[H]);return _},Ot=function(_){var O=ce.call(this,_=at(_,!0));return!(this===N&&g(V,_)&&!g(st,_))&&(!(O||!g(this,_)||!g(V,_)||g(this,pe)&&this[pe][_])||O)},kt=function(_,O){if(_=rt(_),O=at(O,!0),_!==N||!g(V,O)||g(st,O)){var H=ee(_,O);return!H||!g(V,O)||g(_,pe)&&_[pe][O]||(H.enumerable=!0),H}},zt=function(_){for(var O,H=Zt(rt(_)),G=[],nt=0;H.length>nt;)g(V,O=H[nt++])||O==pe||O==T||G.push(O);return G},he=function(_){for(var O,H=_===N,G=Zt(H?st:rt(_)),nt=[],ct=0;G.length>ct;)!g(V,O=G[ct++])||H&&!g(N,O)||nt.push(V[O]);return nt};U||(D((Yt=function(){if(this instanceof Yt)throw TypeError("Symbol is not a constructor!");var _=E(arguments.length>0?arguments[0]:void 0),O=function(H){this===N&&O.call(st,H),g(this,pe)&&g(this[pe],_)&&(this[pe][_]=!1),Lt(this,_,wt(1,H))};return v&&vt&&Lt(N,_,{configurable:!0,set:O}),Ut(_)}).prototype,"toString",function(){return this._k}),Pt.f=kt,J.f=Ht,l(48).f=Wt.f=zt,l(29).f=Ot,K.f=he,v&&!l(18)&&D(N,"propertyIsEnumerable",Ot,!0),lt.f=function(_){return Ut(Q(_))}),w(w.G+w.W+w.F*!U,{Symbol:Yt});for(var o="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),d=0;o.length>d;)Q(o[d++]);for(var p=Y(Q.store),b=0;p.length>b;)B(p[b++]);w(w.S+w.F*!U,"Symbol",{for:function(_){return g(ot,_+="")?ot[_]:ot[_]=Yt(_)},keyFor:function(_){if(!Qt(_))throw TypeError(_+" is not a symbol!");for(var O in ot)if(ot[O]===_)return O},useSetter:function(){vt=!0},useSimple:function(){vt=!1}}),w(w.S+w.F*!U,"Object",{create:function(_,O){return O===void 0?Dt(_):pt(Dt(_),O)},defineProperty:Ht,defineProperties:pt,getOwnPropertyDescriptor:kt,getOwnPropertyNames:zt,getOwnPropertySymbols:he});var S=R(function(){K.f(1)});w(w.S+w.F*S,"Object",{getOwnPropertySymbols:function(_){return K.f(xt(_))}}),Rt&&w(w.S+w.F*(!U||R(function(){var _=Yt();return qt([_])!="[null]"||qt({a:_})!="{}"||qt(Object(_))!="{}"})),"JSON",{stringify:function(_){for(var O,H,G=[_],nt=1;arguments.length>nt;)G.push(arguments[nt++]);if(H=O=G[1],(it(O)||_!==void 0)&&!Qt(_))return q(O)||(O=function(ct,ut){if(typeof H=="function"&&(ut=H.call(this,ct,ut)),!Qt(ut))return ut}),G[1]=O,qt.apply(Rt,G)}}),Yt.prototype[oe]||l(4)(Yt.prototype,oe,Yt.prototype.valueOf),L(Yt,"Symbol"),L(Math,"Math",!0),L(c.JSON,"JSON",!0)},function(n,r,l){var c=l(3);n.exports=function(g,v){if(!c(g))return g;var w,D;if(v&&typeof(w=g.toString)=="function"&&!c(D=w.call(g))||typeof(w=g.valueOf)=="function"&&!c(D=w.call(g))||!v&&typeof(w=g.toString)=="function"&&!c(D=w.call(g)))return D;throw TypeError("Can't convert object to primitive value")}},function(n,r,l){var c=l(37);n.exports=function(g,v,w){if(c(g),v===void 0)return g;switch(w){case 1:return function(D){return g.call(v,D)};case 2:return function(D,T){return g.call(v,D,T)};case 3:return function(D,T,R){return g.call(v,D,T,R)}}return function(){return g.apply(v,arguments)}}},function(n,r){var l={}.toString;n.exports=function(c){return l.call(c).slice(8,-1)}},function(n,r){n.exports=function(l){if(l==null)throw TypeError("Can't call method on  "+l);return l}},function(n,r,l){var c=l(7);n.exports=function(g,v){return!!g&&c(function(){v?g.call(null,function(){},1):g.call(null)})}},function(n,r,l){var c=l(5).f,g=l(8),v=l(1)("toStringTag");n.exports=function(w,D,T){w&&!g(w=T?w:w.prototype,v)&&c(w,v,{configurable:!0,value:D})}},function(n,r,l){var c=l(17)("keys"),g=l(14);n.exports=function(v){return c[v]||(c[v]=g(v))}},function(n,r){n.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(n,r){r.f={}.propertyIsEnumerable},function(n,r,l){var c=l(12),g=l(65),v=l(28),w=l(27)("IE_PROTO"),D=function(){},T=function(){var R,M=l(36)("iframe"),L=v.length;for(M.style.display="none",l(66).appendChild(M),M.src="javascript:",(R=M.contentWindow.document).open(),R.write("<script>document.F=Object<\/script>"),R.close(),T=R.F;L--;)delete T.prototype[v[L]];return T()};n.exports=Object.create||function(R,M){var L;return R!==null?(D.prototype=c(R),L=new D,D.prototype=null,L[w]=R):L=T(),M===void 0?L:g(L,M)}},function(n,r,l){var c=l(68),g=l(69),v=l(32),w=l(9);n.exports=l(70)(Array,"Array",function(D,T){this._t=w(D),this._i=0,this._k=T},function(){var D=this._t,T=this._k,R=this._i++;return!D||R>=D.length?(this._t=void 0,g(1)):g(0,T=="keys"?R:T=="values"?D[R]:[R,D[R]])},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,r){n.exports={}},function(n,r,l){l(44)("asyncIterator")},function(n,r,l){var c=l(0),g=l(38)(0),v=l(25)([].forEach,!0);c(c.P+c.F*!v,"Array",{forEach:function(w){return g(this,w,arguments[1])}})},function(n,r,l){n.exports=!l(6)&&!l(7)(function(){return Object.defineProperty(l(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(n,r,l){var c=l(3),g=l(2).document,v=c(g)&&c(g.createElement);n.exports=function(w){return v?g.createElement(w):{}}},function(n,r){n.exports=function(l){if(typeof l!="function")throw TypeError(l+" is not a function!");return l}},function(n,r,l){var c=l(22),g=l(39),v=l(19),w=l(40),D=l(60);n.exports=function(T,R){var M=T==1,L=T==2,E=T==3,Q=T==4,lt=T==6,B=T==5||lt,A=R||D;return function(q,z,it){for(var xt,rt,at=v(q),wt=g(at),Dt=c(z,it,3),Wt=w(wt.length),Pt=0,K=M?A(q,Wt):L?A(q,0):void 0;Wt>Pt;Pt++)if((B||Pt in wt)&&(rt=Dt(xt=wt[Pt],Pt,at),T)){if(M)K[Pt]=rt;else if(rt)switch(T){case 3:return!0;case 5:return xt;case 6:return Pt;case 2:K.push(xt)}else if(Q)return!1}return lt?-1:E||Q?Q:K}}},function(n,r,l){var c=l(23);n.exports=Object("z").propertyIsEnumerable(0)?Object:function(g){return c(g)=="String"?g.split(""):Object(g)}},function(n,r,l){var c=l(41),g=Math.min;n.exports=function(v){return v>0?g(c(v),9007199254740991):0}},function(n,r){var l=Math.ceil,c=Math.floor;n.exports=function(g){return isNaN(g=+g)?0:(g>0?c:l)(g)}},function(n,r,l){var c=l(23);n.exports=Array.isArray||function(g){return c(g)=="Array"}},function(n,r,l){r.f=l(1)},function(n,r,l){var c=l(2),g=l(11),v=l(18),w=l(43),D=l(5).f;n.exports=function(T){var R=g.Symbol||(g.Symbol=v?{}:c.Symbol||{});T.charAt(0)=="_"||T in R||D(R,T,{value:w.f(T)})}},function(n,r,l){var c=l(8),g=l(9),v=l(46)(!1),w=l(27)("IE_PROTO");n.exports=function(D,T){var R,M=g(D),L=0,E=[];for(R in M)R!=w&&c(M,R)&&E.push(R);for(;T.length>L;)c(M,R=T[L++])&&(~v(E,R)||E.push(R));return E}},function(n,r,l){var c=l(9),g=l(40),v=l(64);n.exports=function(w){return function(D,T,R){var M,L=c(D),E=g(L.length),Q=v(R,E);if(w&&T!=T){for(;E>Q;)if((M=L[Q++])!=M)return!0}else for(;E>Q;Q++)if((w||Q in L)&&L[Q]===T)return w||Q||0;return!w&&-1}}},function(n,r){r.f=Object.getOwnPropertySymbols},function(n,r,l){var c=l(45),g=l(28).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(v){return c(v,g)}},function(n,r,l){var c=l(29),g=l(16),v=l(9),w=l(21),D=l(8),T=l(35),R=Object.getOwnPropertyDescriptor;r.f=l(6)?R:function(M,L){if(M=v(M),L=w(L,!0),T)try{return R(M,L)}catch{}if(D(M,L))return g(!c.f.call(M,L),M[L])}},function(n,r,l){for(var c=l(31),g=l(15),v=l(13),w=l(2),D=l(4),T=l(32),R=l(1),M=R("iterator"),L=R("toStringTag"),E=T.Array,Q={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},lt=g(Q),B=0;B<lt.length;B++){var A,q=lt[B],z=Q[q],it=w[q],xt=it&&it.prototype;if(xt&&(xt[M]||D(xt,M,E),xt[L]||D(xt,L,q),T[q]=E,z))for(A in c)xt[A]||v(xt,A,c[A],!0)}},function(n,r,l){var c=l(73),g={};g[l(1)("toStringTag")]="z",g+""!="[object z]"&&l(13)(Object.prototype,"toString",function(){return"[object "+c(this)+"]"},!0)},function(n,r,l){var c=l(19),g=l(15);l(74)("keys",function(){return function(v){return g(c(v))}})},function(n,r,l){var c=l(0),g=l(38)(2);c(c.P+c.F*!l(25)([].filter,!0),"Array",{filter:function(v){return g(this,v,arguments[1])}})},function(n,r,l){var c=l(0);c(c.P,"Function",{bind:l(75)})},function(n,r,l){var c=l(0);c(c.S,"Object",{create:l(30)})},function(n,r,l){var c=l(0);c(c.S,"Object",{setPrototypeOf:l(81).set})},function(n,r,l){l(58),n.exports=l(82)},function(n,r){},function(n,r,l){n.exports=l(17)("native-function-to-string",Function.toString)},function(n,r,l){var c=l(61);n.exports=function(g,v){return new(c(g))(v)}},function(n,r,l){var c=l(3),g=l(42),v=l(1)("species");n.exports=function(w){var D;return g(w)&&(typeof(D=w.constructor)!="function"||D!==Array&&!g(D.prototype)||(D=void 0),c(D)&&(D=D[v])===null&&(D=void 0)),D===void 0?Array:D}},function(n,r,l){var c=l(14)("meta"),g=l(3),v=l(8),w=l(5).f,D=0,T=Object.isExtensible||function(){return!0},R=!l(7)(function(){return T(Object.preventExtensions({}))}),M=function(E){w(E,c,{value:{i:"O"+ ++D,w:{}}})},L=n.exports={KEY:c,NEED:!1,fastKey:function(E,Q){if(!g(E))return typeof E=="symbol"?E:(typeof E=="string"?"S":"P")+E;if(!v(E,c)){if(!T(E))return"F";if(!Q)return"E";M(E)}return E[c].i},getWeak:function(E,Q){if(!v(E,c)){if(!T(E))return!0;if(!Q)return!1;M(E)}return E[c].w},onFreeze:function(E){return R&&L.NEED&&T(E)&&!v(E,c)&&M(E),E}}},function(n,r,l){var c=l(15),g=l(47),v=l(29);n.exports=function(w){var D=c(w),T=g.f;if(T)for(var R,M=T(w),L=v.f,E=0;M.length>E;)L.call(w,R=M[E++])&&D.push(R);return D}},function(n,r,l){var c=l(41),g=Math.max,v=Math.min;n.exports=function(w,D){return(w=c(w))<0?g(w+D,0):v(w,D)}},function(n,r,l){var c=l(5),g=l(12),v=l(15);n.exports=l(6)?Object.defineProperties:function(w,D){g(w);for(var T,R=v(D),M=R.length,L=0;M>L;)c.f(w,T=R[L++],D[T]);return w}},function(n,r,l){var c=l(2).document;n.exports=c&&c.documentElement},function(n,r,l){var c=l(9),g=l(48).f,v={}.toString,w=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(D){return w&&v.call(D)=="[object Window]"?function(T){try{return g(T)}catch{return w.slice()}}(D):g(c(D))}},function(n,r,l){var c=l(1)("unscopables"),g=Array.prototype;g[c]==null&&l(4)(g,c,{}),n.exports=function(v){g[c][v]=!0}},function(n,r){n.exports=function(l,c){return{value:c,done:!!l}}},function(n,r,l){var c=l(18),g=l(0),v=l(13),w=l(4),D=l(32),T=l(71),R=l(26),M=l(72),L=l(1)("iterator"),E=!([].keys&&"next"in[].keys()),Q=function(){return this};n.exports=function(lt,B,A,q,z,it,xt){T(A,B,q);var rt,at,wt,Dt=function(Yt){if(!E&&Yt in J)return J[Yt];switch(Yt){case"keys":case"values":return function(){return new A(this,Yt)}}return function(){return new A(this,Yt)}},Wt=B+" Iterator",Pt=z=="values",K=!1,J=lt.prototype,Y=J[L]||J["@@iterator"]||z&&J[z],ee=Y||Dt(z),Kt=z?Pt?Dt("entries"):ee:void 0,Zt=B=="Array"&&J.entries||Y;if(Zt&&(wt=M(Zt.call(new lt)))!==Object.prototype&&wt.next&&(R(wt,Wt,!0),c||typeof wt[L]=="function"||w(wt,L,Q)),Pt&&Y&&Y.name!=="values"&&(K=!0,ee=function(){return Y.call(this)}),c&&!xt||!E&&!K&&J[L]||w(J,L,ee),D[B]=ee,D[Wt]=Q,z)if(rt={values:Pt?ee:Dt("values"),keys:it?ee:Dt("keys"),entries:Kt},xt)for(at in rt)at in J||v(J,at,rt[at]);else g(g.P+g.F*(E||K),B,rt);return rt}},function(n,r,l){var c=l(30),g=l(16),v=l(26),w={};l(4)(w,l(1)("iterator"),function(){return this}),n.exports=function(D,T,R){D.prototype=c(w,{next:g(1,R)}),v(D,T+" Iterator")}},function(n,r,l){var c=l(8),g=l(19),v=l(27)("IE_PROTO"),w=Object.prototype;n.exports=Object.getPrototypeOf||function(D){return D=g(D),c(D,v)?D[v]:typeof D.constructor=="function"&&D instanceof D.constructor?D.constructor.prototype:D instanceof Object?w:null}},function(n,r,l){var c=l(23),g=l(1)("toStringTag"),v=c(function(){return arguments}())=="Arguments";n.exports=function(w){var D,T,R;return w===void 0?"Undefined":w===null?"Null":typeof(T=function(M,L){try{return M[L]}catch{}}(D=Object(w),g))=="string"?T:v?c(D):(R=c(D))=="Object"&&typeof D.callee=="function"?"Arguments":R}},function(n,r,l){var c=l(0),g=l(11),v=l(7);n.exports=function(w,D){var T=(g.Object||{})[w]||Object[w],R={};R[w]=D(T),c(c.S+c.F*v(function(){T(1)}),"Object",R)}},function(n,r,l){var c=l(37),g=l(3),v=l(76),w=[].slice,D={};n.exports=Function.bind||function(T){var R=c(this),M=w.call(arguments,1),L=function(){var E=M.concat(w.call(arguments));return this instanceof L?function(Q,lt,B){if(!(lt in D)){for(var A=[],q=0;q<lt;q++)A[q]="a["+q+"]";D[lt]=Function("F,a","return new F("+A.join(",")+")")}return D[lt](Q,B)}(R,E.length,E):v(R,E,T)};return g(R.prototype)&&(L.prototype=R.prototype),L}},function(n,r){n.exports=function(l,c,g){var v=g===void 0;switch(c.length){case 0:return v?l():l.call(g);case 1:return v?l(c[0]):l.call(g,c[0]);case 2:return v?l(c[0],c[1]):l.call(g,c[0],c[1]);case 3:return v?l(c[0],c[1],c[2]):l.call(g,c[0],c[1],c[2]);case 4:return v?l(c[0],c[1],c[2],c[3]):l.call(g,c[0],c[1],c[2],c[3])}return l.apply(g,c)}},function(n,r,l){l(78)("trim",function(c){return function(){return c(this,3)}})},function(n,r,l){var c=l(0),g=l(24),v=l(7),w=l(79),D="["+w+"]",T=RegExp("^"+D+D+"*"),R=RegExp(D+D+"*$"),M=function(E,Q,lt){var B={},A=v(function(){return!!w[E]()||""[E]()!=""}),q=B[E]=A?Q(L):w[E];lt&&(B[lt]=q),c(c.P+c.F*A,"String",B)},L=M.trim=function(E,Q){return E=String(g(E)),1&Q&&(E=E.replace(T,"")),2&Q&&(E=E.replace(R,"")),E};n.exports=M},function(n,r){n.exports=`	
\v\f\r \u2028\u2029\uFEFF`},function(n,r,l){var c=l(0),g=l(46)(!1),v=[].indexOf,w=!!v&&1/[1].indexOf(1,-0)<0;c(c.P+c.F*(w||!l(25)(v)),"Array",{indexOf:function(D){return w?v.apply(this,arguments)||0:g(this,D,arguments[1])}})},function(n,r,l){var c=l(3),g=l(12),v=function(w,D){if(g(w),!c(D)&&D!==null)throw TypeError(D+": can't set as prototype!")};n.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(w,D,T){try{(T=l(22)(Function.call,l(49).f(Object.prototype,"__proto__").set,2))(w,[]),D=!(w instanceof Array)}catch{D=!0}return function(R,M){return v(R,M),D?R.__proto__=M:T(R,M),R}}({},!1):void 0),check:v}},function(n,r,l){l.r(r),l(34),l(20),l(50),l(31),l(51),l(52),l(10),l(53),l(54);var c=.75,g=10,v=!0,w=!0,D=!0,T=!1,R="driver-highlighted-element-stage",M='<div id="'.concat("driver-page-overlay",'"></div>'),L='<div id="'.concat(R,'"></div>');l(33),l(77);function E(ot){return(E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(ot)}var Q=function(ot){var V=document.createElement("div");return V.innerHTML=ot.trim(),V.firstChild},lt=function ot(V,st){if(arguments.length>2&&arguments[2]!==void 0&&arguments[2]){for(var N=["","-webkit-","-ms-","moz-","-o-"],U=0;U<N.length;U++){var bt=ot(V,N[U]+st);if(bt)return bt}return""}var vt="";return V.currentStyle?vt=V.currentStyle[st]:document.defaultView&&document.defaultView.getComputedStyle&&(vt=document.defaultView.getComputedStyle(V,null).getPropertyValue(st)),vt&&vt.toLowerCase?vt.toLowerCase():vt},B=function(ot){return ot&&E(ot)==="object"&&"nodeType"in ot};function A(ot,V){for(var st=0;st<V.length;st++){var N=V[st];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(ot,N.key,N)}}var q=function(){function ot(N,U,bt){(function(vt,Lt){if(!(vt instanceof Lt))throw new TypeError("Cannot call a class as a function")})(this,ot),this.options=N,this.highlightedElement=null,this.lastHighlightedElement=null,this.hideTimer=null,this.window=U,this.document=bt,this.removeNode=this.removeNode.bind(this)}var V,st;return V=ot,(st=[{key:"attachNode",value:function(){var N=this.document.getElementById("driver-page-overlay");N||(N=Q(M),document.body.appendChild(N)),this.node=N,this.node.style.opacity="0",this.options.animate||this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"highlight",value:function(N){N&&N.node?N.isSame(this.highlightedElement)||(this.window.clearTimeout(this.hideTimer),N.onHighlightStarted(),this.highlightedElement&&!this.highlightedElement.isSame(this.lastHighlightedElement)&&this.highlightedElement.onDeselected(),N.getCalculatedPosition().canHighlight()&&(this.lastHighlightedElement=this.highlightedElement,this.highlightedElement=N,this.show(),this.highlightedElement.onHighlighted())):console.warn("Invalid element to highlight. Must be an instance of `Element`")}},{key:"show",value:function(){var N=this;this.node&&this.node.parentElement||(this.attachNode(),window.setTimeout(function(){N.node.style.opacity="".concat(N.options.opacity),N.node.style.position="fixed",N.node.style.left="0",N.node.style.top="0",N.node.style.bottom="0",N.node.style.right="0"}))}},{key:"getHighlightedElement",value:function(){return this.highlightedElement}},{key:"getLastHighlightedElement",value:function(){return this.lastHighlightedElement}},{key:"clear",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.onReset&&this.options.onReset(this.highlightedElement),this.highlightedElement&&this.highlightedElement.onDeselected(!0),this.highlightedElement=null,this.lastHighlightedElement=null,this.node&&(this.window.clearTimeout(this.hideTimer),this.options.animate&&!N?(this.node.style.opacity="0",this.hideTimer=this.window.setTimeout(this.removeNode,300)):this.removeNode())}},{key:"removeNode",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"refresh",value:function(){this.highlightedElement&&(this.highlightedElement.showPopover(),this.highlightedElement.showStage())}}])&&A(V.prototype,st),ot}();l(80);function z(ot,V){for(var st=0;st<V.length;st++){var N=V[st];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(ot,N.key,N)}}var it=function(){function ot(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=N.left,bt=U===void 0?0:U,vt=N.top,Lt=vt===void 0?0:vt,Ut=N.right,Qt=Ut===void 0?0:Ut,Ht=N.bottom,pt=Ht===void 0?0:Ht;(function(Ot,kt){if(!(Ot instanceof kt))throw new TypeError("Cannot call a class as a function")})(this,ot),this.left=bt,this.right=Qt,this.top=Lt,this.bottom=pt}var V,st;return V=ot,(st=[{key:"canHighlight",value:function(){return this.left<this.right&&this.top<this.bottom}}])&&z(V.prototype,st),ot}();function xt(ot,V){for(var st=0;st<V.length;st++){var N=V[st];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(ot,N.key,N)}}var rt=function(){function ot(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=N.node,bt=N.options,vt=N.popover,Lt=N.stage,Ut=N.overlay,Qt=N.window,Ht=N.document;(function(pt,Ot){if(!(pt instanceof Ot))throw new TypeError("Cannot call a class as a function")})(this,ot),this.node=U,this.document=Ht,this.window=Qt,this.options=bt,this.overlay=Ut,this.popover=vt,this.stage=Lt,this.animationTimeout=null}var V,st;return V=ot,(st=[{key:"isInView",value:function(){for(var N=this.node.offsetTop,U=this.node.offsetLeft,bt=this.node.offsetWidth,vt=this.node.offsetHeight,Lt=this.node;Lt.offsetParent;)N+=(Lt=Lt.offsetParent).offsetTop,U+=Lt.offsetLeft;return N>=this.window.pageYOffset&&U>=this.window.pageXOffset&&N+vt<=this.window.pageYOffset+this.window.innerHeight&&U+bt<=this.window.pageXOffset+this.window.innerWidth}},{key:"scrollManually",value:function(){var N=this.node.getBoundingClientRect().top+this.window.pageYOffset-this.window.innerHeight/2;this.window.scrollTo(0,N)}},{key:"bringInView",value:function(){if(this.node&&!this.isInView())if(this.node.scrollIntoView)try{this.node.scrollIntoView(this.options.scrollIntoViewOptions||{behavior:"instant",block:"center"})}catch{this.scrollManually()}else this.scrollManually()}},{key:"getCalculatedPosition",value:function(){var N=this.document.body,U=this.document.documentElement,bt=this.window,vt=this.window.pageYOffset||U.scrollTop||N.scrollTop,Lt=bt.pageXOffset||U.scrollLeft||N.scrollLeft,Ut=this.node.getBoundingClientRect();return new it({top:Ut.top+vt,left:Ut.left+Lt,right:Ut.left+Lt+Ut.width,bottom:Ut.top+vt+Ut.height})}},{key:"getPopover",value:function(){return this.popover}},{key:"onDeselected",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.hidePopover(),N&&this.hideStage(),this.removeHighlightClasses(),this.window.clearTimeout(this.animationTimeout),this.options.onDeselected&&this.options.onDeselected(this)}},{key:"isSame",value:function(N){return!(!N||!N.node)&&N.node===this.node}},{key:"onHighlightStarted",value:function(){this.options.onHighlightStarted&&this.options.onHighlightStarted(this)}},{key:"onHighlighted",value:function(){this.isInView()||this.bringInView(),this.showPopover(),this.showStage(),this.addHighlightClasses(),this.options.onHighlighted&&this.options.onHighlighted(this)}},{key:"removeHighlightClasses",value:function(){this.node.classList.remove("driver-highlighted-element"),this.node.classList.remove("driver-position-relative");for(var N=this.document.querySelectorAll(".".concat("driver-fix-stacking")),U=0;U<N.length;U++)N[U].classList.remove("driver-fix-stacking")}},{key:"addHighlightClasses",value:function(){this.node.classList.add("driver-highlighted-element"),this.canMakeRelative()&&this.node.classList.add("driver-position-relative"),this.fixStackingContext()}},{key:"fixStackingContext",value:function(){for(var N=this.node.parentNode;N&&N.tagName&&N.tagName.toLowerCase()!=="body";){var U=lt(N,"z-index"),bt=parseFloat(lt(N,"opacity")),vt=lt(N,"transform",!0),Lt=lt(N,"transform-style",!0),Ut=lt(N,"transform-box",!0),Qt=lt(N,"filter",!0),Ht=lt(N,"perspective",!0);(/[0-9]+/.test(U)||bt<1||vt&&vt!=="none"||Lt&&Lt!=="flat"||Ut&&Ut!=="border-box"||Qt&&Qt!=="none"||Ht&&Ht!=="none")&&N.classList.add("driver-fix-stacking"),N=N.parentNode}}},{key:"canMakeRelative",value:function(){var N=this.getStyleProperty("position");return["absolute","fixed","relative"].indexOf(N)===-1}},{key:"getStyleProperty",value:function(N){return lt(this.node,N)}},{key:"showStage",value:function(){this.stage.show(this.getCalculatedPosition())}},{key:"getNode",value:function(){return this.node}},{key:"hideStage",value:function(){this.stage.hide()}},{key:"hidePopover",value:function(){this.popover&&this.popover.hide()}},{key:"showPopover",value:function(){var N=this;if(this.popover){var U=this.getCalculatedPosition(),bt=300;this.options.animate&&this.overlay.lastHighlightedElement||(bt=0),this.animationTimeout=this.window.setTimeout(function(){N.popover.show(U)},bt)}}},{key:"getFullPageSize",value:function(){var N=this.document.body,U=this.document.documentElement;return{height:Math.max(N.scrollHeight,N.offsetHeight,U.scrollHeight,U.offsetHeight),width:Math.max(N.scrollWidth,N.offsetWidth,U.scrollWidth,U.offsetWidth)}}},{key:"getSize",value:function(){return{height:Math.max(this.node.scrollHeight,this.node.offsetHeight),width:Math.max(this.node.scrollWidth,this.node.offsetWidth)}}}])&&xt(V.prototype,st),ot}();l(55),l(56);function at(ot){return(at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(ot)}function wt(ot,V,st){return V in ot?Object.defineProperty(ot,V,{value:st,enumerable:!0,configurable:!0,writable:!0}):ot[V]=st,ot}function Dt(ot,V){for(var st=0;st<V.length;st++){var N=V[st];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(ot,N.key,N)}}function Wt(ot,V){return!V||at(V)!=="object"&&typeof V!="function"?function(st){if(st===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return st}(ot):V}function Pt(ot){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)})(ot)}function K(ot,V){return(K=Object.setPrototypeOf||function(st,N){return st.__proto__=N,st})(ot,V)}var J=function(ot){function V(U,bt,vt){var Lt;return function(Ut,Qt){if(!(Ut instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,V),(Lt=Wt(this,Pt(V).call(this))).options=function(Ut){for(var Qt=1;Qt<arguments.length;Qt++){var Ht=arguments[Qt]!=null?arguments[Qt]:{},pt=Object.keys(Ht);typeof Object.getOwnPropertySymbols=="function"&&(pt=pt.concat(Object.getOwnPropertySymbols(Ht).filter(function(Ot){return Object.getOwnPropertyDescriptor(Ht,Ot).enumerable}))),pt.forEach(function(Ot){wt(Ut,Ot,Ht[Ot])})}return Ut}({isFirst:!0,isLast:!0,totalCount:1,currentIndex:0,offset:0,showButtons:!0,closeBtnText:"Close",doneBtnText:"Done",startBtnText:"Next &rarr;",nextBtnText:"Next &rarr;",prevBtnText:"&larr; Previous"},U),Lt.window=bt,Lt.document=vt,Lt}var st,N;return function(U,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(bt&&bt.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),bt&&K(U,bt)}(V,rt),st=V,(N=[{key:"attachNode",value:function(){var U=this.document.getElementById("driver-popover-item");U&&U.parentElement.removeChild(U),U=Q(function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return`
  <div id="`.concat("driver-popover-item",'" class="').concat(bt,`">
    <div class="`).concat("driver-popover-tip",`"></div>
    <div class="`).concat("driver-popover-title",`">Popover Title</div>
    <div class="`).concat("driver-popover-description",`">Popover Description</div>
    <div class="driver-clearfix `).concat("driver-popover-footer",`">
      <button class="`).concat("driver-close-btn",`">Close</button>
      <span class="driver-btn-group `).concat("driver-navigation-btns",`">
        <button class="`).concat("driver-prev-btn",`">&larr; Previous</button>
        <button class="`).concat("driver-next-btn",`">Next &rarr;</button>
      </span>
    </div>
  </div>`)}(this.options.className)),document.body.appendChild(U),this.node=U,this.tipNode=U.querySelector(".".concat("driver-popover-tip")),this.titleNode=U.querySelector(".".concat("driver-popover-title")),this.descriptionNode=U.querySelector(".".concat("driver-popover-description")),this.footerNode=U.querySelector(".".concat("driver-popover-footer")),this.nextBtnNode=U.querySelector(".".concat("driver-next-btn")),this.prevBtnNode=U.querySelector(".".concat("driver-prev-btn")),this.closeBtnNode=U.querySelector(".".concat("driver-close-btn"))}},{key:"getTitleNode",value:function(){return this.titleNode}},{key:"getDescriptionNode",value:function(){return this.descriptionNode}},{key:"hide",value:function(){this.node&&(this.node.style.display="none")}},{key:"setInitialState",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right="",this.node.querySelector(".".concat("driver-popover-tip")).className="driver-popover-tip"}},{key:"show",value:function(U){switch(this.attachNode(),this.setInitialState(),this.titleNode.innerHTML=this.options.title,this.descriptionNode.innerHTML=this.options.description||"",this.renderFooter(),this.options.position){case"left":case"left-top":this.positionOnLeft(U);break;case"left-center":this.positionOnLeftCenter(U);break;case"left-bottom":this.positionOnLeftBottom(U);break;case"right":case"right-top":this.positionOnRight(U);break;case"right-center":this.positionOnRightCenter(U);break;case"right-bottom":this.positionOnRightBottom(U);break;case"top":case"top-left":this.positionOnTop(U);break;case"top-center":this.positionOnTopCenter(U);break;case"top-right":this.positionOnTopRight(U);break;case"bottom":case"bottom-left":this.positionOnBottom(U);break;case"bottom-center":this.positionOnBottomCenter(U);break;case"bottom-right":this.positionOnBottomRight(U);break;case"mid-center":this.positionOnMidCenter(U);break;case"auto":default:this.autoPosition(U)}this.bringInView()}},{key:"renderFooter",value:function(){this.nextBtnNode.innerHTML=this.options.nextBtnText,this.prevBtnNode.innerHTML=this.options.prevBtnText,this.closeBtnNode.innerHTML=this.options.closeBtnText;var U=this.options.totalCount&&this.options.totalCount!==1;this.options.showButtons?(U?(this.nextBtnNode.style.display="inline-block",this.prevBtnNode.style.display="inline-block",this.closeBtnNode.classList.remove("driver-close-only-btn")):(this.nextBtnNode.style.display="none",this.prevBtnNode.style.display="none",this.closeBtnNode.classList.add("driver-close-only-btn")),this.footerNode.style.display="block",this.options.isFirst?(this.prevBtnNode.classList.add("driver-disabled"),this.nextBtnNode.innerHTML=this.options.startBtnText):this.prevBtnNode.classList.remove("driver-disabled"),this.options.isLast?this.nextBtnNode.innerHTML=this.options.doneBtnText:this.nextBtnNode.innerHTML=this.options.nextBtnText):this.footerNode.style.display="none"}},{key:"positionOnLeft",value:function(U){var bt=this.getSize().width,vt=this.options.padding+10;this.node.style.left="".concat(U.left-bt-vt,"px"),this.node.style.top="".concat(U.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right")}},{key:"positionOnLeftBottom",value:function(U){var bt=this.getSize(),vt=bt.width,Lt=this.options.padding+10;this.node.style.left="".concat(U.left-vt-Lt,"px"),this.node.style.top="".concat(U.bottom+this.options.padding+this.options.offset-bt.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("right","position-bottom")}},{key:"positionOnLeftCenter",value:function(U){var bt=this.getSize(),vt=bt.width,Lt=bt.height/2,Ut=this.options.padding+10,Qt=(U.bottom-U.top)/2,Ht=U.top-Lt+Qt+this.options.offset;this.node.style.left="".concat(U.left-vt-Ut,"px"),this.node.style.top="".concat(Ht,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("right","position-center")}},{key:"positionOnRight",value:function(U){var bt=this.options.padding+10;this.node.style.left="".concat(U.right+bt,"px"),this.node.style.top="".concat(U.top+this.options.offset-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left")}},{key:"positionOnRightCenter",value:function(U){var bt=this.getSize(),vt=this.options.padding+10,Lt=bt.height/2,Ut=(U.bottom-U.top)/2,Qt=U.top-Lt+Ut+this.options.offset;this.node.style.left="".concat(U.right+vt,"px"),this.node.style.top="".concat(Qt,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("left","position-center")}},{key:"positionOnRightBottom",value:function(U){var bt=this.options.padding+10,vt=this.getSize();this.node.style.left="".concat(U.right+bt,"px"),this.node.style.top="".concat(U.bottom+this.options.padding+this.options.offset-vt.height,"px"),this.node.style.bottom="",this.node.style.right="",this.tipNode.classList.add("left","position-bottom")}},{key:"positionOnTop",value:function(U){var bt=this.getSize().height,vt=this.options.padding+10;this.node.style.top="".concat(U.top-bt-vt,"px"),this.node.style.left="".concat(U.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom")}},{key:"positionOnTopCenter",value:function(U){var bt=this.getSize(),vt=bt.height,Lt=bt.width/2,Ut=this.options.padding+10,Qt=this.options.offset+U.left+(U.right-U.left)/2;this.node.style.top="".concat(U.top-vt-Ut,"px"),this.node.style.left="".concat(Qt-Lt-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-center")}},{key:"positionOnTopRight",value:function(U){var bt=this.getSize(),vt=bt.height,Lt=this.options.padding+10;this.node.style.top="".concat(U.top-vt-Lt,"px"),this.node.style.left="".concat(U.right+this.options.padding+this.options.offset-bt.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("bottom","position-right")}},{key:"positionOnBottom",value:function(U){var bt=this.options.padding+10;this.node.style.top="".concat(U.bottom+bt,"px"),this.node.style.left="".concat(U.left-this.options.padding+this.options.offset,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top")}},{key:"positionOnBottomCenter",value:function(U){var bt=this.getSize().width/2,vt=this.options.padding+10,Lt=this.options.offset+U.left+(U.right-U.left)/2;this.node.style.top="".concat(U.bottom+vt,"px"),this.node.style.left="".concat(Lt-bt-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-center")}},{key:"positionOnBottomRight",value:function(U){var bt=this.getSize(),vt=this.options.padding+10;this.node.style.top="".concat(U.bottom+vt,"px"),this.node.style.left="".concat(U.right+this.options.padding+this.options.offset-bt.width,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("top","position-right")}},{key:"positionOnMidCenter",value:function(U){var bt=this.getSize(),vt=bt.height,Lt=bt.width/2,Ut=vt/2,Qt=(U.bottom-U.top)/2,Ht=U.top-Ut+Qt+this.options.offset,pt=this.options.offset+U.left+(U.right-U.left)/2;this.node.style.top="".concat(Ht,"px"),this.node.style.left="".concat(pt-Lt-this.options.padding,"px"),this.node.style.right="",this.node.style.bottom="",this.tipNode.classList.add("mid-center")}},{key:"autoPosition",value:function(U){var bt=this.getFullPageSize(),vt=this.getSize(),Lt=bt.height,Ut=vt.height,Qt=this.options.padding+10;U.bottom+Ut+Qt>=Lt?this.positionOnTop(U):this.positionOnBottom(U)}}])&&Dt(st.prototype,N),V}();function Y(ot){return(Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V})(ot)}function ee(ot,V){for(var st=0;st<V.length;st++){var N=V[st];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(ot,N.key,N)}}function Kt(ot,V){return!V||Y(V)!=="object"&&typeof V!="function"?function(st){if(st===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return st}(ot):V}function Zt(ot){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(V){return V.__proto__||Object.getPrototypeOf(V)})(ot)}function Yt(ot,V){return(Yt=Object.setPrototypeOf||function(st,N){return st.__proto__=N,st})(ot,V)}var Rt=function(ot){function V(U,bt,vt){var Lt;return function(Ut,Qt){if(!(Ut instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,V),(Lt=Kt(this,Zt(V).call(this))).options=U,Lt.window=bt,Lt.document=vt,Lt}var st,N;return function(U,bt){if(typeof bt!="function"&&bt!==null)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(bt&&bt.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),bt&&Yt(U,bt)}(V,rt),st=V,(N=[{key:"attachNode",value:function(){var U=this.document.getElementById(R);U||(U=Q(L),document.body.appendChild(U)),this.node=U,this.options.animate?this.node.classList.remove("driver-stage-no-animation"):this.node.classList.add("driver-stage-no-animation")}},{key:"hide",value:function(){this.node&&this.node.parentElement&&this.node.parentElement.removeChild(this.node)}},{key:"setInitialStyle",value:function(){this.node.style.display="block",this.node.style.left="0",this.node.style.top="0",this.node.style.bottom="",this.node.style.right=""}},{key:"show",value:function(U){this.attachNode(),this.setInitialStyle();var bt=2*this.options.padding,vt=U.right-U.left+bt,Lt=U.bottom-U.top+bt;this.node.style.display="block",this.node.style.position="absolute",this.node.style.width="".concat(vt,"px"),this.node.style.height="".concat(Lt,"px"),this.node.style.top="".concat(U.top-bt/2,"px"),this.node.style.left="".concat(U.left-bt/2,"px"),this.node.style.backgroundColor=this.options.stageBackground}}])&&ee(st.prototype,N),V}();function qt(ot){for(var V=1;V<arguments.length;V++){var st=arguments[V]!=null?arguments[V]:{},N=Object.keys(st);typeof Object.getOwnPropertySymbols=="function"&&(N=N.concat(Object.getOwnPropertySymbols(st).filter(function(U){return Object.getOwnPropertyDescriptor(st,U).enumerable}))),N.forEach(function(U){pe(ot,U,st[U])})}return ot}function pe(ot,V,st){return V in ot?Object.defineProperty(ot,V,{value:st,enumerable:!0,configurable:!0,writable:!0}):ot[V]=st,ot}function oe(ot,V){for(var st=0;st<V.length;st++){var N=V[st];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(ot,N.key,N)}}l.d(r,"default",function(){return ce});var ce=function(){function ot(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(U,bt){if(!(U instanceof bt))throw new TypeError("Cannot call a class as a function")})(this,ot),this.options=qt({animate:v,opacity:c,padding:g,scrollIntoViewOptions:null,allowClose:w,keyboardControl:D,overlayClickNext:T,stageBackground:"#ffffff",onHighlightStarted:function(){return null},onHighlighted:function(){return null},onDeselected:function(){return null},onReset:function(){return null},onNext:function(){return null},onPrevious:function(){return null}},N),this.document=document,this.window=window,this.isActivated=!1,this.steps=[],this.currentStep=0,this.currentMovePrevented=!1,this.overlay=new q(this.options,window,document),this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onClick=this.onClick.bind(this),this.moveNext=this.moveNext.bind(this),this.movePrevious=this.movePrevious.bind(this),this.preventMove=this.preventMove.bind(this),this.bind()}var V,st;return V=ot,(st=[{key:"getSteps",value:function(){return this.steps}},{key:"setSteps",value:function(N){this.steps=N}},{key:"bind",value:function(){this.window.addEventListener("resize",this.onResize,!1),this.window.addEventListener("keyup",this.onKeyUp,!1),"ontouchstart"in document.documentElement?this.window.addEventListener("touchstart",this.onClick,!1):this.window.addEventListener("click",this.onClick,!1)}},{key:"onClick",value:function(N){if(this.isActivated&&this.hasHighlightedElement()){N.stopPropagation();var U=this.overlay.getHighlightedElement(),bt=this.document.getElementById("driver-popover-item"),vt=U.node.contains(N.target),Lt=bt&&bt.contains(N.target);if(vt||Lt||!this.options.overlayClickNext)if(vt||Lt||!this.options.allowClose){var Ut=N.target.classList.contains("driver-next-btn"),Qt=N.target.classList.contains("driver-prev-btn");N.target.classList.contains("driver-close-btn")?this.reset():Ut?this.handleNext():Qt&&this.handlePrevious()}else this.reset();else this.handleNext()}}},{key:"onResize",value:function(){this.isActivated&&this.refresh()}},{key:"refresh",value:function(){this.overlay.refresh()}},{key:"onKeyUp",value:function(N){if(this.isActivated&&this.options.keyboardControl)if(N.keyCode!==27){var U=this.getHighlightedElement();U&&U.popover&&(N.keyCode===39?this.handleNext():N.keyCode===37&&this.handlePrevious())}else this.reset()}},{key:"movePrevious",value:function(){var N=this.steps[this.currentStep-1];N?(this.overlay.highlight(N),this.currentStep-=1):this.reset()}},{key:"preventMove",value:function(){this.currentMovePrevented=!0}},{key:"handleNext",value:function(){this.currentMovePrevented=!1;var N=this.steps[this.currentStep];N&&N.options&&N.options.onNext&&N.options.onNext(this.overlay.highlightedElement),this.currentMovePrevented||this.moveNext()}},{key:"handlePrevious",value:function(){this.currentMovePrevented=!1;var N=this.steps[this.currentStep];N&&N.options&&N.options.onPrevious&&N.options.onPrevious(this.overlay.highlightedElement),this.currentMovePrevented||this.movePrevious()}},{key:"moveNext",value:function(){var N=this.steps[this.currentStep+1];N?(this.overlay.highlight(N),this.currentStep+=1):this.reset()}},{key:"hasNextStep",value:function(){return!!this.steps[this.currentStep+1]}},{key:"hasPreviousStep",value:function(){return!!this.steps[this.currentStep-1]}},{key:"reset",value:function(){var N=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.currentStep=0,this.isActivated=!1,this.overlay.clear(N)}},{key:"hasHighlightedElement",value:function(){var N=this.overlay.getHighlightedElement();return N&&N.node}},{key:"getHighlightedElement",value:function(){return this.overlay.getHighlightedElement()}},{key:"getLastHighlightedElement",value:function(){return this.overlay.getLastHighlightedElement()}},{key:"defineSteps",value:function(N){this.steps=[];for(var U=0;U<N.length;U++){var bt=this.prepareElementFromStep(N[U],N,U);bt&&this.steps.push(bt)}}},{key:"prepareElementFromStep",value:function(N){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],bt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,vt=qt({},this.options),Lt=N,Ut=typeof N!="string"&&!B(N);if(!N||Ut&&!N.element)throw new Error("Element is required in step ".concat(bt));Ut&&(Lt=N.element,vt=qt({},this.options,N));var Qt=B(Lt)?Lt:this.document.querySelector(Lt);if(!Qt)return console.warn("Element to highlight ".concat(Lt," not found")),null;var Ht=null;if(vt.popover&&vt.popover.title){var pt=[this.options.className,vt.popover.className].filter(function(he){return he}).join(" "),Ot=qt({},vt,vt.popover,{className:pt,totalCount:U.length,currentIndex:bt,isFirst:bt===0,isLast:U.length===0||bt===U.length-1});Ht=new J(Ot,this.window,this.document)}var kt=qt({},vt),zt=new Rt(kt,this.window,this.document);return new rt({node:Qt,options:vt,popover:Ht,stage:zt,overlay:this.overlay,window:this.window,document:this.document})}},{key:"start",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(!this.steps||this.steps.length===0)throw new Error("There are no steps defined to iterate");this.isActivated=!0,this.currentStep=N,this.overlay.highlight(this.steps[N])}},{key:"highlight",value:function(N){this.isActivated=!0;var U=this.prepareElementFromStep(N);U&&this.overlay.highlight(U)}}])&&oe(V.prototype,st),ot}()}]).default})})(Cf);var l0=Cf.exports;const h0=Mh(l0),u0=[{element:"#guide_1",className:"guide_1",popover:{className:"",title:"Circuit Elements panel",description:"This is where you can find all the circuit elements that are offered to build amazing circuits.",position:"right",offset:160}},{element:".guide_2",popover:{title:"Properties Panel",description:"This panel lets you change element properties as they are selected. When no elements are selected, the panel displays project properties.",position:"left",offset:200}},{element:".quick-btn",popover:{title:"Quick Access Panel",description:"This movable panel offers to perform some actions like Save Online, Open, Download quickly. Hover over the icons and see for yourself",position:"bottom"}},{element:"#tabsBar",popover:{title:"Circuit Tabs",description:"This section displays all the circuits you have in your project. You can easily add and delete circuits.",position:"bottom",offset:250}},{element:".timing-diagram-panel",popover:{title:"Timing Diagram Panel (Waveform)",description:"This panel displays the waveform created by circuits and can be used for resolving race conditions and debugging circuits.",position:"bottom",offset:0}},{element:".fa-bug",popover:{className:"bug-guide",title:"Report System",description:"You can report any issues/bugs you face through this issue reporting button there and then quickly.",position:"left",offset:-105}},{element:".tour-help",popover:{className:"tourHelpStep",title:"Restart tutorial anytime",description:'You can restart this tutorial anytime by clicking on "Tutorial Guide" under this dropdown.',position:"right",offset:0}}],c0=[{element:"#touchMenu",className:"touchMenuIcon",popover:{className:"",title:"Menu Buttons",description:"This are the button help you to access the following tools 1.CircuitElement 2.PropertiesPanel 3.TimeDiagram 4.QuickMenu",position:"left",offset:50}},{element:"#liveMenu",className:"liveMenuIcon",popover:{className:"",title:"Quick Tools",description:"This are Quick Tools 1.Fit to screen 2.Delete 3.Undo",position:"down",offset:1}},{element:"#tabsBar",popover:{title:"Circuit Tabs",description:"This section displays all the circuits you have in your project. You can easily add and delete circuits.",position:"bottom",offset:250}},{element:"#smallNavbarMenu-btn",className:"",popover:{className:"",title:"Navmenu Button",description:"This button is use to access Navmenu",position:"left",offset:0}}],ph=new h0({animate:!0,opacity:.8,padding:5,showButtons:!0});function Df(){$(".draggable-panel .maximize").trigger("click"),window.screen.width>1e3?ph.defineSteps(u0):ph.defineSteps(c0),ph.start(),localStorage.setItem("tutorials_tour_done",!0)}var Wo;function d0(){var i=$("#verilog-export-code-window-div"),t=p0.exportVerilog();Wo.setValue(t),$("#verilog-export-code-window-div .CodeMirror").css("height",$(window).height()-200),i.dialog({resizable:!1,width:"90%",height:"auto",position:{my:"center",at:"center",of:window},buttons:[{text:"Download Verilog File",click(){var n=Rs()||"Untitled";J0(n+".v",Wo.getValue())}},{text:"Copy to Clipboard",click(){Hd(Wo.getValue()),De("Code has been copied")}},{text:"Try in EDA Playground",click(){Hd(Wo.getValue()),tb("https://www.edaplayground.com/x/XZpY")}}]})}function f0(){var i=document.getElementById("verilog-export-code-window");Wo=Ya.fromTextArea(i,{mode:"verilog",autoRefresh:!0,styleActiveLine:!0,lineNumbers:!0,autoCloseBrackets:!0,smartIndent:!0,indentWithTabs:!0,extraKeys:{"Ctrl-Space":"autocomplete"}})}var p0={exportVerilog:function(i=void 0){var t={};for(var n in Si)Si[n].resetVerilog&&Si[n].resetVerilog();var r=[],l=new Set;for(id in ae){t[id]=ae[id].getDependencies();for(var c=0;c<ae[id].SubCircuit.length;c++)l.add(ae[id].SubCircuit[c].id)}for(id in ae)l.has(id)||r.push(ae[id]);var g={},v={},w="";if(i)w+=this.exportVerilogScope(i.id,g,t,v);else for(id in ae)w+=this.exportVerilogScope(id,g,t,v);for(var D in v)Si[D]&&Si[D].moduleVerilog&&(w+=Si[D].moduleVerilog());var T=this.generateReport(v)+`
`,R=this.generateTestBenchCode(r);return T+R+w},generateReport:function(i){var t="";t+=`/**
`,t+=` * This is an autogenerated netlist code from CircuitVerse. Verilog Code can be
`,t+=` * tested on https://www.edaplayground.com/ using Icarus Verilog 0.9.7. This is an
`,t+=` * experimental module and some manual changes make need to be done in order for
`,t+=` * this to work.
`,t+=` *
`,t+=` * If you have any ideas/suggestions or bug fixes, raise an issue
`,t+=` * on https://github.com/CircuitVerse/CircuitVerse/issues/new/choose
`,t+=` */
`,t+=`
`,t+=`/*
`,t+=_e(1)+`Element Usage Report
`;for(var n in i)n!="Node"&&(t+=`${_e(2)}${n} - ${i[n]} times
`);t+=`*/
`,t+=`
`;var r="";t+=`/*
`,t+=_e(1)+`Usage Instructions and Tips
`,r+=_e(2)+`Labels - Ensure unique label names and avoid using verilog keywords
`,r+=_e(2)+`Warnings - Connect all optional inputs to remove warnings
`;for(var n in i)Si[n]&&Si[n].verilogInstructions&&(r+=g0(2,Si[n].verilogInstructions()));return t+=r,t+=`*/
`,t},generateTestBenchCode:function(i){if(i.length==0)return"";var t=`// Sample Testbench Code - Uncomment to use
`;t+=`
/*
`,t+=`module TestBench();
`;for(var n={},r={},l=1;l<=32;l++)n[l]=new Set;for(var l=1;l<=32;l++)r[l]=new Set;for(var c=new Set,g=new Set,v=new Set,w="",l=0;l<i.length;l++){for(var D=i[l],T=0;T<D.Input.length;T++){var R=D.Input[T];n[R.bitWidth].add(R.label),g.add(R.label)}for(var T=0;T<D.Output.length;T++){var M=D.Output[T];r[M.bitWidth].add(M.label),v.add(M.label)}for(var T=0;T<D.Clock.length;T++){var R=D.Clock[T];n[1].add(R.label),c.add(R.label)}var L=dn(D.name),E=this.generateHeaderHelper(D);w+=`${_e(1)}${L} DUT${l}${E}
`}t+=`
`;for(var Q=1;Q<=32;Q++)if(n[Q].size!=0){var lt=[...n[Q]];Q==1?t+=`${_e(1)}reg ${lt.join(", ")};
`:t+=`${_e(1)}reg [${Q-1}:0] ${lt.join(", ")};
`}t+=`
`;for(var Q=1;Q<=32;Q++)if(r[Q].size!=0){var B=[...r[Q]];Q==1?t+=`${_e(1)}wire ${B.join(", ")};
`:t+=`${_e(1)}wire [${Q-1}:0] ${B.join(", ")};
`}if(t+=`
`,t+=w,c.size){t+=`${_e(1)}always begin
`,t+=`${_e(2)}#10
`;for(var A of c)t+=`${_e(2)}${A} = 0;
`;t+=`${_e(2)}#10
`;for(var A of c)t+=`${_e(2)}${A} = 1;
`;t+=`${_e(1)}end
`,t+=`
`}t+=`${_e(1)}initial begin
`;for(var R of g)t+=`${_e(2)}${R} = 0;
`;t+=`
`,t+=`${_e(2)}#15
`;for(var M of v)t+=`${_e(2)}$display("${M} = %b", ${M});
`;t+=`
`,t+=`${_e(2)}#10
`;for(var M of v)t+=`${_e(2)}$display("${M} = %b", ${M});
`;return t+=`
`,t+=`${_e(2)}$finish;

`,t+=`${_e(1)}end
`,t+=`endmodule
`,t+=`
*/
`,t},exportVerilogScope:function(i,t,n,r){if(t[i])return"";t[i]=!0;for(var l="",c=0;c<n[i].length;c++)l+=this.exportVerilogScope(n[i][c],t,n,r)+`
`;var g=ae[i];this.resetLabels(g),this.setLabels(g),l+=this.generateHeader(g),l+=this.generateOutputList(g),l+=this.generateInputList(g);for(var v=this.processGraph(g,r),w=1;w<=32;w++){var D=g.verilogWireList[w];D=D.filter(T=>!T.includes("[")),D.length!=0&&(w==1?l+="  wire "+D.join(", ")+`;
`:l+="  wire ["+(w-1)+":0] "+D.join(", ")+`;
`)}return l+=v,l+=`endmodule
`,l},processGraph:function(i,t){var n="";i.stack=[],i.verilogWireList=[];for(var r=0;r<=32;r++)i.verilogWireList.push(new Array);for(var l=new Set,r=0;r<inputList.length;r++)for(var c=0;c<i[inputList[r]].length;c++)i.stack.push(i[inputList[r]][c]);for(;i.stack.length;){if(Yf())return;var g=i.stack.pop();l.has(g)||(g.processVerilog(),g.objectType!="Node"&&(t[g.objectType]?t[g.objectType]++:t[g.objectType]=1),g.objectType!="Node"&&g.objectType!="Input"&&g.objectType!="Clock"&&l.add(g))}for(var g of l)n+="  "+g.generateVerilog()+`
`;return n},resetLabels:function(i){for(var t=0;t<i.allNodes.length;t++)i.allNodes[t].verilogLabel=""},setLabels:function(i=globalScope){for(var t=0;t<i.Input.length;t++)i.Input[t].label==""?i.Input[t].label="inp_"+t:i.Input[t].label=dn(i.Input[t].label),i.Input[t].output1.verilogLabel=i.Input[t].label;for(var t=0;t<i.ConstantVal.length;t++)i.ConstantVal[t].label==""?i.ConstantVal[t].label="const_"+t:i.ConstantVal[t].label=dn(i.ConstantVal[t].label),i.ConstantVal[t].output1.verilogLabel=i.ConstantVal[t].label;for(var t=0;t<i.Clock.length;t++)i.Clock[t].label==""?i.Clock[t].label="clk_"+t:i.Clock[t].label=dn(i.Clock[t].label),i.Clock[t].output1.verilogLabel=i.Clock[t].label;for(var t=0;t<i.Output.length;t++)i.Output[t].label==""?i.Output[t].label="out_"+t:i.Output[t].label=dn(i.Output[t].label);for(var t=0;t<i.SubCircuit.length;t++)i.SubCircuit[t].label==""?i.SubCircuit[t].label=i.SubCircuit[t].data.name+"_"+t:i.SubCircuit[t].label=dn(i.SubCircuit[t].label);for(var t=0;t<moduleList.length;t++)for(var n=moduleList[t],r=0;r<i[n].length;r++)i[n][r].verilogLabel=dn(i[n][r].label)||i[n][r].verilogName()+"_"+r},generateHeader:function(i=globalScope){var t=`
module `+dn(i.name);return t+=this.generateHeaderHelper(i),t},generateHeaderHelper:function(i=globalScope){for(var t="(",n=[],r=0;r<i.Output.length;r++)n.push(i.Output[r].label);for(var r=0;r<i.Clock.length;r++)n.push(i.Clock[r].label);for(var r=0;r<i.Input.length;r++)n.push(i.Input[r].label);return t+=n.join(", "),t+=`);
`,t},generateInputList:function(i=globalScope){for(var t={},n=1;n<=32;n++)t[n]=[];for(var n=0;n<i.Input.length;n++)t[i.Input[n].bitWidth].push(i.Input[n].label);for(var n=0;n<i.Clock.length;n++)t[i.Clock[n].bitWidth].push(i.Clock[n].label);var r="";for(var l in t)t[l].length!=0&&(l==1?r+="  input "+t[1].join(", ")+`;
`:r+="  input ["+(l-1)+":0] "+t[l].join(", ")+`;
`);return r},generateOutputList:function(i=globalScope){for(var t={},n=0;n<i.Output.length;n++)t[i.Output[n].bitWidth]?t[i.Output[n].bitWidth].push(i.Output[n].label):t[i.Output[n].bitWidth]=[i.Output[n].label];var r="";for(var l in t)l==1?r+="  output "+t[1].join(",  ")+`;
`:r+="  output ["+(l-1)+":0] "+t[l].join(", ")+`;
`;return r}};function _e(i){return" ".repeat(i*2)}function g0(i,t){var n=t.split(`
`);return n[n.length-1]==""?(n.pop(),n=n.map(r=>_e(i)+r).join(`
`),n+=`
`,n):n.map(r=>_e(i)+r).join(`
`)}const m0=()=>{const i=`${$("#projectName").text().trim()}.cv`,t=document.createElement("input");t.type="text",t.name="fileName",t.setAttribute("placeholder",i),t.id="filename",t.defaultValue=i;const n=document.createElement("label");n.setAttribute("for","filename"),n.textContent="File Name";const r=document.createElement("div");return r.appendChild(n),r.appendChild(t),r},v0=()=>{$("#ExportCircuitFilesDialog").empty(),$("#ExportCircuitFilesDialog").append(m0()),$("#ExportCircuitFilesDialog").dialog({resizable:!1,buttons:[{text:"Save",click(){var i=ml($("#filename").val())||"untitled";const t=er(i.split(".")[0],!1);i=`${i.split(".")[0]}.cv`,gf(i,t),$(this).dialog("close")}}]}),$("#ExportCircuitFilesDialog").focus()};function b0(){setTimeout(()=>{Df()},100)}const fe={};fe.save=Vh;fe.load=Hn;fe.createSaveAsImgPrompt=pl;fe.clearProject=Sf;fe.newProject=n0;fe.saveOffline=yf;fe.newCircuit=fs;fe.createOpenLocalPrompt=vf;fe.recoverProject=i0;fe.createSubCircuitPrompt=uf;fe.createCombinationalAnalysisPrompt=kf;fe.fullViewOption=Hf;fe.colorThemes=am;fe.showTourGuide=b0;fe.deleteSelected=$o;fe.newVerilogModule=Mv;fe.saveVerilogCode=Nv;fe.resetVerilogCode=cf;fe.generateVerilog=d0;fe.bitconverter=eb;fe.createNewCircuitScope=Wf;fe.ExportCircuitFiles=v0;fe.ImportCircuitFiles=mf;const ki=10;let Or;const Ts={x:0,y:0};var Ln={modulePropertyInner:"",PlotAreaId:"",plotID:"",tdLog:""},$a=0,Oo=0,_s=0,kd=0,Cd=0,y0,Dd=0,Zh,Jh,_h,Ph,Td,qa,Ni,Ih=!1;function _r(i,t){Zh=i.touches[0].clientX-t.offsetLeft,Jh=i.touches[0].clientY-t.offsetTop}function Pr(i,t){Ph=i.touches[0].clientY-Jh,_h=i.touches[0].clientX-Zh,t.style.left=_h+"px",t.style.top=Ph+"px"}function Ir(){Zh=_h,Jh=Ph}function Tf(i){ye(!0),f.lastSelected&&f.lastSelected.dblclick!==void 0?f.lastSelected.dblclick():f.shiftDown||(f.multipleObjectSelections=[]),ge(2),i.preventDefault()}function w0(i){const t=new Date().getTime(),n=t-Dd;clearTimeout(y0),n<500&&n>0&&Tf(i),Ao(-1),Dd=t,i.preventDefault()}const gh=navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("trident")!=-1;function gl(i){return f.touch?(Ts.x=i.touches[0].clientX,Ts.y=i.touches[0].clientY,Ts):(f.touch||(Ts.x=i.clientX,Ts.y=i.clientY),Ts)}function _f(i,t){i.preventDefault(),mi(!0),ge(),$e(!0),bn(!0),ye(!0),Oo=Math.sqrt((i.touches[1].clientX-i.touches[0].clientX)**2,(i.touches[1].clientY-i.touches[0].clientY)**2),Oo>=$a?(_s+=.02,$a=Oo):$a>=Oo&&(_s-=.02,$a=Oo),_s>=2?_s=2:_s<=.5&&(_s=.5);const n=t.scale;t.scale=Math.max(.5,Math.min(4*DPR,_s*3)),t.scale=Math.round(t.scale*10)/10,kd=(i.touches[0].clientX+i.touches[1].clientX)/2,Cd=(i.touches[0].clientY+i.touches[1].clientY)/2;const r=f.canvas.getBoundingClientRect(),l=(kd-r.left)*DPR,c=(Cd-r.top)*DPR,g=Math.round((l-t.ox)/t.scale/ki),v=Math.round((c-t.ox)/t.scale/ki),w=Math.round(g/ki)*ki,D=Math.round(v/ki)*ki;t.ox=Math.round(w*(t.scale-n)),t.oy=Math.round(D*(t.scale-n)),mi(!0),ge(1)}function _d(i){Or=gl(i),f.mouseDown=!0,document.activeElement instanceof HTMLElement&&document.activeElement.blur(),wn(!1),$e(!0),bn(!0),ye(!0),f.lastSelected=void 0,f.selected=!1,f.hover=void 0;const t=f.canvas.getBoundingClientRect();f.mouseDownRawX=(Or.x-t.left)*DPR,f.mouseDownRawY=(Or.y-t.top)*DPR,f.mouseDownX=Math.round((f.mouseDownRawX-globalScope.ox)/globalScope.scale/ki)*ki,f.mouseDownY=Math.round((f.mouseDownRawY-globalScope.oy)/globalScope.scale/ki)*ki,f.touch&&(f.mouseX=f.mouseDownX,f.mouseY=f.mouseDownY),f.oldx=globalScope.ox,f.oldy=globalScope.oy,i.preventDefault(),Hs(),ge(1),$(".dropdown.open").removeClass("open")}function Pd(i){if(!f.touch||i.touches.length===1){Or=gl(i);const t=f.canvas.getBoundingClientRect();if(f.mouseRawX=(Or.x-t.left)*DPR,f.mouseRawY=(Or.y-t.top)*DPR,f.mouseXf=(f.mouseRawX-globalScope.ox)/globalScope.scale,f.mouseYf=(f.mouseRawY-globalScope.oy)/globalScope.scale,f.mouseX=Math.round(f.mouseXf/ki)*ki,f.mouseY=Math.round(f.mouseYf/ki)*ki,ye(!0),f.lastSelected&&(f.mouseDown||f.lastSelected.newElement)){ye(!0);let n;f.lastSelected==globalScope.root?n=function(){au()}:n=function(){f.lastSelected&&f.lastSelected.update()},ge(0,20,n)}else ge(0,200)}f.touch&&i.touches.length===2&&_f(i,globalScope)}function Id(i){f.mouseDown=!1,lightMode||(sf(),setTimeout(Nh,2e3)),wn(!1),$e(!0),bn(!0),ye(!0),mi(!0),zi(1),ge(1),f.mouseDown=!1;for(let t=0;t<2;t++)bn(!0),zi(1),ps();wn(!1),$e(!0),bn(!0),ye(!0),mi(!0),zi(1),ge(1),f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height||(is.smartDropXX=f.mouseX+100,is.smartDropYY=f.mouseY-50),f.touch&&(Ih||(Br(globalScope),f.mouseX=100+f.maxWidth||0,f.mouseY=f.minHeight||0,w0(i)))}function S0(){$("#deleteSelected").on("click",()=>{$o()}),$("#zoomIn").on("click",()=>{An(.2,"zoomButton","zoomButton",2)}),$("#zoomOut").on("click",()=>{An(-.2,"zoomButton","zoomButton",2)}),$("#undoButton").on("click",()=>{tl()}),$("#redoButton").on("click",()=>{Ua()}),$("#viewButton").on("click",()=>{Hf()}),$(document).on("keyup",L=>{L.key==="Escape"&&Rf()}),$("#projectName").on("click",()=>{f.lastSelected=globalScope.root,setTimeout(()=>{document.getElementById("projname").select()},100)}),$("#tabsBar").sortable({containment:"parent",items:"> div",revert:!1,opacity:.5,tolerance:"pointer",placeholder:"placeholder",forcePlaceholderSize:!0}),document.getElementById("simulationArea").addEventListener("mousedown",L=>{f.touch=!1,_d(L)}),document.getElementById("simulationArea").addEventListener("mouseup",()=>{f.lastSelected&&(f.lastSelected.newElement=!1),f.lastSelected&&restrictedElements.includes(f.lastSelected.objectType)&&!globalScope.restrictedCircuitElementsUsed.includes(f.lastSelected.objectType)&&(globalScope.restrictedCircuitElementsUsed.push(f.lastSelected.objectType),Bh()),!f.shiftDown&&f.multipleObjectSelections.length>0&&(f.multipleObjectSelections.includes(f.lastSelected)||(f.multipleObjectSelections=[]))}),document.getElementById("simulationArea").addEventListener("mousemove",L=>{f.touch=!1,Pd(L)}),document.getElementById("simulationArea").addEventListener("mouseup",L=>{f.touch=!1,Id(L)}),document.getElementById("simulationArea").addEventListener("touchstart",L=>{f.touch=!0,_d(L)}),document.getElementById("simulationArea").addEventListener("touchmove",L=>{f.touch=!0,Pd(L)}),document.getElementById("simulationArea").addEventListener("touchend",L=>{f.touch=!0,Id(L)}),window.addEventListener("keyup",L=>{ge(1),f.shiftDown=L.shiftKey,L.keyCode==16&&(f.shiftDown=!1),(L.key=="Meta"||L.key=="Control")&&(f.controlDown=!1)}),window.addEventListener("keydown",L=>{if(document.activeElement.tagName!="INPUT"&&document.activeElement==document.body){if(f.shiftDown=L.shiftKey,(L.key=="Meta"||L.key=="Control")&&(f.controlDown=!0),f.controlDown&&L.key.charCodeAt(0)==122&&!f.shiftDown&&tl(),f.controlDown&&L.key.charCodeAt(0)==122&&f.shiftDown&&Ua(),f.controlDown&&L.key.charCodeAt(0)==121&&!f.shiftDown&&Ua(),listenToSimulator){if(document.activeElement.tagName=="INPUT"||f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height||(document.activeElement.type=="number"&&(su(),showProperties(f.lastSelected)),wn(!1),$e(!0),bn(!0),f.shiftDown=L.shiftKey,(L.key=="Meta"||L.key=="Control")&&(f.controlDown=!0),(f.controlDown&&(L.keyCode==187||L.keyCode==171)||L.keyCode==107)&&(L.preventDefault(),eu()),(f.controlDown&&(L.keyCode==189||L.keyCode==173)||L.keyCode==109)&&(L.preventDefault(),iu()),f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height))return;if(ge(1),ye(!0),zi(1),f.controlDown&&(L.key=="C"||L.key=="c"),f.lastSelected&&f.lastSelected.keyDown&&(L.key.toString().length==1||L.key.toString()=="Backspace"||L.key.toString()=="Enter")){f.lastSelected.keyDown(L.key.toString()),L.cancelBubble=!0,L.returnValue=!1,L.stopPropagation&&(L.stopPropagation(),L.preventDefault());return}if(f.lastSelected&&f.lastSelected.keyDown2&&L.key.toString().length==1){f.lastSelected.keyDown2(L.key.toString());return}if(f.lastSelected&&f.lastSelected.keyDown3&&L.key.toString()!="Backspace"&&L.key.toString()!="Delete"){f.lastSelected.keyDown3(L.key.toString());return}L.keyCode==16&&(f.shiftDown=!0,f.lastSelected&&!f.lastSelected.keyDown&&f.lastSelected.objectType!="Wire"&&f.lastSelected.objectType!="CircuitElement"&&!f.multipleObjectSelections.contains(f.lastSelected)&&f.multipleObjectSelections.push(f.lastSelected)),f.controlDown&&L.keyCode==83&&f.shiftDown&&(saveOffline(),L.preventDefault()),f.controlDown&&(L.keyCode==65||L.keyCode==97)&&(Hm(),L.preventDefault()),L.keyCode==27&&(f.multipleObjectSelections=[],f.lastSelected=void 0,L.preventDefault()),(L.keyCode==113||L.keyCode==81)&&f.lastSelected!=null&&f.lastSelected.bitWidth!==void 0&&f.lastSelected.newBitWidth(parseInt(prompt("Enter new bitWidth"),10)),f.controlDown&&(L.key=="T"||L.key=="t")&&f.changeClockTime(prompt("Enter Time:"))}(L.keyCode==8||L.key=="Delete")&&$o()}},!0),document.getElementById("simulationArea").addEventListener("dblclick",L=>{Tf(L)});function i(L){ye(!0),L.preventDefault();var E=L.wheelDelta?L.wheelDelta:-L.detail;L.preventDefault();var E=L.wheelDelta?L.wheelDelta:-L.detail;const Q=E>0?1:-1;tu(Q),ye(!0),mi(!0),Pe()?Ff():ps()}document.getElementById("simulationArea").addEventListener("mousewheel",i),document.getElementById("simulationArea").addEventListener("DOMMouseScroll",i),document.addEventListener("cut",L=>{if(!Bs()&&document.activeElement.tagName!="INPUT"&&document.activeElement.tagName=="BODY"&&listenToSimulator){f.copyList=f.multipleObjectSelections.slice(),f.lastSelected&&f.lastSelected!==f.root&&!f.copyList.contains(f.lastSelected)&&f.copyList.push(f.lastSelected);const E=Ch(f.copyList,!0);if(As(),localStorage.setItem("clipboardData",E),L.preventDefault(),E==null)return;gh?window.clipboardData.setData("Text",E):L.clipboardData.setData("text/plain",E)}}),document.addEventListener("copy",L=>{if(!Bs()&&document.activeElement.tagName!="INPUT"&&document.activeElement.tagName=="BODY"&&listenToSimulator){f.copyList=f.multipleObjectSelections.slice(),f.lastSelected&&f.lastSelected!==f.root&&!f.copyList.contains(f.lastSelected)&&f.copyList.push(f.lastSelected);const E=Ch(f.copyList);if(As(),localStorage.setItem("clipboardData",E),L.preventDefault(),E==null)return;gh?window.clipboardData.setData("Text",E):L.clipboardData.setData("text/plain",E)}}),document.addEventListener("paste",L=>{if(document.activeElement.tagName!="INPUT"&&document.activeElement.tagName=="BODY"&&listenToSimulator){let E;gh?E=window.clipboardData.getData("Text"):E=L.clipboardData.getData("text/plain"),ol(E),As(),L.preventDefault()}}),$("#subcircuitMenu").on("dragstop",".draggableSubcircuitElement",function(L,E){const Q=$("#guide_1")[0].clientWidth;let lt;if(E.position.top>10&&E.position.left>Q){lt=globalScope[this.dataset.elementName][this.dataset.elementId],lt.x=E.position.left-Q,lt.y=E.position.top;for(const B of lt.nodeList)B.x=E.position.left-Q,B.y=E.position.top;yt.subElements.push(lt),this.parentElement.removeChild(this)}}),restrictedElements.forEach(L=>{$(`#${L}`).mouseover(()=>{fm()}),$(`#${L}`).mouseout(()=>{pm()})}),$(".search-input").on("keyup",function(){const L=$(this).parent().parent(),E=$(".search-close",L),Q=$(".search-input",L),lt=$(".search-results",L),B=$(".accordion",L);lt.css("display","block"),E.css("display","block"),B.css("display","none");const A=$(this).val().toLowerCase();if(E.on("click",()=>{Q.val(""),B.css("display","block"),lt.css("display","none"),E.css("display","none")}),A.length===0){B.css("display","block"),lt.css("display","none"),E.css("display","none");return}let q="";const z=elementPanelList.filter(xt=>xt.toLowerCase().includes(A));var it=[];for(const xt in z)if(Object.prototype.hasOwnProperty.call(z,xt)){for(const rt in elementHierarchy)if(Object.prototype.hasOwnProperty.call(elementHierarchy,rt)){const at=elementHierarchy[rt];for(let wt=0;wt<at.length;wt++)z[xt]==at[wt].label&&it.push(at[wt])}}it.length?(it.forEach(xt=>q+=t(xt)),lt.html(q),$(".filterElements").mousedown(Nf)):lt.text("No elements found ...")});function t(L){return`<div class="${L.name} icon logixModules filterElements" id="${L.name}" title="${L.label}">
            <img  src= "/img/${L.name}.svg" alt="element's image" >
        </div>`}x0(),q0(),embed||P0();const n=document.getElementById("moduleProperty"),r=document.querySelector("#moduleProperty"),l=document.getElementById("guide_1"),c=document.querySelector("#guide_1"),g=document.getElementById("quick-btn-id"),v=document.querySelector("#quick-btn-id"),w=document.getElementById("time-Diagram"),D=document.querySelector("#time-Diagram"),T=document.getElementById("layoutDialog"),R=document.querySelector("#layoutDialog"),M=document.getElementsByClassName("layoutElementPanel")[0];r.addEventListener("touchstart",L=>{_r(L,n)}),r.addEventListener("touchmove",L=>{Pr(L,n)}),r.addEventListener("touchend",()=>{Ir()}),c.addEventListener("touchstart",L=>{_r(L,l)}),c.addEventListener("touchmove",L=>{Pr(L,l)}),c.addEventListener("touchend",()=>{Ir()}),v.addEventListener("touchstart",L=>{_r(L,v)}),v.addEventListener("touchmove",L=>{Pr(L,g)}),v.addEventListener("touchend",()=>{Ir()}),D.addEventListener("touchstart",L=>{$(".timing-diagram-panel").draggable().draggable("enable"),w.style.position="absolute",_r(L,w)}),D.addEventListener("touchmove",L=>{Pr(L,w)}),D.addEventListener("touchend",()=>{Ir()}),R.addEventListener("touchstart",L=>{$(".timing-diagram-panel").draggable().draggable("enable"),w.style.position="absolute",_r(L,T)}),R.addEventListener("touchmove",L=>{Pr(L,T)}),R.addEventListener("touchend",()=>{Ir()}),M.addEventListener("touchstart",L=>{$(".timing-diagram-panel").draggable().draggable("enable"),w.style.position="absolute",_r(L,M)}),M.addEventListener("touchmove",L=>{Pr(L,M)}),M.addEventListener("touchend",()=>{Ir()})}function Pf(){const i=$("body").width(),t=$(".side").width(),n=i-t;$("#tabsBar div").each(function(){$(this).css({"max-width":n-30})})}window.addEventListener("resize",Pf);Pf();$(()=>{$('[data-toggle="tooltip"]').tooltip()});function tu(i){(globalScope.scale>.5*DPR||globalScope.scale<4*DPR)&&An(i*.1*DPR),mi(!0),ge()}function eu(){tu(1)}function iu(){tu(-1)}function x0(){document.getElementById("customRange1").value=5,document.getElementById("simulationArea").addEventListener("DOMMouseScroll",t),document.getElementById("simulationArea").addEventListener("mousewheel",t);let i=document.getElementById("customRange1").value;$(document).on("input change","#customRange1",function(){const z=$(this).val(),it=z-i;ye(!0),An(it*.1,"zoomButton","zoomButton",3),mi(!0),i=z});function t(z){let it=document.getElementById("customRange1").value;((z.wheelDelta?z.wheelDelta:-z.detail)>0?1:-1)>0?it++:it--,it>=45?(it=45,document.getElementById("customRange1").value=45):it<=0?(it=0,document.getElementById("customRange1").value=0):(document.getElementById("customRange1").value=it,i=it)}function n(z){const it=$("#customRange1");let xt=parseInt(it.val(),10);z===-1?xt--:xt++,it.val(xt).change()}$("#decrement").click(()=>{n(-1)}),$("#increment").click(()=>{n(1)});var r="var(--touch-menu)";Ni=document.getElementById("smallNavbarMenu-btn");function l(z,it){z.style.backgroundColor===it?z.style.backgroundColor="":z.style.backgroundColor=it}Ni.addEventListener("touchstart",z=>{l(Ni,r),Ni.classList.toggle("active"),z.preventDefault()}),Ni.addEventListener("touchend",z=>{l(Ni,""),c(),z.preventDefault()}),Ni.addEventListener("mousedown",z=>{l(Ni,r),Ni.classList.toggle("active"),z.preventDefault()}),Ni.addEventListener("mouseup",z=>{l(Ni,""),c(),z.preventDefault()});function c(){Td=document.getElementsByClassName("smallscreen-navbar")[0].offsetHeight,qa=document.getElementsByClassName("smallscreen-navbar"),Td===0?qa[0].style.height="100%":qa[0].style.height="0";var z=document.getElementById("ProjectID"),it=ml(Rs())||"Untitled";z.innerHTML=`<p>${it}<p>`}var g=document.getElementsByClassName("smallscreen-navbar-inner"),v=document.getElementsByClassName("smallNavbar-navbar-ul"),w=document.getElementsByClassName("ulicon");function D(z){for(var it=0;it<v.length-1;it++)it!==z&&(w[it].classList.remove("active"),g[it].style.height="0%");g[z].style.height==="100%"?(g[z].style.height="0%",w[z].classList.remove("active")):(g[z].style.height="100%",w[z].classList.toggle("active"))}for(var T=0;T<v.length;T++)(function(z){v[z].addEventListener("click",()=>{D(z)})})(T);for(var R=document.getElementsByClassName("SmallScreen-Navbar-li"),M=0;M<R.length;M++)(function(z){R[z].addEventListener("click",it=>{Li(R,z,"#A0937D"),C0(z),setTimeout(()=>{Li(R,z,"")},100),it.preventDefault()})})(M);for(var L=document.getElementsByClassName("touchMenuIcon"),E=document.getElementsByClassName("panelclose"),Q=0;Q<L.length;Q++)(function(z){L[z].addEventListener("touchstart",it=>{Li(L,z,r),Ao(z),it.preventDefault()}),L[z].addEventListener("mousedown",it=>{Li(L,z,r),Ao(z),it.preventDefault()}),E[z].addEventListener("touchstart",it=>{Li(L,z,r),Ao(z),it.preventDefault()}),E[z].addEventListener("mousedown",it=>{Li(L,z,r),Ao(z),it.preventDefault()})})(Q);for(var lt=document.getElementsByClassName("quicMenu-align"),B=0;B<lt.length-2;B++)(function(z){lt[z].addEventListener("click",it=>{Li(lt,z,r),k0(z),setTimeout(()=>{Li(lt,z,"")},100),it.preventDefault()})})(B);lt[6].addEventListener("click",z=>{Li(lt,6,r),f.shiftDown==!1?f.shiftDown=!0:(f.shiftDown=!1,z.preventDefault())});for(var A=document.getElementsByClassName("liveMenuIcon"),q=0;q<A.length;q++)(function(z){A[z].addEventListener("touchstart",it=>{Li(A,z,r),it.preventDefault()}),A[z].addEventListener("touchend",it=>{Li(A,z,""),Od(z),it.preventDefault()}),A[z].addEventListener("mousedown",it=>{Li(A,z,r),it.preventDefault()}),A[z].addEventListener("mouseup",it=>{Li(A,z,""),Od(z),it.preventDefault()})})(q)}function If(){return window.screen.width>1e3?(Ln.modulePropertyInner="#moduleProperty-inner",Ln.PlotAreaId="plotArea",Ln.plotID="plot",Ln.tdLog="#timing-diagram-log"):(Ln.modulePropertyInner="#moduleProperty-inner-2",Ln.PlotAreaId="plotArea-touchpanel",Ln.plotID="plot-touchpanel",Ln.tdLog="#touch-timing-diagram-log"),Ln}function Ld(i){switch(i){case 0:return document.getElementById("TouchCe-panel");case 1:return document.getElementById("touchElement-property");case 2:return document.getElementById("touchtD-popover");case 3:return document.getElementById("quickmenu-Popover")}return 0}function Ao(i){if(i!=-1){$("#Help").removeClass("show");var t=Ld(i);t.style.visibility==="visible"?t.style.visibility="hidden":t.style.visibility="visible"}for(var n=0;n<4;n++)if(n!==i){var r=Ld(n);r.style.visibility="hidden"}}function Li(i,t,n){i[t].style.backgroundColor===n?i[t].style.backgroundColor="":i[t].style.backgroundColor=n;for(var r=0;r<i.length;r++)r!=t&&(i[r].style.backgroundColor="")}function Od(i){switch(i){case 0:globalScope.centerFocus(!1),ye(!0),mi(!0);break;case 1:$o();break;case 2:tl();break;case 3:Ua();break}}function k0(i){switch(i){case 0:fe.save();break;case 1:fe.saveOffline();break;case 2:fe.createOpenLocalPrompt();break;case 3:pl();break;case 4:document.execCommand("copy"),f.shiftDown=!1,Ih=!0;break;case 5:ol(localStorage.getItem("clipboardData")),Ih=!1;break}}function C0(i){switch(i){case 0:fe.newProject(),wi();break;case 1:fe.save();break;case 2:fe.saveOffline();break;case 3:fe.createOpenLocalPrompt(),wi();break;case 4:fe.clearProject(),wi();break;case 5:fe.recoverProject(),wi();break;case 6:fe.newCircuit(),wi();break;case 7:fe.newVerilogModule(),wi();break;case 8:fe.createSubCircuitPrompt(),wi();break;case 9:fe.createCombinationalAnalysisPrompt(),wi();break;case 10:fe.bitconverter(),wi();break;case 11:pl(),wi();break;case 12:fe.colorThemes(),wi();break;case 13:fe.generateVerilog(),wi();break;case 14:fe.showTourGuide(),wi();break;case 15:window.open("https://docs.circuitverse.org");break;case 16:window.open("https://learn.circuitverse.org");break;case 17:window.open("https://circuitverse.org/forum");break;default:wi();break}}function wi(){qa[0].style.height="0",Ni.classList.remove("active")}var D0=window.devicePixelRatio||1;function Oe(i){return i*D0}var Lh=100,En=Oe(20),Ja=Oe(2),Bi=Oe(20),nu=Oe(5),Va=Bi-2*nu,Oh=Oe(75),Rn=Oe(30),T0="black",Ed="#eee",mh="black",_0="cyan",Ki=Oh+Ja,pi=If();function Lf(i){return i?En+(Bi+Ja)*i:Bi+Ja}function Wd(i){return Lf(i)+Ja}function On(i){return Ki+(i-te.cycleOffset)*Rn}function Ad(i){Bi+=i?5:-5,Bi=i?Bi=Math.min(Oe(50),Bi):Bi=Math.max(Oe(20),Bi),Va=Bi-2*nu,te.resize()}const te={cycleOffset:0,DPR:window.devicePixelRatio||1,canvas:document.getElementById(pi.PlotAreaId),cycleCount:0,cycleTime:0,executionStartTime:0,autoScroll:!0,width:0,height:0,unitUsed:0,cycleUnit:1e3,mouseDown:!1,mouseX:0,mouseDownX:0,mouseDownTime:0,reset(){this.cycleCount=0,this.cycleTime=new Date().getTime();for(var i=0;i<globalScope.Flag.length;i++)globalScope.Flag[i].plotValues=[[0,globalScope.Flag[i].inp1.value]],globalScope.Flag[i].cachedIndex=0;this.unitUsed=0,this.resume(),this.resize()},resume(){this.autoScroll=!0},pause(){this.autoScroll=!1,te.scrollAcc=0},nextCycle(){this.cycleCount++,this.cycleTime=new Date().getTime()},setExecutionTime(){this.executionStartTime=new Date().getTime()},zoomIn(){Rn+=Oe(2)},zoomOut(){Rn-=Oe(2)},download(){var i=this.canvas.toDataURL("image/png");const t=document.createElement("a");t.href=i,t.download="waveform.png",t.click()},resize(){var i=this.height,t=this.width;this.width=document.getElementById(pi.plotID).clientWidth*this.DPR,this.height=Lf(globalScope.Flag.length),!(i==this.height&&t==this.width)&&(this.canvas.width=this.width,this.canvas.height=this.height,document.getElementById(pi.PlotAreaId).style.height=this.canvas.height/this.DPR,document.getElementById(pi.PlotAreaId).style.width=this.canvas.width/this.DPR,this.plot())},setup(){this.canvas=document.getElementById(pi.PlotAreaId),embed||(this.ctx=this.canvas.getContext("2d")),this.timeOutPlot=setInterval(()=>{te.plot()},Lh),this.reset()},getPlotTime(i){var t=this.cycleCount;t+=i/this.cycleUnit;var n=f.timePeriod,r=this.executionStartTime-this.cycleTime,l=r/n;return t+=l,t},calibrate(){var i=Math.max(20,Math.round(this.unitUsed*3));this.cycleUnit=i,$("#timing-diagram-units").val(i),this.reset()},getCurrentTime(){var i=this.cycleCount,t=f.timePeriod,n=new Date().getTime()-this.cycleTime,r=n/t;return i+=r,i},update(){this.resize();var i="#dc5656",t="#42b983";this.unitUsed=Math.max(this.unitUsed,f.simulationQueue.time);var n=this.unitUsed,r=this.cycleUnit,l=Math.round(n*1e4/r)/100;if($(pi.tdLog).html(`Utilization: ${Math.round(n)} Units (${l}%)`),l>=90||l<=10){var c=Math.max(20,Math.round(n*3));if($(pi.tdLog).append(` Recommended Units: ${c}`),$(pi.tdLog).css("background-color",i),l>=100){this.clear();return}}else $(pi.tdLog).css("background-color",t);var g=this.width,v=this.getCurrentTime();this.autoScroll?this.cycleOffset=Math.max(0,v-(g-Ki)/Rn):te.mouseDown||(this.cycleOffset-=te.scrollAcc,te.scrollAcc*=.95,this.cycleOffset<0&&(te.scrollAcc=this.cycleOffset/5),Math.abs(this.cycleOffset)<.01&&(this.cycleOffset=0))},render(){var{width:i,height:t}=this;this.canvas.height=t,this.canvas.width=i;var n=this.getCurrentTime();this.clear();var r=this.ctx;r.fillStyle=T0,r.fillRect(0,0,i,t),r.lineWidth=Oe(1),r.font=`${Oe(15)}px Raleway`,r.textAlign="left",r.fillStyle=Ed,r.fillRect(Ki,0,this.canvas.width,En),r.fillRect(0,0,Oh,En),r.fillStyle=mh,r.fillText("Time",Oe(5),En*.7),r.font=`${Oe(9)}px Times New Roman`,r.strokeStyle=mh,r.textAlign="center";for(var l=Math.floor(te.cycleOffset);On(l)<=i;l++){var c=On(l);c>=Ki&&(r.fillText(`${l}`,c,En-Oe(15)/2),r.beginPath(),r.moveTo(c,En-Oe(5)),r.lineTo(c,En),r.stroke());for(var g=1;g<5;g++){var v=c+Math.round(g*Rn/5);v>=Ki&&(r.beginPath(),r.moveTo(v,En-Oe(2)),r.lineTo(v,En),r.stroke())}}r.textAlign="left";for(var l=0;l<globalScope.Flag.length;l++){var w=Wd(l);r.fillStyle=Ed,r.fillRect(0,w,Oh,Bi),r.fillStyle=mh,r.fillText(globalScope.Flag[l].identifier,Oe(5),w+Bi*.7)}const D=0,T=1,R=3;r.strokeStyle=_0,r.textAlign="center";for(var M=Math.min(On(n),i),l=0;l<globalScope.Flag.length;l++){var L=globalScope.Flag[l].plotValues,w=Wd(l)+nu,E=w,Q=w+Va/2,lt=w+Va,B=D,A,g=0;for(globalScope.Flag[l].cachedIndex&&(g=globalScope.Flag[l].cachedIndex);g+1<L.length&&On(L[g][0])<Ki;)g++;for(;g>0&&On(L[g][0])>Ki;)g--;for(globalScope.Flag[l].cachedIndex=g;g<L.length;g++){var c=On(L[g][0]);if(c<Ki){if(g+1!=L.length){var v=On(L[g+1][0]);if(v<Ki)continue}c=Ki}var q=L[g][1];if(q===void 0){B==T&&r.stroke(),B=D;continue}if(globalScope.Flag[l].bitWidth==1){if(c>M)break;var z=q==1?E:lt;B==D?(B=T,r.beginPath(),r.moveTo(c,z)):(r.lineTo(c,A),r.lineTo(c,z)),A=z}else{var M;g+1==L.length?M=On(n):M=On(L[g+1][0]);var it=Va/2;r.beginPath(),r.moveTo(M,Q),r.lineTo(M-it,E),r.lineTo(c+it,E),r.lineTo(c,Q),r.lineTo(c+it,lt),r.lineTo(M-it,lt),r.closePath(),r.stroke();var v=Math.max(c,Ki),xt=Math.min(M,i),rt=(v+xt)/2;r.font=`${Oe(9)}px Times New Roman`,r.fillStyle="white",r.fillText(No.dec2hex(q),rt,Q+Oe(3))}if(c>i){B=R,r.stroke();break}}B==T&&(globalScope.Flag[l].bitWidth==1&&r.lineTo(M,A),r.stroke())}},plot(){if(!embed){if(globalScope.Flag.length===0){this.canvas.width=0,this.canvas.height=0;return}this.update(),this.render()}},clear(){this.ctx.clearRect(0,0,te.canvas.width,te.canvas.height)}},ir=te;function P0(){$(".timing-diagram-smaller").on("click",()=>{$("#plot").width(Math.max($("#plot").width()-20,560)),te.resize()}),$(".timing-diagram-larger").on("click",()=>{$("#plot").width($("#plot").width()+20),te.resize()}),$(".timing-diagram-small-height").on("click",()=>{Ad(0)}),$(".timing-diagram-large-height").on("click",()=>{Ad(1)}),$(".timing-diagram-reset").on("click",()=>{te.reset()}),$(".timing-diagram-calibrate").on("click",()=>{te.calibrate()}),$(".timing-diagram-resume").on("click",()=>{te.resume()}),$(".timing-diagram-pause").on("click",()=>{te.pause()}),$(".timing-diagram-download").on("click",()=>{te.download()}),$(".timing-diagram-zoom-in").on("click",()=>{te.zoomIn()}),$(".timing-diagram-zoom-out").on("click",()=>{te.zoomOut()}),$("#timing-diagram-units").on("change paste keyup",function(){var i=parseInt($(this).val(),10);isNaN(i)||i<1||(te.cycleUnit=i)}),document.getElementById(pi.PlotAreaId).addEventListener("mousedown",i=>{var t=te.canvas.getBoundingClientRect(),n=Oe(i.clientX-t.left);te.scrollAcc=0,te.autoScroll=!1,te.mouseDown=!0,te.mouseX=n,te.mouseDownX=n,te.mouseDownTime=new Date().getTime()}),document.getElementById(pi.PlotAreaId).addEventListener("mouseup",i=>{te.mouseDown=!1;var t=new Date().getTime()-te.mouseDownTime,n=(te.mouseX-te.mouseDownX)/Rn;te.scrollAcc=n*Lh/t}),document.getElementById(pi.PlotAreaId).addEventListener("mousemove",i=>{var t=te.canvas.getBoundingClientRect(),n=Oe(i.clientX-t.left);te.mouseDown?(te.cycleOffset-=(n-te.mouseX)/Rn,te.mouseX=n):te.mouseDown=!1}),document.getElementById(pi.PlotAreaId).addEventListener("touchstart",i=>{var t=te.canvas.getBoundingClientRect(),n=Oe(i.touches[0].clientX-t.left);te.scrollAcc=0,te.autoScroll=!1,te.mouseDown=!0,te.mouseX=n,te.mouseDownX=n,te.mouseDownTime=new Date().getTime()}),document.getElementById(pi.PlotAreaId).addEventListener("touchend",i=>{te.mouseDown=!1;var t=new Date().getTime()-te.mouseDownTime,n=(te.mouseX-te.mouseDownX)/Rn;te.scrollAcc=n*Lh/t}),document.getElementById(pi.PlotAreaId).addEventListener("touchmove",i=>{var t=te.canvas.getBoundingClientRect(),n=Oe(i.touches[0].clientX-t.left);te.mouseDown?(te.cycleOffset-=(n-te.mouseX)/Rn,te.mouseX=n):te.mouseDown=!1})}const Er={toggleLayoutMode:qr,setProjectName:Ro,changeCircuitName:Af,changeClockTime:nm,deleteCurrentCircuit:Ef,changeClockEnable:Ns,changeInputSize:js,changeLightMode:K0};var ae={};function Of(){ae={}}function Ur(i){Pe()&&qr(),Bs()&&Ar(!1),Hs(),i!==globalScope.id&&($(".circuits").removeClass("current"),f.lastSelected=void 0,f.multipleObjectSelections=[],f.copyList=[],globalScope=ae[i],globalScope.verilogMetadata.isVerilogCircuit&&Ar(!0),globalScope.isVisible()&&$(`#${i}`).addClass("current"),$e(!0),vl(!0),Ei(!0),Ji(!1),f.lastSelected=globalScope.root,embed||($n(f.lastSelected),Xo(),ir.reset()),ye(!0),ge(),Bh())}function Ef(i=globalScope.id){const t=ae[i];if(Object.keys(ae).length<=1){ii("At least 2 circuits need to be there in order to delete a circuit.");return}let n="";for(l in ae)l!=t.id&&ae[l].checkDependency(t.id)&&(n===""?n=ae[l].name:n+=`, ${ae[l].name}`);if(n){n=`
The following circuits are depending on '${t.name}': ${n}
Delete subcircuits of ${t.name} before trying to delete ${t.name}`,alert(n);return}if(confirm(`Are you sure want to close: ${t.name}
This cannot be undone.`)){if(t.verilogMetadata.isVerilogCircuit){t.initialize();for(var l in t.verilogMetadata.subCircuitScopeIds)delete ae[l]}$(`#${t.id}`).remove(),delete ae[t.id],Ur(Object.keys(ae)[0]),De("Circuit was successfully closed")}else De("Circuit was not closed")}function Wf(){f.lastSelected=void 0,fs(),embed||($n(f.lastSelected),Xo(),ir.reset())}function fs(i,t,n=!1,r=!1){if(Pe()&&qr(),Bs()&&Ar(!1),i=i||prompt("Enter circuit name:","Untitled-Circuit"),i=Fs(Nr(i)),!i)return;const l=new $s(i);if(t&&(l.id=t),ae[l.id]=l,n&&(l.verilogMetadata.isVerilogCircuit=!0,l.verilogMetadata.isMainCircuit=r),globalScope=l,$(".circuits").removeClass("current"),!n||r){if(embed){var c=`<div style='' class='circuits toolbarButton current' draggable='true' id='${l.id}'><span class='circuitName noSelect'>${Ah(i,18)}</span></div>`;$("#tabsBar").append(c),$("#tabsBar").addClass("embed-tabs")}else{var c=`<div style='' class='circuits toolbarButton current' draggable='true' id='${l.id}'><span class='circuitName noSelect'>${Ah(i,18)}</span><span class ='tabsCloseButton' id='${l.id}'  >x</span></div>`;$("#tabsBar").children().last().before(c)}$(".circuits").off("click"),$(".circuitName").off("click"),$(".tabsCloseButton").off("click"),$(".circuits").on("click",function(){Ur(this.id)}),$(".circuitName").on("click",g=>{f.lastSelected=globalScope.root,setTimeout(()=>{document.getElementById("circname").select()},100)}),$(".tabsCloseButton").on("click",function(g){g.stopPropagation(),Ef(this.id)}),embed||$n(l.root),Ji(!1)}return l}function Af(i,t=globalScope.id){i=i||"Untitled",i=Fs(Nr(i)),$(`#${t} .circuitName`).html(`${Ah(i,18)}`),ae[t].name=i}class $s{constructor(t="localScope",n=void 0){this.restrictedCircuitElementsUsed=[],this.id=n||Math.floor(Math.random()*1e11+1),this.CircuitElement=[],this.name=t,this.root=new Bt(0,0,this,"RIGHT",1),this.backups=[],this.history=[],this.timeStamp=new Date().getTime(),this.verilogMetadata={isVerilogCircuit:!1,isMainCircuit:!1,code:"// Write Some Verilog Code Here!",subCircuitScopeIds:[]},this.ox=0,this.oy=0,this.scale=DPR,this.stack=[],this.initialize(),this.layout={width:100,height:40,title_x:50,title_y:13,titleEnabled:!0}}isVisible(){return this.verilogMetadata.isVerilogCircuit?this.verilogMetadata.isMainCircuit:!0}initialize(){this.tunnelList={},this.pending=[],this.nodes=[],this.allNodes=[],this.wires=[];for(let t=0;t<moduleList.length;t++)this[moduleList[t]]=[]}reset(){for(let t=0;t<this.allNodes.length;t++)this.allNodes[t].reset();for(let t=0;t<this.Splitter.length;t++)this.Splitter[t].reset();for(let t=0;t<this.SubCircuit.length;t++)this.SubCircuit[t].reset()}addInputs(){for(let n=0;n<inputList.length;n++)for(var t=0;t<this[inputList[n]].length;t++)f.simulationQueue.add(this[inputList[n]][t],0);for(let n=0;n<this.SubCircuit.length;n++)this.SubCircuit[n].addInputs()}clockTick(){for(let t=0;t<this.Clock.length;t++)this.Clock[t].toggleState();for(let t=0;t<this.SubCircuit.length;t++)this.SubCircuit[t].localScope.clockTick()}checkDependency(t){if(t===this.id)return!0;for(let n=0;n<this.SubCircuit.length;n++)if(this.SubCircuit[n].id===t)return!0;for(let n=0;n<this.SubCircuit.length;n++)if(ae[this.SubCircuit[n].id].checkDependency(t))return!0;return!1}getDependencies(){var t=[];for(let n=0;n<this.SubCircuit.length;n++)t.push(this.SubCircuit[n].id),t.extend(ae[this.SubCircuit[n].id].getDependencies());return Z0(t)}fixLayout(){var t=20;for(let n=0;n<this.Input.length;n++)t=Math.max(this.Input[n].layoutProperties.y,t);for(let n=0;n<this.Output.length;n++)t=Math.max(this.Output[n].layoutProperties.y,t);t!==this.layout.height&&(this.layout.height=t+10)}centerFocus(t=!0){if(!Pe()){Br(this);var n=embed?0:60*DPR,r=f.minWidth||0,l=f.minHeight||0,c=f.maxWidth||0,g=f.maxHeight||0,v=c-r+75*DPR,w=g-l+75*DPR;this.scale=Math.min(width/v,(height-n)/w),t||(this.scale=Math.min(this.scale,DPR)),this.scale=Math.max(this.scale,DPR/10),this.ox=-r*this.scale+(width-(c-r)*this.scale)/2,this.oy=-l*this.scale+(height-n-(g-l)*this.scale)/2}}loadCircuit(t){t?Hn(t):alert("Invalid data")}previous(){const t=localStorage.getItem("autosave");if(t){const n=JSON.parse(t);Hn(n),localStorage.removeItem("autosave")}}detectCycle(){const t={},n=[];for(let D=0;D<globalScope.allNodes.length;D++){const T=globalScope.allNodes[D].id;for(let R=0;R<globalScope.allNodes[D].connections.length;R++){const M=globalScope.allNodes[D].connections[R].id;t[T]?t[T].push(M):t[T]=[M]}}const r=[],l=[];for(const D in t)if(t[D].length===1&&l.push(D),!c(r.flat(),D)){const R=[D];g(t,D,r.flat(),R),r.push(R)}for(let D=0;D<l.length-1;D++)for(let T=D+1;T<l.length;T++)if(v(r,l[D],l[T])){const R=this.findNodeIndexById(l[D]),M=this.findNodeIndexById(l[T]);globalScope.allNodes[R].parent===globalScope.allNodes[M].parent&&n.push(w(t,l[D],l[T]))}function c(D,T){return D.includes(T)}function g(D,T,R,M){if(R.push(T),D[T])for(let L=0;L<D[T].length;L++){const E=D[T][L];c(R,E)||(M.push(E),g(D,E,R,M))}}function v(D,T,R){for(const M of D)if(M.includes(T)&&M.includes(R))return!0;return!1}function w(D,T,R,M=[]){if(T===R)return M.push(R),M;M.push(T);for(const L of D[T])if(!M.includes(L)){const E=w(D,L,R,M);if(E)return E}return M.pop(),[]}return n.length?(this.highlightNodes(n),n):"No cycle found"}highlightNodes(t){const n=[];t.forEach(r=>{const l=r.map(c=>this.findNodeIndexById(c));n.push(l)}),n.forEach(r=>{r.forEach(l=>{globalScope.allNodes[l].highlighted=!0})})}findNodeIndexById(t){for(let n=0;n<globalScope.allNodes.length;n++)if(globalScope.allNodes[n].id===t)return n;return"Not found"}getCurrentlySelectedComponent(){return f.lastSelected}getAllSelectedComponents(){return f.multipleObjectSelections}modifyCurrentlySelectedComponent(t,n){const r=globalScope.getCurrentlySelectedComponent();if(r.objectType==="Node"){const l=r.id,c=this.findNodeIndexById(l);globalScope.allNodes[c][t]=n;return}for(const l in globalScope){const c=globalScope[l];Array.isArray(c)&&c.length&&c.forEach((g,v)=>{g===r&&(c[v][t]=n)})}}}function tl(i=globalScope){if(Pe()||i.backups.length<2)return;const t=globalScope.ox,n=globalScope.oy,r=globalScope.scale;globalScope.ox=0,globalScope.oy=0;const l=new $s(i.name);loading=!0;const c=i.backups.pop();i.history.push(c),i.backups.length!==0&&as(l,JSON.parse(i.backups[i.backups.length-1])),l.backups=i.backups,l.history=i.history,l.id=i.id,l.name=i.name,l.testbenchData=i.testbenchData,ae[i.id]=l,globalScope=l,globalScope.ox=t,globalScope.oy=n,globalScope.scale=r,loading=!1,Ei(!0),As()}const is={smartDropXX:50,smartDropYY:80};is.smartDropXX=50;is.smartDropYY=80;var Me={x:0,y:0,visible:!1};function Mf(){var i=document.getElementById("contextMenu");i.style="opacity:0;",setTimeout(()=>{i.style="visibility:hidden;",Me.visible=!1},200)}function I0(){if(Pe())return!1;$("#contextMenu").css({visibility:"visible",opacity:1});var i=$("#simulationArea").height()-$("#contextMenu").height()-10,t=$("#simulationArea").width()-$("#contextMenu").width()-10,n,r,l,c;return Me.y>i&&Me.x<=t?(r=Me.x,c=$(window).height()-Me.y,$("#contextMenu").css({left:`${r}px`,bottom:`${c}px`,right:"auto",top:"auto"})):Me.y>i&&Me.x>t?(c=$(window).height()-Me.y,l=$(window).width()-Me.x,$("#contextMenu").css({left:"auto",bottom:`${c}px`,right:`${l}px`,top:"auto"})):Me.y<=i&&Me.x<=t?(r=Me.x,n=Me.y,$("#contextMenu").css({left:`${r}px`,bottom:"auto",right:"auto",top:`${n}px`})):(l=$(window).width()-Me.x,n=Me.y,$("#contextMenu").css({left:"auto",bottom:"auto",right:`${l}px`,top:`${n}px`})),Me.visible=!0,!1}function L0(i,t=""){Mf(),i===0?document.execCommand("copy"):i===1?document.execCommand("cut"):i===2?ol(localStorage.getItem("clipboardData")):i===3?$o():i===4?tl():i===5?Wf():i===6?fe.createSubCircuitPrompt():i===7&&globalScope.centerFocus(!1)}window.menuItemClicked=L0;function O0(){var i=document.getElementById("contextMenu");document.addEventListener("mousedown",t=>{!(t.clientX>=Me.x&&t.clientX<=Me.x+i.offsetWidth&&t.clientY>=Me.y&&t.clientY<=Me.y+i.offsetHeight)&&Me.visible&&t.which!==3&&Mf(),Me.x=t.clientX,Me.y=t.clientY}),document.getElementById("canvasArea").oncontextmenu=I0,$("#sideBar").resizable({handles:"e"}),$("#menu, #subcircuitMenu").accordion({collapsible:!0,active:!1,heightStyle:"content"}),$("#menu2, #subcircuitMenu").accordion({collapsible:!0,active:!1,heightStyle:"content"}),$(".logixModules").mousedown(Nf),$(".logixButton").on("click",function(){fe[this.id]()}),$(".applyTheme").on("change",function(){Bv()}),$(".logixModules").hover(function(){var{tooltipText:t}=Si[this.id].prototype;t&&($("#Help").addClass("show"),$("#Help").empty(),$("#Help").append(t))}),$(".logixModules").mouseleave(()=>{$("#Help").removeClass("show")}),$("#report").on("click",function(){var t=$("#issuetext").val(),n=$("#emailtext").val();t+=`
Email:`+n,t+=`
URL: `+window.location.href,t+=`
User Id: ${window.user_id}`,W0(t),$("#issuetext").hide(),$("#emailtext").hide(),$("#report").hide(),$("#report-label").hide(),$("#email-label").hide()}),$(".issue").on("hide.bs.modal",function(t){listenToSimulator=!0,$("#result").html(""),$("#issuetext").show(),$("#emailtext").show(),$("#issuetext").val(""),$("#emailtext").val(""),$("#report").show(),$("#report-label").show(),$("#email-label").show()}),$("#reportIssue").on("click",function(){listenToSimulator=!1}),E0(),f0(),nb()}function Nf(){f.lastSelected&&f.lastSelected.newElement&&f.lastSelected.delete();var i=new Si[this.id];f.lastSelected=i,is.smartDropXX+=70,is.smartDropXX/globalScope.scale>width&&(is.smartDropXX=50,is.smartDropYY+=80)}var Bf;function el(i){Bf=i}function Ho(){return Bf}var Te=If();function $n(i){if(i===Ho())return;if(su(),el(i),Pe()){if(f.lastSelected===void 0||["Wire","CircuitElement","Node"].indexOf(f.lastSelected.objectType)!==-1){$("#moduleProperty").hide(),$("#layoutDialog").show();return}if($("#moduleProperty").show(),$("#layoutDialog").hide(),$(Te.modulePropertyInner).append("<div class='moduleProperty-header'>"+i.objectType+"</div>"),i.subcircuitMutableProperties&&i.canShowInSubcircuit){for(let c in i.subcircuitMutableProperties){var t=i.subcircuitMutableProperties[c];if(i.subcircuitMutableProperties[c].type=="number"){var n="<p>"+t.name+"<input class='objectPropertyAttribute' type='number'  name='"+t.func+"' min='"+(t.min||0)+"' max='"+(t.max||200)+"' value="+i[c]+"></p>";$(Te.modulePropertyInner).append(n)}else if(i.subcircuitMutableProperties[c].type=="text"){var n="<p>"+t.name+"<input class='objectPropertyAttribute' type='text'  name='"+t.func+"' maxlength='"+(t.maxlength||200)+"' value="+i[c]+"></p>";$(Te.modulePropertyInner).append(n)}else if(i.subcircuitMutableProperties[c].type=="checkbox"){var n="<p>"+t.name+"<label class='switch'> <input type='checkbox' "+["","checked"][i.subcircuitMetadata.showLabelInSubcircuit+0]+" class='objectPropertyAttributeChecked' name='"+t.func+"'> <span class='slider'></span> </label></p>";$(Te.modulePropertyInner).append(n)}}if(!i.labelDirectionFixed){i.subcircuitMetadata.labelDirection||(i.subcircuitMetadata.labelDirection=i.labelDirection);var n=$("<select class='objectPropertyAttribute' name='newLabelDirection'><option value='RIGHT' "+["","selected"][+(i.subcircuitMetadata.labelDirection=="RIGHT")]+" >RIGHT</option><option value='DOWN' "+["","selected"][+(i.subcircuitMetadata.labelDirection=="DOWN")]+" >DOWN</option><option value='LEFT' <option value='RIGHT'"+["","selected"][+(i.subcircuitMetadata.labelDirection=="LEFT")]+" >LEFT</option><option value='UP' <option value='RIGHT'"+["","selected"][+(i.subcircuitMetadata.labelDirection=="UP")]+" >UP</option></select>");n.val(i.subcircuitMetadata.labelDirection),$(Te.modulePropertyInner).append("<p>Label Direction: "+$(n).prop("outerHTML")+"</p>")}}}else if(f.lastSelected===void 0||["Wire","CircuitElement","Node"].indexOf(f.lastSelected.objectType)!==-1)$("#moduleProperty").show(),$(Te.modulePropertyInner).append("<div class='moduleProperty-header'>Project Properties</div>"),$(Te.modulePropertyInner).append(`<p><span>Project:</span> <input id='projname' class='objectPropertyAttribute' type='text' autocomplete='off' name='setProjectName'  value='${Rs()||"Untitled"}' aria-label='project'></p>`),$(Te.modulePropertyInner).append(`<p><span>Circuit:</span> <input id='circname' class='objectPropertyAttribute' type='text' autocomplete='off' name='changeCircuitName'  value='${globalScope.name||"Untitled"}' aria-label='circuit'></p>`),$(Te.modulePropertyInner).append(`<p><span>Clock Time (ms):</span> <input class='objectPropertyAttribute' min='50' type='number' style='width:100px' step='10' name='changeClockTime'  value='${f.timePeriod}' aria-label='clock time'></p>`),$(Te.modulePropertyInner).append(`<p><span>Clock Enabled:</span> <label class='switch'> <input type='checkbox' ${["","checked"][f.clockEnabled+0]} class='objectPropertyAttributeChecked' name='changeClockEnable' aria-label='clock enabled'> <span class='slider'></span></label></p>`),$(Te.modulePropertyInner).append(`<p><span>Lite Mode:</span> <label class='switch'> <input type='checkbox' ${["","checked"][lightMode+0]} class='objectPropertyAttributeChecked' name='changeLightMode' aria-label='lite mode'> <span class='slider'></span> </label></p>`),$(Te.modulePropertyInner).append("<p><button type='button' class='objectPropertyAttributeChecked btn btn-xs custom-btn--primary' name='toggleLayoutMode' >Edit Layout</button><button type='button' class='objectPropertyAttributeChecked btn btn-xs custom-btn--tertiary' name='deleteCurrentCircuit' >Delete Circuit</button> </p>");else{$("#moduleProperty").show(),$(Te.modulePropertyInner).append(`<div class='moduleProperty-header'>${i.objectType}</div>`),i.fixedBitWidth||$(Te.modulePropertyInner).append(`<p><span>BitWidth:</span> <input class='objectPropertyAttribute' type='number'  name='newBitWidth' min='1' max='32' value=${i.bitWidth} aria-label='bitwidth'></p>`),i.changeInputSize&&$(Te.modulePropertyInner).append(`<p><span>Input Size:</span> <input class='objectPropertyAttribute' type='number'  name='changeInputSize' min='2' max='10' value=${i.inputSize} aria-label='InputSize'></p>`),i.propagationDelayFixed||$(Te.modulePropertyInner).append(`<p><span>Delay:</span> <input class='objectPropertyAttribute' type='number'  name='changePropagationDelay' min='0' max='100000' value=${i.propagationDelay} aria-label='propagation Delay'></p>`),i.disableLabel||$(Te.modulePropertyInner).append(`<p><span>Label:</span> <input class='objectPropertyAttribute' type='text' name='setLabel' autocomplete='off' value='${ml(i.label)}' aria-label='label'></p>`);var n;if(i.labelDirectionFixed||(n=$(`<select class='objectPropertyAttribute' name='newLabelDirection'><option value='RIGHT' ${["","selected"][+(i.labelDirection==="RIGHT")]} >RIGHT</option><option value='DOWN' ${["","selected"][+(i.labelDirection==="DOWN")]} >DOWN</option><option value='LEFT' <option value='RIGHT'${["","selected"][+(i.labelDirection==="LEFT")]} >LEFT</option><option value='UP' <option value='RIGHT'${["","selected"][+(i.labelDirection==="UP")]} >UP</option></select>`),n.val(i.labelDirection),$(Te.modulePropertyInner).append(`<p><span>Label Direction:</span> ${$(n).prop("outerHTML")}</p>`)),i.directionFixed?i.orientationFixed||(n=$(`<select class='objectPropertyAttribute' name='newDirection'><option value='RIGHT' ${["","selected"][+(i.direction==="RIGHT")]} >RIGHT</option><option value='DOWN' ${["","selected"][+(i.direction==="DOWN")]} >DOWN</option><option value='LEFT' <option value='RIGHT'${["","selected"][+(i.direction==="LEFT")]} >LEFT</option><option value='UP' <option value='RIGHT'${["","selected"][+(i.direction==="UP")]} >UP</option></select>`),$(Te.modulePropertyInner).append(`<p><span>Orientation:</span> ${$(n).prop("outerHTML")}</p>`)):(n=$(`<select class='objectPropertyAttribute' name='newDirection'><option value='RIGHT' ${["","selected"][+(i.direction==="RIGHT")]} >RIGHT</option><option value='DOWN' ${["","selected"][+(i.direction==="DOWN")]} >DOWN</option><option value='LEFT' <option value='RIGHT'${["","selected"][+(i.direction==="LEFT")]} >LEFT</option><option value='UP' <option value='RIGHT'${["","selected"][+(i.direction==="UP")]} >UP</option></select>`),$(Te.modulePropertyInner).append(`<p><span>Direction:</span> ${$(n).prop("outerHTML")}</p>`)),i.mutableProperties)for(const g in i.mutableProperties){var t=i.mutableProperties[g];i.mutableProperties[g].type==="number"?(n=`<p><span>${t.name}</span><input class='objectPropertyAttribute' type='number'  name='${t.func}' min='${t.min||0}' max='${t.max||200}' value=${i[g]}></p>`,$(Te.modulePropertyInner).append(n)):i.mutableProperties[g].type==="text"?(n=`<p><span>${t.name}</span><input class='objectPropertyAttribute' type='text' autocomplete='off'  name='${t.func}' maxlength='${t.maxlength||200}' value=${i[g]}></p>`,$(Te.modulePropertyInner).append(n)):i.mutableProperties[g].type==="button"?(n=`<p class='btn-parent'><button class='objectPropertyAttribute btn custom-btn--secondary' type='button'  name='${t.func}'>${t.name}</button></p>`,$(Te.modulePropertyInner).append(n)):i.mutableProperties[g].type==="textarea"&&(n=`<p><span>${t.name}</span><textarea class='objectPropertyAttribute' type='text' autocomplete='off' rows="9" name='${t.func}'>${i[g]}</textarea></p>`,$(Te.modulePropertyInner).append(n))}}var r=i&&i.helplink;r&&($(Te.modulePropertyInner).append('<p class="btn-parent"><button id="HelpButton" class="btn btn-primary btn-xs" type="button" >&#9432 Help</button></p>'),$("#HelpButton").on("click",()=>{window.open(r)}));function l(){const c=$("[name='newBitWidth']");c===void 0||c.val()>32||c.val()<1||!$.isNumeric(c.val())?c.val(c.attr("old-val")):c.attr("old-val",c.val())}$(".objectPropertyAttribute").on("change keyup paste click",function(){l(),ge(),ye(!0),zi(1);let{value:c}=this;this.type==="number"&&(c=parseFloat(c)),f.lastSelected&&f.lastSelected[this.name]?f.lastSelected[this.name](c):Er[this.name](c)}),$(".objectPropertyAttributeChecked").on("change keyup paste click",function(){this.name!=="toggleLabelInLayoutMode"&&(ge(),ye(!0),zi(1),f.lastSelected&&f.lastSelected[this.name]?f.lastSelected[this.name](this.value):Er[this.name](this.checked))}),$(".objectPropertyAttributeChecked").on("click",function(){this.name==="toggleLabelInLayoutMode"&&(ge(),ye(!0),zi(1),f.lastSelected&&f.lastSelected[this.name]?f.lastSelected[this.name](this.value):Er[this.name](this.checked))}),$(".moduleProperty input[type='number']").inputSpinner()}function su(){$(Te.modulePropertyInner).empty(),$("#moduleProperty").hide(),el(void 0),$(".objectPropertyAttribute").unbind("change keyup paste click")}function ml(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function $o(){f.lastSelected&&!(f.lastSelected.objectType==="Node"&&f.lastSelected.type!==2)&&f.lastSelected.delete();for(var i=0;i<f.multipleObjectSelections.length;i++)f.multipleObjectSelections[i].objectType==="Node"&&f.multipleObjectSelections[i].type!==2||f.multipleObjectSelections[i].cleanDelete();f.multipleObjectSelections=[],f.lastSelected=void 0,$n(f.lastSelected),ye(!0),ge(),As()}function E0(){$("#dragQPanel").on("mousedown",()=>$(".quick-btn").draggable({disabled:!1,containment:"window"})).on("mouseup",()=>$(".quick-btn").draggable({disabled:!0})),Ps(".elementPanel"),Ps(".layoutElementPanel"),Ps("#moduleProperty"),Ps("#layoutDialog"),Ps("#verilogEditorPanel"),Ps(".timing-diagram-panel"),Ps(".testbench-manual-panel"),$(".timing-diagram-panel .minimize").trigger("click"),Xo(),$(".testbench-manual-panel .minimize").trigger("click"),$(".testbench-manual-panel .maximize").on("click",Hh),$("#projectName").on("click",()=>{$("input[name='setProjectName']").focus().select()})}function Ps(i){var t=`${i} .panel-header`,n=`${i} .minimize`,r=`${i} .maximize`,l=`${i} > .panel-body`;$(t).on("mousedown",()=>$(i).draggable({disabled:!1,containment:"window"})),$(t).on("mouseup",()=>$(i).draggable({disabled:!0})),$(i).on("mousedown",()=>{$(`.draggable-panel:not(${i})`).css("z-index","99"),$(i).css("z-index","100")});var c=!1;$(t).on("dblclick",()=>c?$(r).trigger("click"):$(n).trigger("click")),$(n).on("click",()=>{$(l).hide(),$(n).hide(),$(r).show(),c=!0}),$(r).on("click",()=>{$(l).show(),$(n).show(),$(r).hide(),c=!1})}function Rf(){$(".navbar").show(),$(".modules").show(),$(".report-sidebar").show(),$("#tabsBar").show(),$("#exitViewBtn").remove(),$("#moduleProperty").show(),$(".timing-diagram-panel").show(),$(".testbench-manual-panel").show()}function Hf(){const i="<button id='exitViewBtn' >Exit Full Preview</button>";$(".navbar").hide(),$(".modules").hide(),$(".report-sidebar").hide(),$("#tabsBar").hide(),$("#moduleProperty").hide(),$(".timing-diagram-panel").hide(),$(".testbench-manual-panel").hide(),$("#exitView").append(i),$("#exitViewBtn").on("click",Rf)}function $f(){$("#subcircuitMenu").empty();var i=!1;for(let t of circuitElementList){if(globalScope[t].length===0||!globalScope[t][0].canShowInSubcircuit)continue;let n="";n+=`<div class="panelHeader">${t}s</div>`,n+='<div class="panel">';let r=!1;for(let l=0;l<globalScope[t].length;l++)globalScope[t][l].subcircuitMetadata.showInSubcircuit||(n+=`<div class="icon subcircuitModule" id="${t}-${l}" data-element-id="${l}" data-element-name="${t}">`,n+=`<img src= "/img/${t}.svg">`,n+=`<p class="img__description">${globalScope[t][l].label!==""?globalScope[t][l].label:"unlabeled"}</p>`,n+="</div>",r=!0);n+="</div>",i=i||r,r&&$("#subcircuitMenu").append(n)}i?$("#subcircuitMenu").accordion("refresh"):$("#subcircuitMenu").append("<p>No layout elements available</p>"),$(".subcircuitModule").mousedown(function(){let t=this.dataset.elementName,n=this.dataset.elementId,r=globalScope[t][n];r.subcircuitMetadata.showInSubcircuit=!0,r.newElement=!0,f.lastSelected=r,this.parentElement.removeChild(this)})}async function W0(i){var t=qh("jpeg","full",!1,1,!1).split(",")[1];let n;try{n=await $.ajax({url:"https://api.imgur.com/3/image",type:"POST",data:{image:t},dataType:"json",headers:{Authorization:"Client-ID 9a33b3b370f1054"}})}catch{console.error("Could not generate image, reporting anyway")}n&&(i+=`
`+n.data.link);let r;try{r=er("Untitled")}catch(l){r=`Circuit data generation failed: ${l}`}$.ajax({url:"/simulator/post_issue",type:"POST",beforeSend:function(l){l.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{text:i,circuit_data:r},success:function(l){$("#result").html("<i class='fa fa-check' style='color:green'></i> You've successfully submitted the issue. Thanks for improving our platform.")},failure:function(l){$("#result").html("<i class='fa fa-check' style='color:red'></i> There seems to be a network issue. Please reach out to us at support@ciruitverse.org")}})}var zf=!1;function Md(i){zf=i}function Pe(i){return zf}var yt;function Nd(i,t){return i===0?["left",5,5]:i===yt.layout.width?["right",-5,5]:t===0?["center",0,13]:["center",0,-6]}function A0(i=globalScope){!f.selected&&f.mouseDown?(f.selected=!0,f.lastSelected=i.root,f.hover=i.root):f.lastSelected===i.root&&f.mouseDown?(globalScope.ox=f.mouseRawX-f.mouseDownRawX+f.oldx,globalScope.oy=f.mouseRawY-f.mouseDownRawY+f.oldy,globalScope.ox=Math.round(globalScope.ox),globalScope.oy=Math.round(globalScope.oy),mi(!0),!embed&&!lightMode&&Qa.setup()):f.lastSelected===i.root&&(f.lastSelected=void 0,f.selected=!1,f.hover=void 0)}function M0(i=globalScope){if(Pe()){var t=f.context;f.clear(),t.strokeStyle="black",t.fillStyle="white",t.lineWidth=Nt(3),t.beginPath(),Ee(t,0,0,yt.layout.width,yt.layout.height,0,0,"RIGHT"),t.fill(),t.stroke(),t.beginPath(),t.textAlign="center",t.fillStyle="black",yt.layout.titleEnabled&&Xt(t,i.name,yt.layout.title_x,yt.layout.title_y,11);var n;for(let r=0;r<yt.Input.length;r++)yt.Input[r].label&&(n=Nd(yt.Input[r].x,yt.Input[r].y),[t.textAlign]=n,Xt(t,yt.Input[r].label,yt.Input[r].x+n[1],yt.Input[r].y+n[2],12));for(let r=0;r<yt.Output.length;r++)yt.Output[r].label&&(n=Nd(yt.Output[r].x,yt.Output[r].y),[t.textAlign]=n,Xt(t,yt.Output[r].label,yt.Output[r].x+n[1],yt.Output[r].y+n[2],12));t.fill();for(let r=0;r<yt.Input.length;r++)yt.Input[r].draw();for(let r=0;r<yt.Output.length;r++)yt.Output[r].draw();V0()&&Ji();for(let r=0;r<yt.subElements.length;r++){yt.subElements[r].update();for(let l=0;l<yt.subElements[r].nodeList.length;l++)yt.subElements[r].nodeList[l].update()}!embed&&Ho()!=f.lastSelected&&f.lastSelected&&$n(f.lastSelected);for(let r=0;r<circuitElementList.length;r++){if(globalScope[circuitElementList[r]].length===0||!globalScope[circuitElementList[r]][0].canShowInSubcircuit)continue;let l=circuitElementList[r];for(let c=0;c<globalScope[l].length;c++)globalScope[l][c].subcircuitMetadata.showInSubcircuit&&globalScope[l][c].drawLayoutMode()}}}function Ff(i=globalScope){if(Pe()){ru(!1);for(let t=0;t<yt.Input.length;t++)yt.Input[t].update();for(let t=0;t<yt.Output.length;t++)yt.Output[t].update();for(let t=0;t<circuitElementList.length;t++){if(globalScope[circuitElementList[t]].length===0||!globalScope[circuitElementList[t]][0].canShowInSubcircuit)continue;let n=circuitElementList[t];for(let r=0;r<globalScope[n].length;r++)globalScope[n][r].subcircuitMetadata.showInSubcircuit&&globalScope[n][r].layoutUpdate()}A0(i),M0(i)}}function N0(){yt.layout.width=100,yt.layout.height=Math.max(yt.Input.length,yt.Output.length)*20+20;for(let i=0;i<yt.Input.length;i++)yt.Input[i].x=0,yt.Input[i].y=i*20+20;for(let i=0;i<yt.Output.length;i++)yt.Output[i].x=yt.layout.width,yt.Output[i].y=i*20+20}function B0(){for(let i=0;i<yt.Input.length;i++)yt.Input[i].x===yt.layout.width&&(yt.Input[i].x+=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].x===yt.layout.width&&(yt.Output[i].x+=10);yt.layout.width+=10}function R0(){for(let i=0;i<yt.Input.length;i++)yt.Input[i].y===yt.layout.height&&(yt.Input[i].y+=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].y===yt.layout.height&&(yt.Output[i].y+=10);yt.layout.height+=10}function H0(){if(!(yt.layout.width<30)){for(let i=0;i<yt.Input.length;i++)if(yt.Input[i].x===yt.layout.width-10){De("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Output.length;i++)if(yt.Output[i].x===yt.layout.width-10){De("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Input.length;i++)yt.Input[i].x===yt.layout.width&&(yt.Input[i].x-=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].x===yt.layout.width&&(yt.Output[i].x-=10);yt.layout.width-=10}}function $0(){if(!(yt.layout.height<30)){for(let i=0;i<yt.Input.length;i++)if(yt.Input[i].y===yt.layout.height-10){De("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Output.length;i++)if(yt.Output[i].y===yt.layout.height-10){De("No space. Move or delete some nodes to make space.");return}for(let i=0;i<yt.Input.length;i++)yt.Input[i].y===yt.layout.height&&(yt.Input[i].y-=10);for(let i=0;i<yt.Output.length;i++)yt.Output[i].y===yt.layout.height&&(yt.Output[i].y-=10);yt.layout.height-=10}}function z0(){yt.layout.title_y-=5}function F0(){yt.layout.title_y+=5}function j0(){yt.layout.title_x+=5}function G0(){yt.layout.title_x-=5}function X0(){yt.layout.titleEnabled=!yt.layout.titleEnabled}function Y0(){Pe()&&qr()}function U0(){if(Pe()){for(let i=0;i<yt.Input.length;i++)yt.Input[i].parent.layoutProperties.x=yt.Input[i].x,yt.Input[i].parent.layoutProperties.y=yt.Input[i].y;for(let i=0;i<yt.Output.length;i++)yt.Output[i].parent.layoutProperties.x=yt.Output[i].x,yt.Output[i].parent.layoutProperties.y=yt.Output[i].y;globalScope.layout={...yt.layout},qr()}}function qr(){su(),Pe()?(Md(!1),$("#layoutDialog").fadeOut(),$(".layoutElementPanel").fadeOut(),$(".elementPanel").fadeIn(),$(".testbench-manual-panel").fadeIn(),window.screen.width>1e3||($(".ce-panel").fadeOut(),$("#touchMenu").fadeIn(),$(" #liveMenu").fadeIn(),$("#touchElement-property").fadeIn()),window.screen.width>1e3&&$(".timing-diagram-panel").fadeIn(),globalScope.centerFocus(!1),globalScope.verilogMetadata.isVerilogCircuit&&Ar(!0),Ji()):(Md(!0),Ar(!1),$("#layoutDialog").fadeIn(),$(".layoutElementPanel").fadeIn(),window.screen.width>1e3||($("#touchMenu").fadeOut(),$(" #liveMenu").fadeOut(),$("#touchElement-property").fadeOut()),$(".elementPanel").fadeOut(),$(".timing-diagram-panel").fadeOut(),$(".testbench-manual-panel").fadeOut(),$f(),globalScope.ox=0,globalScope.oy=0,globalScope.scale=DPR*1.3,Ji(),yt=new cm,$("#toggleLayoutTitle")[0].checked=yt.layout.titleEnabled),ps(globalScope,!0),ge()}function q0(){$("#decreaseLayoutWidth").on("click",()=>{H0()}),$("#increaseLayoutWidth").on("click",()=>{B0()}),$("#decreaseLayoutHeight").on("click",()=>{$0()}),$("#increaseLayoutHeight").on("click",()=>{R0()}),$("#layoutResetNodes").on("click",()=>{N0()}),$("#layoutTitleUp").on("click",()=>{z0()}),$("#layoutTitleDown").on("click",()=>{F0()}),$("#layoutTitleLeft").on("click",()=>{G0()}),$("#layoutTitleRight").on("click",()=>{j0()}),$("#toggleLayoutTitle").on("click",()=>{X0()}),$("#saveLayout").on("click",()=>{U0()}),$("#cancelLayout").on("click",()=>{Y0()}),$("#layoutDialog button").on("click",()=>{ge()}),$("#layoutDialog input").on("click",()=>{ge()})}var Mo=0;function zi(i){Mo=i}var jf=!1;function ru(i){jf=i}var il=!1;function Bd(i){il=i}var Eh=!0;function bn(i){Eh=i}var Gf=!0;function $e(i){Gf=i}var Wh=!0;function ye(i){Wh=i}var ou=!0;function mi(i){ou=i}function V0(){return ou}var Xf=!0;function Ei(i){Xf=i}var nl=!1;function wn(i){nl=i}function Yf(){return nl}var mn={x:void 0,y:void 0,string:void 0},Ka=!0;function vl(i){return Ka!=i?(Ka=i,!0):(Ka=i,!1)}function K0(i){!i&&lightMode?(lightMode=!1,DPR=window.devicePixelRatio||1,globalScope.scale*=DPR):i&&!lightMode&&(lightMode=!0,globalScope.scale/=DPR,DPR=1,$("#miniMap").fadeOut("fast")),sr()}function Uf(i){if(!(Pe()||Bs())){var t=f.context;f.clear(),ou&&(mi(!1),Ji()),mn={x:void 0,y:void 0,string:void 0};for(let r=0;r<renderOrder.length;r++)for(var n=0;n<i[renderOrder[r]].length;n++)i[renderOrder[r]][n].draw();mn.string!==void 0&&um(t,mn.string,mn.x,mn.y),il&&(t.beginPath(),t.lineWidth=2,t.strokeStyle="black",t.fillStyle="rgba(0,0,0,0.1)",Ee(t,f.mouseDownX,f.mouseDownY,f.mouseX-f.mouseDownX,f.mouseY-f.mouseDownY,0,0,"RIGHT"),t.stroke(),t.fill()),f.hover!==void 0?f.canvas.style.cursor="pointer":f.mouseDown?f.canvas.style.cursor="grabbing":f.canvas.style.cursor="default"}}function au(i=globalScope){if(!f.selected&&f.mouseDown)f.selected=!0,f.lastSelected=i.root,f.hover=i.root,f.shiftDown?Bd(!0):embed||(Br(i),Qa.setup(),$("#miniMap").show());else if(f.lastSelected===i.root&&f.mouseDown)il||(globalScope.ox=f.mouseRawX-f.mouseDownRawX+f.oldx,globalScope.oy=f.mouseRawY-f.mouseDownRawY+f.oldy,globalScope.ox=Math.round(globalScope.ox),globalScope.oy=Math.round(globalScope.oy),mi(!0),!embed&&!lightMode&&Qa.setup());else if(f.lastSelected===i.root&&(f.lastSelected=void 0,f.selected=!1,f.hover=void 0,il)){Bd(!1);var t=f.mouseDownX,n=f.mouseX,r=f.mouseDownY,l=f.mouseY;if(t>n){const D=t;t=n,n=D}if(r>l){const D=r;r=l,l=D}for(let D=0;D<updateOrder.length;D++)for(var c=0;c<i[updateOrder[D]].length;c++){var g=i[updateOrder[D]][c];if(!f.multipleObjectSelections.contains(g)){var v,w;if(g.objectType==="Node")v=g.absX(),w=g.absY();else if(g.objectType!=="Wire")v=g.x,w=g.y;else continue;v>t&&v<n&&w>r&&w<l&&f.multipleObjectSelections.push(g)}}}}function zs(i=globalScope,t=!1){if(nl||loading===!0)return;f.simulationQueue.reset(),ir.setExecutionTime(),(t||Xf)&&(i.reset(),f.simulationQueue.reset(),Ei(!1)),f.contentionPending=[],i.addInputs();let n=0,r;for(;!f.simulationQueue.isEmpty();){if(nl){f.simulationQueue.reset();return}r=f.simulationQueue.pop(),r.resolve(),n++,n>1e6&&(ii("Simulation Stack limit exceeded: maybe due to cyclic paths or contention"),wn(!0),Ei(!0))}f.contentionPending.length&&(ii("Contention at TriState"),Ei(!0),wn(!0))}function ge(i=0,t=100,n){lightMode&&(t*=5);var r=Pe()?Ff:ps;if(i){r();for(let l=0;l<i;l++)setTimeout(r,10+50*l)}jf||(ru(!0),setTimeout(n?()=>{n(),r()}:r,t))}function ps(i=globalScope,t=!1){if(ru(!1),!(loading===!0||Pe())){var n=!1;if(f.hover=void 0,Mo||t){Mo===2?Mo=0:Mo++;var r=i.wires.length;for(let l=0;l<i.wires.length;l++)i.wires[l].checkConnections(),i.wires.length!==r&&(r--,l--);ge()}if(Ka||t){for(let l=0;l<i.SubCircuit.length;l++)i.SubCircuit[l].reset();vl(!1)}if(Eh||t)for(let l=0;l<updateOrder.length;l++)for(let c=0;c<i[updateOrder[l]].length;c++)n|=i[updateOrder[l]][c].update();(Eh||t)&&au(i),!embed&&f.mouseDown&&f.lastSelected&&f.lastSelected!==globalScope.root&&(lightMode||$("#miniMap").fadeOut("fast")),Gf&&zs(),!embed&&Ho()!==f.lastSelected&&f.lastSelected&&f.lastSelected.objectType!=="Wire"&&(f.lastSelected.newElement&&(f.lastSelected.label=""),$n(f.lastSelected)),Wh&&Uf(i),$e(!1),Wh=!1,bn(!1)}}window.globalScope=void 0;window.lightMode=!1;window.projectId=void 0;window.id=void 0;window.loading=!1;var vh,bh,yh;function us(){for(var i="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<20;n++)i+=t.charAt(Math.floor(Math.random()*t.length));return i}function Nr(i=""){return i.replace(/(<([^>]+)>)/ig,"").trim()}function Q0(){f.clockEnabled&&(Yf()||Pe()||(ye(!0),globalScope.clockTick(),ir.nextCycle(),zs(),ge(0,20)))}function ii(i){if(wn(!0),i!==vh){yh&&clearTimeout(yh),$(".alert.alert-danger").fadeOut(()=>{$(this).remove()}),vh=i;var t=Math.floor(Math.random()*1e4);$("#MessageDiv").append(`<div class='alert alert-danger' role='alert' id='${t}'> ${i}</div>`),yh=setTimeout(()=>{vh=void 0,$(`#${t}`).fadeOut()},1500)}}function De(i){if(i!==bh){bh=i;var t=Math.floor(Math.random()*1e4);$("#MessageDiv").append(`<div class='alert alert-success' role='alert' id='${t}'> ${i}</div>`),setTimeout(()=>{bh=void 0,$(`#${t}`).fadeOut()},2500)}}function Rd(i,t,n,r){return Math.sqrt((n-i)**2)+(r-t)**2}function Z0(i){var t={};return i.filter(r=>t.hasOwnProperty(r)?!1:t[r]=!0)}function Vr(i,t=!1){for(var n=[],r=[],l=0;l<this.nodeList.length;l++)this.nodeList[l].type==NODE_INPUT?n.push(this.nodeList[l]):this.nodeList[l].connections.length>0?r.push(this.nodeList[l]):r.push("");var c="assign ";r.length==1?c+=r[0].verilogLabel:c+=`{${r.map(v=>v.verilogLabel).join(", ")}}`,c+=" = ";var g=n.map(v=>v.verilogLabel).join(` ${i} `);return t?c+=`~(${g});`:c+=g+";",c}function J0(i,t){var n=document.createElement("a");if(n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",i),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),n.dispatchEvent(r)}else n.click()}function tb(i){var t=window.open(i,"_blank");t.focus()}function Hd(i){const t=document.createElement("textarea");t.style.cssText="position: absolute; left: -99999em",t.setAttribute("readonly",!0),document.body.appendChild(t),t.value=i;const n=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;if(navigator.userAgent.match(/ipad|ipod|iphone/i)){const r=t.contentEditable;t.contentEditable=!0;const l=document.createRange();l.selectNodeContents(t);const c=window.getSelection();c.removeAllRanges(),c.addRange(l),t.setSelectionRange(0,999999),t.contentEditable=r}else t.select();try{const r=document.execCommand("copy");return n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),t.remove(),r}catch(r){return console.error(r),t.remove(),!1}}function Ah(i,t){return i.length<=t?i:i.slice(0,t)+"..."}function eb(){$("#bitconverterprompt").dialog({buttons:[{text:"Reset",click:function(){Os(0)}}]})}var No={dec2bin:i=>"0b"+i.toString(2),dec2hex:i=>"0x"+i.toString(16),dec2octal:i=>"0"+i.toString(8),dec2bcd:i=>parseInt(i.toString(10),16).toString(2)};function Os(i){isNaN(i)||($("#binaryInput").val(No.dec2bin(i)),$("#bcdInput").val(No.dec2bcd(i)),$("#octalInput").val(No.dec2octal(i)),$("#hexInput").val(No.dec2hex(i)),$("#decimalInput").val(i))}function ib(i){return i instanceof Number?i:i.slice(0,2).toLocaleLowerCase()=="0b"?parseInt(i.slice(2),2):i.slice(0,2).toLocaleLowerCase()=="0x"?parseInt(i.slice(2),16):i.slice(0,1).toLocaleLowerCase()=="0"?parseInt(i,8):parseInt(i)}function nb(){$("#decimalInput").on("keyup",function(){var i=parseInt($("#decimalInput").val(),10);Os(i)}),$("#binaryInput").on("keyup",function(){var i=$("#binaryInput").val(),t;i.slice(0,2)=="0b"?t=parseInt(i.slice(2),2):t=parseInt(i,2),Os(t)}),$("#bcdInput").on("keyup",function(){for(var i=$("#bcdInput").val(),t=0;i.length%4!==0;)i="0"+i;if(i!==0)for(var n=0;n<i.length/4;){if(parseInt(i.slice(4*n,4*(n+1)),2)<10)t=t*10+parseInt(i.slice(4*n,4*(n+1)),2);else return Os(NaN);n++}return Os(x)}),$("#hexInput").on("keyup",function(){var i=parseInt($("#hexInput").val(),16);Os(i)}),$("#octalInput").on("keyup",function(){var i=parseInt($("#octalInput").val(),8);Os(i)})}function sb(i,t){var n=document.createElement("input");return n.type="file",n.multiple=t,n.accept=i,new Promise(function(r){document.activeElement.onfocus=function(){document.activeElement.onfocus=null,setTimeout(r,500)},n.onchange=function(){var l=Array.from(n.files);if(t)return r(l);r(l[0])},n.click()})}function Fs(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const ns=10;let Wr;function $d(i){Wr=gl(i),wn(!1),$e(!0),bn(!0),ye(!0),f.lastSelected=void 0,f.selected=!1,f.hover=void 0;const t=f.canvas.getBoundingClientRect();f.mouseDownRawX=(Wr.x-t.left)*DPR,f.mouseDownRawY=(Wr.y-t.top)*DPR,f.mouseDownX=Math.round((f.mouseDownRawX-globalScope.ox)/globalScope.scale/ns)*ns,f.mouseDownY=Math.round((f.mouseDownRawY-globalScope.oy)/globalScope.scale/ns)*ns,f.mouseDown=!0,f.oldx=globalScope.ox,f.oldy=globalScope.oy,i.preventDefault(),ge(1)}function zd(i){if(Wr=gl(i),!f.touch||i.touches.length===1){const t=f.canvas.getBoundingClientRect();if(f.mouseRawX=(Wr.x-t.left)*DPR,f.mouseRawY=(Wr.y-t.top)*DPR,f.mouseXf=(f.mouseRawX-globalScope.ox)/globalScope.scale,f.mouseYf=(f.mouseRawY-globalScope.oy)/globalScope.scale,f.mouseX=Math.round(f.mouseXf/ns)*ns,f.mouseY=Math.round(f.mouseYf/ns)*ns,ye(!0),f.lastSelected==globalScope.root){ye(!0);let n;n=function(){au()},ge(0,20,n)}else ge(0,200)}f.touch&&i.touches.length===2&&_f(i)}function Fd(){f.mouseDown=!1,wn(!1),$e(!0),bn(!0),ye(!0),mi(!0),zi(1),ge(1)}function jd(){const i=document.getElementById("elementName");if(globalScope&&f&&f.objectList){let{objectList:t}=f;t=t.filter(n=>n!=="wires");for(let n=0;n<t.length;n++)for(let r=0;r<globalScope[t[n]].length;r++)if(globalScope[t[n]][r].isHover()){i.style.display="block",t[n]==="SubCircuit"?i.innerHTML=`Subcircuit: ${globalScope.SubCircuit[r].data.name}`:i.innerHTML=`CircuitElement: ${t[n]}`;return}}i.style.display="none",document.getElementById("elementName").innerHTML=""}function rb(){window.addEventListener("keyup",t=>{ge(1),t.keyCode==16&&(f.shiftDown=!1),(t.key=="Meta"||t.key=="Control")&&(f.controlDown=!1)}),document.getElementById("simulationArea").addEventListener("mousedown",t=>{f.touch=!1,$d(t)}),document.getElementById("simulationArea").addEventListener("mousemove",()=>{f.touch=!1,jd()}),document.getElementById("simulationArea").addEventListener("touchstart",t=>{f.touch=!0,$d(t)}),document.getElementById("simulationArea").addEventListener("touchmove",t=>{f.touch=!0,jd()}),window.addEventListener("mousemove",t=>{zd(t)}),window.addEventListener("touchmove",t=>{zd(t)}),window.addEventListener("mouseup",()=>{Fd()}),window.addEventListener("mousedown",function(){this.focus()}),window.addEventListener("touchend",()=>{Fd()}),window.addEventListener("touchstart",function(){this.focus()});function i(t){ye(!0),t.preventDefault();const n=t.wheelDelta?t.wheelDelta:-t.detail,r=n<0,l=n>0;t.ctrlKey?(r&&globalScope.scale>.5*DPR&&An(-.1*DPR),l&&globalScope.scale<4*DPR&&An(.1*DPR)):(r&&globalScope.scale<4*DPR&&An(.1*DPR),l&&globalScope.scale>.5*DPR&&An(-.1*DPR)),ye(!0),mi(!0),ps()}document.getElementById("simulationArea").addEventListener("mousewheel",i),document.getElementById("simulationArea").addEventListener("DOMMouseScroll",i),window.addEventListener("keydown",t=>{if(wn(!1),$e(!0),bn(!0),(t.key=="Meta"||t.key=="Control")&&(f.controlDown=!0),f.controlDown&&(t.keyCode==187||t.KeyCode==171)&&(t.preventDefault(),eu()),f.controlDown&&(t.keyCode==189||t.Keycode==173)&&(t.preventDefault(),iu()),!(f.mouseRawX<0||f.mouseRawY<0||f.mouseRawX>width||f.mouseRawY>height)){if(ge(1),ye(!0),f.lastSelected&&f.lastSelected.keyDown&&(t.key.toString().length==1||t.key.toString()=="Backspace")){f.lastSelected.keyDown(t.key.toString());return}if(f.lastSelected&&f.lastSelected.keyDown2&&t.key.toString().length==1){f.lastSelected.keyDown2(t.key.toString());return}(t.key=="T"||t.key=="t")&&f.changeClockTime(prompt("Enter Time:"))}}),document.getElementById("simulationArea").addEventListener("dblclick",()=>{ge(2),f.lastSelected&&f.lastSelected.dblclick!==void 0&&f.lastSelected.dblclick()})}navigator.userAgent.toLowerCase().indexOf("msie")!=-1||navigator.userAgent.toLowerCase().indexOf("trident")!=-1;Er.toggleFullScreen=ob;$(document).ready(()=>{const i=new URLSearchParams(window.location.search),t=i.get("fullscreen"),n=i.get("clock_time"),r=i.get("display_title"),l=i.get("zoom_in_out"),c=localStorage.getItem("theme");switch(i.get("theme")){case"default":xi("Default Theme");break;case"night-sky":xi("Night Sky");break;case"lite-born-spring":xi("Lite-born Spring");break;case"g-and-w":xi("G&W");break;case"high-contrast":xi("High Contrast");break;case"color-blind":xi("Color Blind");break;default:xi(c)}t==="false"&&n==="false"&&$("#clockProperty").css("display","none"),t!=="false"&&$("#clockProperty").append("<input type='button' class='objectPropertyAttributeEmbed custom-btn--secondary embed-fullscreen-btn' name='toggleFullScreen' value='Full Screen'> </input>"),n!=="false"&&($("#clockProperty").append(`<div style='margin-top: 10px' ><label for='changeClockTime'>Time: </label><input class='objectPropertyAttributeEmbed' min='50' type='number' style='width:48px' step='10' name='changeClockTime' id='changeClockTime' value='${f.timePeriod}'></div>`),$("#clockProperty").append(`<div style='margin-top: 10px' ><label for='changeClockEnable'>Clock:</label><label class='switch'> <input type='checkbox' ${["","checked"][f.clockEnabled+0]} class='objectPropertyAttributeEmbedChecked' name='changeClockEnable' id='changeClockEnable'> <span class='slider'></span> </label><div>`)),l==="false"&&$("#zoom-in-out-embed").css("display","none"),r==="true"&&$("#bottom_right_circuit_heading").css("display","block"),$(".objectPropertyAttributeEmbed").on("change keyup paste click",function(){ge(),ye(!0),zi(1),f.lastSelected&&f.lastSelected[this.name]?el(f.lastSelected[this.name](this.value))||Ho():Er[this.name](this.value)}),$(".objectPropertyAttributeEmbedChecked").on("change keyup paste click",function(){ge(),ye(!0),zi(1),f.lastSelected&&f.lastSelected[this.name]?el(f.lastSelected[this.name](this.value))||Ho():Er[this.name](this.checked)}),$("#zoom-in-embed").on("click",()=>eu()),$("#zoom-out-embed").on("click",()=>iu())});function ob(i){hb()?lb():ab(document.documentElement)}function za(){setTimeout(()=>{Object.keys(ae).forEach(i=>{ae[i].centerFocus(!0)}),mi(!0),ge()},100)}function ab(i){i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.msRequestFullscreen&&i.msRequestFullscreen()}function lb(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}function hb(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}document.addEventListener&&(document.addEventListener("webkitfullscreenchange",za,!1),document.addEventListener("mozfullscreenchange",za,!1),document.addEventListener("fullscreenchange",za,!1),document.addEventListener("MSFullscreenChange",za,!1));class nr extends Bt{constructor(t,n,r=globalScope,l=15,c=20,g=""){super(t,n,r,"RIGHT",1),this.directionFixed=!0,this.fixedBitWidth=!0,this.imageUrl=g,this.cols=c||parseInt(prompt("Enter cols:"),10),this.rows=l||parseInt(prompt("Enter rows:"),10),this.setSize(),this.loadImage()}changeRowSize(t){if(!(t===void 0||t<5||t>1e3)&&this.rows!==t)return this.rows=parseInt(t,10),this.setSize(),this}changeColSize(t){if(!(t===void 0||t<5||t>1e3)&&this.cols!==t)return this.cols=parseInt(t,10),this.setSize(),this}keyDown3(t){t==="ArrowRight"&&this.changeColSize(this.cols+2),t==="ArrowLeft"&&this.changeColSize(this.cols-2),t==="ArrowDown"&&this.changeRowSize(this.rows+2),t==="ArrowUp"&&this.changeRowSize(this.rows-2)}customSave(){return{constructorParamaters:[this.rows,this.cols,this.imageUrl]}}customDraw(){var t=f.context;const n=this.x,r=this.y;var l=this.elementWidth,c=this.elementHeight;this.image&&this.image.complete?hm(t,this.image,n-l/2,r-c/2,l,c):(t.beginPath(),t.strokeStyle="rgba(0,0,0,1)",t.setLineDash([5*globalScope.scale,5*globalScope.scale]),t.lineWidth=Nt(1.5),ji(t,n-l/2,r-c/2,l,c),t.stroke(),(f.lastSelected===this||f.multipleObjectSelections.contains(this))&&(t.fillStyle="rgba(255, 255, 32,0.1)",t.fill()),t.beginPath(),t.textAlign="center",t.fillStyle=ht.text,Xt(t,"Double Click to Insert Image",n,r,10),t.fill(),t.setLineDash([]))}dblclick(){embed||this.uploadImage()}async uploadImage(){var t=await sb("image/*",!1),n="https://api.imgur.com/3/image",r="9a33b3b370f1054",l={crossDomain:!0,processData:!1,contentType:!1,type:"POST",url:n,headers:{Authorization:"Client-ID "+r,Accept:"application/json"},mimeType:"multipart/form-data"},c=new FormData;c.append("image",t),l.data=c,De("Uploading Image");var g=await $.ajax(l);De("Image Uploaded"),this.imageUrl=JSON.parse(g).data.link,this.loadImage()}async loadImage(){this.imageUrl&&(this.image=new Image,this.image.crossOrigin="anonymous",this.image.src=this.imageUrl)}setSize(){this.elementWidth=this.cols*10,this.elementHeight=this.rows*10,this.upDimensionY=this.elementHeight/2,this.downDimensionY=this.elementHeight/2,this.leftDimensionX=this.elementWidth/2,this.rightDimensionX=this.elementWidth/2}}nr.prototype.tooltipText="Image ToolTip: Embed an image in the circuit for annotation";nr.prototype.propagationDelayFixed=!0;nr.prototype.mutableProperties={cols:{name:"Columns",type:"number",max:"1000",min:"5",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"1000",min:"5",func:"changeRowSize"}};nr.prototype.objectType="ImageAnnotation";nr.prototype.rectangleObject=!1;nr.prototype.mutableProperties={imageUrl:{name:"Upload Image",type:"button",func:"uploadImage"},cols:{name:"Columns",type:"number",max:"1000",min:"5",func:"changeColSize"},rows:{name:"Rows",type:"number",max:"1000",min:"5",func:"changeRowSize"}};function ub(){var i={AndGate:tn,Random:jr,NandGate:Sn,Counter:Qs,Multiplexer:Ri,XorGate:zn,XnorGate:en,SevenSegDisplay:Xs,SixteenSegDisplay:Ys,HexDisplay:Us,OrGate:xn,Stepper:rl,NotGate:Oi,Text:qs,TriState:al,Buffer:Uo,ControlledInverter:jh,Adder:Vs,verilogMultiplier:qo,verilogDivider:Rr,verilogPower:Vo,verilogShiftLeft:Ko,verilogShiftRight:Qo,TwoComplement:Gh,Splitter:ke,Ground:Zo,Power:Jo,Input:cs,Output:ls,BitSelector:ta,ConstantVal:Ke,NorGate:Fn,DigitalLed:Ks,VariableLed:Hr,Button:Hi,RGBLed:ea,SquareRGBLed:ds,Demultiplexer:Mn,Decoder:Nn,Flag:$r,MSB:ll,LSB:ia,PriorityEncoder:Bn,Tunnel:zr,ALU:jn,Rectangle:Fr,Arrow:na,ImageAnnotation:nr,RGBLedMatrix:Zi,TflipFlop:hl,DflipFlop:sa,Dlatch:ul,SRflipFlop:cl,JKflipFlop:dl,TTY:hs,Keyboard:Zs,Clock:yn,Rom:gn,EEPROM:Gr,RAM:vn,verilogRAM:Js,TB_Input:Xr,TB_Output:Yr,ForceGate:Xh};Object.assign(Si,i)}(function(i,t){(function(n){n(Gs())})(function(n){n.defineMode("javascript",function(r,l){var c=r.indentUnit,g=l.statementIndent,v=l.jsonld,w=l.json||v,D=l.trackScope!==!1,T=l.typescript,R=l.wordCharacters||/[\w$\xa1-\uffff]/,M=function(){function I(Je){return{type:Je,style:"keyword"}}var j=I("keyword a"),gt=I("keyword b"),_t=I("keyword c"),le=I("keyword d"),be=I("operator"),Ft={type:"atom",style:"atom"};return{if:I("if"),while:j,with:j,else:gt,do:gt,try:gt,finally:gt,return:le,break:le,continue:le,new:I("new"),delete:_t,void:_t,throw:_t,debugger:I("debugger"),var:I("var"),const:I("var"),let:I("var"),function:I("function"),catch:I("catch"),for:I("for"),switch:I("switch"),case:I("case"),default:I("default"),in:be,typeof:be,instanceof:be,true:Ft,false:Ft,null:Ft,undefined:Ft,NaN:Ft,Infinity:Ft,this:I("this"),class:I("class"),super:I("atom"),yield:_t,export:I("export"),import:I("import"),extends:_t,await:_t}}(),L=/[+\-*&%=<>!?|~^@]/,E=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Q(I){for(var j=!1,gt,_t=!1;(gt=I.next())!=null;){if(!j){if(gt=="/"&&!_t)return;gt=="["?_t=!0:_t&&gt=="]"&&(_t=!1)}j=!j&&gt=="\\"}}var lt,B;function A(I,j,gt){return lt=I,B=gt,j}function q(I,j){var gt=I.next();if(gt=='"'||gt=="'")return j.tokenize=z(gt),j.tokenize(I,j);if(gt=="."&&I.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return A("number","number");if(gt=="."&&I.match(".."))return A("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(gt))return A(gt);if(gt=="="&&I.eat(">"))return A("=>","operator");if(gt=="0"&&I.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return A("number","number");if(/\d/.test(gt))return I.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),A("number","number");if(gt=="/")return I.eat("*")?(j.tokenize=it,it(I,j)):I.eat("/")?(I.skipToEnd(),A("comment","comment")):Tt(I,j,1)?(Q(I),I.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),A("regexp","string-2")):(I.eat("="),A("operator","operator",I.current()));if(gt=="`")return j.tokenize=xt,xt(I,j);if(gt=="#"&&I.peek()=="!")return I.skipToEnd(),A("meta","meta");if(gt=="#"&&I.eatWhile(R))return A("variable","property");if(gt=="<"&&I.match("!--")||gt=="-"&&I.match("->")&&!/\S/.test(I.string.slice(0,I.start)))return I.skipToEnd(),A("comment","comment");if(L.test(gt))return(gt!=">"||!j.lexical||j.lexical.type!=">")&&(I.eat("=")?(gt=="!"||gt=="=")&&I.eat("="):/[<>*+\-|&?]/.test(gt)&&(I.eat(gt),gt==">"&&I.eat(gt))),gt=="?"&&I.eat(".")?A("."):A("operator","operator",I.current());if(R.test(gt)){I.eatWhile(R);var _t=I.current();if(j.lastType!="."){if(M.propertyIsEnumerable(_t)){var le=M[_t];return A(le.type,le.style,_t)}if(_t=="async"&&I.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return A("async","keyword",_t)}return A("variable","variable",_t)}}function z(I){return function(j,gt){var _t=!1,le;if(v&&j.peek()=="@"&&j.match(E))return gt.tokenize=q,A("jsonld-keyword","meta");for(;(le=j.next())!=null&&!(le==I&&!_t);)_t=!_t&&le=="\\";return _t||(gt.tokenize=q),A("string","string")}}function it(I,j){for(var gt=!1,_t;_t=I.next();){if(_t=="/"&&gt){j.tokenize=q;break}gt=_t=="*"}return A("comment","comment")}function xt(I,j){for(var gt=!1,_t;(_t=I.next())!=null;){if(!gt&&(_t=="`"||_t=="$"&&I.eat("{"))){j.tokenize=q;break}gt=!gt&&_t=="\\"}return A("quasi","string-2",I.current())}var rt="([{}])";function at(I,j){j.fatArrowAt&&(j.fatArrowAt=null);var gt=I.string.indexOf("=>",I.start);if(!(gt<0)){if(T){var _t=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(I.string.slice(I.start,gt));_t&&(gt=_t.index)}for(var le=0,be=!1,Ft=gt-1;Ft>=0;--Ft){var Je=I.string.charAt(Ft),Pi=rt.indexOf(Je);if(Pi>=0&&Pi<3){if(!le){++Ft;break}if(--le==0){Je=="("&&(be=!0);break}}else if(Pi>=3&&Pi<6)++le;else if(R.test(Je))be=!0;else if(/["'\/`]/.test(Je))for(;;--Ft){if(Ft==0)return;var ar=I.string.charAt(Ft-1);if(ar==Je&&I.string.charAt(Ft-2)!="\\"){Ft--;break}}else if(be&&!le){++Ft;break}}be&&!le&&(j.fatArrowAt=Ft)}}var wt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Dt(I,j,gt,_t,le,be){this.indented=I,this.column=j,this.type=gt,this.prev=le,this.info=be,_t!=null&&(this.align=_t)}function Wt(I,j){if(!D)return!1;for(var gt=I.localVars;gt;gt=gt.next)if(gt.name==j)return!0;for(var _t=I.context;_t;_t=_t.prev)for(var gt=_t.vars;gt;gt=gt.next)if(gt.name==j)return!0}function Pt(I,j,gt,_t,le){var be=I.cc;for(K.state=I,K.stream=le,K.marked=null,K.cc=be,K.style=j,I.lexical.hasOwnProperty("align")||(I.lexical.align=!0);;){var Ft=be.length?be.pop():w?vt:U;if(Ft(gt,_t)){for(;be.length&&be[be.length-1].lex;)be.pop()();return K.marked?K.marked:gt=="variable"&&Wt(I,_t)?"variable-2":j}}}var K={state:null,column:null,marked:null,cc:null};function J(){for(var I=arguments.length-1;I>=0;I--)K.cc.push(arguments[I])}function Y(){return J.apply(null,arguments),!0}function ee(I,j){for(var gt=j;gt;gt=gt.next)if(gt.name==I)return!0;return!1}function Kt(I){var j=K.state;if(K.marked="def",!!D){if(j.context){if(j.lexical.info=="var"&&j.context&&j.context.block){var gt=Zt(I,j.context);if(gt!=null){j.context=gt;return}}else if(!ee(I,j.localVars)){j.localVars=new qt(I,j.localVars);return}}l.globalVars&&!ee(I,j.globalVars)&&(j.globalVars=new qt(I,j.globalVars))}}function Zt(I,j){if(j)if(j.block){var gt=Zt(I,j.prev);return gt?gt==j.prev?j:new Rt(gt,j.vars,!0):null}else return ee(I,j.vars)?j:new Rt(j.prev,new qt(I,j.vars),!1);else return null}function Yt(I){return I=="public"||I=="private"||I=="protected"||I=="abstract"||I=="readonly"}function Rt(I,j,gt){this.prev=I,this.vars=j,this.block=gt}function qt(I,j){this.name=I,this.next=j}var pe=new qt("this",new qt("arguments",null));function oe(){K.state.context=new Rt(K.state.context,K.state.localVars,!1),K.state.localVars=pe}function ce(){K.state.context=new Rt(K.state.context,K.state.localVars,!0),K.state.localVars=null}oe.lex=ce.lex=!0;function ot(){K.state.localVars=K.state.context.vars,K.state.context=K.state.context.prev}ot.lex=!0;function V(I,j){var gt=function(){var _t=K.state,le=_t.indented;if(_t.lexical.type=="stat")le=_t.lexical.indented;else for(var be=_t.lexical;be&&be.type==")"&&be.align;be=be.prev)le=be.indented;_t.lexical=new Dt(le,K.stream.column(),I,null,_t.lexical,j)};return gt.lex=!0,gt}function st(){var I=K.state;I.lexical.prev&&(I.lexical.type==")"&&(I.indented=I.lexical.indented),I.lexical=I.lexical.prev)}st.lex=!0;function N(I){function j(gt){return gt==I?Y():I==";"||gt=="}"||gt==")"||gt=="]"?J():Y(j)}return j}function U(I,j){return I=="var"?Y(V("vardef",j),nn,N(";"),st):I=="keyword a"?Y(V("form"),Ut,U,st):I=="keyword b"?Y(V("form"),U,st):I=="keyword d"?K.stream.match(/^\s*$/,!1)?Y():Y(V("stat"),Ht,N(";"),st):I=="debugger"?Y(N(";")):I=="{"?Y(V("}"),ce,ut,st,ot):I==";"?Y():I=="if"?(K.state.lexical.info=="else"&&K.state.cc[K.state.cc.length-1]==st&&K.state.cc.pop()(),Y(V("form"),Ut,U,st,oa)):I=="function"?Y(Mi):I=="for"?Y(V("form"),ce,aa,U,ot,st):I=="class"||T&&j=="interface"?(K.marked="keyword",Y(V("form",I=="class"?I:j),or,st)):I=="variable"?T&&j=="declare"?(K.marked="keyword",Y(U)):T&&(j=="module"||j=="enum"||j=="type")&&K.stream.match(/^\s*\w/,!1)?(K.marked="keyword",j=="enum"?Y(an):j=="type"?Y(la,N("operator"),Et,N(";")):Y(V("form"),Ge,N("{"),V("}"),ut,st,st)):T&&j=="namespace"?(K.marked="keyword",Y(V("form"),vt,U,st)):T&&j=="abstract"?(K.marked="keyword",Y(U)):Y(V("stat"),S):I=="switch"?Y(V("form"),Ut,N("{"),V("}","switch"),ce,ut,st,st,ot):I=="case"?Y(vt,N(":")):I=="default"?Y(N(":")):I=="catch"?Y(V("form"),oe,bt,U,st,ot):I=="export"?Y(V("stat"),Jr,st):I=="import"?Y(V("stat"),We,st):I=="async"?Y(U):j=="@"?Y(vt,U):J(V("stat"),vt,N(";"),st)}function bt(I){if(I=="(")return Y(kn,N(")"))}function vt(I,j){return Qt(I,j,!1)}function Lt(I,j){return Qt(I,j,!0)}function Ut(I){return I!="("?J():Y(V(")"),Ht,N(")"),st)}function Qt(I,j,gt){if(K.state.fatArrowAt==K.stream.start){var _t=gt?o:he;if(I=="(")return Y(oe,V(")"),nt(kn,")"),st,N("=>"),_t,ot);if(I=="variable")return J(oe,Ge,N("=>"),_t,ot)}var le=gt?Ot:pt;return wt.hasOwnProperty(I)?Y(le):I=="function"?Y(Mi,le):I=="class"||T&&j=="interface"?(K.marked="keyword",Y(V("form"),rr,st)):I=="keyword c"||I=="async"?Y(gt?Lt:vt):I=="("?Y(V(")"),Ht,N(")"),st,le):I=="operator"||I=="spread"?Y(gt?Lt:vt):I=="["?Y(V("]"),we,st,le):I=="{"?ct(O,"}",null,le):I=="quasi"?J(kt,le):I=="new"?Y(d(gt)):Y()}function Ht(I){return I.match(/[;\}\)\],]/)?J():J(vt)}function pt(I,j){return I==","?Y(Ht):Ot(I,j,!1)}function Ot(I,j,gt){var _t=gt==!1?pt:Ot,le=gt==!1?vt:Lt;if(I=="=>")return Y(oe,gt?o:he,ot);if(I=="operator")return/\+\+|--/.test(j)||T&&j=="!"?Y(_t):T&&j=="<"&&K.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?Y(V(">"),nt(Et,">"),st,_t):j=="?"?Y(vt,N(":"),le):Y(le);if(I=="quasi")return J(kt,_t);if(I!=";"){if(I=="(")return ct(Lt,")","call",_t);if(I==".")return Y(_,_t);if(I=="[")return Y(V("]"),Ht,N("]"),st,_t);if(T&&j=="as")return K.marked="keyword",Y(Et,_t);if(I=="regexp")return K.state.lastType=K.marked="operator",K.stream.backUp(K.stream.pos-K.stream.start-1),Y(le)}}function kt(I,j){return I!="quasi"?J():j.slice(j.length-2)!="${"?Y(kt):Y(Ht,zt)}function zt(I){if(I=="}")return K.marked="string-2",K.state.tokenize=xt,Y(kt)}function he(I){return at(K.stream,K.state),J(I=="{"?U:vt)}function o(I){return at(K.stream,K.state),J(I=="{"?U:Lt)}function d(I){return function(j){return j=="."?Y(I?b:p):j=="variable"&&T?Y(Ai,I?Ot:pt):J(I?Lt:vt)}}function p(I,j){if(j=="target")return K.marked="keyword",Y(pt)}function b(I,j){if(j=="target")return K.marked="keyword",Y(Ot)}function S(I){return I==":"?Y(st,U):J(pt,N(";"),st)}function _(I){if(I=="variable")return K.marked="property",Y()}function O(I,j){if(I=="async")return K.marked="property",Y(O);if(I=="variable"||K.style=="keyword"){if(K.marked="property",j=="get"||j=="set")return Y(H);var gt;return T&&K.state.fatArrowAt==K.stream.start&&(gt=K.stream.match(/^\s*:\s*/,!1))&&(K.state.fatArrowAt=K.stream.pos+gt[0].length),Y(G)}else{if(I=="number"||I=="string")return K.marked=v?"property":K.style+" property",Y(G);if(I=="jsonld-keyword")return Y(G);if(T&&Yt(j))return K.marked="keyword",Y(O);if(I=="[")return Y(vt,St,N("]"),G);if(I=="spread")return Y(Lt,G);if(j=="*")return K.marked="keyword",Y(O);if(I==":")return J(G)}}function H(I){return I!="variable"?J(G):(K.marked="property",Y(Mi))}function G(I){if(I==":")return Y(Lt);if(I=="(")return J(Mi)}function nt(I,j,gt){function _t(le,be){if(gt?gt.indexOf(le)>-1:le==","){var Ft=K.state.lexical;return Ft.info=="call"&&(Ft.pos=(Ft.pos||0)+1),Y(function(Je,Pi){return Je==j||Pi==j?J():J(I)},_t)}return le==j||be==j?Y():gt&&gt.indexOf(";")>-1?J(I):Y(N(j))}return function(le,be){return le==j||be==j?Y():J(I,_t)}}function ct(I,j,gt){for(var _t=3;_t<arguments.length;_t++)K.cc.push(arguments[_t]);return Y(V(j,gt),nt(I,j),st)}function ut(I){return I=="}"?Y():J(U,ut)}function St(I,j){if(T){if(I==":")return Y(Et);if(j=="?")return Y(St)}}function ft(I,j){if(T&&(I==":"||j=="in"))return Y(Et)}function se(I){if(T&&I==":")return K.stream.match(/^\s*\w+\s+is\b/,!1)?Y(vt,jt,Et):Y(Et)}function jt(I,j){if(j=="is")return K.marked="keyword",Y()}function Et(I,j){if(j=="keyof"||j=="typeof"||j=="infer"||j=="readonly")return K.marked="keyword",Y(j=="typeof"?Lt:Et);if(I=="variable"||j=="void")return K.marked="type",Y(Qe);if(j=="|"||j=="&")return Y(Et);if(I=="string"||I=="number"||I=="atom")return Y(Qe);if(I=="[")return Y(V("]"),nt(Et,"]",","),st,Qe);if(I=="{")return Y(V("}"),ve,st,Qe);if(I=="(")return Y(nt(je,")"),me,Qe);if(I=="<")return Y(nt(Et,">"),Et);if(I=="quasi")return J(Wi,Qe)}function me(I){if(I=="=>")return Y(Et)}function ve(I){return I.match(/[\}\)\]]/)?Y():I==","||I==";"?Y(ve):J(Be,ve)}function Be(I,j){if(I=="variable"||K.style=="keyword")return K.marked="property",Y(Be);if(j=="?"||I=="number"||I=="string")return Y(Be);if(I==":")return Y(Et);if(I=="[")return Y(N("variable"),ft,N("]"),Be);if(I=="(")return J(Ti,Be);if(!I.match(/[;\}\)\],]/))return Y()}function Wi(I,j){return I!="quasi"?J():j.slice(j.length-2)!="${"?Y(Wi):Y(Et,Fe)}function Fe(I){if(I=="}")return K.marked="string-2",K.state.tokenize=xt,Y(Wi)}function je(I,j){return I=="variable"&&K.stream.match(/^\s*[?:]/,!1)||j=="?"?Y(je):I==":"?Y(Et):I=="spread"?Y(je):J(Et)}function Qe(I,j){if(j=="<")return Y(V(">"),nt(Et,">"),st,Qe);if(j=="|"||I=="."||j=="&")return Y(Et);if(I=="[")return Y(Et,N("]"),Qe);if(j=="extends"||j=="implements")return K.marked="keyword",Y(Et);if(j=="?")return Y(Et,N(":"),Et)}function Ai(I,j){if(j=="<")return Y(V(">"),nt(Et,">"),st,Qe)}function ai(){return J(Et,Gn)}function Gn(I,j){if(j=="=")return Y(Et)}function nn(I,j){return j=="enum"?(K.marked="keyword",Y(an)):J(Ge,St,rn,Qr)}function Ge(I,j){if(T&&Yt(j))return K.marked="keyword",Y(Ge);if(I=="variable")return Kt(j),Y();if(I=="spread")return Y(Ge);if(I=="[")return ct(Kr,"]");if(I=="{")return ct(sn,"}")}function sn(I,j){return I=="variable"&&!K.stream.match(/^\s*:/,!1)?(Kt(j),Y(rn)):(I=="variable"&&(K.marked="property"),I=="spread"?Y(Ge):I=="}"?J():I=="["?Y(vt,N("]"),N(":"),sn):Y(N(":"),Ge,rn))}function Kr(){return J(Ge,rn)}function rn(I,j){if(j=="=")return Y(Lt)}function Qr(I){if(I==",")return Y(nn)}function oa(I,j){if(I=="keyword b"&&j=="else")return Y(V("form","else"),U,st)}function aa(I,j){if(j=="await")return Y(aa);if(I=="(")return Y(V(")"),Zr,st)}function Zr(I){return I=="var"?Y(nn,Xn):I=="variable"?Y(Xn):J(Xn)}function Xn(I,j){return I==")"?Y():I==";"?Y(Xn):j=="in"||j=="of"?(K.marked="keyword",Y(vt,Xn)):J(vt,Xn)}function Mi(I,j){if(j=="*")return K.marked="keyword",Y(Mi);if(I=="variable")return Kt(j),Y(Mi);if(I=="(")return Y(oe,V(")"),nt(kn,")"),st,se,U,ot);if(T&&j=="<")return Y(V(">"),nt(ai,">"),st,Mi)}function Ti(I,j){if(j=="*")return K.marked="keyword",Y(Ti);if(I=="variable")return Kt(j),Y(Ti);if(I=="(")return Y(oe,V(")"),nt(kn,")"),st,se,ot);if(T&&j=="<")return Y(V(">"),nt(ai,">"),st,Ti)}function la(I,j){if(I=="keyword"||I=="variable")return K.marked="type",Y(la);if(j=="<")return Y(V(">"),nt(ai,">"),st)}function kn(I,j){return j=="@"&&Y(vt,kn),I=="spread"?Y(kn):T&&Yt(j)?(K.marked="keyword",Y(kn)):T&&I=="this"?Y(St,rn):J(Ge,St,rn)}function rr(I,j){return I=="variable"?or(I,j):Gi(I,j)}function or(I,j){if(I=="variable")return Kt(j),Y(Gi)}function Gi(I,j){if(j=="<")return Y(V(">"),nt(ai,">"),st,Gi);if(j=="extends"||j=="implements"||T&&I==",")return j=="implements"&&(K.marked="keyword"),Y(T?Et:vt,Gi);if(I=="{")return Y(V("}"),Xi,st)}function Xi(I,j){if(I=="async"||I=="variable"&&(j=="static"||j=="get"||j=="set"||T&&Yt(j))&&K.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return K.marked="keyword",Y(Xi);if(I=="variable"||K.style=="keyword")return K.marked="property",Y(_i,Xi);if(I=="number"||I=="string")return Y(_i,Xi);if(I=="[")return Y(vt,St,N("]"),_i,Xi);if(j=="*")return K.marked="keyword",Y(Xi);if(T&&I=="(")return J(Ti,Xi);if(I==";"||I==",")return Y(Xi);if(I=="}")return Y();if(j=="@")return Y(vt,Xi)}function _i(I,j){if(j=="!"||j=="?")return Y(_i);if(I==":")return Y(Et,rn);if(j=="=")return Y(Lt);var gt=K.state.lexical.prev,_t=gt&&gt.info=="interface";return J(_t?Ti:Mi)}function Jr(I,j){return j=="*"?(K.marked="keyword",Y(vi,N(";"))):j=="default"?(K.marked="keyword",Y(vt,N(";"))):I=="{"?Y(nt(to,"}"),vi,N(";")):J(U)}function to(I,j){if(j=="as")return K.marked="keyword",Y(N("variable"));if(I=="variable")return J(Lt,to)}function We(I){return I=="string"?Y():I=="("?J(vt):I=="."?J(pt):J(Vt,on,vi)}function Vt(I,j){return I=="{"?ct(Vt,"}"):(I=="variable"&&Kt(j),j=="*"&&(K.marked="keyword"),Y(eo))}function on(I){if(I==",")return Y(Vt,on)}function eo(I,j){if(j=="as")return K.marked="keyword",Y(Vt)}function vi(I,j){if(j=="from")return K.marked="keyword",Y(vt)}function we(I){return I=="]"?Y():J(nt(Lt,"]"))}function an(){return J(V("form"),Ge,N("{"),V("}"),nt(gs,"}"),st,st)}function gs(){return J(Ge,rn)}function io(I,j){return I.lastType=="operator"||I.lastType==","||L.test(j.charAt(0))||/[,.]/.test(j.charAt(0))}function Tt(I,j,gt){return j.tokenize==q&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(j.lastType)||j.lastType=="quasi"&&/\{\s*$/.test(I.string.slice(0,I.pos-(gt||0)))}return{startState:function(I){var j={tokenize:q,lastType:"sof",cc:[],lexical:new Dt((I||0)-c,0,"block",!1),localVars:l.localVars,context:l.localVars&&new Rt(null,null,!1),indented:I||0};return l.globalVars&&typeof l.globalVars=="object"&&(j.globalVars=l.globalVars),j},token:function(I,j){if(I.sol()&&(j.lexical.hasOwnProperty("align")||(j.lexical.align=!1),j.indented=I.indentation(),at(I,j)),j.tokenize!=it&&I.eatSpace())return null;var gt=j.tokenize(I,j);return lt=="comment"?gt:(j.lastType=lt=="operator"&&(B=="++"||B=="--")?"incdec":lt,Pt(j,gt,lt,B,I))},indent:function(I,j){if(I.tokenize==it||I.tokenize==xt)return n.Pass;if(I.tokenize!=q)return 0;var gt=j&&j.charAt(0),_t=I.lexical,le;if(!/^\s*else\b/.test(j))for(var be=I.cc.length-1;be>=0;--be){var Ft=I.cc[be];if(Ft==st)_t=_t.prev;else if(Ft!=oa&&Ft!=ot)break}for(;(_t.type=="stat"||_t.type=="form")&&(gt=="}"||(le=I.cc[I.cc.length-1])&&(le==pt||le==Ot)&&!/^[,\.=+\-*:?[\(]/.test(j));)_t=_t.prev;g&&_t.type==")"&&_t.prev.type=="stat"&&(_t=_t.prev);var Je=_t.type,Pi=gt==Je;return Je=="vardef"?_t.indented+(I.lastType=="operator"||I.lastType==","?_t.info.length+1:0):Je=="form"&&gt=="{"?_t.indented:Je=="form"?_t.indented+c:Je=="stat"?_t.indented+(io(I,j)?g||c:0):_t.info=="switch"&&!Pi&&l.doubleIndentSwitch!=!1?_t.indented+(/^(?:case|default)\b/.test(j)?c:2*c):_t.align?_t.column+(Pi?0:1):_t.indented+(Pi?0:c)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:w?null:"/*",blockCommentEnd:w?null:"*/",blockCommentContinue:w?null:" * ",lineComment:w?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:w?"json":"javascript",jsonldMode:v,jsonMode:w,expressionAllowed:Tt,skipExpression:function(I){Pt(I,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();const zo={"New Circuit":"Shift + N","Save Online":"Ctrl + S","Save Offline":"Ctrl + Alt + S","Download as Image":"Ctrl + D","Open Offline":"Ctrl + O","Insert Sub-circuit":"Shift + C","Combinational Analysis":"Shift + A","Direction Up":"Up","Direction Down":"Down","Direction Left":"Left","Direction Right":"Right","Insert Label":"Ctrl + L","Label Direction Up":"Alt + Up","Label Direction Down":"Alt + Down","Label Direction Left":"Alt + Left","Label Direction Right":"Alt + Right","Move Element Up":"Shift + Up","Move Element Down":"Shift + Down","Move Element Left":"Shift + Left","Move Element Right":"Shift + Right","Hotkey Preference":"F8","Open Documentation":"F1"},qf={all_shortcuts:{},add:function(i,t,n){var r={type:"keydown",propagate:!1,disable_in_input:!0,target:document,keycode:!1};if(!n)n=r;else for(var l in r)typeof n[l]>"u"&&(n[l]=r[l]);var c=n.target;typeof n.target=="string"&&(c=document.getElementById(n.target)),i=i.toLowerCase();var g=function(v){if(v=v||window.event,n.disable_in_input){var w;if(v.target?w=v.target:v.srcElement&&(w=v.srcElement),w.nodeType==3&&(w=w.parentNode),w.tagName=="INPUT"||w.tagName=="TEXTAREA")return}let D="";v.keyCode?D=v.keyCode:v.which&&(D=v.which);var T=String.fromCharCode(D).toLowerCase();D==188&&(T=","),D==190&&(T=".");var R=i.split("+"),M=0,L={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},E={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Q={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};v.ctrlKey&&(Q.ctrl.pressed=!0),v.shiftKey&&(Q.shift.pressed=!0),v.altKey&&(Q.alt.pressed=!0),v.metaKey&&(Q.meta.pressed=!0);let lt;for(var B=0;lt=R[B],B<R.length;B++)lt=="ctrl"||lt=="control"?(M++,Q.ctrl.wanted=!0):lt=="shift"?(M++,Q.shift.wanted=!0):lt=="alt"?(M++,Q.alt.wanted=!0):lt=="meta"?(M++,Q.meta.wanted=!0):lt.length>1?E[lt]==D&&M++:n.keycode?n.keycode==D&&M++:T==lt?M++:L[T]&&v.shiftKey&&(T=L[T],T==lt&&M++);if(M==R.length&&Q.ctrl.pressed==Q.ctrl.wanted&&Q.shift.pressed==Q.shift.wanted&&Q.alt.pressed==Q.alt.wanted&&Q.meta.pressed==Q.meta.wanted&&(t(v),!n.propagate))return v.cancelBubble=!0,v.returnValue=!1,v.stopPropagation&&(v.stopPropagation(),v.preventDefault()),!1};this.all_shortcuts[i]={callback:g,target:c,event:n.type},c.addEventListener?c.addEventListener(n.type,g,!1):c.attachEvent?c.attachEvent("on"+n.type,g):c["on"+n.type]=g},remove:function(i){i=i.toLowerCase();var t=this.all_shortcuts[i];if(delete this.all_shortcuts[i],!!t){var n=t.event,r=t.target,l=t.callback;r.detachEvent?r.detachEvent("on"+n,l):r.removeEventListener?r.removeEventListener(n,l,!1):r["on"+n]=!1}},removeAll:function(){for(let i in this.all_shortcuts)this.remove(i)}},Gd=(i,t)=>{let n;switch(t){case"New Circuit":n=mb;break;case"Save Online":n=Vh;break;case"Save Offline":n=yf;break;case"Download as Image":n=pl;break;case"Open Offline":n=vf;break;case"Insert Sub-circuit":n=uf;break;case"Combinational Analysis":n=kf;break;case"Direction Up":n=Fa("up");break;case"Direction Down":n=Fa("down");break;case"Direction Left":n=Fa("left");break;case"Direction Right":n=Fa("right");break;case"Insert Label":n=pb;break;case"Label Direction Up":n=ja("up");break;case"Label Direction Down":n=ja("down");break;case"Label Direction Left":n=ja("left");break;case"Label Direction Right":n=ja("right");break;case"Move Element Up":n=Ga("up");break;case"Move Element Down":n=Ga("down");break;case"Move Element Left":n=Ga("left");break;case"Move Element Right":n=Ga("right");break;case"Hotkey Preference":n=gb;break;case"Open Documentation":n=vb;break;default:n=()=>console.log("No shortcut found..");break}qf.add(i,n,{type:"keydown",propagate:!1,target:document,disable_in_input:!0})};Storage.prototype.set=function(i,t){return this.setItem(i,JSON.stringify(t))};Storage.prototype.get=function(i){return JSON.parse(this.getItem(i))};Object.size=function(i){var t=0,n;for(n in i)i.hasOwnProperty(n)&&t++;return t};const Vf=()=>{let i="";return navigator.appVersion.indexOf("Win")!=-1&&(i="Windows"),navigator.appVersion.indexOf("Mac")!=-1&&(i="MacOS"),navigator.appVersion.indexOf("X11")!=-1&&(i="UNIX"),navigator.appVersion.indexOf("Linux")!=-1&&(i="Linux"),i},Xd=i=>{const t=["Ctrl + N","Ctrl + W","Ctrl + T","Ctrl + C","Ctrl + V","Ctrl + Delete","Ctrl + Backspace","Ctrl + /","Ctrl + \\","Ctrl + ]","Ctrl + '","Ctrl + `","Ctrl + [","Ctrl + ~","Ctrl + Num1","Ctrl + Num2","Ctrl + Num3","Ctrl + Num4","Ctrl + Num5","Ctrl + Num6","Ctrl + Num*","Ctrl + Num/","Ctrl + Num.","Ctrl + Num0"];return Vf=="macOS"&&t.forEach((n,r)=>{n.split(" + ")[0]=="Ctrl",t[r]=n.split(" + ")[0]=="Ctrl"?n.replace("Ctrl","Meta"):n}),t.includes(i)},lu=i=>{if(qf.removeAll(),i==="user"){localStorage.removeItem("defaultKeys");let t=localStorage.get("userKeys");for(let n in t){let r=t[n];r=r.split(" ").join(""),Gd(r,n)}Fo("user")}else if(i=="default"){localStorage.userKeys&&localStorage.removeItem("userKeys");let t=localStorage.get("defaultKeys");for(let n in t){let r=t[n];r=r.split(" ").join(""),Gd(r,n)}Fo("default")}},cb=()=>{const i=localStorage.get("userKeys");if(Object.size(i)!==Object.size(zo)){for(const[t,n]of Object.entries(zo))Object.keys(i).includes(t)||(i[t]=n);localStorage.set("userKeys",i)}else return},db=()=>{localStorage.defaultKeys&&localStorage.removeItem("defaultKeys");let i={},t=0;for(;$("#preference").children()[t];)i[$("#preference").children()[t].children[1].children[0].innerText]=$("#preference").children()[t].children[1].children[1].innerText,t++;localStorage.set("userKeys",i),lu("user")},Yd=()=>{if(localStorage.userKeys&&localStorage.removeItem("userKeys"),Vf()==="MacOS"){const i={};for(let[t,n]of Object.entries(zo))n.split(" + ")[0]=="Ctrl",i[t]=n.split(" + ")[0]=="Ctrl"?n.replace("Ctrl","Meta"):n,localStorage.set("defaultKeys",i)}else localStorage.set("defaultKeys",zo);lu("default")},fb=(i,t)=>{let n=0;for(;$("#preference").children()[n];){if($("#preference").children()[n].children[1].children[1].innerText===i&&$("#preference").children()[n].children[1].children[0].innerText!==t.previousElementSibling.innerText){const r=$("#preference").children()[n].children[1].children[0].innerText;$("#warning").text(`This key(s) is already assigned to: ${r}, press Enter to override.`),$("#edit").css("border","1.5px solid #dc5656");return}else $("#edit").css("border","none");n++}},Fa=i=>()=>{f.lastSelected&&(f.lastSelected.newDirection(i.toUpperCase()),$("select[name |= 'newDirection']").val(i.toUpperCase()),bl())},ja=i=>()=>{f.lastSelected&&!f.lastSelected.labelDirectionFixed&&(f.lastSelected.labelDirection=i.toUpperCase(),$("select[name |= 'newLabelDirection']").val(i.toUpperCase()),bl())},pb=()=>{f.lastSelected&&($("input[name |= 'setLabel']").focus(),$("input[name |= 'setLabel']").val().length||$("input[name |= 'setLabel']").val("Untitled"),$("input[name |= 'setLabel']").select(),bl())},Ga=i=>()=>{if(f.lastSelected){switch(i){case"up":f.lastSelected.y-=10;break;case"down":f.lastSelected.y+=10;break;case"left":f.lastSelected.x-=10;break;case"right":f.lastSelected.x+=10;break}bl()}},gb=()=>$("#customShortcut").trigger("click"),mb=()=>$("#newCircuit").trigger("click"),vb=()=>{f.lastSelected==null||f.lastSelected.helplink==null?window.open("https://docs.circuitverse.org/","_blank"):window.open(f.lastSelected.helplink,"_blank")};function bl(){ye(!0),zi(1),ge(1)}const bb=i=>{let t="";return Object.entries(i).forEach(n=>{t+=`
        <div>
        <span id='edit-icon'></span>
        <div><span id='command'>${n[0]}</span>
        <span id='keyword'></span>
        </div>
    </div>
    `}),`<div id="preference" class="customScroll">${t}</div>`},yb=bb(zo),wb=`<div id="edit" tabindex="0">
<span style="font-size: 14px;">Press Desire Key Combination & press Enter or press ESC to cancel.</span>
<div id="pressedKeys"></div>
<div id="warning"></div>
</div>`,Sb=`<div id="heading">
  <span>Command</span>
  <span>Keymapping</span>
</div>`,Fo=i=>{let t=0;if(i=="user"){const n=localStorage.get("userKeys");for(;$("#preference").children()[t];)$("#preference").children()[t].children[1].children[1].innerText=n[$("#preference").children()[t].children[1].children[0].innerText],t++}else if(i=="default")for(;$("#preference").children()[t];){const n=localStorage.get("defaultKeys");$("#preference").children()[t].children[1].children[1].innerText=n[$("#preference").children()[t].children[1].children[0].innerText],t++}},xb=i=>{let t=0;for(;$("#preference").children()[t];)$("#preference").children()[t].children[1].children[1].innerText===i&&($("#preference").children()[t].children[1].children[1].innerText=""),t++},Ud=()=>{$("#pressedKeys").text(""),$("#edit").css("display","none")},kb=()=>{$("#edit").css("display","none"),db(),Fo("user")};var qd=["ctrl","alt","shift","meta"],ss={},Kf={58:59,43:61,60:44,95:45,62:46,63:47,96:192,124:92,39:222,34:222,33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:58,123:91,125:93};function Cb(i){return i>=97&&i<=122}function Vd(i){return i.substr(0,1).toUpperCase()+i.substr(1).toLowerCase()}navigator.userAgent.indexOf("Gecko")!=-1;navigator.userAgent.indexOf("MSIE")!=-1;var Db=navigator.platform.indexOf("Win")!=-1,Kd=window.opera&&window.opera.version()<9.5,Qf=navigator.vendor&&navigator.vendor.indexOf("KDE")!=-1,Tb=navigator.vendor&&navigator.vendor.indexOf("iCab")!=-1,_b={186:59,187:61,188:44,109:95,107:61,189:95,190:62,191:47,192:126,219:91,220:92,221:93},Qd={};if(Kd&&Db)ss=Qd;else if(Kd||Qf||Tb){var wh=[33,64,35,36,37,94,38,42,40,41,58,43,60,95,62,63,124,34];ss=Qd;for(var Xa=0;Xa<wh.length;++Xa)ss[wh[Xa]]=Kf[wh[Xa]]}else ss=_b;Qf&&(ss[0]=45,ss[127]=46,ss[45]=95);var sl={32:"SPACE",13:"ENTER",9:"TAB",8:"BACKSPACE",16:"SHIFT",17:"CTRL",18:"ALT",20:"CAPS_LOCK",144:"NUM_LOCK",145:"SCROLL_LOCK",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",33:"PAGE_UP",34:"PAGE_DOWN",36:"HOME",35:"END",45:"INSERT",46:"DELETE",27:"ESCAPE",19:"PAUSE",222:"'",91:"META"};function Pb(i){return i>=112&&i<=123?"F"+(i-111):!1}function Ib(i){if(i>=96&&i<106)return"Num"+(i-96);switch(i){case 106:return"Num*";case 111:return"Num/";case 110:return"Num.";default:return!1}}var Qi={codes:{},ctrl:!1,alt:!1,shift:!1,meta:!1};function Zd(i){Qi.ctrl=i.ctrl,Qi.alt=i.alt,Qi.shift=i.shift,Qi.meta=i.meta}function Jd(i,t){return i.ctrl===t.ctrl&&i.alt===t.alt&&i.shift===t.shift&&i.meta===t.meta}if(typeof window.KeyCode<"u")var Lb=window.KeyCode;const Wn={no_conflict:function(){return window.KeyCode=Lb,Wn},fkey:function(i){return 111+i},numkey:function(i){switch(i){case"*":return 106;case"/":return 111;case".":return 110;default:return 96+i}},key:function(i){var t=i.charCodeAt(0);return Cb(t)?t-32:Kf[t]||t},key_equals:function(i,t){return i.code==t.code&&Jd(i,t)},translate_key_code:function(i){return ss[i]||i},translate_event:function(i){i=i||window.event;var t=i.which||i.keyCode;return{code:Wn.translate_key_code(t),shift:i.shiftKey,alt:i.altKey,ctrl:i.ctrlKey,meta:i.metaKey}},key_down:function(i){var t=Wn.translate_event(i);Qi.codes[t.code]=t.code,Zd(t)},key_up:function(i){var t=Wn.translate_event(i);delete Qi.codes[t.code],Zd(t)},is_down:function(i){var t=i.code;return t==Wn.CTRL?Qi.ctrl:t==Wn.ALT?Qi.alt:t==Wn.SHIFT?Qi.shift:Qi.codes[t]!==void 0&&Jd(i,Qi)},hot_key:function(i){for(var t=[],n=0;n<qd.length;++n){var r=qd[n];i[r]&&r.toUpperCase()!=sl[i.code]&&t.push(Vd(r))}var l=i.code,c=sl[l]||Pb(l)||Ib(l)||String.fromCharCode(l);return t.push(Vd(c)),t.join("+")}};for(var tf in sl)Wn[sl[tf]]=tf;function Ob(){$("#customShortcutDialog").append(wb),$("#customShortcutDialog").append(Sb),$("#customShortcutDialog").append(yb),$("#customShortcut").on("click",()=>{Ud(),$("#customShortcutDialog").dialog({resizable:!1,buttons:[{text:"Reset to default",click:()=>{confirm("Remove all custom keys & set the default keys?")&&Yd()},id:"resetDefault"},{text:"Save",click:()=>{kb(),$("#customShortcutDialog").dialog("close")},id:"submitBtn"}]}),$("#customShortcutDialog").css("display","flex")});let i=null;$("#preference").on("click",t=>{$("#pressedKeys").text(""),$("#warning").text(""),$("#edit").css("border","none"),$("#edit").css("display","block"),$($("#edit")).focus(),[,i]=t.target.closest("div").children}),$("#edit").keydown(t=>{t=t||window.event,t.stopPropagation(),t.preventDefault();var n=Wn;let r=["CTRL","ALT","SHIFT","META"];if($("#edit").css("animation","none"),$("#warning").text(""),t.keyCode===27&&Ud(),t.keyCode===13){if($("#pressedKeys").text()===""){$("#warning").text("Please enter some key(s)"),$("#edit").css("animation","shake .3s linear");return}Xd($("#pressedKeys").text())?($("#warning").text("Please enter different key(s)."),$("#edit").css("animation","shake .3s linear"),$("#pressedKeys").text("")):(xb($("#pressedKeys").text()),i.innerText=$("#pressedKeys").text(),$("#pressedKeys").text(""),$("#edit").css("display","none"))}const l=n.hot_key(n.translate_event(t)).split("+").join(" + ")!=="Enter"?n.hot_key(n.translate_event(t)).split("+").join(" + "):"";$("#pressedKeys").text().split(" + ").length===2&&!r.includes(l)&&r.includes($("#pressedKeys").text().split(" + ")[1])?$("#pressedKeys").append(` + ${l}`):r.includes($("#pressedKeys").text())?(r=r.filter(c=>c===$("#pressedKeys").text()),r.includes(l)||$("#pressedKeys").append(` + ${l}`)):($("#pressedKeys").text(""),$("#pressedKeys").text(l)),$("#pressedKeys").text()||$("#pressedKeys").text(l),($("#pressedKeys").text().split(" + ").length===2&&["Ctrl","Meta"].includes($("#pressedKeys").text().split(" + ")[1])||$("#pressedKeys").text().split(" + ")[0]==="Alt"&&$("#pressedKeys").text().split(" + ")[1]==="Shift")&&$("#pressedKeys").text($("#pressedKeys").text().split(" + ").reverse().join(" + ")),fb($("#pressedKeys").text(),i),Xd($("#pressedKeys").text())&&$("#warning").text("The above combination is a system default shortcut & cannot be set.")}),$("div#customShortcutDialog").on("dialogclose",function(t){localStorage.userKeys?Fo("user"):Fo("default")}),localStorage.userKeys?(cb(),lu("user")):Yd()}/*! jQuery UI - v1.13.1 - 2022-01-22
* http://jqueryui.com
* Includes: widget.js, position.js, data.js, disable-selection.js, focusable.js, form-reset-mixin.js, jquery-patch.js, keycode.js, labels.js, scroll-parent.js, tabbable.js, unique-id.js, widgets/draggable.js, widgets/resizable.js, widgets/sortable.js, widgets/accordion.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/dialog.js, widgets/mouse.js, effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */(function(i){typeof define=="function"&&define.amd?define(["jquery"],i):i(jQuery)})(function(i){i.ui=i.ui||{},i.ui.version="1.13.1";var t,n=0,r=Array.prototype.hasOwnProperty,l=Array.prototype.slice;i.cleanData=(t=i.cleanData,function(o){for(var d,p,b=0;(p=o[b])!=null;b++)(d=i._data(p,"events"))&&d.remove&&i(p).triggerHandler("remove");t(o)}),i.widget=function(o,d,p){var b,S,_,O={},H=o.split(".")[0],G=H+"-"+(o=o.split(".")[1]);return p||(p=d,d=i.Widget),Array.isArray(p)&&(p=i.extend.apply(null,[{}].concat(p))),i.expr.pseudos[G.toLowerCase()]=function(nt){return!!i.data(nt,G)},i[H]=i[H]||{},b=i[H][o],S=i[H][o]=function(nt,ct){if(!this||!this._createWidget)return new S(nt,ct);arguments.length&&this._createWidget(nt,ct)},i.extend(S,b,{version:p.version,_proto:i.extend({},p),_childConstructors:[]}),(_=new d).options=i.widget.extend({},_.options),i.each(p,function(nt,ct){function ut(){return d.prototype[nt].apply(this,arguments)}function St(ft){return d.prototype[nt].apply(this,ft)}O[nt]=typeof ct=="function"?function(){var ft,se=this._super,jt=this._superApply;return this._super=ut,this._superApply=St,ft=ct.apply(this,arguments),this._super=se,this._superApply=jt,ft}:ct}),S.prototype=i.widget.extend(_,{widgetEventPrefix:b&&_.widgetEventPrefix||o},O,{constructor:S,namespace:H,widgetName:o,widgetFullName:G}),b?(i.each(b._childConstructors,function(nt,ct){var ut=ct.prototype;i.widget(ut.namespace+"."+ut.widgetName,S,ct._proto)}),delete b._childConstructors):d._childConstructors.push(S),i.widget.bridge(o,S),S},i.widget.extend=function(o){for(var d,p,b=l.call(arguments,1),S=0,_=b.length;S<_;S++)for(d in b[S])p=b[S][d],r.call(b[S],d)&&p!==void 0&&(i.isPlainObject(p)?o[d]=i.isPlainObject(o[d])?i.widget.extend({},o[d],p):i.widget.extend({},p):o[d]=p);return o},i.widget.bridge=function(o,d){var p=d.prototype.widgetFullName||o;i.fn[o]=function(b){var S=typeof b=="string",_=l.call(arguments,1),O=this;return S?this.length||b!=="instance"?this.each(function(){var H,G=i.data(this,p);return b==="instance"?(O=G,!1):G?typeof G[b]!="function"||b.charAt(0)==="_"?i.error("no such method '"+b+"' for "+o+" widget instance"):(H=G[b].apply(G,_))!==G&&H!==void 0?(O=H&&H.jquery?O.pushStack(H.get()):H,!1):void 0:i.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+b+"'")}):O=void 0:(_.length&&(b=i.widget.extend.apply(null,[b].concat(_))),this.each(function(){var H=i.data(this,p);H?(H.option(b||{}),H._init&&H._init()):i.data(this,p,new d(b,this))})),O}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(o,d){d=i(d||this.defaultElement||this)[0],this.element=i(d),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=i(),this.hoverable=i(),this.focusable=i(),this.classesElementLookup={},d!==this&&(i.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(p){p.target===d&&this.destroy()}}),this.document=i(d.style?d.ownerDocument:d.document||d),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this.options=i.widget.extend({},this.options,this._getCreateOptions(),o),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){var o=this;this._destroy(),i.each(this.classesElementLookup,function(d,p){o._removeClass(p,d)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:i.noop,widget:function(){return this.element},option:function(o,d){var p,b,S,_=o;if(arguments.length===0)return i.widget.extend({},this.options);if(typeof o=="string")if(_={},o=(p=o.split(".")).shift(),p.length){for(b=_[o]=i.widget.extend({},this.options[o]),S=0;S<p.length-1;S++)b[p[S]]=b[p[S]]||{},b=b[p[S]];if(o=p.pop(),arguments.length===1)return b[o]===void 0?null:b[o];b[o]=d}else{if(arguments.length===1)return this.options[o]===void 0?null:this.options[o];_[o]=d}return this._setOptions(_),this},_setOptions:function(o){for(var d in o)this._setOption(d,o[d]);return this},_setOption:function(o,d){return o==="classes"&&this._setOptionClasses(d),this.options[o]=d,o==="disabled"&&this._setOptionDisabled(d),this},_setOptionClasses:function(o){var d,p,b;for(d in o)b=this.classesElementLookup[d],o[d]!==this.options.classes[d]&&b&&b.length&&(p=i(b.get()),this._removeClass(b,d),p.addClass(this._classes({element:p,keys:d,classes:o,add:!0})))},_setOptionDisabled:function(o){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!o),o&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(o){var d=[],p=this;function b(S,_){for(var O,H=0;H<S.length;H++)O=p.classesElementLookup[S[H]]||i(),O=o.add?(function(){var G=[];o.element.each(function(nt,ct){i.map(p.classesElementLookup,function(ut){return ut}).some(function(ut){return ut.is(ct)})||G.push(ct)}),p._on(i(G),{remove:"_untrackClassesElement"})}(),i(i.uniqueSort(O.get().concat(o.element.get())))):i(O.not(o.element).get()),p.classesElementLookup[S[H]]=O,d.push(S[H]),_&&o.classes[S[H]]&&d.push(o.classes[S[H]])}return(o=i.extend({element:this.element,classes:this.options.classes||{}},o)).keys&&b(o.keys.match(/\S+/g)||[],!0),o.extra&&b(o.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(o){var d=this;i.each(d.classesElementLookup,function(p,b){i.inArray(o.target,b)!==-1&&(d.classesElementLookup[p]=i(b.not(o.target).get()))}),this._off(i(o.target))},_removeClass:function(o,d,p){return this._toggleClass(o,d,p,!1)},_addClass:function(o,d,p){return this._toggleClass(o,d,p,!0)},_toggleClass:function(o,d,_,b){var S=typeof o=="string"||o===null,_={extra:S?d:_,keys:S?o:d,element:S?this.element:o,add:b=typeof b=="boolean"?b:_};return _.element.toggleClass(this._classes(_),b),this},_on:function(o,d,p){var b,S=this;typeof o!="boolean"&&(p=d,d=o,o=!1),p?(d=b=i(d),this.bindings=this.bindings.add(d)):(p=d,d=this.element,b=this.widget()),i.each(p,function(G,O){function H(){if(o||S.options.disabled!==!0&&!i(this).hasClass("ui-state-disabled"))return(typeof O=="string"?S[O]:O).apply(S,arguments)}typeof O!="string"&&(H.guid=O.guid=O.guid||H.guid||i.guid++);var nt=G.match(/^([\w:-]*)\s*(.*)$/),G=nt[1]+S.eventNamespace,nt=nt[2];nt?b.on(G,nt,H):d.on(G,H)})},_off:function(o,d){d=(d||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,o.off(d),this.bindings=i(this.bindings.not(o).get()),this.focusable=i(this.focusable.not(o).get()),this.hoverable=i(this.hoverable.not(o).get())},_delay:function(o,d){var p=this;return setTimeout(function(){return(typeof o=="string"?p[o]:o).apply(p,arguments)},d||0)},_hoverable:function(o){this.hoverable=this.hoverable.add(o),this._on(o,{mouseenter:function(d){this._addClass(i(d.currentTarget),null,"ui-state-hover")},mouseleave:function(d){this._removeClass(i(d.currentTarget),null,"ui-state-hover")}})},_focusable:function(o){this.focusable=this.focusable.add(o),this._on(o,{focusin:function(d){this._addClass(i(d.currentTarget),null,"ui-state-focus")},focusout:function(d){this._removeClass(i(d.currentTarget),null,"ui-state-focus")}})},_trigger:function(o,d,p){var b,S,_=this.options[o];if(p=p||{},(d=i.Event(d)).type=(o===this.widgetEventPrefix?o:this.widgetEventPrefix+o).toLowerCase(),d.target=this.element[0],S=d.originalEvent)for(b in S)b in d||(d[b]=S[b]);return this.element.trigger(d,p),!(typeof _=="function"&&_.apply(this.element[0],[d].concat(p))===!1||d.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},function(o,d){i.Widget.prototype["_"+o]=function(p,b,S){var _,O=(b=typeof b=="string"?{effect:b}:b)?b!==!0&&typeof b!="number"&&b.effect||d:o;typeof(b=b||{})=="number"?b={duration:b}:b===!0&&(b={}),_=!i.isEmptyObject(b),b.complete=S,b.delay&&p.delay(b.delay),_&&i.effects&&i.effects.effect[O]?p[o](b):O!==o&&p[O]?p[O](b.duration,b.easing,S):p.queue(function(H){i(this)[o](),S&&S.call(p[0]),H()})}});var c,g,v,w,D,T,R,M,L;i.widget;function E(o,d,p){return[parseFloat(o[0])*(M.test(o[0])?d/100:1),parseFloat(o[1])*(M.test(o[1])?p/100:1)]}function Q(o,d){return parseInt(i.css(o,d),10)||0}function lt(o){return o!=null&&o===o.window}g=Math.max,v=Math.abs,w=/left|center|right/,D=/top|center|bottom/,T=/[\+\-]\d+(\.[\d]+)?%?/,R=/^\w+/,M=/%$/,L=i.fn.position,i.position={scrollbarWidth:function(){if(c!==void 0)return c;var o,d=i("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>"),p=d.children()[0];return i("body").append(d),o=p.offsetWidth,d.css("overflow","scroll"),o===(p=p.offsetWidth)&&(p=d[0].clientWidth),d.remove(),c=o-p},getScrollInfo:function(o){var p=o.isWindow||o.isDocument?"":o.element.css("overflow-x"),d=o.isWindow||o.isDocument?"":o.element.css("overflow-y"),p=p==="scroll"||p==="auto"&&o.width<o.element[0].scrollWidth;return{width:d==="scroll"||d==="auto"&&o.height<o.element[0].scrollHeight?i.position.scrollbarWidth():0,height:p?i.position.scrollbarWidth():0}},getWithinInfo:function(o){var d=i(o||window),p=lt(d[0]),b=!!d[0]&&d[0].nodeType===9;return{element:d,isWindow:p,isDocument:b,offset:!p&&!b?i(o).offset():{left:0,top:0},scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:d.outerWidth(),height:d.outerHeight()}}},i.fn.position=function(o){if(!o||!o.of)return L.apply(this,arguments);var d,p,b,S,_,O,H=typeof(o=i.extend({},o)).of=="string"?i(document).find(o.of):i(o.of),G=i.position.getWithinInfo(o.within),nt=i.position.getScrollInfo(G),ct=(o.collision||"flip").split(" "),ut={},St=(O=(St=H)[0]).nodeType===9?{width:St.width(),height:St.height(),offset:{top:0,left:0}}:lt(O)?{width:St.width(),height:St.height(),offset:{top:St.scrollTop(),left:St.scrollLeft()}}:O.preventDefault?{width:0,height:0,offset:{top:O.pageY,left:O.pageX}}:{width:St.outerWidth(),height:St.outerHeight(),offset:St.offset()};return H[0].preventDefault&&(o.at="left top"),p=St.width,b=St.height,_=i.extend({},S=St.offset),i.each(["my","at"],function(){var ft,se,jt=(o[this]||"").split(" ");(jt=jt.length===1?w.test(jt[0])?jt.concat(["center"]):D.test(jt[0])?["center"].concat(jt):["center","center"]:jt)[0]=w.test(jt[0])?jt[0]:"center",jt[1]=D.test(jt[1])?jt[1]:"center",ft=T.exec(jt[0]),se=T.exec(jt[1]),ut[this]=[ft?ft[0]:0,se?se[0]:0],o[this]=[R.exec(jt[0])[0],R.exec(jt[1])[0]]}),ct.length===1&&(ct[1]=ct[0]),o.at[0]==="right"?_.left+=p:o.at[0]==="center"&&(_.left+=p/2),o.at[1]==="bottom"?_.top+=b:o.at[1]==="center"&&(_.top+=b/2),d=E(ut.at,p,b),_.left+=d[0],_.top+=d[1],this.each(function(){var ft,se,jt=i(this),Et=jt.outerWidth(),me=jt.outerHeight(),ve=Q(this,"marginLeft"),Be=Q(this,"marginTop"),Wi=Et+ve+Q(this,"marginRight")+nt.width,Fe=me+Be+Q(this,"marginBottom")+nt.height,je=i.extend({},_),Qe=E(ut.my,jt.outerWidth(),jt.outerHeight());o.my[0]==="right"?je.left-=Et:o.my[0]==="center"&&(je.left-=Et/2),o.my[1]==="bottom"?je.top-=me:o.my[1]==="center"&&(je.top-=me/2),je.left+=Qe[0],je.top+=Qe[1],ft={marginLeft:ve,marginTop:Be},i.each(["left","top"],function(Ai,ai){i.ui.position[ct[Ai]]&&i.ui.position[ct[Ai]][ai](je,{targetWidth:p,targetHeight:b,elemWidth:Et,elemHeight:me,collisionPosition:ft,collisionWidth:Wi,collisionHeight:Fe,offset:[d[0]+Qe[0],d[1]+Qe[1]],my:o.my,at:o.at,within:G,elem:jt})}),o.using&&(se=function(Ai){var ai=S.left-je.left,Gn=ai+p-Et,nn=S.top-je.top,Ge=nn+b-me,sn={target:{element:H,left:S.left,top:S.top,width:p,height:b},element:{element:jt,left:je.left,top:je.top,width:Et,height:me},horizontal:Gn<0?"left":0<ai?"right":"center",vertical:Ge<0?"top":0<nn?"bottom":"middle"};p<Et&&v(ai+Gn)<p&&(sn.horizontal="center"),b<me&&v(nn+Ge)<b&&(sn.vertical="middle"),g(v(ai),v(Gn))>g(v(nn),v(Ge))?sn.important="horizontal":sn.important="vertical",o.using.call(this,Ai,sn)}),jt.offset(i.extend(je,{using:se}))})},i.ui.position={fit:{left:function(o,d){var p=d.within,b=p.isWindow?p.scrollLeft:p.offset.left,S=p.width,_=o.left-d.collisionPosition.marginLeft,O=b-_,H=_+d.collisionWidth-S-b;d.collisionWidth>S?0<O&&H<=0?(p=o.left+O+d.collisionWidth-S-b,o.left+=O-p):o.left=!(0<H&&O<=0)&&H<O?b+S-d.collisionWidth:b:0<O?o.left+=O:0<H?o.left-=H:o.left=g(o.left-_,o.left)},top:function(o,d){var p=d.within,b=p.isWindow?p.scrollTop:p.offset.top,S=d.within.height,_=o.top-d.collisionPosition.marginTop,O=b-_,H=_+d.collisionHeight-S-b;d.collisionHeight>S?0<O&&H<=0?(p=o.top+O+d.collisionHeight-S-b,o.top+=O-p):o.top=!(0<H&&O<=0)&&H<O?b+S-d.collisionHeight:b:0<O?o.top+=O:0<H?o.top-=H:o.top=g(o.top-_,o.top)}},flip:{left:function(o,d){var G=d.within,p=G.offset.left+G.scrollLeft,b=G.width,S=G.isWindow?G.scrollLeft:G.offset.left,nt=o.left-d.collisionPosition.marginLeft,_=nt-S,O=nt+d.collisionWidth-b-S,H=d.my[0]==="left"?-d.elemWidth:d.my[0]==="right"?d.elemWidth:0,G=d.at[0]==="left"?d.targetWidth:d.at[0]==="right"?-d.targetWidth:0,nt=-2*d.offset[0];_<0?((p=o.left+H+G+nt+d.collisionWidth-b-p)<0||p<v(_))&&(o.left+=H+G+nt):0<O&&(0<(S=o.left-d.collisionPosition.marginLeft+H+G+nt-S)||v(S)<O)&&(o.left+=H+G+nt)},top:function(o,d){var G=d.within,p=G.offset.top+G.scrollTop,b=G.height,S=G.isWindow?G.scrollTop:G.offset.top,nt=o.top-d.collisionPosition.marginTop,_=nt-S,O=nt+d.collisionHeight-b-S,H=d.my[1]==="top"?-d.elemHeight:d.my[1]==="bottom"?d.elemHeight:0,G=d.at[1]==="top"?d.targetHeight:d.at[1]==="bottom"?-d.targetHeight:0,nt=-2*d.offset[1];_<0?((p=o.top+H+G+nt+d.collisionHeight-b-p)<0||p<v(_))&&(o.top+=H+G+nt):0<O&&(0<(S=o.top-d.collisionPosition.marginTop+H+G+nt-S)||v(S)<O)&&(o.top+=H+G+nt)}},flipfit:{left:function(){i.ui.position.flip.left.apply(this,arguments),i.ui.position.fit.left.apply(this,arguments)},top:function(){i.ui.position.flip.top.apply(this,arguments),i.ui.position.fit.top.apply(this,arguments)}}};var B;i.ui.position,i.extend(i.expr.pseudos,{data:i.expr.createPseudo?i.expr.createPseudo(function(o){return function(d){return!!i.data(d,o)}}):function(o,d,p){return!!i.data(o,p[3])}}),i.fn.extend({disableSelection:(B="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(B+".ui-disableSelection",function(o){o.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}}),i.ui.focusable=function(o,d){var p,b,S,_,O=o.nodeName.toLowerCase();return O==="area"?(b=(p=o.parentNode).name,!(!o.href||!b||p.nodeName.toLowerCase()!=="map")&&0<(b=i("img[usemap='#"+b+"']")).length&&b.is(":visible")):(/^(input|select|textarea|button|object)$/.test(O)?(S=!o.disabled)&&(_=i(o).closest("fieldset")[0])&&(S=!_.disabled):S=O==="a"&&o.href||d,S&&i(o).is(":visible")&&function(H){for(var G=H.css("visibility");G==="inherit";)H=H.parent(),G=H.css("visibility");return G==="visible"}(i(o)))},i.extend(i.expr.pseudos,{focusable:function(o){return i.ui.focusable(o,i.attr(o,"tabindex")!=null)}});var A,q;i.ui.focusable,i.fn._form=function(){return typeof this[0].form=="string"?this.closest("form"):i(this[0].form)},i.ui.formResetMixin={_formResetHandler:function(){var o=i(this);setTimeout(function(){var d=o.data("ui-form-reset-instances");i.each(d,function(){this.refresh()})})},_bindFormResetHandler:function(){var o;this.form=this.element._form(),this.form.length&&((o=this.form.data("ui-form-reset-instances")||[]).length||this.form.on("reset.ui-form-reset",this._formResetHandler),o.push(this),this.form.data("ui-form-reset-instances",o))},_unbindFormResetHandler:function(){var o;this.form.length&&((o=this.form.data("ui-form-reset-instances")).splice(i.inArray(this,o),1),o.length?this.form.data("ui-form-reset-instances",o):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset"))}},i.expr.pseudos||(i.expr.pseudos=i.expr[":"]),i.uniqueSort||(i.uniqueSort=i.unique),i.escapeSelector||(A=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,q=function(o,d){return d?o==="\0"?"":o.slice(0,-1)+"\\"+o.charCodeAt(o.length-1).toString(16)+" ":"\\"+o},i.escapeSelector=function(o){return(o+"").replace(A,q)}),i.fn.even&&i.fn.odd||i.fn.extend({even:function(){return this.filter(function(o){return o%2==0})},odd:function(){return this.filter(function(o){return o%2==1})}}),i.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},i.fn.labels=function(){var o,d,p;return this.length?this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(d=this.eq(0).parents("label"),(o=this.attr("id"))&&(p=(p=this.eq(0).parents().last()).add((p.length?p:this).siblings()),o="label[for='"+i.escapeSelector(o)+"']",d=d.add(p.find(o).addBack(o))),this.pushStack(d)):this.pushStack([])},i.fn.scrollParent=function(S){var d=this.css("position"),p=d==="absolute",b=S?/(auto|scroll|hidden)/:/(auto|scroll)/,S=this.parents().filter(function(){var _=i(this);return(!p||_.css("position")!=="static")&&b.test(_.css("overflow")+_.css("overflow-y")+_.css("overflow-x"))}).eq(0);return d!=="fixed"&&S.length?S:i(this[0].ownerDocument||document)},i.extend(i.expr.pseudos,{tabbable:function(o){var d=i.attr(o,"tabindex"),p=d!=null;return(!p||0<=d)&&i.ui.focusable(o,p)}}),i.fn.extend({uniqueId:(z=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++z)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&i(this).removeAttr("id")})}}),i.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var z,it=!1;i(document).on("mouseup",function(){it=!1}),i.widget("ui.mouse",{version:"1.13.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var o=this;this.element.on("mousedown."+this.widgetName,function(d){return o._mouseDown(d)}).on("click."+this.widgetName,function(d){if(i.data(d.target,o.widgetName+".preventClickEvent")===!0)return i.removeData(d.target,o.widgetName+".preventClickEvent"),d.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(o){if(!it){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(o),this._mouseDownEvent=o;var d=this,p=o.which===1,b=!(typeof this.options.cancel!="string"||!o.target.nodeName)&&i(o.target).closest(this.options.cancel).length;return p&&!b&&this._mouseCapture(o)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(o)!==!1,!this._mouseStarted)?(o.preventDefault(),!0):(i.data(o.target,this.widgetName+".preventClickEvent")===!0&&i.removeData(o.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(S){return d._mouseMove(S)},this._mouseUpDelegate=function(S){return d._mouseUp(S)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),o.preventDefault(),it=!0)):!0}},_mouseMove:function(o){if(this._mouseMoved){if(i.ui.ie&&(!document.documentMode||document.documentMode<9)&&!o.button)return this._mouseUp(o);if(!o.which){if(o.originalEvent.altKey||o.originalEvent.ctrlKey||o.originalEvent.metaKey||o.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(o)}}return(o.which||o.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(o),o.preventDefault()):(this._mouseDistanceMet(o)&&this._mouseDelayMet(o)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,o)!==!1,this._mouseStarted?this._mouseDrag(o):this._mouseUp(o)),!this._mouseStarted)},_mouseUp:function(o){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,o.target===this._mouseDownEvent.target&&i.data(o.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(o)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,it=!1,o.preventDefault()},_mouseDistanceMet:function(o){return Math.max(Math.abs(this._mouseDownEvent.pageX-o.pageX),Math.abs(this._mouseDownEvent.pageY-o.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),i.ui.plugin={add:function(o,d,p){var b,S=i.ui[o].prototype;for(b in p)S.plugins[b]=S.plugins[b]||[],S.plugins[b].push([d,p[b]])},call:function(o,d,p,b){var S,_=o.plugins[d];if(_&&(b||o.element[0].parentNode&&o.element[0].parentNode.nodeType!==11))for(S=0;S<_.length;S++)o.options[_[S][0]]&&_[S][1].apply(o.element,p)}},i.ui.safeActiveElement=function(o){var d;try{d=o.activeElement}catch{d=o.body}return d=(d=d||o.body).nodeName?d:o.body},i.ui.safeBlur=function(o){o&&o.nodeName.toLowerCase()!=="body"&&i(o).trigger("blur")},i.widget("ui.draggable",i.ui.mouse,{version:"1.13.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(o,d){this._super(o,d),o==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(o){var d=this.options;return!(this.helper||d.disabled||0<i(o.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(o),!!this.handle&&(this._blurActiveElement(o),this._blockFrames(d.iframeFix===!0?"iframe":d.iframeFix),!0))},_blockFrames:function(o){this.iframeBlocks=this.document.find(o).map(function(){var d=i(this);return i("<div>").css("position","absolute").appendTo(d.parent()).outerWidth(d.outerWidth()).outerHeight(d.outerHeight()).offset(d.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(o){var d=i.ui.safeActiveElement(this.document[0]);i(o.target).closest(d).length||i.ui.safeBlur(d)},_mouseStart:function(o){var d=this.options;return this.helper=this._createHelper(o),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),i.ui.ddmanager&&(i.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return i(this).css("position")==="fixed"}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(o),this.originalPosition=this.position=this._generatePosition(o,!1),this.originalPageX=o.pageX,this.originalPageY=o.pageY,d.cursorAt&&this._adjustOffsetFromHelper(d.cursorAt),this._setContainment(),this._trigger("start",o)===!1?(this._clear(),!1):(this._cacheHelperProportions(),i.ui.ddmanager&&!d.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,o),this._mouseDrag(o,!0),i.ui.ddmanager&&i.ui.ddmanager.dragStart(this,o),!0)},_refreshOffsets:function(o){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:o.pageX-this.offset.left,top:o.pageY-this.offset.top}},_mouseDrag:function(o,d){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(o,!0),this.positionAbs=this._convertPositionTo("absolute"),!d){if(d=this._uiHash(),this._trigger("drag",o,d)===!1)return this._mouseUp(new i.Event("mouseup",o)),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",i.ui.ddmanager&&i.ui.ddmanager.drag(this,o),!1},_mouseStop:function(o){var d=this,p=!1;return i.ui.ddmanager&&!this.options.dropBehaviour&&(p=i.ui.ddmanager.drop(this,o)),this.dropped&&(p=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!p||this.options.revert==="valid"&&p||this.options.revert===!0||typeof this.options.revert=="function"&&this.options.revert.call(this.element,p)?i(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",o)!==!1&&d._clear()}):this._trigger("stop",o)!==!1&&this._clear(),!1},_mouseUp:function(o){return this._unblockFrames(),i.ui.ddmanager&&i.ui.ddmanager.dragStop(this,o),this.handleElement.is(o.target)&&this.element.trigger("focus"),i.ui.mouse.prototype._mouseUp.call(this,o)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new i.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(o){return!this.options.handle||!!i(o.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var d=this.options,p=typeof d.helper=="function",b=p?i(d.helper.apply(this.element[0],[b])):d.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo(d.appendTo==="parent"?this.element[0].parentNode:d.appendTo),p&&b[0]===this.element[0]&&this._setPositionRelative(),b[0]===this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute"),b},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(o){typeof o=="string"&&(o=o.split(" ")),"left"in(o=Array.isArray(o)?{left:+o[0],top:+o[1]||0}:o)&&(this.offset.click.left=o.left+this.margins.left),"right"in o&&(this.offset.click.left=this.helperProportions.width-o.right+this.margins.left),"top"in o&&(this.offset.click.top=o.top+this.margins.top),"bottom"in o&&(this.offset.click.top=this.helperProportions.height-o.bottom+this.margins.top)},_isRootNode:function(o){return/(html|body)/i.test(o.tagName)||o===this.document[0]},_getParentOffset:function(){var o=this.offsetParent.offset(),d=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==d&&i.contains(this.scrollParent[0],this.offsetParent[0])&&(o.left+=this.scrollParent.scrollLeft(),o.top+=this.scrollParent.scrollTop()),{top:(o=this._isRootNode(this.offsetParent[0])?{top:0,left:0}:o).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:o.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var o=this.element.position(),d=this._isRootNode(this.scrollParent[0]);return{top:o.top-(parseInt(this.helper.css("top"),10)||0)+(d?0:this.scrollParent.scrollTop()),left:o.left-(parseInt(this.helper.css("left"),10)||0)+(d?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o,d,p,b=this.options,S=this.document[0];this.relativeContainer=null,b.containment?b.containment!=="window"?b.containment!=="document"?b.containment.constructor!==Array?(b.containment==="parent"&&(b.containment=this.helper[0].parentNode),(p=(d=i(b.containment))[0])&&(o=/(scroll|auto)/.test(d.css("overflow")),this.containment=[(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("paddingLeft"),10)||0),(parseInt(d.css("borderTopWidth"),10)||0)+(parseInt(d.css("paddingTop"),10)||0),(o?Math.max(p.scrollWidth,p.offsetWidth):p.offsetWidth)-(parseInt(d.css("borderRightWidth"),10)||0)-(parseInt(d.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(o?Math.max(p.scrollHeight,p.offsetHeight):p.offsetHeight)-(parseInt(d.css("borderBottomWidth"),10)||0)-(parseInt(d.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=d)):this.containment=b.containment:this.containment=[0,0,i(S).width()-this.helperProportions.width-this.margins.left,(i(S).height()||S.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[i(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,i(window).scrollLeft()+i(window).width()-this.helperProportions.width-this.margins.left,i(window).scrollTop()+(i(window).height()||S.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(b,d){d=d||this.position;var p=b==="absolute"?1:-1,b=this._isRootNode(this.scrollParent[0]);return{top:d.top+this.offset.relative.top*p+this.offset.parent.top*p-(this.cssPosition==="fixed"?-this.offset.scroll.top:b?0:this.offset.scroll.top)*p,left:d.left+this.offset.relative.left*p+this.offset.parent.left*p-(this.cssPosition==="fixed"?-this.offset.scroll.left:b?0:this.offset.scroll.left)*p}},_generatePosition:function(o,d){var p,b=this.options,S=this._isRootNode(this.scrollParent[0]),_=o.pageX,O=o.pageY;return S&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),d&&(this.containment&&(p=this.relativeContainer?(p=this.relativeContainer.offset(),[this.containment[0]+p.left,this.containment[1]+p.top,this.containment[2]+p.left,this.containment[3]+p.top]):this.containment,o.pageX-this.offset.click.left<p[0]&&(_=p[0]+this.offset.click.left),o.pageY-this.offset.click.top<p[1]&&(O=p[1]+this.offset.click.top),o.pageX-this.offset.click.left>p[2]&&(_=p[2]+this.offset.click.left),o.pageY-this.offset.click.top>p[3]&&(O=p[3]+this.offset.click.top)),b.grid&&(o=b.grid[1]?this.originalPageY+Math.round((O-this.originalPageY)/b.grid[1])*b.grid[1]:this.originalPageY,O=!p||o-this.offset.click.top>=p[1]||o-this.offset.click.top>p[3]?o:o-this.offset.click.top>=p[1]?o-b.grid[1]:o+b.grid[1],o=b.grid[0]?this.originalPageX+Math.round((_-this.originalPageX)/b.grid[0])*b.grid[0]:this.originalPageX,_=!p||o-this.offset.click.left>=p[0]||o-this.offset.click.left>p[2]?o:o-this.offset.click.left>=p[0]?o-b.grid[0]:o+b.grid[0]),b.axis==="y"&&(_=this.originalPageX),b.axis==="x"&&(O=this.originalPageY)),{top:O-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:S?0:this.offset.scroll.top),left:_-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:S?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(o,d,p){return p=p||this._uiHash(),i.ui.plugin.call(this,o,[d,p,this],!0),/^(drag|start|stop)/.test(o)&&(this.positionAbs=this._convertPositionTo("absolute"),p.offset=this.positionAbs),i.Widget.prototype._trigger.call(this,o,d,p)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),i.ui.plugin.add("draggable","connectToSortable",{start:function(o,d,p){var b=i.extend({},d,{item:p.element});p.sortables=[],i(p.options.connectToSortable).each(function(){var S=i(this).sortable("instance");S&&!S.options.disabled&&(p.sortables.push(S),S.refreshPositions(),S._trigger("activate",o,b))})},stop:function(o,d,p){var b=i.extend({},d,{item:p.element});p.cancelHelperRemoval=!1,i.each(p.sortables,function(){var S=this;S.isOver?(S.isOver=0,p.cancelHelperRemoval=!0,S.cancelHelperRemoval=!1,S._storedCSS={position:S.placeholder.css("position"),top:S.placeholder.css("top"),left:S.placeholder.css("left")},S._mouseStop(o),S.options.helper=S.options._helper):(S.cancelHelperRemoval=!0,S._trigger("deactivate",o,b))})},drag:function(o,d,p){i.each(p.sortables,function(){var b=!1,S=this;S.positionAbs=p.positionAbs,S.helperProportions=p.helperProportions,S.offset.click=p.offset.click,S._intersectsWith(S.containerCache)&&(b=!0,i.each(p.sortables,function(){return this.positionAbs=p.positionAbs,this.helperProportions=p.helperProportions,this.offset.click=p.offset.click,b=this!==S&&this._intersectsWith(this.containerCache)&&i.contains(S.element[0],this.element[0])?!1:b})),b?(S.isOver||(S.isOver=1,p._parent=d.helper.parent(),S.currentItem=d.helper.appendTo(S.element).data("ui-sortable-item",!0),S.options._helper=S.options.helper,S.options.helper=function(){return d.helper[0]},o.target=S.currentItem[0],S._mouseCapture(o,!0),S._mouseStart(o,!0,!0),S.offset.click.top=p.offset.click.top,S.offset.click.left=p.offset.click.left,S.offset.parent.left-=p.offset.parent.left-S.offset.parent.left,S.offset.parent.top-=p.offset.parent.top-S.offset.parent.top,p._trigger("toSortable",o),p.dropped=S.element,i.each(p.sortables,function(){this.refreshPositions()}),p.currentItem=p.element,S.fromOutside=p),S.currentItem&&(S._mouseDrag(o),d.position=S.position)):S.isOver&&(S.isOver=0,S.cancelHelperRemoval=!0,S.options._revert=S.options.revert,S.options.revert=!1,S._trigger("out",o,S._uiHash(S)),S._mouseStop(o,!0),S.options.revert=S.options._revert,S.options.helper=S.options._helper,S.placeholder&&S.placeholder.remove(),d.helper.appendTo(p._parent),p._refreshOffsets(o),d.position=p._generatePosition(o,!0),p._trigger("fromSortable",o),p.dropped=!1,i.each(p.sortables,function(){this.refreshPositions()}))})}}),i.ui.plugin.add("draggable","cursor",{start:function(o,d,S){var b=i("body"),S=S.options;b.css("cursor")&&(S._cursor=b.css("cursor")),b.css("cursor",S.cursor)},stop:function(o,d,p){p=p.options,p._cursor&&i("body").css("cursor",p._cursor)}}),i.ui.plugin.add("draggable","opacity",{start:function(o,d,p){d=i(d.helper),p=p.options,d.css("opacity")&&(p._opacity=d.css("opacity")),d.css("opacity",p.opacity)},stop:function(o,d,p){p=p.options,p._opacity&&i(d.helper).css("opacity",p._opacity)}}),i.ui.plugin.add("draggable","scroll",{start:function(o,d,p){p.scrollParentNotHidden||(p.scrollParentNotHidden=p.helper.scrollParent(!1)),p.scrollParentNotHidden[0]!==p.document[0]&&p.scrollParentNotHidden[0].tagName!=="HTML"&&(p.overflowOffset=p.scrollParentNotHidden.offset())},drag:function(o,d,p){var b=p.options,S=!1,_=p.scrollParentNotHidden[0],O=p.document[0];_!==O&&_.tagName!=="HTML"?(b.axis&&b.axis==="x"||(p.overflowOffset.top+_.offsetHeight-o.pageY<b.scrollSensitivity?_.scrollTop=S=_.scrollTop+b.scrollSpeed:o.pageY-p.overflowOffset.top<b.scrollSensitivity&&(_.scrollTop=S=_.scrollTop-b.scrollSpeed)),b.axis&&b.axis==="y"||(p.overflowOffset.left+_.offsetWidth-o.pageX<b.scrollSensitivity?_.scrollLeft=S=_.scrollLeft+b.scrollSpeed:o.pageX-p.overflowOffset.left<b.scrollSensitivity&&(_.scrollLeft=S=_.scrollLeft-b.scrollSpeed))):(b.axis&&b.axis==="x"||(o.pageY-i(O).scrollTop()<b.scrollSensitivity?S=i(O).scrollTop(i(O).scrollTop()-b.scrollSpeed):i(window).height()-(o.pageY-i(O).scrollTop())<b.scrollSensitivity&&(S=i(O).scrollTop(i(O).scrollTop()+b.scrollSpeed))),b.axis&&b.axis==="y"||(o.pageX-i(O).scrollLeft()<b.scrollSensitivity?S=i(O).scrollLeft(i(O).scrollLeft()-b.scrollSpeed):i(window).width()-(o.pageX-i(O).scrollLeft())<b.scrollSensitivity&&(S=i(O).scrollLeft(i(O).scrollLeft()+b.scrollSpeed)))),S!==!1&&i.ui.ddmanager&&!b.dropBehaviour&&i.ui.ddmanager.prepareOffsets(p,o)}}),i.ui.plugin.add("draggable","snap",{start:function(o,d,p){var b=p.options;p.snapElements=[],i(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var S=i(this),_=S.offset();this!==p.element[0]&&p.snapElements.push({item:this,width:S.outerWidth(),height:S.outerHeight(),top:_.top,left:_.left})})},drag:function(o,d,p){for(var b,S,_,O,H,G,nt,ct,ut,St=p.options,ft=St.snapTolerance,se=d.offset.left,jt=se+p.helperProportions.width,Et=d.offset.top,me=Et+p.helperProportions.height,ve=p.snapElements.length-1;0<=ve;ve--)G=(H=p.snapElements[ve].left-p.margins.left)+p.snapElements[ve].width,ct=(nt=p.snapElements[ve].top-p.margins.top)+p.snapElements[ve].height,jt<H-ft||G+ft<se||me<nt-ft||ct+ft<Et||!i.contains(p.snapElements[ve].item.ownerDocument,p.snapElements[ve].item)?(p.snapElements[ve].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,o,i.extend(p._uiHash(),{snapItem:p.snapElements[ve].item})),p.snapElements[ve].snapping=!1):(St.snapMode!=="inner"&&(b=Math.abs(nt-me)<=ft,S=Math.abs(ct-Et)<=ft,_=Math.abs(H-jt)<=ft,O=Math.abs(G-se)<=ft,b&&(d.position.top=p._convertPositionTo("relative",{top:nt-p.helperProportions.height,left:0}).top),S&&(d.position.top=p._convertPositionTo("relative",{top:ct,left:0}).top),_&&(d.position.left=p._convertPositionTo("relative",{top:0,left:H-p.helperProportions.width}).left),O&&(d.position.left=p._convertPositionTo("relative",{top:0,left:G}).left)),ut=b||S||_||O,St.snapMode!=="outer"&&(b=Math.abs(nt-Et)<=ft,S=Math.abs(ct-me)<=ft,_=Math.abs(H-se)<=ft,O=Math.abs(G-jt)<=ft,b&&(d.position.top=p._convertPositionTo("relative",{top:nt,left:0}).top),S&&(d.position.top=p._convertPositionTo("relative",{top:ct-p.helperProportions.height,left:0}).top),_&&(d.position.left=p._convertPositionTo("relative",{top:0,left:H}).left),O&&(d.position.left=p._convertPositionTo("relative",{top:0,left:G-p.helperProportions.width}).left)),!p.snapElements[ve].snapping&&(b||S||_||O||ut)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,o,i.extend(p._uiHash(),{snapItem:p.snapElements[ve].item})),p.snapElements[ve].snapping=b||S||_||O||ut)}}),i.ui.plugin.add("draggable","stack",{start:function(o,d,S){var b,S=S.options,S=i.makeArray(i(S.stack)).sort(function(_,O){return(parseInt(i(_).css("zIndex"),10)||0)-(parseInt(i(O).css("zIndex"),10)||0)});S.length&&(b=parseInt(i(S[0]).css("zIndex"),10)||0,i(S).each(function(_){i(this).css("zIndex",b+_)}),this.css("zIndex",b+S.length))}}),i.ui.plugin.add("draggable","zIndex",{start:function(o,d,p){d=i(d.helper),p=p.options,d.css("zIndex")&&(p._zIndex=d.css("zIndex")),d.css("zIndex",p.zIndex)},stop:function(o,d,p){p=p.options,p._zIndex&&i(d.helper).css("zIndex",p._zIndex)}}),i.ui.draggable,i.widget("ui.resizable",i.ui.mouse,{version:"1.13.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(o){return parseFloat(o)||0},_isNumber:function(o){return!isNaN(parseFloat(o))},_hasScroll:function(o,b){if(i(o).css("overflow")==="hidden")return!1;var p=b&&b==="left"?"scrollLeft":"scrollTop",b=!1;if(0<o[p])return!0;try{o[p]=1,b=0<o[p],o[p]=0}catch{}return b},_create:function(){var o,d=this.options,p=this;this._addClass("ui-resizable"),i.extend(this,{_aspectRatio:!!d.aspectRatio,aspectRatio:d.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:d.helper||d.ghost||d.animate?d.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(i("<div class='ui-wrapper'></div>").css({overflow:"hidden",position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,o={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(o),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(o),this._proportionallyResize()),this._setupHandles(),d.autoHide&&i(this.element).on("mouseenter",function(){d.disabled||(p._removeClass("ui-resizable-autohide"),p._handles.show())}).on("mouseleave",function(){d.disabled||p.resizing||(p._addClass("ui-resizable-autohide"),p._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy(),this._addedHandles.remove();function o(p){i(p).removeData("resizable").removeData("ui-resizable").off(".resizable")}var d;return this.elementIsWrapper&&(o(this.element),d=this.element,this.originalElement.css({position:d.css("position"),width:d.outerWidth(),height:d.outerHeight(),top:d.css("top"),left:d.css("left")}).insertAfter(d),d.remove()),this.originalElement.css("resize",this.originalResizeStyle),o(this.originalElement),this},_setOption:function(o,d){switch(this._super(o,d),o){case"handles":this._removeHandles(),this._setupHandles();break;case"aspectRatio":this._aspectRatio=!!d}},_setupHandles:function(){var o,d,p,b,S,_=this.options,O=this;if(this.handles=_.handles||(i(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=i(),this._addedHandles=i(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),p=this.handles.split(","),this.handles={},d=0;d<p.length;d++)b="ui-resizable-"+(o=String.prototype.trim.call(p[d])),S=i("<div>"),this._addClass(S,"ui-resizable-handle "+b),S.css({zIndex:_.zIndex}),this.handles[o]=".ui-resizable-"+o,this.element.children(this.handles[o]).length||(this.element.append(S),this._addedHandles=this._addedHandles.add(S));this._renderAxis=function(H){var G,nt,ct;for(G in H=H||this.element,this.handles)this.handles[G].constructor===String?this.handles[G]=this.element.children(this.handles[G]).first().show():(this.handles[G].jquery||this.handles[G].nodeType)&&(this.handles[G]=i(this.handles[G]),this._on(this.handles[G],{mousedown:O._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(nt=i(this.handles[G],this.element),ct=/sw|ne|nw|se|n|s/.test(G)?nt.outerHeight():nt.outerWidth(),nt=["padding",/ne|nw|n/.test(G)?"Top":/se|sw|s/.test(G)?"Bottom":/^e$/.test(G)?"Right":"Left"].join(""),H.css(nt,ct),this._proportionallyResize()),this._handles=this._handles.add(this.handles[G])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){O.resizing||(this.className&&(S=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),O.axis=S&&S[1]?S[1]:"se")}),_.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._addedHandles.remove()},_mouseCapture:function(o){var d,p,b=!1;for(d in this.handles)(p=i(this.handles[d])[0])!==o.target&&!i.contains(p,o.target)||(b=!0);return!this.options.disabled&&b},_mouseStart:function(o){var d,p,b=this.options,S=this.element;return this.resizing=!0,this._renderProxy(),d=this._num(this.helper.css("left")),p=this._num(this.helper.css("top")),b.containment&&(d+=i(b.containment).scrollLeft()||0,p+=i(b.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:p},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:S.width(),height:S.height()},this.originalSize=this._helper?{width:S.outerWidth(),height:S.outerHeight()}:{width:S.width(),height:S.height()},this.sizeDiff={width:S.outerWidth()-S.width(),height:S.outerHeight()-S.height()},this.originalPosition={left:d,top:p},this.originalMousePosition={left:o.pageX,top:o.pageY},this.aspectRatio=typeof b.aspectRatio=="number"?b.aspectRatio:this.originalSize.width/this.originalSize.height||1,b=i(".ui-resizable-"+this.axis).css("cursor"),i("body").css("cursor",b==="auto"?this.axis+"-resize":b),this._addClass("ui-resizable-resizing"),this._propagate("start",o),!0},_mouseDrag:function(o){var p=this.originalMousePosition,b=this.axis,d=o.pageX-p.left||0,p=o.pageY-p.top||0,b=this._change[b];return this._updatePrevProperties(),b&&(p=b.apply(this,[o,d,p]),this._updateVirtualBoundaries(o.shiftKey),(this._aspectRatio||o.shiftKey)&&(p=this._updateRatio(p,o)),p=this._respectSize(p,o),this._updateCache(p),this._propagate("resize",o),p=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),i.isEmptyObject(p)||(this._updatePrevProperties(),this._trigger("resize",o,this.ui()),this._applyChanges())),!1},_mouseStop:function(o){this.resizing=!1;var d,p,b,S=this.options,_=this;return this._helper&&(b=(d=(p=this._proportionallyResizeElements).length&&/textarea/i.test(p[0].nodeName))&&this._hasScroll(p[0],"left")?0:_.sizeDiff.height,p=d?0:_.sizeDiff.width,d={width:_.helper.width()-p,height:_.helper.height()-b},p=parseFloat(_.element.css("left"))+(_.position.left-_.originalPosition.left)||null,b=parseFloat(_.element.css("top"))+(_.position.top-_.originalPosition.top)||null,S.animate||this.element.css(i.extend(d,{top:b,left:p})),_.helper.height(_.size.height),_.helper.width(_.size.width),this._helper&&!S.animate&&this._proportionallyResize()),i("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",o),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var o={};return this.position.top!==this.prevPosition.top&&(o.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(o.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(o.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(o.height=this.size.height+"px"),this.helper.css(o),o},_updateVirtualBoundaries:function(o){var d,p,b=this.options,S={minWidth:this._isNumber(b.minWidth)?b.minWidth:0,maxWidth:this._isNumber(b.maxWidth)?b.maxWidth:1/0,minHeight:this._isNumber(b.minHeight)?b.minHeight:0,maxHeight:this._isNumber(b.maxHeight)?b.maxHeight:1/0};(this._aspectRatio||o)&&(d=S.minHeight*this.aspectRatio,p=S.minWidth/this.aspectRatio,b=S.maxHeight*this.aspectRatio,o=S.maxWidth/this.aspectRatio,d>S.minWidth&&(S.minWidth=d),p>S.minHeight&&(S.minHeight=p),b<S.maxWidth&&(S.maxWidth=b),o<S.maxHeight&&(S.maxHeight=o)),this._vBoundaries=S},_updateCache:function(o){this.offset=this.helper.offset(),this._isNumber(o.left)&&(this.position.left=o.left),this._isNumber(o.top)&&(this.position.top=o.top),this._isNumber(o.height)&&(this.size.height=o.height),this._isNumber(o.width)&&(this.size.width=o.width)},_updateRatio:function(o){var d=this.position,p=this.size,b=this.axis;return this._isNumber(o.height)?o.width=o.height*this.aspectRatio:this._isNumber(o.width)&&(o.height=o.width/this.aspectRatio),b==="sw"&&(o.left=d.left+(p.width-o.width),o.top=null),b==="nw"&&(o.top=d.top+(p.height-o.height),o.left=d.left+(p.width-o.width)),o},_respectSize:function(o){var d=this._vBoundaries,nt=this.axis,p=this._isNumber(o.width)&&d.maxWidth&&d.maxWidth<o.width,b=this._isNumber(o.height)&&d.maxHeight&&d.maxHeight<o.height,S=this._isNumber(o.width)&&d.minWidth&&d.minWidth>o.width,_=this._isNumber(o.height)&&d.minHeight&&d.minHeight>o.height,O=this.originalPosition.left+this.originalSize.width,H=this.originalPosition.top+this.originalSize.height,G=/sw|nw|w/.test(nt),nt=/nw|ne|n/.test(nt);return S&&(o.width=d.minWidth),_&&(o.height=d.minHeight),p&&(o.width=d.maxWidth),b&&(o.height=d.maxHeight),S&&G&&(o.left=O-d.minWidth),p&&G&&(o.left=O-d.maxWidth),_&&nt&&(o.top=H-d.minHeight),b&&nt&&(o.top=H-d.maxHeight),o.width||o.height||o.left||!o.top?o.width||o.height||o.top||!o.left||(o.left=null):o.top=null,o},_getPaddingPlusBorderDimensions:function(o){for(var d=0,p=[],b=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],S=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")];d<4;d++)p[d]=parseFloat(b[d])||0,p[d]+=parseFloat(S[d])||0;return{height:p[0]+p[2],width:p[1]+p[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var o,d=0,p=this.helper||this.element;d<this._proportionallyResizeElements.length;d++)o=this._proportionallyResizeElements[d],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(o)),o.css({height:p.height()-this.outerDimensions.height||0,width:p.width()-this.outerDimensions.width||0})},_renderProxy:function(){var o=this.element,d=this.options;this.elementOffset=o.offset(),this._helper?(this.helper=this.helper||i("<div></div>").css({overflow:"hidden"}),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++d.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(o,d){return{width:this.originalSize.width+d}},w:function(o,d){var p=this.originalSize;return{left:this.originalPosition.left+d,width:p.width-d}},n:function(o,d,p){var b=this.originalSize;return{top:this.originalPosition.top+p,height:b.height-p}},s:function(o,d,p){return{height:this.originalSize.height+p}},se:function(o,d,p){return i.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[o,d,p]))},sw:function(o,d,p){return i.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[o,d,p]))},ne:function(o,d,p){return i.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[o,d,p]))},nw:function(o,d,p){return i.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[o,d,p]))}},_propagate:function(o,d){i.ui.plugin.call(this,o,[d,this.ui()]),o!=="resize"&&this._trigger(o,d,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),i.ui.plugin.add("resizable","animate",{stop:function(o){var d=i(this).resizable("instance"),p=d.options,b=d._proportionallyResizeElements,S=b.length&&/textarea/i.test(b[0].nodeName),O=S&&d._hasScroll(b[0],"left")?0:d.sizeDiff.height,_=S?0:d.sizeDiff.width,S={width:d.size.width-_,height:d.size.height-O},_=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,O=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null;d.element.animate(i.extend(S,O&&_?{top:O,left:_}:{}),{duration:p.animateDuration,easing:p.animateEasing,step:function(){var H={width:parseFloat(d.element.css("width")),height:parseFloat(d.element.css("height")),top:parseFloat(d.element.css("top")),left:parseFloat(d.element.css("left"))};b&&b.length&&i(b[0]).css({width:H.width,height:H.height}),d._updateCache(H),d._propagate("resize",o)}})}}),i.ui.plugin.add("resizable","containment",{start:function(){var o,d,p=i(this).resizable("instance"),b=p.options,S=p.element,_=b.containment,O=_ instanceof i?_.get(0):/parent/.test(_)?S.parent().get(0):_;O&&(p.containerElement=i(O),/document/.test(_)||_===document?(p.containerOffset={left:0,top:0},p.containerPosition={left:0,top:0},p.parentData={element:i(document),left:0,top:0,width:i(document).width(),height:i(document).height()||document.body.parentNode.scrollHeight}):(o=i(O),d=[],i(["Top","Right","Left","Bottom"]).each(function(H,G){d[H]=p._num(o.css("padding"+G))}),p.containerOffset=o.offset(),p.containerPosition=o.position(),p.containerSize={height:o.innerHeight()-d[3],width:o.innerWidth()-d[1]},b=p.containerOffset,S=p.containerSize.height,_=p.containerSize.width,_=p._hasScroll(O,"left")?O.scrollWidth:_,S=p._hasScroll(O)?O.scrollHeight:S,p.parentData={element:O,left:b.left,top:b.top,width:_,height:S}))},resize:function(G){var d=i(this).resizable("instance"),p=d.options,b=d.containerOffset,S=d.position,_=d._aspectRatio||G.shiftKey,O={top:0,left:0},H=d.containerElement,G=!0;H[0]!==document&&/static/.test(H.css("position"))&&(O=b),S.left<(d._helper?b.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-b.left:d.position.left-O.left),_&&(d.size.height=d.size.width/d.aspectRatio,G=!1),d.position.left=p.helper?b.left:0),S.top<(d._helper?b.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-b.top:d.position.top),_&&(d.size.width=d.size.height*d.aspectRatio,G=!1),d.position.top=d._helper?b.top:0),p=d.containerElement.get(0)===d.element.parent().get(0),S=/relative|absolute/.test(d.containerElement.css("position")),p&&S?(d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top):(d.offset.left=d.element.offset().left,d.offset.top=d.element.offset().top),S=Math.abs(d.sizeDiff.width+(d._helper?d.offset.left-O.left:d.offset.left-b.left)),b=Math.abs(d.sizeDiff.height+(d._helper?d.offset.top-O.top:d.offset.top-b.top)),S+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-S,_&&(d.size.height=d.size.width/d.aspectRatio,G=!1)),b+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-b,_&&(d.size.width=d.size.height*d.aspectRatio,G=!1)),G||(d.position.left=d.prevPosition.left,d.position.top=d.prevPosition.top,d.size.width=d.prevSize.width,d.size.height=d.prevSize.height)},stop:function(){var o=i(this).resizable("instance"),d=o.options,p=o.containerOffset,b=o.containerPosition,S=o.containerElement,H=i(o.helper),_=H.offset(),O=H.outerWidth()-o.sizeDiff.width,H=H.outerHeight()-o.sizeDiff.height;o._helper&&!d.animate&&/relative/.test(S.css("position"))&&i(this).css({left:_.left-b.left-p.left,width:O,height:H}),o._helper&&!d.animate&&/static/.test(S.css("position"))&&i(this).css({left:_.left-b.left-p.left,width:O,height:H})}}),i.ui.plugin.add("resizable","alsoResize",{start:function(){var o=i(this).resizable("instance").options;i(o.alsoResize).each(function(){var d=i(this);d.data("ui-resizable-alsoresize",{width:parseFloat(d.width()),height:parseFloat(d.height()),left:parseFloat(d.css("left")),top:parseFloat(d.css("top"))})})},resize:function(o,d){var p=i(this).resizable("instance"),b=p.options,S=p.originalSize,_=p.originalPosition,O={height:p.size.height-S.height||0,width:p.size.width-S.width||0,top:p.position.top-_.top||0,left:p.position.left-_.left||0};i(b.alsoResize).each(function(){var H=i(this),G=i(this).data("ui-resizable-alsoresize"),nt={},ct=H.parents(d.originalElement[0]).length?["width","height"]:["width","height","top","left"];i.each(ct,function(ut,St){var ft=(G[St]||0)+(O[St]||0);ft&&0<=ft&&(nt[St]=ft||null)}),H.css(nt)})},stop:function(){i(this).removeData("ui-resizable-alsoresize")}}),i.ui.plugin.add("resizable","ghost",{start:function(){var o=i(this).resizable("instance"),d=o.size;o.ghost=o.originalElement.clone(),o.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}),o._addClass(o.ghost,"ui-resizable-ghost"),i.uiBackCompat!==!1&&typeof o.options.ghost=="string"&&o.ghost.addClass(this.options.ghost),o.ghost.appendTo(o.helper)},resize:function(){var o=i(this).resizable("instance");o.ghost&&o.ghost.css({position:"relative",height:o.size.height,width:o.size.width})},stop:function(){var o=i(this).resizable("instance");o.ghost&&o.helper&&o.helper.get(0).removeChild(o.ghost.get(0))}}),i.ui.plugin.add("resizable","grid",{resize:function(){var o,d=i(this).resizable("instance"),p=d.options,Et=d.size,b=d.originalSize,S=d.originalPosition,_=d.axis,O=typeof p.grid=="number"?[p.grid,p.grid]:p.grid,H=O[0]||1,G=O[1]||1,nt=Math.round((Et.width-b.width)/H)*H,ct=Math.round((Et.height-b.height)/G)*G,ut=b.width+nt,St=b.height+ct,ft=p.maxWidth&&p.maxWidth<ut,se=p.maxHeight&&p.maxHeight<St,jt=p.minWidth&&p.minWidth>ut,Et=p.minHeight&&p.minHeight>St;p.grid=O,jt&&(ut+=H),Et&&(St+=G),ft&&(ut-=H),se&&(St-=G),/^(se|s|e)$/.test(_)?(d.size.width=ut,d.size.height=St):/^(ne)$/.test(_)?(d.size.width=ut,d.size.height=St,d.position.top=S.top-ct):/^(sw)$/.test(_)?(d.size.width=ut,d.size.height=St,d.position.left=S.left-nt):((St-G<=0||ut-H<=0)&&(o=d._getPaddingPlusBorderDimensions(this)),0<St-G?(d.size.height=St,d.position.top=S.top-ct):(St=G-o.height,d.size.height=St,d.position.top=S.top+b.height-St),0<ut-H?(d.size.width=ut,d.position.left=S.left-nt):(ut=H-o.width,d.size.width=ut,d.position.left=S.left+b.width-ut))}}),i.ui.resizable,i.widget("ui.sortable",i.ui.mouse,{version:"1.13.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(o,d,p){return d<=o&&o<d+p},_isFloating:function(o){return/left|right/.test(o.css("float"))||/inline|table-cell/.test(o.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(o,d){this._super(o,d),o==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var o=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),i.each(this.items,function(){o._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var o=this.items.length-1;0<=o;o--)this.items[o].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(o,d){var p=null,b=!1,S=this;return!this.reverting&&!this.options.disabled&&this.options.type!=="static"&&(this._refreshItems(o),i(o.target).parents().each(function(){if(i.data(this,S.widgetName+"-item")===S)return p=i(this),!1}),!!(p=i.data(o.target,S.widgetName+"-item")===S?i(o.target):p)&&!(this.options.handle&&!d&&(i(this.options.handle,p).find("*").addBack().each(function(){this===o.target&&(b=!0)}),!b))&&(this.currentItem=p,this._removeCurrentsFromItems(),!0))},_mouseStart:function(o,d,p){var b,S,_=this.options;if((this.currentContainer=this).refreshPositions(),this.appendTo=i(_.appendTo!=="parent"?_.appendTo:this.currentItem.parent()),this.helper=this._createHelper(o),this._cacheHelperProportions(),this._cacheMargins(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},i.extend(this.offset,{click:{left:o.pageX-this.offset.left,top:o.pageY-this.offset.top},relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),_.cursorAt&&this._adjustOffsetFromHelper(_.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),this.scrollParent=this.placeholder.scrollParent(),i.extend(this.offset,{parent:this._getParentOffset()}),_.containment&&this._setContainment(),_.cursor&&_.cursor!=="auto"&&(S=this.document.find("body"),this.storedCursor=S.css("cursor"),S.css("cursor",_.cursor),this.storedStylesheet=i("<style>*{ cursor: "+_.cursor+" !important; }</style>").appendTo(S)),_.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",_.zIndex)),_.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",_.opacity)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",o,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!p)for(b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("activate",o,this._uiHash(this));return i.ui.ddmanager&&(i.ui.ddmanager.current=this),i.ui.ddmanager&&!_.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,o),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this.helper.parent().is(this.appendTo)||(this.helper.detach().appendTo(this.appendTo),this.offset.parent=this._getParentOffset()),this.position=this.originalPosition=this._generatePosition(o),this.originalPageX=o.pageX,this.originalPageY=o.pageY,this.lastPositionAbs=this.positionAbs=this._convertPositionTo("absolute"),this._mouseDrag(o),!0},_scroll:function(o){var d=this.options,p=!1;return this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-o.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop+d.scrollSpeed:o.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=p=this.scrollParent[0].scrollTop-d.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-o.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft+d.scrollSpeed:o.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=p=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(o.pageY-this.document.scrollTop()<d.scrollSensitivity?p=this.document.scrollTop(this.document.scrollTop()-d.scrollSpeed):this.window.height()-(o.pageY-this.document.scrollTop())<d.scrollSensitivity&&(p=this.document.scrollTop(this.document.scrollTop()+d.scrollSpeed)),o.pageX-this.document.scrollLeft()<d.scrollSensitivity?p=this.document.scrollLeft(this.document.scrollLeft()-d.scrollSpeed):this.window.width()-(o.pageX-this.document.scrollLeft())<d.scrollSensitivity&&(p=this.document.scrollLeft(this.document.scrollLeft()+d.scrollSpeed))),p},_mouseDrag:function(o){var d,p,b,S,_=this.options;for(this.position=this._generatePosition(o),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),_.scroll&&this._scroll(o)!==!1&&(this._refreshItemPositions(!0),i.ui.ddmanager&&!_.dropBehaviour&&i.ui.ddmanager.prepareOffsets(this,o)),this.dragDirection={vertical:this._getDragVerticalDirection(),horizontal:this._getDragHorizontalDirection()},d=this.items.length-1;0<=d;d--)if(b=(p=this.items[d]).item[0],(S=this._intersectsWithPointer(p))&&p.instance===this.currentContainer&&!(b===this.currentItem[0]||this.placeholder[S===1?"next":"prev"]()[0]===b||i.contains(this.placeholder[0],b)||this.options.type==="semi-dynamic"&&i.contains(this.element[0],b))){if(this.direction=S===1?"down":"up",this.options.tolerance!=="pointer"&&!this._intersectsWithSides(p))break;this._rearrange(o,p),this._trigger("change",o,this._uiHash());break}return this._contactContainers(o),i.ui.ddmanager&&i.ui.ddmanager.drag(this,o),this._trigger("sort",o,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(o,d){var p,b,S,_;if(o)return i.ui.ddmanager&&!this.options.dropBehaviour&&i.ui.ddmanager.drop(this,o),this.options.revert?(b=(p=this).placeholder.offset(),_={},(S=this.options.axis)&&S!=="x"||(_.left=b.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),S&&S!=="y"||(_.top=b.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,i(this.helper).animate(_,parseInt(this.options.revert,10)||500,function(){p._clear(o)})):this._clear(o,d),!1},cancel:function(){if(this.dragging){this._mouseUp(new i.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var o=this.containers.length-1;0<=o;o--)this.containers[o]._trigger("deactivate",null,this._uiHash(this)),this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",null,this._uiHash(this)),this.containers[o].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),i.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?i(this.domPosition.prev).after(this.currentItem):i(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var d=this._getItemsAsjQuery(o&&o.connected),p=[];return o=o||{},i(d).each(function(){var b=(i(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);b&&p.push((o.key||b[1]+"[]")+"="+(o.key&&o.expression?b[1]:b[2]))}),!p.length&&o.key&&p.push(o.key+"="),p.join("&")},toArray:function(o){var d=this._getItemsAsjQuery(o&&o.connected),p=[];return o=o||{},d.each(function(){p.push(i(o.item||this).attr(o.attribute||"id")||"")}),p},_intersectsWith:function(o){var d=this.positionAbs.left,p=d+this.helperProportions.width,b=this.positionAbs.top,S=b+this.helperProportions.height,_=o.left,O=_+o.width,H=o.top,G=H+o.height,nt=this.offset.click.top,ct=this.offset.click.left,nt=this.options.axis==="x"||H<b+nt&&b+nt<G,ct=this.options.axis==="y"||_<d+ct&&d+ct<O;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>o[this.floating?"width":"height"]?nt&&ct:_<d+this.helperProportions.width/2&&p-this.helperProportions.width/2<O&&H<b+this.helperProportions.height/2&&S-this.helperProportions.height/2<G},_intersectsWithPointer:function(p){var d=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,p.top,p.height),p=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,p.left,p.width);return!(!d||!p)&&(d=this.dragDirection.vertical,p=this.dragDirection.horizontal,this.floating?p==="right"||d==="down"?2:1:d&&(d==="down"?2:1))},_intersectsWithSides:function(S){var d=this._isOverAxis(this.positionAbs.top+this.offset.click.top,S.top+S.height/2,S.height),p=this._isOverAxis(this.positionAbs.left+this.offset.click.left,S.left+S.width/2,S.width),b=this.dragDirection.vertical,S=this.dragDirection.horizontal;return this.floating&&S?S==="right"&&p||S==="left"&&!p:b&&(b==="down"&&d||b==="up"&&!d)},_getDragVerticalDirection:function(){var o=this.positionAbs.top-this.lastPositionAbs.top;return o!=0&&(0<o?"down":"up")},_getDragHorizontalDirection:function(){var o=this.positionAbs.left-this.lastPositionAbs.left;return o!=0&&(0<o?"right":"left")},refresh:function(o){return this._refreshItems(o),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var o=this.options;return o.connectWith.constructor===String?[o.connectWith]:o.connectWith},_getItemsAsjQuery:function(o){var d,p,b,S,_=[],O=[],H=this._connectWith();if(H&&o)for(d=H.length-1;0<=d;d--)for(p=(b=i(H[d],this.document[0])).length-1;0<=p;p--)(S=i.data(b[p],this.widgetFullName))&&S!==this&&!S.options.disabled&&O.push([typeof S.options.items=="function"?S.options.items.call(S.element):i(S.options.items,S.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),S]);function G(){_.push(this)}for(O.push([typeof this.options.items=="function"?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):i(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=O.length-1;0<=d;d--)O[d][0].each(G);return i(_)},_removeCurrentsFromItems:function(){var o=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=i.grep(this.items,function(d){for(var p=0;p<o.length;p++)if(o[p]===d.item[0])return!1;return!0})},_refreshItems:function(o){this.items=[],this.containers=[this];var d,p,b,S,_,O,H,G,nt=this.items,ct=[[typeof this.options.items=="function"?this.options.items.call(this.element[0],o,{item:this.currentItem}):i(this.options.items,this.element),this]],ut=this._connectWith();if(ut&&this.ready)for(d=ut.length-1;0<=d;d--)for(p=(b=i(ut[d],this.document[0])).length-1;0<=p;p--)(S=i.data(b[p],this.widgetFullName))&&S!==this&&!S.options.disabled&&(ct.push([typeof S.options.items=="function"?S.options.items.call(S.element[0],o,{item:this.currentItem}):i(S.options.items,S.element),S]),this.containers.push(S));for(d=ct.length-1;0<=d;d--)for(_=ct[d][1],G=(O=ct[d][p=0]).length;p<G;p++)(H=i(O[p])).data(this.widgetName+"-item",_),nt.push({item:H,instance:_,width:0,height:0,left:0,top:0})},_refreshItemPositions:function(o){for(var d,p,b=this.items.length-1;0<=b;b--)d=this.items[b],this.currentContainer&&d.instance!==this.currentContainer&&d.item[0]!==this.currentItem[0]||(p=this.options.toleranceElement?i(this.options.toleranceElement,d.item):d.item,o||(d.width=p.outerWidth(),d.height=p.outerHeight()),p=p.offset(),d.left=p.left,d.top=p.top)},refreshPositions:function(o){var d,p;if(this.floating=!!this.items.length&&(this.options.axis==="x"||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),this._refreshItemPositions(o),this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(d=this.containers.length-1;0<=d;d--)p=this.containers[d].element.offset(),this.containers[d].containerCache.left=p.left,this.containers[d].containerCache.top=p.top,this.containers[d].containerCache.width=this.containers[d].element.outerWidth(),this.containers[d].containerCache.height=this.containers[d].element.outerHeight();return this},_createPlaceholder:function(o){var d,p,b=(o=o||this).options;b.placeholder&&b.placeholder.constructor!==String||(d=b.placeholder,p=o.currentItem[0].nodeName.toLowerCase(),b.placeholder={element:function(){var S=i("<"+p+">",o.document[0]);return o._addClass(S,"ui-sortable-placeholder",d||o.currentItem[0].className)._removeClass(S,"ui-sortable-helper"),p==="tbody"?o._createTrPlaceholder(o.currentItem.find("tr").eq(0),i("<tr>",o.document[0]).appendTo(S)):p==="tr"?o._createTrPlaceholder(o.currentItem,S):p==="img"&&S.attr("src",o.currentItem.attr("src")),d||S.css("visibility","hidden"),S},update:function(S,_){d&&!b.forcePlaceholderSize||(_.height()&&(!b.forcePlaceholderSize||p!=="tbody"&&p!=="tr")||_.height(o.currentItem.innerHeight()-parseInt(o.currentItem.css("paddingTop")||0,10)-parseInt(o.currentItem.css("paddingBottom")||0,10)),_.width()||_.width(o.currentItem.innerWidth()-parseInt(o.currentItem.css("paddingLeft")||0,10)-parseInt(o.currentItem.css("paddingRight")||0,10)))}}),o.placeholder=i(b.placeholder.element.call(o.element,o.currentItem)),o.currentItem.after(o.placeholder),b.placeholder.update(o,o.placeholder)},_createTrPlaceholder:function(o,d){var p=this;o.children().each(function(){i("<td>&#160;</td>",p.document[0]).attr("colspan",i(this).attr("colspan")||1).appendTo(d)})},_contactContainers:function(o){for(var d,p,b,S,_,O,H,G,nt,ct=null,ut=null,St=this.containers.length-1;0<=St;St--)i.contains(this.currentItem[0],this.containers[St].element[0])||(this._intersectsWith(this.containers[St].containerCache)?ct&&i.contains(this.containers[St].element[0],ct.element[0])||(ct=this.containers[St],ut=St):this.containers[St].containerCache.over&&(this.containers[St]._trigger("out",o,this._uiHash(this)),this.containers[St].containerCache.over=0));if(ct)if(this.containers.length===1)this.containers[ut].containerCache.over||(this.containers[ut]._trigger("over",o,this._uiHash(this)),this.containers[ut].containerCache.over=1);else{for(p=1e4,b=null,S=(G=ct.floating||this._isFloating(this.currentItem))?"left":"top",_=G?"width":"height",nt=G?"pageX":"pageY",d=this.items.length-1;0<=d;d--)i.contains(this.containers[ut].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(O=this.items[d].item.offset()[S],H=!1,o[nt]-O>this.items[d][_]/2&&(H=!0),Math.abs(o[nt]-O)<p&&(p=Math.abs(o[nt]-O),b=this.items[d],this.direction=H?"up":"down"));(b||this.options.dropOnEmpty)&&(this.currentContainer!==this.containers[ut]?(b?this._rearrange(o,b,null,!0):this._rearrange(o,null,this.containers[ut].element,!0),this._trigger("change",o,this._uiHash()),this.containers[ut]._trigger("change",o,this._uiHash(this)),this.currentContainer=this.containers[ut],this.options.placeholder.update(this.currentContainer,this.placeholder),this.scrollParent=this.placeholder.scrollParent(),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this.containers[ut]._trigger("over",o,this._uiHash(this)),this.containers[ut].containerCache.over=1):this.currentContainer.containerCache.over||(this.containers[ut]._trigger("over",o,this._uiHash()),this.currentContainer.containerCache.over=1))}},_createHelper:function(p){var d=this.options,p=typeof d.helper=="function"?i(d.helper.apply(this.element[0],[p,this.currentItem])):d.helper==="clone"?this.currentItem.clone():this.currentItem;return p.parents("body").length||this.appendTo[0].appendChild(p[0]),p[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),p[0].style.width&&!d.forceHelperSize||p.width(this.currentItem.width()),p[0].style.height&&!d.forceHelperSize||p.height(this.currentItem.height()),p},_adjustOffsetFromHelper:function(o){typeof o=="string"&&(o=o.split(" ")),"left"in(o=Array.isArray(o)?{left:+o[0],top:+o[1]||0}:o)&&(this.offset.click.left=o.left+this.margins.left),"right"in o&&(this.offset.click.left=this.helperProportions.width-o.right+this.margins.left),"top"in o&&(this.offset.click.top=o.top+this.margins.top),"bottom"in o&&(this.offset.click.top=this.helperProportions.height-o.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var o=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&i.contains(this.scrollParent[0],this.offsetParent[0])&&(o.left+=this.scrollParent.scrollLeft(),o.top+=this.scrollParent.scrollTop()),{top:(o=this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&i.ui.ie?{top:0,left:0}:o).top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:o.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var o=this.currentItem.position();return{top:o.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:o.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o,d,p=this.options;p.containment==="parent"&&(p.containment=this.helper[0].parentNode),p.containment!=="document"&&p.containment!=="window"||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,p.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(p.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(p.containment)||(o=i(p.containment)[0],d=i(p.containment).offset(),p=i(o).css("overflow")!=="hidden",this.containment=[d.left+(parseInt(i(o).css("borderLeftWidth"),10)||0)+(parseInt(i(o).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(i(o).css("borderTopWidth"),10)||0)+(parseInt(i(o).css("paddingTop"),10)||0)-this.margins.top,d.left+(p?Math.max(o.scrollWidth,o.offsetWidth):o.offsetWidth)-(parseInt(i(o).css("borderLeftWidth"),10)||0)-(parseInt(i(o).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(p?Math.max(o.scrollHeight,o.offsetHeight):o.offsetHeight)-(parseInt(i(o).css("borderTopWidth"),10)||0)-(parseInt(i(o).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(S,d){d=d||this.position;var p=S==="absolute"?1:-1,b=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&i.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,S=/(html|body)/i.test(b[0].tagName);return{top:d.top+this.offset.relative.top*p+this.offset.parent.top*p-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():S?0:b.scrollTop())*p,left:d.left+this.offset.relative.left*p+this.offset.parent.left*p-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():S?0:b.scrollLeft())*p}},_generatePosition:function(o){var d=this.options,p=o.pageX,b=o.pageY,S=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&i.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,_=/(html|body)/i.test(S[0].tagName);return this.cssPosition!=="relative"||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(o.pageX-this.offset.click.left<this.containment[0]&&(p=this.containment[0]+this.offset.click.left),o.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),o.pageX-this.offset.click.left>this.containment[2]&&(p=this.containment[2]+this.offset.click.left),o.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top)),d.grid&&(o=this.originalPageY+Math.round((b-this.originalPageY)/d.grid[1])*d.grid[1],b=!this.containment||o-this.offset.click.top>=this.containment[1]&&o-this.offset.click.top<=this.containment[3]?o:o-this.offset.click.top>=this.containment[1]?o-d.grid[1]:o+d.grid[1],o=this.originalPageX+Math.round((p-this.originalPageX)/d.grid[0])*d.grid[0],p=!this.containment||o-this.offset.click.left>=this.containment[0]&&o-this.offset.click.left<=this.containment[2]?o:o-this.offset.click.left>=this.containment[0]?o-d.grid[0]:o+d.grid[0])),{top:b-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():_?0:S.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():_?0:S.scrollLeft())}},_rearrange:function(o,d,p,b){p?p[0].appendChild(this.placeholder[0]):d.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?d.item[0]:d.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var S=this.counter;this._delay(function(){S===this.counter&&this.refreshPositions(!b)})},_clear:function(o,d){this.reverting=!1;var p,b=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(p in this._storedCSS)this._storedCSS[p]!=="auto"&&this._storedCSS[p]!=="static"||(this._storedCSS[p]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function S(_,O,H){return function(G){H._trigger(_,G,O._uiHash(O))}}for(this.fromOutside&&!d&&b.push(function(_){this._trigger("receive",_,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||d||b.push(function(_){this._trigger("update",_,this._uiHash())}),this!==this.currentContainer&&(d||(b.push(function(_){this._trigger("remove",_,this._uiHash())}),b.push(function(_){return function(O){_._trigger("receive",O,this._uiHash(this))}}.call(this,this.currentContainer)),b.push(function(_){return function(O){_._trigger("update",O,this._uiHash(this))}}.call(this,this.currentContainer)))),p=this.containers.length-1;0<=p;p--)d||b.push(S("deactivate",this,this.containers[p])),this.containers[p].containerCache.over&&(b.push(S("out",this,this.containers[p])),this.containers[p].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,d||this._trigger("beforeStop",o,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!d){for(p=0;p<b.length;p++)b[p].call(this,o);this._trigger("stop",o,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){i.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(o){var d=o||this;return{helper:d.helper,placeholder:d.placeholder||i([]),position:d.position,originalPosition:d.originalPosition,offset:d.positionAbs,item:d.currentItem,sender:o?o.element:null}}}),i.widget("ui.accordion",{version:"1.13.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:function(o){return o.find("> li > :first-child").add(o.find("> :not(li)").even())},heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var o=this.options;this.prevShow=this.prevHide=i(),this._addClass("ui-accordion","ui-widget ui-helper-reset"),this.element.attr("role","tablist"),o.collapsible||o.active!==!1&&o.active!=null||(o.active=0),this._processPanels(),o.active<0&&(o.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():i()}},_createIcons:function(){var o,d=this.options.icons;d&&(o=i("<span>"),this._addClass(o,"ui-accordion-header-icon","ui-icon "+d.header),o.prependTo(this.headers),o=this.active.children(".ui-accordion-header-icon"),this._removeClass(o,d.header)._addClass(o,null,d.activeHeader)._addClass(this.headers,"ui-accordion-icons"))},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons"),this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){var o;this.element.removeAttr("role"),this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId(),this._destroyIcons(),o=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId(),this.options.heightStyle!=="content"&&o.css("height","")},_setOption:function(o,d){o!=="active"?(o==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(d)),this._super(o,d),o!=="collapsible"||d||this.options.active!==!1||this._activate(0),o==="icons"&&(this._destroyIcons(),d&&this._createIcons())):this._activate(d)},_setOptionDisabled:function(o){this._super(o),this.element.attr("aria-disabled",o),this._toggleClass(null,"ui-state-disabled",!!o),this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",!!o)},_keydown:function(o){if(!o.altKey&&!o.ctrlKey){var d=i.ui.keyCode,p=this.headers.length,b=this.headers.index(o.target),S=!1;switch(o.keyCode){case d.RIGHT:case d.DOWN:S=this.headers[(b+1)%p];break;case d.LEFT:case d.UP:S=this.headers[(b-1+p)%p];break;case d.SPACE:case d.ENTER:this._eventHandler(o);break;case d.HOME:S=this.headers[0];break;case d.END:S=this.headers[p-1]}S&&(i(o.target).attr("tabIndex",-1),i(S).attr("tabIndex",0),i(S).trigger("focus"),o.preventDefault())}},_panelKeyDown:function(o){o.keyCode===i.ui.keyCode.UP&&o.ctrlKey&&i(o.currentTarget).prev().trigger("focus")},refresh:function(){var o=this.options;this._processPanels(),o.active===!1&&o.collapsible===!0||!this.headers.length?(o.active=!1,this.active=i()):o.active===!1?this._activate(0):this.active.length&&!i.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(o.active=!1,this.active=i()):this._activate(Math.max(0,o.active-1)):o.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){var o=this.headers,d=this.panels;typeof this.options.header=="function"?this.headers=this.options.header(this.element):this.headers=this.element.find(this.options.header),this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default"),this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide(),this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content"),d&&(this._off(o.not(this.headers)),this._off(d.not(this.panels)))},_refresh:function(){var o,d=this.options,p=d.heightStyle,b=this.element.parent();this.active=this._findActive(d.active),this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed"),this._addClass(this.active.next(),"ui-accordion-content-active"),this.active.next().show(),this.headers.attr("role","tab").each(function(){var S=i(this),_=S.uniqueId().attr("id"),O=S.next(),H=O.uniqueId().attr("id");S.attr("aria-controls",H),O.attr("aria-labelledby",_)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),p==="fill"?(o=b.height(),this.element.siblings(":visible").each(function(){var S=i(this),_=S.css("position");_!=="absolute"&&_!=="fixed"&&(o-=S.outerHeight(!0))}),this.headers.each(function(){o-=i(this).outerHeight(!0)}),this.headers.next().each(function(){i(this).height(Math.max(0,o-i(this).innerHeight()+i(this).height()))}).css("overflow","auto")):p==="auto"&&(o=0,this.headers.next().each(function(){var S=i(this).is(":visible");S||i(this).show(),o=Math.max(o,i(this).css("height","").height()),S||i(this).hide()}).height(o))},_activate:function(o){o=this._findActive(o)[0],o!==this.active[0]&&(o=o||this.active[0],this._eventHandler({target:o,currentTarget:o,preventDefault:i.noop}))},_findActive:function(o){return typeof o=="number"?this.headers.eq(o):i()},_setupEvents:function(o){var d={keydown:"_keydown"};o&&i.each(o.split(" "),function(p,b){d[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,d),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(o){var d=this.options,p=this.active,b=i(o.currentTarget),S=b[0]===p[0],_=S&&d.collapsible,H=_?i():b.next(),O=p.next(),H={oldHeader:p,oldPanel:O,newHeader:_?i():b,newPanel:H};o.preventDefault(),S&&!d.collapsible||this._trigger("beforeActivate",o,H)===!1||(d.active=!_&&this.headers.index(b),this.active=S?i():b,this._toggle(H),this._removeClass(p,"ui-accordion-header-active","ui-state-active"),d.icons&&(p=p.children(".ui-accordion-header-icon"),this._removeClass(p,null,d.icons.activeHeader)._addClass(p,null,d.icons.header)),S||(this._removeClass(b,"ui-accordion-header-collapsed")._addClass(b,"ui-accordion-header-active","ui-state-active"),d.icons&&(S=b.children(".ui-accordion-header-icon"),this._removeClass(S,null,d.icons.header)._addClass(S,null,d.icons.activeHeader)),this._addClass(b.next(),"ui-accordion-content-active")))},_toggle:function(o){var d=o.newPanel,p=this.prevShow.length?this.prevShow:o.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=d,this.prevHide=p,this.options.animate?this._animate(d,p,o):(p.hide(),d.show(),this._toggleComplete(o)),p.attr({"aria-hidden":"true"}),p.prev().attr({"aria-selected":"false","aria-expanded":"false"}),d.length&&p.length?p.prev().attr({tabIndex:-1,"aria-expanded":"false"}):d.length&&this.headers.filter(function(){return parseInt(i(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1),d.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(o,d,p){var b,S,_,O=this,H=0,G=o.css("box-sizing"),ut=o.length&&(!d.length||o.index()<d.index()),nt=this.options.animate||{},ct=ut&&nt.down||nt,ut=function(){O._toggleComplete(p)};return S=(S=typeof ct=="string"?ct:S)||ct.easing||nt.easing,_=(_=typeof ct=="number"?ct:_)||ct.duration||nt.duration,d.length?o.length?(b=o.show().outerHeight(),d.animate(this.hideProps,{duration:_,easing:S,step:function(St,ft){ft.now=Math.round(St)}}),void o.hide().animate(this.showProps,{duration:_,easing:S,complete:ut,step:function(St,ft){ft.now=Math.round(St),ft.prop!=="height"?G==="content-box"&&(H+=ft.now):O.options.heightStyle!=="content"&&(ft.now=Math.round(b-d.outerHeight()-H),H=0)}})):d.animate(this.hideProps,_,S,ut):o.animate(this.showProps,_,S,ut)},_toggleComplete:function(o){var d=o.oldPanel,p=d.prev();this._removeClass(d,"ui-accordion-content-active"),this._removeClass(p,"ui-accordion-header-active")._addClass(p,"ui-accordion-header-collapsed"),d.length&&(d.parent()[0].className=d.parent()[0].className),this._trigger("activate",null,o)}});var xt=/ui-corner-([a-z]){2,6}/g;i.widget("ui.controlgroup",{version:"1.13.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var o=this,d=[];i.each(this.options.items,function(p,b){var S,_={};if(b)return p==="controlgroupLabel"?((S=o.element.find(b)).each(function(){var O=i(this);O.children(".ui-controlgroup-label-contents").length||O.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),o._addClass(S,null,"ui-widget ui-widget-content ui-state-default"),void(d=d.concat(S.get()))):void(i.fn[p]&&(_=o["_"+p+"Options"]?o["_"+p+"Options"]("middle"):{classes:{}},o.element.find(b).each(function(){var O=i(this),H=O[p]("instance"),G=i.widget.extend({},_);p==="button"&&O.parent(".ui-spinner").length||((H=H||O[p]()[p]("instance"))&&(G.classes=o._resolveClassesValues(G.classes,H)),O[p](G),G=O[p]("widget"),i.data(G[0],"ui-controlgroup-data",H||O[p]("instance")),d.push(G[0]))})))}),this.childWidgets=i(i.uniqueSort(d)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(o){this.childWidgets.each(function(){var d=i(this).data("ui-controlgroup-data");d&&d[o]&&d[o]()})},_updateCornerClass:function(o,d){d=this._buildSimpleOptions(d,"label").classes.label,this._removeClass(o,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(o,null,d)},_buildSimpleOptions:function(o,d){var p=this.options.direction==="vertical",b={classes:{}};return b.classes[d]={middle:"",first:"ui-corner-"+(p?"top":"left"),last:"ui-corner-"+(p?"bottom":"right"),only:"ui-corner-all"}[o],b},_spinnerOptions:function(o){return o=this._buildSimpleOptions(o,"ui-spinner"),o.classes["ui-spinner-up"]="",o.classes["ui-spinner-down"]="",o},_buttonOptions:function(o){return this._buildSimpleOptions(o,"ui-button")},_checkboxradioOptions:function(o){return this._buildSimpleOptions(o,"ui-checkboxradio-label")},_selectmenuOptions:function(o){var d=this.options.direction==="vertical";return{width:d&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(d?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(d?"top":"left")},last:{"ui-selectmenu-button-open":d?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(d?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[o]}},_resolveClassesValues:function(o,d){var p={};return i.each(o,function(b){var S=d.options.classes[b]||"",S=String.prototype.trim.call(S.replace(xt,""));p[b]=(S+" "+o[b]).replace(/\s+/g," ")}),p},_setOption:function(o,d){o==="direction"&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(o,d),o!=="disabled"?this.refresh():this._callChildMethod(d?"disable":"enable")},refresh:function(){var o,d=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),this.options.direction==="horizontal"&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),o=this.childWidgets,(o=this.options.onlyVisible?o.filter(":visible"):o).length&&(i.each(["first","last"],function(p,b){var S,_=o[b]().data("ui-controlgroup-data");_&&d["_"+_.widgetName+"Options"]?((S=d["_"+_.widgetName+"Options"](o.length===1?"only":b)).classes=d._resolveClassesValues(S.classes,_),_.element[_.widgetName](S)):d._updateCornerClass(o[b](),b)}),this._callChildMethod("refresh"))}}),i.widget("ui.checkboxradio",[i.ui.formResetMixin,{version:"1.13.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var o,d=this,p=this._super()||{};return this._readType(),o=this.element.labels(),this.label=i(o[o.length-1]),this.label.length||i.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){d.originalLabel+=this.nodeType===3?i(this).text():this.outerHTML}),this.originalLabel&&(p.label=this.originalLabel),(o=this.element[0].disabled)!=null&&(p.disabled=o),p},_create:function(){var o=this.element[0].checked;this._bindFormResetHandler(),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),this.type==="radio"&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),o&&this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var o=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,o==="input"&&/radio|checkbox/.test(this.type)||i.error("Can't create checkboxradio on element.nodeName="+o+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var o=this.element[0].name,d="input[name='"+i.escapeSelector(o)+"']";return o?(this.form.length?i(this.form[0].elements).filter(d):i(d).filter(function(){return i(this)._form().length===0})).not(this.element):i([])},_toggleClasses:function(){var o=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",o),this.options.icon&&this.type==="checkbox"&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",o)._toggleClass(this.icon,null,"ui-icon-blank",!o),this.type==="radio"&&this._getRadioGroup().each(function(){var d=i(this).checkboxradio("instance");d&&d._removeClass(d.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(o,d){if(o!=="label"||d){if(this._super(o,d),o==="disabled")return this._toggleClass(this.label,null,"ui-state-disabled",d),void(this.element[0].disabled=d);this.refresh()}},_updateIcon:function(o){var d="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=i("<span>"),this.iconSpace=i("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),this.type==="checkbox"?(d+=o?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,o?"ui-icon-blank":"ui-icon-check")):d+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",d),o||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):this.icon!==void 0&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var o=this.label.contents().not(this.element[0]);this.icon&&(o=o.not(this.icon[0])),(o=this.iconSpace?o.not(this.iconSpace[0]):o).remove(),this.label.append(this.options.label)},refresh:function(){var o=this.element[0].checked,d=this.element[0].disabled;this._updateIcon(o),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",o),this.options.label!==null&&this._updateLabel(),d!==this.options.disabled&&this._setOptions({disabled:d})}}]);var rt;i.ui.checkboxradio,i.widget("ui.button",{version:"1.13.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var o,d=this._super()||{};return this.isInput=this.element.is("input"),(o=this.element[0].disabled)!=null&&(d.disabled=o),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(d.label=this.originalLabel),d},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),this.options.disabled==null&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(o){o.keyCode===i.ui.keyCode.SPACE&&(o.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(S,d){var p=S!=="iconPosition",b=p?this.options.iconPosition:d,S=b==="top"||b==="bottom";this.icon?p&&this._removeClass(this.icon,null,this.options.icon):(this.icon=i("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),p&&this._addClass(this.icon,null,d),this._attachIcon(b),S?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=i("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(b))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(o){this.icon[/^(?:end|bottom)/.test(o)?"before":"after"](this.iconSpace)},_attachIcon:function(o){this.element[/^(?:end|bottom)/.test(o)?"append":"prepend"](this.icon)},_setOptions:function(o){var d=(o.showLabel===void 0?this.options:o).showLabel,p=(o.icon===void 0?this.options:o).icon;d||p||(o.showLabel=!0),this._super(o)},_setOption:function(o,d){o==="icon"&&(d?this._updateIcon(o,d):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),o==="iconPosition"&&this._updateIcon(o,d),o==="showLabel"&&(this._toggleClass("ui-button-icon-only",null,!d),this._updateTooltip()),o==="label"&&(this.isInput?this.element.val(d):(this.element.html(d),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(o,d),o==="disabled"&&(this._toggleClass(null,"ui-state-disabled",d),(this.element[0].disabled=d)&&this.element.trigger("blur"))},refresh:function(){var o=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");o!==this.options.disabled&&this._setOptions({disabled:o}),this._updateTooltip()}}),i.uiBackCompat!==!1&&(i.widget("ui.button",i.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(o,d){o!=="text"?(o==="showLabel"&&(this.options.text=d),o==="icon"&&(this.options.icons.primary=d),o==="icons"&&(d.primary?(this._super("icon",d.primary),this._super("iconPosition","beginning")):d.secondary&&(this._super("icon",d.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",d)}}),i.fn.button=(rt=i.fn.button,function(o){var d=typeof o=="string",p=Array.prototype.slice.call(arguments,1),b=this;return d?this.length||o!=="instance"?this.each(function(){var S=i(this).attr("type"),_=i.data(this,"ui-"+(S!=="checkbox"&&S!=="radio"?"button":"checkboxradio"));return o==="instance"?(b=_,!1):_?typeof _[o]!="function"||o.charAt(0)==="_"?i.error("no such method '"+o+"' for button widget instance"):(S=_[o].apply(_,p))!==_&&S!==void 0?(b=S&&S.jquery?b.pushStack(S.get()):S,!1):void 0:i.error("cannot call methods on button prior to initialization; attempted to call method '"+o+"'")}):b=void 0:(p.length&&(o=i.widget.extend.apply(null,[o].concat(p))),this.each(function(){var _=i(this).attr("type"),S=_!=="checkbox"&&_!=="radio"?"button":"checkboxradio",_=i.data(this,"ui-"+S);_?(_.option(o||{}),_._init&&_._init()):S!="button"?i(this).checkboxradio(i.extend({icon:!1},o)):rt.call(i(this),o)})),b}),i.fn.buttonset=function(){return i.ui.controlgroup||i.error("Controlgroup widget missing"),arguments[0]==="option"&&arguments[1]==="items"&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):arguments[0]==="option"&&arguments[1]==="items"?this.controlgroup.apply(this,[arguments[0],"items.button"]):(typeof arguments[0]=="object"&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),i.ui.button,i.widget("ui.dialog",{version:"1.13.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(o){var d=i(this).css(o).offset().top;d<0&&i(this).css("top",o.top-d)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title==null&&this.originalTitle!=null&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&i.fn.draggable&&this._makeDraggable(),this.options.resizable&&i.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var o=this.options.appendTo;return o&&(o.jquery||o.nodeType)?i(o):this.document.find(o||"body").eq(0)},_destroy:function(){var o,d=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(o=d.parent.children().eq(d.index)).length&&o[0]!==this.element[0]?o.before(this.element):d.parent.append(this.element)},widget:function(){return this.uiDialog},disable:i.noop,enable:i.noop,close:function(o){var d=this;this._isOpen&&this._trigger("beforeClose",o)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||i.ui.safeBlur(i.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",o)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(o,d){var p=!1,b=this.uiDialog.siblings(".ui-front:visible").map(function(){return+i(this).css("z-index")}).get(),b=Math.max.apply(null,b);return b>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",b+1),p=!0),p&&!d&&this._trigger("focus",o),p},open:function(){var o=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=i(i.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){o._focusTabbable(),o._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var o=this._focusedElement;(o=(o=(o=(o=(o=o||this.element.find("[autofocus]")).length?o:this.element.find(":tabbable")).length?o:this.uiDialogButtonPane.find(":tabbable")).length?o:this.uiDialogTitlebarClose.filter(":tabbable")).length?o:this.uiDialog).eq(0).trigger("focus")},_restoreTabbableFocus:function(){var o=i.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===o||i.contains(this.uiDialog[0],o)||this._focusTabbable()},_keepFocus:function(o){o.preventDefault(),this._restoreTabbableFocus(),this._delay(this._restoreTabbableFocus)},_createWrapper:function(){this.uiDialog=i("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(o){if(this.options.closeOnEscape&&!o.isDefaultPrevented()&&o.keyCode&&o.keyCode===i.ui.keyCode.ESCAPE)return o.preventDefault(),void this.close(o);var d,p,b;o.keyCode!==i.ui.keyCode.TAB||o.isDefaultPrevented()||(d=this.uiDialog.find(":tabbable"),p=d.first(),b=d.last(),o.target!==b[0]&&o.target!==this.uiDialog[0]||o.shiftKey?o.target!==p[0]&&o.target!==this.uiDialog[0]||!o.shiftKey||(this._delay(function(){b.trigger("focus")}),o.preventDefault()):(this._delay(function(){p.trigger("focus")}),o.preventDefault()))},mousedown:function(o){this._moveToTop(o)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var o;this.uiDialogTitlebar=i("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(d){i(d.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=i("<button type='button'></button>").button({label:i("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(d){d.preventDefault(),this.close(d)}}),o=i("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(o,"ui-dialog-title"),this._title(o),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":o.attr("id")})},_title:function(o){this.options.title?o.text(this.options.title):o.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=i("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=i("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var o=this,d=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),i.isEmptyObject(d)||Array.isArray(d)&&!d.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(i.each(d,function(p,b){var S;b=i.extend({type:"button"},b=typeof b=="function"?{click:b,text:p}:b),S=b.click,p={icon:b.icon,iconPosition:b.iconPosition,showLabel:b.showLabel,icons:b.icons,text:b.text},delete b.click,delete b.icon,delete b.iconPosition,delete b.showLabel,delete b.icons,typeof b.text=="boolean"&&delete b.text,i("<button></button>",b).button(p).appendTo(o.uiButtonSet).on("click",function(){S.apply(o.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var o=this,d=this.options;function p(b){return{position:b.position,offset:b.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(b,S){o._addClass(i(this),"ui-dialog-dragging"),o._blockFrames(),o._trigger("dragStart",b,p(S))},drag:function(b,S){o._trigger("drag",b,p(S))},stop:function(b,S){var _=S.offset.left-o.document.scrollLeft(),O=S.offset.top-o.document.scrollTop();d.position={my:"left top",at:"left"+(0<=_?"+":"")+_+" top"+(0<=O?"+":"")+O,of:o.window},o._removeClass(i(this),"ui-dialog-dragging"),o._unblockFrames(),o._trigger("dragStop",b,p(S))}})},_makeResizable:function(){var o=this,d=this.options,b=d.resizable,p=this.uiDialog.css("position"),b=typeof b=="string"?b:"n,e,s,w,se,sw,ne,nw";function S(_){return{originalPosition:_.originalPosition,originalSize:_.originalSize,position:_.position,size:_.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:b,start:function(_,O){o._addClass(i(this),"ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",_,S(O))},resize:function(_,O){o._trigger("resize",_,S(O))},stop:function(_,O){var G=o.uiDialog.offset(),H=G.left-o.document.scrollLeft(),G=G.top-o.document.scrollTop();d.height=o.uiDialog.height(),d.width=o.uiDialog.width(),d.position={my:"left top",at:"left"+(0<=H?"+":"")+H+" top"+(0<=G?"+":"")+G,of:o.window},o._removeClass(i(this),"ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",_,S(O))}}).css("position",p)},_trackFocus:function(){this._on(this.widget(),{focusin:function(o){this._makeFocusTarget(),this._focusedElement=i(o.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var o=this._trackingInstances(),d=i.inArray(this,o);d!==-1&&o.splice(d,1)},_trackingInstances:function(){var o=this.document.data("ui-dialog-instances");return o||this.document.data("ui-dialog-instances",o=[]),o},_minHeight:function(){var o=this.options;return o.height==="auto"?o.minHeight:Math.min(o.minHeight,o.height)},_position:function(){var o=this.uiDialog.is(":visible");o||this.uiDialog.show(),this.uiDialog.position(this.options.position),o||this.uiDialog.hide()},_setOptions:function(o){var d=this,p=!1,b={};i.each(o,function(S,_){d._setOption(S,_),S in d.sizeRelatedOptions&&(p=!0),S in d.resizableRelatedOptions&&(b[S]=_)}),p&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",b)},_setOption:function(o,d){var p,b=this.uiDialog;o!=="disabled"&&(this._super(o,d),o==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),o==="buttons"&&this._createButtons(),o==="closeText"&&this.uiDialogTitlebarClose.button({label:i("<a>").text(""+this.options.closeText).html()}),o==="draggable"&&((p=b.is(":data(ui-draggable)"))&&!d&&b.draggable("destroy"),!p&&d&&this._makeDraggable()),o==="position"&&this._position(),o==="resizable"&&((p=b.is(":data(ui-resizable)"))&&!d&&b.resizable("destroy"),p&&typeof d=="string"&&b.resizable("option","handles",d),p||d===!1||this._makeResizable()),o==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var o,d,p,b=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),b.minWidth>b.width&&(b.width=b.minWidth),o=this.uiDialog.css({height:"auto",width:b.width}).outerHeight(),d=Math.max(0,b.minHeight-o),p=typeof b.maxHeight=="number"?Math.max(0,b.maxHeight-o):"none",b.height==="auto"?this.element.css({minHeight:d,maxHeight:p,height:"auto"}):this.element.height(Math.max(0,b.height-o)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var o=i(this);return i("<div>").css({position:"absolute",width:o.outerWidth(),height:o.outerHeight()}).appendTo(o.parent()).offset(o.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(o){return!!i(o.target).closest(".ui-dialog").length||!!i(o.target).closest(".ui-datepicker").length},_createOverlay:function(){var o,d;this.options.modal&&(o=i.fn.jquery.substring(0,4),d=!0,this._delay(function(){d=!1}),this.document.data("ui-dialog-overlays")||this.document.on("focusin.ui-dialog",function(p){var b;d||(b=this._trackingInstances()[0])._allowInteraction(p)||(p.preventDefault(),b._focusTabbable(),o!=="3.4."&&o!=="3.5."||b._delay(b._restoreTabbableFocus))}.bind(this)),this.overlay=i("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1))},_destroyOverlay:function(){var o;this.options.modal&&this.overlay&&((o=this.document.data("ui-dialog-overlays")-1)?this.document.data("ui-dialog-overlays",o):(this.document.off("focusin.ui-dialog"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null)}}),i.uiBackCompat!==!1&&i.widget("ui.dialog",i.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(o,d){o==="dialogClass"&&this.uiDialog.removeClass(this.options.dialogClass).addClass(d),this._superApply(arguments)}}),i.ui.dialog;var at=i,wt={},Dt=wt.toString,Wt=/^([\-+])=\s*(\d+\.?\d*)/,Pt=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(o){return[o[1],o[2],o[3],o[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(o){return[2.55*o[1],2.55*o[2],2.55*o[3],o[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?/,parse:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16),o[4]?(parseInt(o[4],16)/255).toFixed(2):1]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?/,parse:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16),o[4]?(parseInt(o[4]+o[4],16)/255).toFixed(2):1]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(o){return[o[1],o[2]/100,o[3]/100,o[4]]}}],K=at.Color=function(o,d,p,b){return new at.Color.fn.parse(o,d,p,b)},J={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},Y={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},ee=K.support={},Kt=at("<p>")[0],Zt=at.each;function Yt(o){return o==null?o+"":typeof o=="object"?wt[Dt.call(o)]||"object":typeof o}function Rt(o,d,p){var b=Y[d.type]||{};return o==null?p||!d.def?null:d.def:(o=b.floor?~~o:parseFloat(o),isNaN(o)?d.def:b.mod?(o+b.mod)%b.mod:Math.min(b.max,Math.max(0,o)))}function qt(o){var d=K(),p=d._rgba=[];return o=o.toLowerCase(),Zt(Pt,function(b,O){var _=O.re.exec(o),_=_&&O.parse(_),O=O.space||"rgba";if(_)return _=d[O](_),d[J[O].cache]=_[J[O].cache],p=d._rgba=_._rgba,!1}),p.length?(p.join()==="0,0,0,0"&&at.extend(p,Ut.transparent),d):Ut[o]}function pe(o,d,p){return 6*(p=(p+1)%1)<1?o+(d-o)*p*6:2*p<1?d:3*p<2?o+(d-o)*(2/3-p)*6:o}Kt.style.cssText="background-color:rgba(1,1,1,.5)",ee.rgba=-1<Kt.style.backgroundColor.indexOf("rgba"),Zt(J,function(o,d){d.cache="_"+o,d.props.alpha={idx:3,type:"percent",def:1}}),at.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(o,d){wt["[object "+d+"]"]=d.toLowerCase()}),(K.fn=at.extend(K.prototype,{parse:function(o,d,p,b){if(o===void 0)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=at(o).css(d),d=void 0);var S=this,_=Yt(o),O=this._rgba=[];return d!==void 0&&(o=[o,d,p,b],_="array"),_==="string"?this.parse(qt(o)||Ut._default):_==="array"?(Zt(J.rgba.props,function(H,G){O[G.idx]=Rt(o[G.idx],G)}),this):_==="object"?(Zt(J,o instanceof K?function(H,G){o[G.cache]&&(S[G.cache]=o[G.cache].slice())}:function(H,G){var nt=G.cache;Zt(G.props,function(ct,ut){if(!S[nt]&&G.to){if(ct==="alpha"||o[ct]==null)return;S[nt]=G.to(S._rgba)}S[nt][ut.idx]=Rt(o[ct],ut,!0)}),S[nt]&&at.inArray(null,S[nt].slice(0,3))<0&&(S[nt][3]==null&&(S[nt][3]=1),G.from&&(S._rgba=G.from(S[nt])))}),this):void 0},is:function(o){var d=K(o),p=!0,b=this;return Zt(J,function(S,_){var O,H=d[_.cache];return H&&(O=b[_.cache]||_.to&&_.to(b._rgba)||[],Zt(_.props,function(G,nt){if(H[nt.idx]!=null)return p=H[nt.idx]===O[nt.idx]})),p}),p},_space:function(){var o=[],d=this;return Zt(J,function(p,b){d[b.cache]&&o.push(p)}),o.pop()},transition:function(S,d){var p=(H=K(S))._space(),b=J[p],S=this.alpha()===0?K("transparent"):this,_=S[b.cache]||b.to(S._rgba),O=_.slice(),H=H[b.cache];return Zt(b.props,function(G,nt){var ct=nt.idx,ut=_[ct],St=H[ct],ft=Y[nt.type]||{};St!==null&&(ut===null?O[ct]=St:(ft.mod&&(St-ut>ft.mod/2?ut+=ft.mod:ut-St>ft.mod/2&&(ut-=ft.mod)),O[ct]=Rt((St-ut)*d+ut,nt)))}),this[p](O)},blend:function(o){if(this._rgba[3]===1)return this;var d=this._rgba.slice(),p=d.pop(),b=K(o)._rgba;return K(at.map(d,function(S,_){return(1-p)*b[_]+p*S}))},toRgbaString:function(){var o="rgba(",d=at.map(this._rgba,function(p,b){return p??(2<b?1:0)});return d[3]===1&&(d.pop(),o="rgb("),o+d.join()+")"},toHslaString:function(){var o="hsla(",d=at.map(this.hsla(),function(p,b){return p==null&&(p=2<b?1:0),p=b&&b<3?Math.round(100*p)+"%":p});return d[3]===1&&(d.pop(),o="hsl("),o+d.join()+")"},toHexString:function(o){var d=this._rgba.slice(),p=d.pop();return o&&d.push(~~(255*p)),"#"+at.map(d,function(b){return(b=(b||0).toString(16)).length===1?"0"+b:b}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}})).parse.prototype=K.fn,J.hsla.to=function(H){if(H[0]==null||H[1]==null||H[2]==null)return[null,null,null,H[3]];var d=H[0]/255,G=H[1]/255,p=H[2]/255,b=H[3],S=Math.max(d,G,p),_=Math.min(d,G,p),O=S-_,nt=S+_,H=.5*nt,G=_===S?0:d===S?60*(G-p)/O+360:G===S?60*(p-d)/O+120:60*(d-G)/O+240,nt=O==0?0:H<=.5?O/nt:O/(2-nt);return[Math.round(G)%360,nt,H,b??1]},J.hsla.from=function(p){if(p[0]==null||p[1]==null||p[2]==null)return[null,null,null,p[3]];var d=p[0]/360,b=p[1],S=p[2],p=p[3],b=S<=.5?S*(1+b):S+b-S*b,S=2*S-b;return[Math.round(255*pe(S,b,d+1/3)),Math.round(255*pe(S,b,d)),Math.round(255*pe(S,b,d-1/3)),p]},Zt(J,function(o,d){var p=d.props,b=d.cache,S=d.to,_=d.from;K.fn[o]=function(O){if(S&&!this[b]&&(this[b]=S(this._rgba)),O===void 0)return this[b].slice();var H=Yt(O),G=H==="array"||H==="object"?O:arguments,nt=this[b].slice();return Zt(p,function(ct,ut){ct=G[H==="object"?ct:ut.idx],ct==null&&(ct=nt[ut.idx]),nt[ut.idx]=Rt(ct,ut)}),_?((O=K(_(nt)))[b]=nt,O):K(nt)},Zt(p,function(O,H){K.fn[O]||(K.fn[O]=function(G){var nt,ct=Yt(G),ut=O==="alpha"?this._hsla?"hsla":"rgba":o,St=this[ut](),ft=St[H.idx];return ct==="undefined"?ft:(ct==="function"&&(ct=Yt(G=G.call(this,ft))),G==null&&H.empty?this:(ct==="string"&&(nt=Wt.exec(G))&&(G=ft+parseFloat(nt[2])*(nt[1]==="+"?1:-1)),St[H.idx]=G,this[ut](St)))})})}),(K.hook=function(o){o=o.split(" "),Zt(o,function(d,p){at.cssHooks[p]={set:function(b,S){var _,O,H="";if(S!=="transparent"&&(Yt(S)!=="string"||(_=qt(S)))){if(S=K(_||S),!ee.rgba&&S._rgba[3]!==1){for(O=p==="backgroundColor"?b.parentNode:b;(H===""||H==="transparent")&&O&&O.style;)try{H=at.css(O,"backgroundColor"),O=O.parentNode}catch{}S=S.blend(H&&H!=="transparent"?H:"_default")}S=S.toRgbaString()}try{b.style[p]=S}catch{}}},at.fx.step[p]=function(b){b.colorInit||(b.start=K(b.elem,p),b.end=K(b.end),b.colorInit=!0),at.cssHooks[p].set(b.elem,b.start.transition(b.end,b.pos))}})})("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),at.cssHooks.borderColor={expand:function(o){var d={};return Zt(["Top","Right","Bottom","Left"],function(p,b){d["border"+b+"Color"]=o}),d}};var oe,ce,ot,V,st,N,U,bt,vt,Lt,Ut=at.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},Qt="ui-effects-",Ht="ui-effects-style",pt="ui-effects-animated";function Ot(o){var d,p,b=o.ownerDocument.defaultView?o.ownerDocument.defaultView.getComputedStyle(o,null):o.currentStyle,S={};if(b&&b.length&&b[0]&&b[b[0]])for(p=b.length;p--;)typeof b[d=b[p]]=="string"&&(S[d.replace(/-([\da-z])/gi,function(_,O){return O.toUpperCase()})]=b[d]);else for(d in b)typeof b[d]=="string"&&(S[d]=b[d]);return S}function kt(o,d,p,b){return o={effect:o=i.isPlainObject(o)?(d=o).effect:o},typeof(d=d??{})=="function"&&(b=d,p=null,d={}),typeof d!="number"&&!i.fx.speeds[d]||(b=p,p=d,d={}),typeof p=="function"&&(b=p,p=null),d&&i.extend(o,d),p=p||d.duration,o.duration=i.fx.off?0:typeof p=="number"?p:p in i.fx.speeds?i.fx.speeds[p]:i.fx.speeds._default,o.complete=b||d.complete,o}function zt(o){return!o||typeof o=="number"||i.fx.speeds[o]||typeof o=="string"&&!i.effects.effect[o]||typeof o=="function"||typeof o=="object"&&!o.effect}function he(S,b){var p=b.outerWidth(),b=b.outerHeight(),S=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(S)||["",0,p,b,0];return{top:parseFloat(S[1])||0,right:S[2]==="auto"?p:parseFloat(S[2]),bottom:S[3]==="auto"?b:parseFloat(S[3]),left:parseFloat(S[4])||0}}i.effects={effect:{}},V=["add","remove","toggle"],st={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},i.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(o,d){i.fx.step[d]=function(p){(p.end!=="none"&&!p.setAttr||p.pos===1&&!p.setAttr)&&(at.style(p.elem,d,p.end),p.setAttr=!0)}}),i.fn.addBack||(i.fn.addBack=function(o){return this.add(o==null?this.prevObject:this.prevObject.filter(o))}),i.effects.animateClass=function(o,d,p,b){var S=i.speed(d,p,b);return this.queue(function(){var _=i(this),O=_.attr("class")||"",H=(H=S.children?_.find("*").addBack():_).map(function(){return{el:i(this),start:Ot(this)}}),G=function(){i.each(V,function(nt,ct){o[ct]&&_[ct+"Class"](o[ct])})};G(),H=H.map(function(){return this.end=Ot(this.el[0]),this.diff=function(nt,ct){var ut,St,ft={};for(ut in ct)St=ct[ut],nt[ut]!==St&&(st[ut]||!i.fx.step[ut]&&isNaN(parseFloat(St))||(ft[ut]=St));return ft}(this.start,this.end),this}),_.attr("class",O),H=H.map(function(){var nt=this,ct=i.Deferred(),ut=i.extend({},S,{queue:!1,complete:function(){ct.resolve(nt)}});return this.el.animate(this.diff,ut),ct.promise()}),i.when.apply(i,H.get()).done(function(){G(),i.each(arguments,function(){var nt=this.el;i.each(this.diff,function(ct){nt.css(ct,"")})}),S.complete.call(_[0])})})},i.fn.extend({addClass:(ot=i.fn.addClass,function(o,d,p,b){return d?i.effects.animateClass.call(this,{add:o},d,p,b):ot.apply(this,arguments)}),removeClass:(ce=i.fn.removeClass,function(o,d,p,b){return 1<arguments.length?i.effects.animateClass.call(this,{remove:o},d,p,b):ce.apply(this,arguments)}),toggleClass:(oe=i.fn.toggleClass,function(o,d,p,b,S){return typeof d=="boolean"||d===void 0?p?i.effects.animateClass.call(this,d?{add:o}:{remove:o},p,b,S):oe.apply(this,arguments):i.effects.animateClass.call(this,{toggle:o},d,p,b)}),switchClass:function(o,d,p,b,S){return i.effects.animateClass.call(this,{add:d,remove:o},p,b,S)}}),i.expr&&i.expr.pseudos&&i.expr.pseudos.animated&&(i.expr.pseudos.animated=(N=i.expr.pseudos.animated,function(o){return!!i(o).data(pt)||N(o)})),i.uiBackCompat!==!1&&i.extend(i.effects,{save:function(o,d){for(var p=0,b=d.length;p<b;p++)d[p]!==null&&o.data(Qt+d[p],o[0].style[d[p]])},restore:function(o,d){for(var p,b=0,S=d.length;b<S;b++)d[b]!==null&&(p=o.data(Qt+d[b]),o.css(d[b],p))},setMode:function(o,d){return d=d==="toggle"?o.is(":hidden")?"show":"hide":d},createWrapper:function(o){if(o.parent().is(".ui-effects-wrapper"))return o.parent();var d={width:o.outerWidth(!0),height:o.outerHeight(!0),float:o.css("float")},p=i("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),b={width:o.width(),height:o.height()},S=document.activeElement;try{S.id}catch{S=document.body}return o.wrap(p),o[0]!==S&&!i.contains(o[0],S)||i(S).trigger("focus"),p=o.parent(),o.css("position")==="static"?(p.css({position:"relative"}),o.css({position:"relative"})):(i.extend(d,{position:o.css("position"),zIndex:o.css("z-index")}),i.each(["top","left","bottom","right"],function(_,O){d[O]=o.css(O),isNaN(parseInt(d[O],10))&&(d[O]="auto")}),o.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),o.css(b),p.css(d).show()},removeWrapper:function(o){var d=document.activeElement;return o.parent().is(".ui-effects-wrapper")&&(o.parent().replaceWith(o),o[0]!==d&&!i.contains(o[0],d)||i(d).trigger("focus")),o}}),i.extend(i.effects,{version:"1.13.1",define:function(o,d,p){return p||(p=d,d="effect"),i.effects.effect[o]=p,i.effects.effect[o].mode=d,p},scaledDimensions:function(o,S,p){if(S===0)return{height:0,width:0,outerHeight:0,outerWidth:0};var b=p!=="horizontal"?(S||100)/100:1,S=p!=="vertical"?(S||100)/100:1;return{height:o.height()*S,width:o.width()*b,outerHeight:o.outerHeight()*S,outerWidth:o.outerWidth()*b}},clipToBox:function(o){return{width:o.clip.right-o.clip.left,height:o.clip.bottom-o.clip.top,left:o.clip.left,top:o.clip.top}},unshift:function(o,d,p){var b=o.queue();1<d&&b.splice.apply(b,[1,0].concat(b.splice(d,p))),o.dequeue()},saveStyle:function(o){o.data(Ht,o[0].style.cssText)},restoreStyle:function(o){o[0].style.cssText=o.data(Ht)||"",o.removeData(Ht)},mode:function(o,d){return o=o.is(":hidden"),d==="toggle"&&(d=o?"show":"hide"),d=(o?d==="hide":d==="show")?"none":d},getBaseline:function(o,d){var p,b;switch(o[0]){case"top":p=0;break;case"middle":p=.5;break;case"bottom":p=1;break;default:p=o[0]/d.height}switch(o[1]){case"left":b=0;break;case"center":b=.5;break;case"right":b=1;break;default:b=o[1]/d.width}return{x:b,y:p}},createPlaceholder:function(o){var d,p=o.css("position"),b=o.position();return o.css({marginTop:o.css("marginTop"),marginBottom:o.css("marginBottom"),marginLeft:o.css("marginLeft"),marginRight:o.css("marginRight")}).outerWidth(o.outerWidth()).outerHeight(o.outerHeight()),/^(static|relative)/.test(p)&&(p="absolute",d=i("<"+o[0].nodeName+">").insertAfter(o).css({display:/^(inline|ruby)/.test(o.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:o.css("marginTop"),marginBottom:o.css("marginBottom"),marginLeft:o.css("marginLeft"),marginRight:o.css("marginRight"),float:o.css("float")}).outerWidth(o.outerWidth()).outerHeight(o.outerHeight()).addClass("ui-effects-placeholder"),o.data(Qt+"placeholder",d)),o.css({position:p,left:b.left,top:b.top}),d},removePlaceholder:function(o){var d=Qt+"placeholder",p=o.data(d);p&&(p.remove(),o.removeData(d))},cleanUp:function(o){i.effects.restoreStyle(o),i.effects.removePlaceholder(o)},setTransition:function(o,d,p,b){return b=b||{},i.each(d,function(S,_){var O=o.cssUnit(_);0<O[0]&&(b[_]=O[0]*p+O[1])}),b}}),i.fn.extend({effect:function(){function o(ct){var ut=i(this),St=i.effects.mode(ut,H)||b;ut.data(pt,!0),G.push(St),b&&(St==="show"||St===b&&St==="hide")&&ut.show(),b&&St==="none"||i.effects.saveStyle(ut),typeof ct=="function"&&ct()}var d=kt.apply(this,arguments),p=i.effects.effect[d.effect],b=p.mode,S=d.queue,_=S||"fx",O=d.complete,H=d.mode,G=[];return i.fx.off||!p?H?this[H](d.duration,O):this.each(function(){O&&O.call(this)}):S===!1?this.each(o).each(nt):this.queue(_,o).queue(_,nt);function nt(ct){var ut=i(this);function St(){typeof O=="function"&&O.call(ut[0]),typeof ct=="function"&&ct()}d.mode=G.shift(),i.uiBackCompat===!1||b?d.mode==="none"?(ut[H](),St()):p.call(ut[0],d,function(){ut.removeData(pt),i.effects.cleanUp(ut),d.mode==="hide"&&ut.hide(),St()}):(ut.is(":hidden")?H==="hide":H==="show")?(ut[H](),St()):p.call(ut[0],d,St)}},show:(vt=i.fn.show,function(o){return zt(o)?vt.apply(this,arguments):(o=kt.apply(this,arguments),o.mode="show",this.effect.call(this,o))}),hide:(bt=i.fn.hide,function(o){return zt(o)?bt.apply(this,arguments):(o=kt.apply(this,arguments),o.mode="hide",this.effect.call(this,o))}),toggle:(U=i.fn.toggle,function(o){return zt(o)||typeof o=="boolean"?U.apply(this,arguments):(o=kt.apply(this,arguments),o.mode="toggle",this.effect.call(this,o))}),cssUnit:function(o){var d=this.css(o),p=[];return i.each(["em","px","%","pt"],function(b,S){0<d.indexOf(S)&&(p=[parseFloat(d),S])}),p},cssClip:function(o){return o?this.css("clip","rect("+o.top+"px "+o.right+"px "+o.bottom+"px "+o.left+"px)"):he(this.css("clip"),this)},transfer:function(o,d){var p=i(this),H=i(o.to),b=H.css("position")==="fixed",O=i("body"),S=b?O.scrollTop():0,_=b?O.scrollLeft():0,O=H.offset(),O={top:O.top-S,left:O.left-_,height:H.innerHeight(),width:H.innerWidth()},H=p.offset(),G=i("<div class='ui-effects-transfer'></div>");G.appendTo("body").addClass(o.className).css({top:H.top-S,left:H.left-_,height:p.innerHeight(),width:p.innerWidth(),position:b?"fixed":"absolute"}).animate(O,o.duration,o.easing,function(){G.remove(),typeof d=="function"&&d()})}}),i.fx.step.clip=function(o){o.clipInit||(o.start=i(o.elem).cssClip(),typeof o.end=="string"&&(o.end=he(o.end,o.elem)),o.clipInit=!0),i(o.elem).cssClip({top:o.pos*(o.end.top-o.start.top)+o.start.top,right:o.pos*(o.end.right-o.start.right)+o.start.right,bottom:o.pos*(o.end.bottom-o.start.bottom)+o.start.bottom,left:o.pos*(o.end.left-o.start.left)+o.start.left})},Lt={},i.each(["Quad","Cubic","Quart","Quint","Expo"],function(o,d){Lt[d]=function(p){return Math.pow(p,o+2)}}),i.extend(Lt,{Sine:function(o){return 1-Math.cos(o*Math.PI/2)},Circ:function(o){return 1-Math.sqrt(1-o*o)},Elastic:function(o){return o===0||o===1?o:-Math.pow(2,8*(o-1))*Math.sin((80*(o-1)-7.5)*Math.PI/15)},Back:function(o){return o*o*(3*o-2)},Bounce:function(o){for(var d,p=4;o<((d=Math.pow(2,--p))-1)/11;);return 1/Math.pow(4,3-p)-7.5625*Math.pow((3*d-2)/22-o,2)}}),i.each(Lt,function(o,d){i.easing["easeIn"+o]=d,i.easing["easeOut"+o]=function(p){return 1-d(1-p)},i.easing["easeInOut"+o]=function(p){return p<.5?d(2*p)/2:1-d(-2*p+2)/2}}),Kt=i.effects,i.effects.define("blind","hide",function(o,d){var p={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},b=i(this),S=o.direction||"up",_=b.cssClip(),O={clip:i.extend({},_)},H=i.effects.createPlaceholder(b);O.clip[p[S][0]]=O.clip[p[S][1]],o.mode==="show"&&(b.cssClip(O.clip),H&&H.css(i.effects.clipToBox(O)),O.clip=_),H&&H.animate(i.effects.clipToBox(O),o.duration,o.easing),b.animate(O,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("bounce",function(Et,d){var p,b,S=i(this),ct=Et.mode,_=ct==="hide",O=ct==="show",H=Et.direction||"up",G=Et.distance,nt=Et.times||5,ct=2*nt+(O||_?1:0),ut=Et.duration/ct,St=Et.easing,ft=H==="up"||H==="down"?"top":"left",se=H==="up"||H==="left",jt=0,Et=S.queue().length;for(i.effects.createPlaceholder(S),H=S.css(ft),G=G||S[ft=="top"?"outerHeight":"outerWidth"]()/3,O&&((b={opacity:1})[ft]=H,S.css("opacity",0).css(ft,se?2*-G:2*G).animate(b,ut,St)),_&&(G/=Math.pow(2,nt-1)),(b={})[ft]=H;jt<nt;jt++)(p={})[ft]=(se?"-=":"+=")+G,S.animate(p,ut,St).animate(b,ut,St),G=_?2*G:G/2;_&&((p={opacity:0})[ft]=(se?"-=":"+=")+G,S.animate(p,ut,St)),S.queue(d),i.effects.unshift(S,Et,1+ct)}),i.effects.define("clip","hide",function(o,d){var p={},b=i(this),O=o.direction||"vertical",_=O==="both",S=_||O==="horizontal",_=_||O==="vertical",O=b.cssClip();p.clip={top:_?(O.bottom-O.top)/2:O.top,right:S?(O.right-O.left)/2:O.right,bottom:_?(O.bottom-O.top)/2:O.bottom,left:S?(O.right-O.left)/2:O.left},i.effects.createPlaceholder(b),o.mode==="show"&&(b.cssClip(p.clip),p.clip=O),b.animate(p,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("drop","hide",function(o,d){var p=i(this),b=o.mode==="show",S=o.direction||"left",_=S==="up"||S==="down"?"top":"left",O=S==="up"||S==="left"?"-=":"+=",H=O=="+="?"-=":"+=",G={opacity:0};i.effects.createPlaceholder(p),S=o.distance||p[_=="top"?"outerHeight":"outerWidth"](!0)/2,G[_]=O+S,b&&(p.css(G),G[_]=H+S,G.opacity=1),p.animate(G,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("explode","hide",function(o,d){var p,b,S,_,O,H,G=o.pieces?Math.round(Math.sqrt(o.pieces)):3,nt=G,ct=i(this),ut=o.mode==="show",St=ct.show().css("visibility","hidden").offset(),ft=Math.ceil(ct.outerWidth()/nt),se=Math.ceil(ct.outerHeight()/G),jt=[];function Et(){jt.push(this),jt.length===G*nt&&(ct.css({visibility:"visible"}),i(jt).remove(),d())}for(p=0;p<G;p++)for(_=St.top+p*se,H=p-(G-1)/2,b=0;b<nt;b++)S=St.left+b*ft,O=b-(nt-1)/2,ct.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-b*ft,top:-p*se}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:ft,height:se,left:S+(ut?O*ft:0),top:_+(ut?H*se:0),opacity:ut?0:1}).animate({left:S+(ut?0:O*ft),top:_+(ut?0:H*se),opacity:ut?1:0},o.duration||500,o.easing,Et)}),i.effects.define("fade","toggle",function(o,d){var p=o.mode==="show";i(this).css("opacity",p?0:1).animate({opacity:p?1:0},{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("fold","hide",function(o,d){var p=i(this),se=o.mode,b=se==="show",S=se==="hide",_=o.size||15,O=/([0-9]+)%/.exec(_),H=o.horizFirst?["right","bottom"]:["bottom","right"],G=o.duration/2,nt=i.effects.createPlaceholder(p),ct=p.cssClip(),ut={clip:i.extend({},ct)},St={clip:i.extend({},ct)},ft=[ct[H[0]],ct[H[1]]],se=p.queue().length;O&&(_=parseInt(O[1],10)/100*ft[S?0:1]),ut.clip[H[0]]=_,St.clip[H[0]]=_,St.clip[H[1]]=0,b&&(p.cssClip(St.clip),nt&&nt.css(i.effects.clipToBox(St)),St.clip=ct),p.queue(function(jt){nt&&nt.animate(i.effects.clipToBox(ut),G,o.easing).animate(i.effects.clipToBox(St),G,o.easing),jt()}).animate(ut,G,o.easing).animate(St,G,o.easing).queue(d),i.effects.unshift(p,se,4)}),i.effects.define("highlight","show",function(o,d){var p=i(this),b={backgroundColor:p.css("backgroundColor")};o.mode==="hide"&&(b.opacity=0),i.effects.saveStyle(p),p.css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(b,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.effects.define("size",function(o,d){var p,b=i(this),S=["fontSize"],_=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],O=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],H=o.mode,G=H!=="effect",nt=o.scale||"both",ct=o.origin||["middle","center"],ut=b.css("position"),St=b.position(),ft=i.effects.scaledDimensions(b),se=o.from||ft,jt=o.to||i.effects.scaledDimensions(b,0);i.effects.createPlaceholder(b),H==="show"&&(H=se,se=jt,jt=H),p={from:{y:se.height/ft.height,x:se.width/ft.width},to:{y:jt.height/ft.height,x:jt.width/ft.width}},nt!=="box"&&nt!=="both"||(p.from.y!==p.to.y&&(se=i.effects.setTransition(b,_,p.from.y,se),jt=i.effects.setTransition(b,_,p.to.y,jt)),p.from.x!==p.to.x&&(se=i.effects.setTransition(b,O,p.from.x,se),jt=i.effects.setTransition(b,O,p.to.x,jt))),nt!=="content"&&nt!=="both"||p.from.y!==p.to.y&&(se=i.effects.setTransition(b,S,p.from.y,se),jt=i.effects.setTransition(b,S,p.to.y,jt)),ct&&(ct=i.effects.getBaseline(ct,ft),se.top=(ft.outerHeight-se.outerHeight)*ct.y+St.top,se.left=(ft.outerWidth-se.outerWidth)*ct.x+St.left,jt.top=(ft.outerHeight-jt.outerHeight)*ct.y+St.top,jt.left=(ft.outerWidth-jt.outerWidth)*ct.x+St.left),delete se.outerHeight,delete se.outerWidth,b.css(se),nt!=="content"&&nt!=="both"||(_=_.concat(["marginTop","marginBottom"]).concat(S),O=O.concat(["marginLeft","marginRight"]),b.find("*[width]").each(function(){var Et=i(this),ve=i.effects.scaledDimensions(Et),me={height:ve.height*p.from.y,width:ve.width*p.from.x,outerHeight:ve.outerHeight*p.from.y,outerWidth:ve.outerWidth*p.from.x},ve={height:ve.height*p.to.y,width:ve.width*p.to.x,outerHeight:ve.height*p.to.y,outerWidth:ve.width*p.to.x};p.from.y!==p.to.y&&(me=i.effects.setTransition(Et,_,p.from.y,me),ve=i.effects.setTransition(Et,_,p.to.y,ve)),p.from.x!==p.to.x&&(me=i.effects.setTransition(Et,O,p.from.x,me),ve=i.effects.setTransition(Et,O,p.to.x,ve)),G&&i.effects.saveStyle(Et),Et.css(me),Et.animate(ve,o.duration,o.easing,function(){G&&i.effects.restoreStyle(Et)})})),b.animate(jt,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){var Et=b.offset();jt.opacity===0&&b.css("opacity",se.opacity),G||(b.css("position",ut==="static"?"relative":ut).offset(Et),i.effects.saveStyle(b)),d()}})}),i.effects.define("scale",function(o,d){var p=i(this),b=o.mode,b=parseInt(o.percent,10)||(parseInt(o.percent,10)===0||b!=="effect"?0:100),b=i.extend(!0,{from:i.effects.scaledDimensions(p),to:i.effects.scaledDimensions(p,b,o.direction||"both"),origin:o.origin||["middle","center"]},o);o.fade&&(b.from.opacity=1,b.to.opacity=0),i.effects.effect.size.call(this,b,d)}),i.effects.define("puff","hide",function(o,d){o=i.extend(!0,{},o,{fade:!0,percent:parseInt(o.percent,10)||150}),i.effects.effect.scale.call(this,o,d)}),i.effects.define("pulsate","show",function(o,d){var p=i(this),G=o.mode,b=G==="show",S=2*(o.times||5)+(b||G==="hide"?1:0),_=o.duration/S,O=0,H=1,G=p.queue().length;for(!b&&p.is(":visible")||(p.css("opacity",0).show(),O=1);H<S;H++)p.animate({opacity:O},_,o.easing),O=1-O;p.animate({opacity:O},_,o.easing),p.queue(d),i.effects.unshift(p,G,1+S)}),i.effects.define("shake",function(o,d){var p=1,b=i(this),ft=o.direction||"left",S=o.distance||20,_=o.times||3,O=2*_+1,H=Math.round(o.duration/O),G=ft==="up"||ft==="down"?"top":"left",nt=ft==="up"||ft==="left",ct={},ut={},St={},ft=b.queue().length;for(i.effects.createPlaceholder(b),ct[G]=(nt?"-=":"+=")+S,ut[G]=(nt?"+=":"-=")+2*S,St[G]=(nt?"-=":"+=")+2*S,b.animate(ct,H,o.easing);p<_;p++)b.animate(ut,H,o.easing).animate(St,H,o.easing);b.animate(ut,H,o.easing).animate(ct,H/2,o.easing).queue(d),i.effects.unshift(b,ft,1+O)}),i.effects.define("slide","show",function(o,d){var p,b,S=i(this),_={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},O=o.mode,H=o.direction||"left",G=H==="up"||H==="down"?"top":"left",nt=H==="up"||H==="left",ct=o.distance||S[G=="top"?"outerHeight":"outerWidth"](!0),ut={};i.effects.createPlaceholder(S),p=S.cssClip(),b=S.position()[G],ut[G]=(nt?-1:1)*ct+b,ut.clip=S.cssClip(),ut.clip[_[H][1]]=ut.clip[_[H][0]],O==="show"&&(S.cssClip(ut.clip),S.css(G,ut[G]),ut.clip=p,ut[G]=b),S.animate(ut,{queue:!1,duration:o.duration,easing:o.easing,complete:d})}),i.uiBackCompat!==!1&&i.effects.define("transfer",function(o,d){i(this).transfer(o,d)})});window.width=void 0;window.height=void 0;window.DPR=window.devicePixelRatio||1;function sr(){DPR=window.devicePixelRatio||1,lightMode&&(DPR=1),width=document.getElementById("simulationArea").clientWidth*DPR,embed?height=document.getElementById("simulation").clientHeight*DPR:height=(document.body.clientHeight-document.getElementById("toolbar").clientHeight)*DPR,oi.setup(),f.setup(),Ji(),document.getElementById("backgroundArea").style.height=height/DPR+100,document.getElementById("backgroundArea").style.width=width/DPR+100,document.getElementById("canvasArea").style.height=height/DPR,f.canvas.width=width,f.canvas.height=height,oi.canvas.width=width+100*DPR,oi.canvas.height=height+100*DPR,embed||ir.setup(),ye(!0),ps(),f.prevScale=0,Ji()}window.onresize=sr;window.onorientationchange=sr;window.addEventListener("orientationchange",sr);function Eb(){ub();const i=us();window.projectId=i,$e(!0),fs("Main"),window.data={},sr(),$v()}function Wb(){$("#menu").empty(),window.circuitElementList=Qg,window.annotationList=Zg,window.inputList=Jg,window.subCircuitInputList=tm,window.moduleList=[...circuitElementList,...annotationList],window.updateOrder=["wires",...circuitElementList,"nodes",...annotationList],window.renderOrder=[...moduleList.slice().reverse(),"wires","allNodes"];function i(t){return`<div class="icon logixModules" id="${t.name}" title="${t.label}">
            <img src= "/img/${t.name}.svg" alt="element's image" >
        </div>`}window.elementHierarchy=em,window.elementPanelList=[];for(const t in elementHierarchy){let n="";const r=elementHierarchy[t];for(let g=0;g<r.length;g++){const v=r[g];v.name.startsWith("verilog")||(n+=i(v),window.elementPanelList.push(v.label))}const l=`<div class="panelHeader">${t}</div>
        <div class="panel customScroll">
        ${n}
        </div>`,c=`<div class="mobilepanelHeader">${t}</div>
        <div class="panel customScroll">
        ${n}
        </div>`;$("#menu").append(l),$("#menu2").append(c)}}function Ab(){const i=embed?rb:S0;Wb(),Eb(),embed||O0(),i(),embed||Ob(),setTimeout(()=>{if(__logix_project_id!=0)$(".loadingIcon").fadeIn(),$.ajax({url:`/simulator/get_data/${__logix_project_id}`,type:"GET",success(n){var r=n;r&&(Hn(r),f.changeClockTime(r.timePeriod||500)),$(".loadingIcon").fadeOut()},failure(){alert("Error: could not load "),$(".loadingIcon").fadeOut()}});else if(localStorage.getItem("recover_login")&&userSignedIn){var t=JSON.parse(localStorage.getItem("recover_login"));Hn(t),localStorage.removeItem("recover"),localStorage.removeItem("recover_login"),Vh()}else localStorage.getItem("recover")?De("We have detected that you did not save your last work. Don't worry we have recovered them. Access them using Project->Recover"):localStorage.getItem("autosave")&&De("We have detected an unexpected simulator crash. Don't worry we have recovered your project. Access them using Project->Recover")},1e3),!localStorage.tutorials_tour_done&&!embed&&setTimeout(()=>{Df()},2e3)}const Mb=Array=window.Array;Object.defineProperty(Array.prototype,"clean",{value:function(i){for(var t=0;t<this.length;t++)this[t]===i&&(this.splice(t,1),t--);return this},enumerable:!1});Object.defineProperty(Array.prototype,"extend",{value:function(i){i.forEach(function(t){this.push(t)},this)},enumerable:!1});Object.defineProperty(Array.prototype,"contains",{value:function(i){return this.indexOf(i)>-1},enumerable:!1});document.addEventListener("DOMContentLoaded",()=>{Ab()});window.Array=Mb;